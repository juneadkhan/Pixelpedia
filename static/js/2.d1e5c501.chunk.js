/*! For license information please see 2.d1e5c501.chunk.js.LICENSE.txt */
(this.webpackJsonppixelpedia=this.webpackJsonppixelpedia||[]).push([[2],[function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Object.create;function u(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function l(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}Object.create},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return q})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return J})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return G})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return Z})),n.d(t,"p",(function(){return ee})),n.d(t,"q",(function(){return m})),n.d(t,"r",(function(){return j})),n.d(t,"s",(function(){return b})),n.d(t,"t",(function(){return _})),n.d(t,"u",(function(){return x})),n.d(t,"v",(function(){return B})),n.d(t,"w",(function(){return k})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return y})),n.d(t,"z",(function(){return g})),n.d(t,"A",(function(){return T})),n.d(t,"B",(function(){return w})),n.d(t,"C",(function(){return E})),n.d(t,"D",(function(){return L})),n.d(t,"E",(function(){return R})),n.d(t,"F",(function(){return U})),n.d(t,"G",(function(){return V})),n.d(t,"H",(function(){return z})),n.d(t,"I",(function(){return $})),n.d(t,"J",(function(){return Q})),n.d(t,"K",(function(){return M})),n.d(t,"L",(function(){return W})),n.d(t,"M",(function(){return X})),n.d(t,"N",(function(){return Y})),n.d(t,"O",(function(){return I}));var r=n(0),i=!1,a=!1,o="${JSCORE_VERSION}",s=function(e,t){if(!e)throw u(t)},u=function(e){return new Error("Firebase Database ("+o+") INTERNAL ASSERT FAILED: "+e)},c=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(a=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{a=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){var t=c(e);return l.encodeByteArray(t,!0)},f=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=p(e[n],t[n]));return e}var v=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function g(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function b(){return"object"===typeof self&&self.self===self}function _(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){return m().indexOf("Electron/")>=0}function k(){var e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return m().indexOf("MSAppHost/")>=0}function T(){return!0===i||!0===a}function S(){return"indexedDB"in self&&null!=indexedDB}function I(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}}))}function C(){return!(!navigator||!navigator.cookieEnabled)}var A=function(e){function t(n,r,i){var a=e.call(this,r)||this;return a.code=n,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(a,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(a,O.prototype.create),a}return Object(r.c)(t,e),t}(Error),O=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,a=this.errors[e],o=a?P(a,r):"Error",s=this.serviceName+": "+o+" ("+i+").",u=new A(i,s,r);return u},e}();function P(e,t){return e.replace(D,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var D=/\{\$([^}]+)}/g;function R(e){return JSON.parse(e)}function M(e){return JSON.stringify(e)}var N=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=R(f(a[0])||""),n=R(f(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},L=function(e){var t=N(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},j=function(e){var t=N(e).claims;return"object"===typeof t&&!0===t.admin};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function B(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function U(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function V(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var a=i[r];n(a[0],a[1])}return t.length?"&"+t.join("&"):""}var q=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var a,o,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(a=l^u&(c^l),o=1518500249):(a=u^c^l,o=1859775393):r<60?(a=u&c|l&(u|c),o=2400959708):(a=u^c^l,o=3395469782);i=(s<<5|s>>>27)+a+h+o+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function G(e,t){var n=new K(e,t);return n.subscribe.bind(n)}var K=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function H(){}var W=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Z(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function X(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Z(e,t,r)+"must be a valid function.")}function Y(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Z(e,t,r)+"must be a valid context object.")}var Q=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,s(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},$=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function J(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function ee(e){return e&&e._delegate?e._delegate:e}}).call(this,n(32))},function(e,t,n){"use strict";e.exports=n(69)},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r,i,a=n(0),o=n(1),s=n(11),u=n(10),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new o.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),v=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(o.m)(e),this.container=new s.b(t.name),this._addComponent(new s.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var a=i;void 0===a.name&&(a.name=f);var s=a.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(o.k)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,a,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),u=t.match(/\s|\//);if(o||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}a(new s.a(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.c,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");Object(u.d)(e,t)},apps:null,SDK_VERSION:"8.3.2",INTERNAL:{registerComponent:a,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||f,!Object(o.k)(t,e))throw l.create("no-app",{appName:e});return t[e]}function a(a){var s=a.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===a.type?r[s]:null;if(n.set(s,a),"PUBLIC"===a.type){var u=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==a.serviceProps&&Object(o.n)(u,a.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,a.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];t[f]._addComponent(a)}return"PUBLIC"===a.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(v);return t.INTERNAL=Object(a.a)(Object(a.a)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(o.n)(t,e)},createSubscribe:o.l,ErrorFactory:o.b,deepExtend:o.n}),t}(),y=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(Object(o.s)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(o.z)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,e)};var _=m;!function(e,t){e.INTERNAL.registerComponent(new s.a("platform-logger",(function(e){return new y(e)}),"PRIVATE")),e.registerVersion(h,"0.6.18",t),e.registerVersion("fire-js","")}(_),t.a=_},function(e,t,n){"use strict";e.exports=n(89)},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(4);n.d(t,"a",(function(){return r.a}));r.a.registerVersion("firebase","8.3.2","app")},function(e,t,n){e.exports=n(75)()},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var o=i.apply(null,r);o&&e.push(o)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&e.push(s);else e.push(r.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}var i;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));var a,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(a||(a={}));var s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var a=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+a+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in a))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],e)),this._logHandler.apply(this,r([this,a.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],e)),this._logHandler.apply(this,r([this,a.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],e)),this._logHandler.apply(this,r([this,a.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],e)),this._logHandler.apply(this,r([this,a.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],e)),this._logHandler.apply(this,r([this,a.ERROR],e))},e}();function f(e){o.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:a[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=o;r<i.length;r++){n(i[r])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(0),i=n(1),a=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),o="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=o);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.a;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=Object(r.a)({identifier:o,optional:!1},e),n=t.identifier,i=t.optional,a=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService({instanceIdentifier:a});if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(f){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),a=i.next();!a.done;a=i.next()){var s=Object(r.e)(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var e;return Object(r.d)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Object(r.e)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.initialize=function(e){void 0===e&&(e={});var t=e.instanceIdentifier,n=void 0===t?o:t,r=e.options,i=void 0===r?{}:r,a=this.normalizeInstanceIdentifier(n);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:a,options:i})},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);return!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:i}),this.instances.set(n,a)),a||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:o:e},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(3);var r=n(2),i=n.n(r),a=i.a.createContext({});a.Consumer,a.Provider;function o(e,t){var n=Object(r.useContext)(a);return e||n[t]||t}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ic})),n.d(t,"b",(function(){return sc})),n.d(t,"c",(function(){return pc})),n.d(t,"d",(function(){return mc})),n.d(t,"e",(function(){return oc})),n.d(t,"f",(function(){return rc})),n.d(t,"g",(function(){return lc})),n.d(t,"h",(function(){return bc})),n.d(t,"i",(function(){return gc})),n.d(t,"j",(function(){return Bs})),n.d(t,"k",(function(){return xc})),n.d(t,"l",(function(){return E})),n.d(t,"m",(function(){return Us})),n.d(t,"n",(function(){return kc})),n.d(t,"o",(function(){return uc})),n.d(t,"p",(function(){return Ec})),n.d(t,"q",(function(){return wc})),n.d(t,"r",(function(){return Xs})),n.d(t,"s",(function(){return nc})),n.d(t,"t",(function(){return vc}));var r=n(1),i=n(10),a=n(16),o=n(0),s=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();s.o=-1;var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(o.c)(t,e),t}(Error),l=new i.b("@firebase/firestore");function h(){return l.logLevel}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=i.a.DEBUG){var r=t.map(v);l.debug.apply(l,Object(o.f)(["Firestore (8.3.2): "+e],r))}}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=i.a.ERROR){var r=t.map(v);l.error.apply(l,Object(o.f)(["Firestore (8.3.2): "+e],r))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=i.a.WARN){var r=t.map(v);l.warn.apply(l,Object(o.f)(["Firestore (8.3.2): "+e],r))}}function v(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function m(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.3.2) INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function y(e,t){e||m()}function g(e,t){return e}function b(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function w(e,t){return e<t?-1:e>t?1:0}function x(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function k(e){return e+"\0"}var E=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?w(this.nanoseconds,e.nanoseconds):w(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),T=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new E(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function S(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function I(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function C(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var A=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&m(),void 0===n?n=e.length-t:n>e.length-t&&m(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,a=e;i<a.length;i++){var o=a[i];if(o.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");r.push.apply(r,o.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(A),P=/^[_a-zA-Z][_a-zA-Z0-9]*$/,D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return P.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,a=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(A),R=function(){function e(e){this.fields=e,e.sort(D.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return x(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),M=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return w(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();M.EMPTY_BYTE_STRING=new M("");var N=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(e){if(y(!!e),"string"==typeof e){var t=0,n=N.exec(e);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:j(e.seconds),nanos:j(e.nanos)}}function j(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function F(e){return"string"==typeof e?M.fromBase64String(e):M.fromUint8Array(e)}function z(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function B(e){var t=e.mapValue.fields.__previous_value__;return z(t)?B(t):t}function U(e){var t=L(e.mapValue.fields.__local_write_time__.timestampValue);return new E(t.seconds,t.nanos)}function V(e){return null==e}function q(e){return 0===e&&1/e==-1/0}function G(e){return"number"==typeof e&&Number.isInteger(e)&&!q(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var K=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(O.fromString(t))},e.fromName=function(t){return new e(O.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===O.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return O.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new O(t.slice()))},e}();function H(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?z(e)?4:10:m()}function W(e,t){var n=H(e);if(n!==H(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return U(e).isEqual(U(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=L(e.timestampValue),r=L(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return F(e.bytesValue).isEqual(F(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return j(e.geoPointValue.latitude)===j(t.geoPointValue.latitude)&&j(e.geoPointValue.longitude)===j(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return j(e.integerValue)===j(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=j(e.doubleValue),r=j(t.doubleValue);return n===r?q(n)===q(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return x(e.arrayValue.values||[],t.arrayValue.values||[],W);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(S(n)!==S(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!W(n[i],r[i])))return!1;return!0}(e,t);default:return m()}}function Z(e,t){return void 0!==(e.values||[]).find((function(e){return W(e,t)}))}function X(e,t){var n=H(e),r=H(t);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=j(e.integerValue||e.doubleValue),r=j(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Y(e.timestampValue,t.timestampValue);case 4:return Y(U(e),U(t));case 5:return w(e.stringValue,t.stringValue);case 6:return function(e,t){var n=F(e),r=F(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=w(n[i],r[i]);if(0!==a)return a}return w(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=w(j(e.latitude),j(t.latitude));return 0!==n?n:w(j(e.longitude),j(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=X(n[i],r[i]);if(a)return a}return w(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=w(r[o],a[o]);if(0!==s)return s;var u=X(n[r[o]],i[a[o]]);if(0!==u)return u}return w(r.length,a.length)}(e.mapValue,t.mapValue);default:throw m()}}function Y(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return w(e,t);var n=L(e),r=L(t),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function Q(e){return $(e)}function $(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=L(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?F(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,K.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=$(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var a=i[r];n?n=!1:t+=",",t+=a+":"+$(e.fields[a])}return t+"}"}(e.mapValue):m();var t,n}function J(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function ee(e){return!!e&&"integerValue"in e}function te(e){return!!e&&"arrayValue"in e}function ne(e){return!!e&&"nullValue"in e}function re(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ie(e){return!!e&&"mapValue"in e}var ae=function(){function e(e){this.overlayMap=new Map,this.partialValue=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){return e.extractNestedValue(this.buildProto(),t)},e.prototype.toProto=function(){return this.field(D.emptyPath())},e.prototype.set=function(e,t){this.setOverlay(e,t)},e.prototype.setAll=function(e){var t=this;e.forEach((function(e,n){e?t.set(n,e):t.delete(n)}))},e.prototype.delete=function(e){this.setOverlay(e,null)},e.prototype.isEqual=function(e){return W(this.buildProto(),e.buildProto())},e.prototype.setOverlay=function(e,t){for(var n=this.overlayMap,r=0;r<e.length-1;++r){var i=e.get(r),a=n.get(i);a instanceof Map?n=a:a&&10===H(a)?(a=new Map(Object.entries(a.mapValue.fields||{})),n.set(i,a),n=a):(a=new Map,n.set(i,a),n=a)}n.set(e.lastSegment(),t)},e.prototype.applyOverlay=function(t,n){var r=this,i=!1,a=e.extractNestedValue(this.partialValue,t),o=ie(a)?Object.assign({},a.mapValue.fields):{};return n.forEach((function(e,n){if(e instanceof Map){var a=r.applyOverlay(t.child(n),e);null!=a&&(o[n]=a,i=!0)}else null!==e?(o[n]=e,i=!0):o.hasOwnProperty(n)&&(delete o[n],i=!0)})),i?{mapValue:{fields:o}}:null},e.prototype.buildProto=function(){var e=this.applyOverlay(D.emptyPath(),this.overlayMap);return null!=e&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue},e.extractNestedValue=function(e,t){if(t.isEmpty())return e;for(var n=e,r=0;r<t.length-1;++r){if(!n.mapValue.fields)return null;if(!ie(n=n.mapValue.fields[t.get(r)]))return null}return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.clone=function(){return new e(this.buildProto())},e}();function oe(e){var t=[];return I(e.fields||{},(function(e,n){var r=new D([e]);if(ie(n)){var i=oe(n.mapValue).fields;if(0===i.length)t.push(r);else for(var a=0,o=i;a<o.length;a++){var s=o[a];t.push(r.child(s))}}else t.push(r)})),new R(t)}var se=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,T.min(),ae.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,ae.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,ae.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ae.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ae.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),ue=function(e,t,n,r,i,a,o){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===a&&(a=null),void 0===o&&(o=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.h=null};function ce(e,t,n,r,i,a,o){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===a&&(a=null),void 0===o&&(o=null),new ue(e,t,n,r,i,a,o)}function le(e){var t=g(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Q(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),V(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=ke(t.startAt)),t.endAt&&(n+="|ub:",n+=ke(t.endAt)),t.h=n}return t.h}function he(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Te(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!W(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ie(e.startAt,t.startAt)&&Ie(e.endAt,t.endAt)}function fe(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var de=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return Object(o.c)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new pe(e,n,r):"array-contains"===n?new ge(e,r):"in"===n?new be(e,r):"not-in"===n?new _e(e,r):"array-contains-any"===n?new we(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ve(e,n):new me(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(X(t,this.value)):null!==t&&H(this.value)===H(t)&&this.m(X(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return m()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),pe=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=K.fromName(r.referenceValue),i}return Object(o.c)(t,e),t.prototype.matches=function(e){var t=K.comparator(e.key,this.key);return this.m(t)},t}(de),ve=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=ye("in",n),r}return Object(o.c)(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(de),me=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=ye("not-in",n),r}return Object(o.c)(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(de);function ye(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return K.fromName(e.referenceValue)}))}var ge=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return Object(o.c)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return te(t)&&Z(t.arrayValue,this.value)},t}(de),be=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return Object(o.c)(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&Z(this.value.arrayValue,t)},t}(de),_e=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return Object(o.c)(t,e),t.prototype.matches=function(e){if(Z(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Z(this.value.arrayValue,t)},t}(de),we=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return Object(o.c)(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!te(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Z(t.value.arrayValue,e)}))},t}(de),xe=function(e,t){this.position=e,this.before=t};function ke(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return Q(e)})).join(",")}var Ee=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Te(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Se(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?K.comparator(K.fromName(o.referenceValue),n.key):X(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ie(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!W(e.position[n],t.position[n]))return!1;return!0}var Ce=function(e,t,n,r,i,a,o,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===a&&(a="F"),void 0===o&&(o=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ae(e,t,n,r,i,a,o,s){return new Ce(e,t,n,r,i,a,o,s)}function Oe(e){return new Ce(e)}function Pe(e){return!V(e.limit)&&"F"===e.limitType}function De(e){return!V(e.limit)&&"L"===e.limitType}function Re(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Me(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ne(e){return null!==e.collectionGroup}function Le(e){var t=g(e);if(null===t.p){t.p=[];var n=Me(t),r=Re(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Ee(n)),t.p.push(new Ee(D.keyField(),"asc"));else{for(var i=!1,a=0,o=t.explicitOrderBy;a<o.length;a++){var s=o[a];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ee(D.keyField(),u))}}}return t.p}function je(e){var t=g(e);if(!t.T)if("F"===t.limitType)t.T=ce(t.path,t.collectionGroup,Le(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Le(t);r<i.length;r++){var a=i[r],o="desc"===a.dir?"asc":"desc";n.push(new Ee(a.field,o))}var s=t.endAt?new xe(t.endAt.position,!t.endAt.before):null,u=t.startAt?new xe(t.startAt.position,!t.startAt.before):null;t.T=ce(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Fe(e,t,n){return new Ce(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ze(e,t){return he(je(e),je(t))&&e.limitType===t.limitType}function Be(e){return le(je(e))+"|lt:"+e.limitType}function Ue(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+Q(t.value);var t})).join(", ")+"]"),V(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+ke(e.startAt)),e.endAt&&(t+=", endAt: "+ke(e.endAt)),"Target("+t+")"}(je(e))+"; limitType="+e.limitType+")"}function Ve(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):K.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Se(e.startAt,Le(e),t))&&(!e.endAt||!Se(e.endAt,Le(e),t))}(e,t)}function qe(e){return function(t,n){for(var r=!1,i=0,a=Le(e);i<a.length;i++){var o=a[i],s=Ge(o,t,n);if(0!==s)return s;r=r||o.field.isKeyField()}return 0}}function Ge(e,t,n){var r=e.field.isKeyField()?K.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?X(r,i):m()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return m()}}function Ke(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(t)?"-0":t}}function He(e){return{integerValue:""+e}}function We(e,t){return G(t)?He(t):Ke(e,t)}var Ze=function(){this._=void 0};function Xe(e,t,n){return e instanceof $e?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Je?et(e,t):e instanceof tt?nt(e,t):function(e,t){var n=Qe(e,t),r=it(n)+it(e.A);return ee(n)&&ee(e.A)?He(r):Ke(e.R,r)}(e,t)}function Ye(e,t,n){return e instanceof Je?et(e,t):e instanceof tt?nt(e,t):n}function Qe(e,t){return e instanceof rt?ee(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var $e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t}(Ze),Je=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(o.c)(t,e),t}(Ze);function et(e,t){for(var n=at(t),r=function(e){n.some((function(t){return W(t,e)}))||n.push(e)},i=0,a=e.elements;i<a.length;i++)r(a[i]);return{arrayValue:{values:n}}}var tt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(o.c)(t,e),t}(Ze);function nt(e,t){for(var n=at(t),r=function(e){n=n.filter((function(t){return!W(t,e)}))},i=0,a=e.elements;i<a.length;i++)r(a[i]);return{arrayValue:{values:n}}}var rt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return Object(o.c)(t,e),t}(Ze);function it(e){return j(e.integerValue||e.doubleValue)}function at(e){return te(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ot=function(e,t){this.field=e,this.transform=t},st=function(e,t){this.version=e,this.transformResults=t},ut=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function ct(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var lt=function(){};function ht(e,t,n){e instanceof mt?function(e,t,n){var r=e.value.clone(),i=bt(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof yt?function(e,t,n){if(ct(e.precondition,t)){var r=bt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(gt(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ft(e,t,n){e instanceof mt?function(e,t,n){if(ct(e.precondition,t)){var r=e.value.clone(),i=_t(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vt(t),r).setHasLocalMutations()}}(e,t,n):e instanceof yt?function(e,t,n){if(ct(e.precondition,t)){var r=_t(e.fieldTransforms,n,t),i=t.data;i.setAll(gt(e)),i.setAll(r),t.convertToFoundDocument(vt(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){ct(e.precondition,t)&&t.convertToNoDocument(T.min())}(e,t)}function dt(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var a=i[r],o=t.data.field(a.field),s=Qe(a.transform,o||null);null!=s&&(null==n&&(n=ae.empty()),n.set(a.field,s))}return n||null}function pt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&x(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Je&&t instanceof Je||e instanceof tt&&t instanceof tt?x(e.elements,t.elements,W):e instanceof rt&&t instanceof rt?W(e.A,t.A):e instanceof $e&&t instanceof $e}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vt(e){return e.isFoundDocument()?e.version:T.min()}var mt=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var a=this;return(a=e.call(this)||this).key=t,a.value=n,a.precondition=r,a.fieldTransforms=i,a.type=0,a}return Object(o.c)(t,e),t}(lt),yt=function(e){function t(t,n,r,i,a){void 0===a&&(a=[]);var o=this;return(o=e.call(this)||this).key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.fieldTransforms=a,o.type=1,o}return Object(o.c)(t,e),t}(lt);function gt(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bt(e,t,n){var r=new Map;y(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Ye(o,s,n[i]))}return r}function _t(e,t,n){for(var r=new Map,i=0,a=e;i<a.length;i++){var o=a[i],s=o.transform,u=n.data.field(o.field);r.set(o.field,Xe(s,u,t))}return r}var wt,xt,kt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(o.c)(t,e),t}(lt),Et=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(o.c)(t,e),t}(lt),Tt=function(e){this.count=e};function St(e){switch(e){case u.OK:return m();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return m()}}function It(e){if(void 0===e)return d("GRPC error has no .code"),u.UNKNOWN;switch(e){case wt.OK:return u.OK;case wt.CANCELLED:return u.CANCELLED;case wt.UNKNOWN:return u.UNKNOWN;case wt.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case wt.INTERNAL:return u.INTERNAL;case wt.UNAVAILABLE:return u.UNAVAILABLE;case wt.UNAUTHENTICATED:return u.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case wt.NOT_FOUND:return u.NOT_FOUND;case wt.ALREADY_EXISTS:return u.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return u.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case wt.ABORTED:return u.ABORTED;case wt.OUT_OF_RANGE:return u.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return u.UNIMPLEMENTED;case wt.DATA_LOSS:return u.DATA_LOSS;default:return m()}}(xt=wt||(wt={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";var Ct=function(){function e(e,t){this.comparator=e,this.root=t||Ot.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ot.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ot.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new At(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new At(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new At(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new At(this.root,e,this.comparator,!0)},e}(),At=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ot=function(){function e(t,n,r,i,a){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw m();if(this.right.isRed())throw m();var e=this.left.check();if(e!==this.right.check())throw m();return e+(this.isRed()?0:1)},e}();Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1,Ot.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw m()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw m()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ot(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var Pt=function(){function e(e){this.comparator=e,this.data=new Ct(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Dt(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Dt(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Dt=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Rt=new Ct(K.comparator);function Mt(){return Rt}var Nt=new Ct(K.comparator);function Lt(){return Nt}var jt=new Ct(K.comparator);function Ft(){return jt}var zt=new Pt(K.comparator);function Bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=zt,r=0,i=e;r<i.length;r++){var a=i[r];n=n.add(a)}return n}var Ut=new Pt(w);function Vt(){return Ut}var qt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Gt.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(T.min(),r,Vt(),Mt(),Bt())},e}(),Gt=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(M.EMPTY_BYTE_STRING,n,Bt(),Bt(),Bt())},e}(),Kt=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Ht=function(e,t){this.targetId=e,this.V=t},Wt=function(e,t,n,r){void 0===n&&(n=M.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Zt=function(){function e(){this.S=0,this.D=Qt(),this.C=M.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.$=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=Bt(),t=Bt(),n=Bt();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:m()}})),new Gt(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=Qt()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),Xt=function(){function e(e){this.W=e,this.G=new Map,this.H=Mt(),this.J=Yt(),this.Y=new Pt(w)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,a=e.removedTargetIds;i<a.length;i++)r=a[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.$(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.$(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.$(e.resumeToken));break;default:m()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(fe(i))if(0===n){var a=new K(i.path);this.tt(t,a,se.newNoDocument(a,T.min()))}else y(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var a=t.ot(i);if(a){if(r.current&&fe(a.target)){var o=new K(a.target.path);null!==t.H.get(o)||t.at(i,o)||t.tt(i,o,se.newNoDocument(o,e))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Bt();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new qt(e,n,this.Y,this.H,r);return this.H=Mt(),this.J=Yt(),this.Y=new Pt(w),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Zt,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new Pt(w),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new Zt),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Yt(){return new Ct(K.comparator)}function Qt(){return new Ct(K.comparator)}var $t={asc:"ASCENDING",desc:"DESCENDING"},Jt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(e,t){this.databaseId=e,this.I=t};function tn(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function nn(e,t){return e.I?t.toBase64():t.toUint8Array()}function rn(e,t){return tn(e,t.toTimestamp())}function an(e){return y(!!e),T.fromTimestamp(function(e){var t=L(e);return new E(t.seconds,t.nanos)}(e))}function on(e,t){return function(e){return new O(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function sn(e){var t=O.fromString(e);return y(Pn(t)),t}function un(e,t){return on(e.databaseId,t.path)}function cn(e,t){var n=sn(t);if(n.get(1)!==e.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(dn(n))}function ln(e,t){return on(e.databaseId,t)}function hn(e){var t=sn(e);return 4===t.length?O.emptyPath():dn(t)}function fn(e){return new O(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dn(e){return y(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pn(e,t,n){return{name:un(e,t),fields:n.toProto().mapValue.fields}}function vn(e,t,n){var r=cn(e,t.name),i=an(t.updateTime),a=new ae({mapValue:{fields:t.fields}}),o=se.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function mn(e,t){var n;if(t instanceof mt)n={update:pn(e,t.key,t.value)};else if(t instanceof kt)n={delete:un(e,t.key)};else if(t instanceof yt)n={update:pn(e,t.key,t.data),updateMask:On(t.fieldMask)};else{if(!(t instanceof Et))return m();n={verify:un(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof $e)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Je)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rt)return{fieldPath:t.field.canonicalString(),increment:n.A};throw m()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:m()}(e,t.precondition)),n}function yn(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ut.updateTime(an(e.updateTime)):void 0!==e.exists?ut.exists(e.exists):ut.none()}(t.currentDocument):ut.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)y("REQUEST_TIME"===t.setToServerValue),n=new $e;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Je(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new tt(i)}else"increment"in t?n=new rt(e,t.increment):m();var a=D.fromServerFormat(t.fieldPath);return new ot(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=cn(e,t.update.name),a=new ae({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new R(t.map((function(e){return D.fromServerFormat(e)})))}(t.updateMask);return new yt(i,a,o,n,r)}return new mt(i,a,n,r)}if(t.delete){var s=cn(e,t.delete);return new kt(s,n)}if(t.verify){var u=cn(e,t.verify);return new Et(u,n)}return m()}function gn(e,t){return{documents:[ln(e,t.path)]}}function bn(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ln(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ln(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(re(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NAN"}};if(ne(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(re(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NOT_NAN"}};if(ne(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sn(e.field),op:Tn(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Sn(e.field),direction:En(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.I||V(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=xn(t.startAt)),t.endAt&&(n.structuredQuery.endAt=xn(t.endAt)),n}function _n(e){var t=hn(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=wn(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Ee(In(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return V(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=kn(n.startAt));var l=null;return n.endAt&&(l=kn(n.endAt)),Ae(t,i,s,o,u,"F",c,l)}function wn(e){return e?void 0!==e.unaryFilter?[An(e)]:void 0!==e.fieldFilter?[Cn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return wn(e)})).reduce((function(e,t){return e.concat(t)})):m():[]}function xn(e){return{before:e.before,values:e.position}}function kn(e){var t=!!e.before,n=e.values||[];return new xe(n,t)}function En(e){return $t[e]}function Tn(e){return Jt[e]}function Sn(e){return{fieldPath:e.canonicalString()}}function In(e){return D.fromServerFormat(e.fieldPath)}function Cn(e){return de.create(In(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return m()}}(e.fieldFilter.op),e.fieldFilter.value)}function An(e){switch(e.unaryFilter.op){case"IS_NAN":var t=In(e.unaryFilter.field);return de.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=In(e.unaryFilter.field);return de.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=In(e.unaryFilter.field);return de.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=In(e.unaryFilter.field);return de.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return m()}}function On(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Pn(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Dn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Mn(t)),t=Rn(e.get(n),t);return Mn(t)}function Rn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Mn(e){return e+"\x01\x01"}function Nn(e){var t=e.length;if(y(t>=2),2===t)return y("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),O.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&m(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:m()}a=o+2}return new O(r)}var Ln=function(e,t){this.seconds=e,this.nanoseconds=t},jn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};jn.store="owner",jn.key="owner";var Fn=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Fn.store="mutationQueues",Fn.keyPath="userId";var zn=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};zn.store="mutations",zn.keyPath="batchId",zn.userMutationsIndex="userMutationsIndex",zn.userMutationsKeyPath=["userId","batchId"];var Bn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Dn(t)]},e.key=function(e,t,n){return[e,Dn(t),n]},e}();Bn.store="documentMutations",Bn.PLACEHOLDER=new Bn;var Un=function(e,t){this.path=e,this.readTime=t},Vn=function(e,t){this.path=e,this.version=t},qn=function(e,t,n,r,i,a){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=a};qn.store="remoteDocuments",qn.readTimeIndex="readTimeIndex",qn.readTimeIndexPath="readTime",qn.collectionReadTimeIndex="collectionReadTimeIndex",qn.collectionReadTimeIndexPath=["parentPath","readTime"];var Gn=function(e){this.byteSize=e};Gn.store="remoteDocumentGlobal",Gn.key="remoteDocumentGlobalKey";var Kn=function(e,t,n,r,i,a,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=a,this.query=o};Kn.store="targets",Kn.keyPath="targetId",Kn.queryTargetsIndexName="queryTargetsIndex",Kn.queryTargetsKeyPath=["canonicalId","targetId"];var Hn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Hn.store="targetDocuments",Hn.keyPath=["targetId","path"],Hn.documentTargetsIndex="documentTargetsIndex",Hn.documentTargetsKeyPath=["path","targetId"];var Wn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Wn.key="targetGlobalKey",Wn.store="targetGlobal";var Zn=function(e,t){this.collectionId=e,this.parent=t};Zn.store="collectionParents",Zn.keyPath=["collectionId","parent"];var Xn=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Xn.store="clientMetadata",Xn.keyPath="clientId";var Yn=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Yn.store="bundles",Yn.keyPath="bundleId";var Qn=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Qn.store="namedQueries",Qn.keyPath="name";var $n=Object(o.f)(Object(o.f)([],Object(o.f)(Object(o.f)([],Object(o.f)(Object(o.f)([],Object(o.f)(Object(o.f)([],[Fn.store,zn.store,Bn.store,qn.store,Kn.store,jn.store,Wn.store,Hn.store]),[Xn.store])),[Gn.store])),[Zn.store])),[Yn.store,Qn.store]),Jn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),tr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},nr=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&m(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,a=t;i<a.length;i++)r(a[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),rr=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new tr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new or(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=hr(t.target.error);n.ft.reject(new or(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new or(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(f("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new ur(t)},e}(),ir=function(){function t(e,n,i){this.name=e,this.version=n,this.wt=i,12.2===t._t(Object(r.q)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return f("SimpleDb","Removing database:",e),cr(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(r.q)(),n=t._t(e),i=0<n&&n<10,a=t.Et(e),o=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)},t.gt=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/Pixelpedia",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===t?void 0:t.Tt)},t.It=function(e,t){return e.store(t)},t._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new or(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new or(e,n))},i.onupgradeneeded=function(e){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a,s,u,c;return Object(o.d)(this,(function(l){switch(l.label){case 0:i="readonly"===t,a=0,s=function(){var t,s,c,l,h;return Object(o.d)(this,(function(o){switch(o.label){case 0:++a,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=o.sent(),t=rr.open(u.db,e,i?"readonly":"readwrite",n),s=r(t).catch((function(e){return t.abort(e),nr.reject(e)})).toPromise(),c={},s.catch((function(){})),[4,t.dt];case 3:return[2,(c.value=(o.sent(),s),c)];case 4:return l=o.sent(),h="FirebaseError"!==l.name&&a<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ar=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return cr(this.Pt.delete())},e}(),or=function(e){function t(t,n){var r=this;return(r=e.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(o.c)(t,e),t}(c);function sr(e){return"IndexedDbTransactionError"===e.name}var ur=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(f("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cr(n)},e.prototype.add=function(e){return f("SimpleDb","ADD",this.store.name,e,e),cr(this.store.add(e))},e.prototype.get=function(e){var t=this;return cr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return f("SimpleDb","DELETE",this.store.name,e),cr(this.store.delete(e))},e.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),cr(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Ft=function(e,t){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.Ot=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.$t=function(e){var t=this.cursor({});return new nr((function(n,r){t.onerror=function(e){var t=hr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new nr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ar(i),o=t(i.primaryKey,i.value,a);if(o instanceof nr){var s=o.catch((function(e){return a.done(),nr.reject(e)}));n.push(s)}a.isDone?r():null===a.Dt?i.continue():i.continue(a.Dt)}else r()}})).next((function(){return nr.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function cr(e){return new nr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=hr(e.target.error);n(t)}}))}var lr=!1;function hr(e){var t=ir._t(Object(r.q)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var i=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lr||(lr=!0,setTimeout((function(){throw i}),0)),i}}return e}var fr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return Object(o.c)(t,e),t}(er);function dr(e,t){var n=g(e);return ir.It(n.Mt,t)}var pr=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ht(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(a=n[t]).key.isEqual(e.key)&&ft(a,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var a;(a=i[r]).key.isEqual(e.key)&&ft(a,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(T.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bt())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&x(this.mutations,e.mutations,(function(e,t){return pt(e,t)}))&&x(this.baseMutations,e.baseMutations,(function(e,t){return pt(e,t)}))},e}(),vr=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){y(t.mutations.length===r.length);for(var i=Ft(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)},e}(),mr=function(){function e(e,t,n,r,i,a,o){void 0===i&&(i=T.min()),void 0===a&&(a=T.min()),void 0===o&&(o=M.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),yr=function(e){this.Lt=e};function gr(e,t){if(t.document)return vn(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=K.fromSegments(t.noDocument.path),r=kr(t.noDocument.readTime),i=se.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=K.fromSegments(t.unknownDocument.path);return r=kr(t.unknownDocument.version),se.newUnknownDocument(a,r)}return m()}function br(e,t,n){var r=_r(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:un(e,t.key),fields:t.data.toProto().mapValue.fields,updateTime:tn(e,t.version.toTimestamp())}}(e.Lt,t),o=t.hasCommittedMutations;return new qn(null,null,a,o,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=xr(t.version);return o=t.hasCommittedMutations,new qn(null,new Un(s,u),null,o,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=xr(t.version);return new qn(new Vn(c,l),null,null,!0,r,i)}return m()}function _r(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function wr(e){var t=new E(e[0],e[1]);return T.fromTimestamp(t)}function xr(e){var t=e.toTimestamp();return new Ln(t.seconds,t.nanoseconds)}function kr(e){var t=new E(e.seconds,e.nanoseconds);return T.fromTimestamp(t)}function Er(e,t){for(var n=(t.baseMutations||[]).map((function(t){return yn(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return yn(e.Lt,t)})),s=E.fromMillis(t.localWriteTimeMs);return new pr(t.batchId,s,n,o)}function Tr(e){var t,n,r=kr(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?kr(e.lastLimboFreeSnapshotVersion):T.min();return void 0!==e.query.documents?(y(1===(n=e.query).documents.length),t=je(Oe(hn(n.documents[0])))):t=function(e){return je(_n(e))}(e.query),new mr(t,e.targetId,0,e.lastListenSequenceNumber,r,i,M.fromBase64String(e.resumeToken))}function Sr(e,t){var n,r=xr(t.snapshotVersion),i=xr(t.lastLimboFreeSnapshotVersion);n=fe(t.target)?gn(e.Lt,t.target):bn(e.Lt,t.target);var a=t.resumeToken.toBase64();return new Kn(t.targetId,le(t.target),r,a,t.sequenceNumber,i,n)}function Ir(e){var t=_n({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fe(t,t.limit,"L"):t}var Cr=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Ar(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:kr(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Ar(e).put({bundleId:(n=t).id,createTime:xr(an(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return Or(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Ir(t.bundledQuery),readTime:kr(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return Or(e).put(function(e){return{name:e.name,readTime:xr(an(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Ar(e){return dr(e,Yn.store)}function Or(e){return dr(e,Qn.store)}var Pr=function(){function e(){this.Bt=new Dr}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),nr.resolve()},e.prototype.getCollectionParents=function(e,t){return nr.resolve(this.Bt.getEntries(t))},e}(),Dr=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Pt(O.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Pt(O.comparator)).toArray()},e}(),Rr=function(){function e(){this.qt=new Dr}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var a={collectionId:r,parent:Dn(i)};return Mr(e).put(a)}return nr.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[k(t),""],!1,!0);return Mr(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var a=i[r];if(a.collectionId!==t)break;n.push(Nn(a.parent))}return n}))},e}();function Mr(e){return dr(e,Zn.store)}var Nr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lr=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function jr(e,t,n){var r=e.store(zn.store),i=e.store(Bn.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){y(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Bn.key(t,f.key.path,n.batchId);a.push(i.delete(d)),c.push(f.key)}return nr.waitFor(a).next((function(){return c}))}function Fr(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw m();t=e.noDocument}return JSON.stringify(t).length}Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);var zr=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return e.Kt=function(t,n,r,i){return y(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ur(e).Ot({index:zn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,a=Vr(e),o=Ur(e);return o.add({}).next((function(s){y("number"==typeof s);for(var u=new pr(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return mn(e.Lt,t)})),i=n.mutations.map((function(t){return mn(e.Lt,t)}));return new zn(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Pt((function(e,t){return w(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Bn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(o.put(c)),l.push(a.put(v,Bn.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),nr.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Ur(e).get(t).next((function(e){return e?(y(e.userId===n.userId),Er(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Qt[t]?nr.resolve(this.Qt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Qt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Ur(e).Ot({index:zn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(y(t.batchId>=r),a=Er(n.R,t)),i.done()})).next((function(){return a}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ur(e).Ot({index:zn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ur(e).Nt(zn.userMutationsIndex,n).next((function(e){return e.map((function(e){return Er(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Bn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Vr(e).Ot({range:i},(function(r,i,o){var s=r[0],u=r[1],c=r[2],l=Nn(u);if(s===n.userId&&t.path.isEqual(l))return Ur(e).get(c).next((function(e){if(!e)throw m();y(e.userId===n.userId),a.push(Er(n.R,e))}));o.done()})).next((function(){return a}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Pt(w),i=[];return t.forEach((function(t){var a=Bn.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Vr(e).Ot({range:o},(function(e,i,a){var o=e[0],s=e[1],u=e[2],c=Nn(s);o===n.userId&&t.path.isEqual(c)?r=r.add(u):a.done()}));i.push(s)})),nr.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,a=Bn.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Pt(w);return Vr(e).Ot({range:o},(function(e,t,a){var o=e[0],u=e[1],c=e[2],l=Nn(u);o===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):a.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Ur(e).get(t).next((function(e){if(null===e)throw m();y(e.userId===n.userId),r.push(Er(n.R,e))})))})),nr.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return jr(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),nr.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Qt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return nr.resolve();var r=IDBKeyRange.lowerBound(Bn.prefixForUser(t.userId)),i=[];return Vr(e).Ot({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Nn(e[1]);i.push(a)}else r.done()})).next((function(){y(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return Br(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return qr(e).get(this.userId).next((function(e){return e||new Fn(t.userId,-1,"")}))},e}();function Br(e,t,n){var r=Bn.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Vr(e).Ot({range:a,kt:!0},(function(e,n,r){var a=e[0],s=e[1];e[2],a===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Ur(e){return dr(e,zn.store)}function Vr(e){return dr(e,Bn.store)}function qr(e){return dr(e,Fn.store)}var Gr=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),Kr=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new Gr(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return T.fromTimestamp(new E(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Hr(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return y(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,a=[];return Hr(e).Ot((function(o,s){var u=Tr(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return nr.waitFor(a)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return Hr(e).Ot((function(e,n){var r=Tr(n);t(r)}))},e.prototype.Xt=function(e){return Wr(e).get(Wn.key).next((function(e){return y(null!==e),e}))},e.prototype.Zt=function(e,t){return Wr(e).put(Wn.key,t)},e.prototype.te=function(e,t){return Hr(e).put(Sr(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=le(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hr(e).Ot({range:r,index:Kn.queryTargetsIndexName},(function(e,n,r){var a=Tr(n);he(t,a.target)&&(i=a,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],a=Zr(e);return t.forEach((function(t){var o=Dn(t.path);i.push(a.put(new Hn(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),nr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Zr(e);return nr.forEach(t,(function(t){var a=Dn(t.path);return nr.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Zr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zr(e),i=Bt();return r.Ot({range:n,kt:!0},(function(e,t,n){var r=Nn(e[1]),a=new K(r);i=i.add(a)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Dn(t.path),r=IDBKeyRange.bound([n],[k(n)],!1,!0),i=0;return Zr(e).Ot({index:Hn.documentTargetsIndex,kt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return Hr(e).get(t).next((function(e){return e?Tr(e):null}))},e}();function Hr(e){return dr(e,Kn.store)}function Wr(e){return dr(e,Wn.store)}function Zr(e){return dr(e,Hn.store)}function Xr(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){if(e.code!==u.FAILED_PRECONDITION||e.message!==Jn)throw e;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Yr(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=w(n,i);return 0===o?w(r,a):o}var Qr=function(){function e(e){this.ne=e,this.buffer=new Pt(Yr),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Yr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),$r=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(o.b)(t,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return sr(t=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Xr(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),Jr=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return nr.resolve(s.o);var r=new Qr(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),nr.resolve(Nr)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Nr):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,a,o,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return a=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return c=Date.now(),h()<=i.a.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+a+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),nr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})}))},e}(),ei=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new Jr(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return ti(e,n)},e.prototype.removeReference=function(e,t,n){return ti(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return ti(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return qr(e).$t((function(r){return Br(e,r,t).next((function(e){return e&&(n=!0),nr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.we(e,(function(o,s){if(s<=t){var u=n._e(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Zr(e).delete([0,Dn(o.path)])}))}));i.push(u)}})).next((function(){return nr.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ti(e,t)},e.prototype.we=function(e,t){var n,r=Zr(e),i=s.o;return r.Ot({index:Hn.documentTargetsIndex},(function(e,r){var a=e[0],o=(e[1],r.path),u=r.sequenceNumber;0===a?(i!==s.o&&t(new K(Nn(n)),i),i=u,n=o):i=s.o})).next((function(){i!==s.o&&t(new K(Nn(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function ti(e,t){return Zr(e).put(function(e,t){return new Hn(0,Dn(e.path),t)}(t,e.currentSequenceNumber))}var ni=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var a=i[r],o=a[0],s=a[1];if(this.equalsFn(o,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){I(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r],o=a[0],s=a[1];e(o,s)}}))},e.prototype.isEmpty=function(){return C(this.inner)},e}(),ri=function(){function e(){this.changes=new ni((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:T.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:se.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?nr.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),ii=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return si(e).put(ui(t),n)},e.prototype.removeEntry=function(e,t){var n=si(e),r=ui(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return si(e).get(ui(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return si(e).get(ui(t)).next((function(e){return{document:n.ye(t,e),size:Fr(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Mt();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Mt(),i=new Ct(K.comparator);return this.pe(e,t,(function(e,t){var a=n.ye(e,t);r=r.insert(e,a),i=i.insert(e,Fr(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return nr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return si(e).Ot({range:r},(function(e,t,r){for(var o=K.fromSegments(e);a&&K.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ct(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Mt(),a=t.path.length+1,o={};if(n.isEqual(T.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=_r(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=qn.collectionReadTimeIndex}return si(e).Ot(o,(function(e,n,o){if(e.length===a){var s=gr(r.R,n);t.path.isPrefixOf(s.key.path)?Ve(t,s)&&(i=i.insert(s.key,s)):o.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new ai(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return oi(e).get(Gn.key).next((function(e){return y(!!e),e}))},e.prototype.me=function(e,t){return oi(e).put(Gn.key,t)},e.prototype.ye=function(e,t){if(t){var n=gr(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(T.min()))return n}return se.newInvalidDocument(e)},e}(),ai=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new ni((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Object(o.c)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Pt((function(e,t){return w(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Ae.get(a);if(o.document.isValidDocument()){var u=br(t.Ie.R,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=Fr(u);r+=c-s,n.push(t.Ie.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=br(t.Ie.R,se.newNoDocument(a,T.min()),t.getReadTime(a));n.push(t.Ie.addEntry(e,a,l))}else n.push(t.Ie.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),nr.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ri);function oi(e){return dr(e,Gn.store)}function si(e){return dr(e,qn.store)}function ui(e){return e.path.toArray()}var ci=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;y(n<r&&n>=0&&r<=11);var a=new rr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(jn.store)}(e),function(e){e.createObjectStore(Fn.store,{keyPath:Fn.keyPath}),e.createObjectStore(zn.store,{keyPath:zn.keyPath,autoIncrement:!0}).createIndex(zn.userMutationsIndex,zn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Bn.store)}(e),li(e),function(e){e.createObjectStore(qn.store)}(e));var o=nr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Hn.store),e.deleteObjectStore(Kn.store),e.deleteObjectStore(Wn.store)}(e),li(e)),o=o.next((function(){return function(e){var t=e.store(Wn.store),n=new Wn(0,0,T.min().toTimestamp(),0);return t.put(Wn.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(zn.store).Nt().next((function(n){e.deleteObjectStore(zn.store),e.createObjectStore(zn.store,{keyPath:zn.keyPath,autoIncrement:!0}).createIndex(zn.userMutationsIndex,zn.userMutationsKeyPath,{unique:!0});var r=t.store(zn.store),i=n.map((function(e){return r.put(e)}));return nr.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Re(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Gn.store)}(e),i.be(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ve(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Pe(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(qn.store);t.createIndex(qn.readTimeIndex,qn.readTimeIndexPath,{unique:!1}),t.createIndex(qn.collectionReadTimeIndex,qn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ve(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(e),function(e){e.createObjectStore(Qn.store,{keyPath:Qn.keyPath})}(e)}))),o},e.prototype.be=function(e){var t=0;return e.store(qn.store).Ot((function(e,n){t+=Fr(n)})).next((function(){var n=new Gn(t);return e.store(Gn.store).put(Gn.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Fn.store),r=e.store(zn.store);return n.Nt().next((function(n){return nr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(zn.userMutationsIndex,i).next((function(r){return nr.forEach(r,(function(r){y(r.userId===n.userId);var i=Er(t.R,r);return jr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(Hn.store),n=e.store(qn.store);return e.store(Wn.store).get(Wn.key).next((function(e){var r=[];return n.Ot((function(n,i){var a=new O(n),o=function(e){return[0,Dn(e)]}(a);r.push(t.get(o).next((function(n){return n?nr.resolve():function(n){return t.put(new Hn(0,Dn(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return nr.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(Zn.store,{keyPath:Zn.keyPath});var n=t.store(Zn.store),r=new Dr,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Dn(i)})}};return t.store(qn.store).Ot({kt:!0},(function(e,t){var n=new O(e);return i(n.popLast())})).next((function(){return t.store(Bn.store).Ot({kt:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Nn(n));return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(Kn.store);return n.Ot((function(e,r){var i=Tr(r),a=Sr(t.R,i);return n.put(a)}))},e}();function li(e){e.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.documentTargetsIndex,Hn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Kn.store,{keyPath:Kn.keyPath}).createIndex(Kn.queryTargetsIndexName,Kn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Wn.store)}var hi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fi=function(){function e(t,n,r,i,a,o,s,l,h,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=a,this.window=o,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new yr(l),this.Be=new ir(this.Le,11,new ci(this.R)),this.qe=new Kr(this.referenceDelegate,this.R),this.Ut=new Rr,this.Ue=function(e,t){return new ii(e,t)}(this.R,this.Ut),this.Qe=new Cr,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,hi);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new s(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return Object(o.b)(t,void 0,void 0,(function(){return Object(o.d)(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return Object(o.b)(t,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return Object(o.b)(t,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return pi(t).put(new Xn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(sr(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return di(e).get(jn.key).next((function(e){return nr.resolve(t.tn(e))}))},e.prototype.en=function(e){return pi(e).delete(this.clientId)},e.prototype.nn=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(o.d)(this,(function(a){switch(a.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=dr(e,Xn.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return nr.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=a.sent(),this.Ke)for(t=0,n=e;t<n.length;t++)r=n[t],this.Ke.removeItem(this.on(r.clientId));a.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?nr.resolve(!0):di(e).get(jn.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,hi);return!1}}return!(!t.networkEnabled||!t.inForeground)||pi(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&f("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return Object(o.b)(this,void 0,void 0,(function(){var e=this;return Object(o.d)(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[jn.store,Xn.store],(function(t){var n=new fr(t,s.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return pi(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return zr.Kt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;f("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,a,$n,(function(a){return i=new fr(a,r.Ne?r.Ne.next():s.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw d("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,Jn);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return di(e).get(jn.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,hi)}))},e.prototype.Ze=function(e){var t=new jn(this.clientId,this.allowTabSynchronization,Date.now());return di(e).put(jn.key,t)},e.yt=function(){return ir.yt()},e.prototype.Xe=function(e){var t=this,n=di(e);return n.get(jn.key).next((function(e){return t.tn(e)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(jn.key)):nr.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(d("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Ke)||void 0===t?void 0:t.getItem(this.on(e)));return f("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return d("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(e){d("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function di(e){return dr(e,jn.store)}function pi(e){return dr(e,Xn.store)}function vi(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var mi=function(e,t){this.progress=e,this.wn=t},yi=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Ne(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new K(t)).next((function(e){var t=Lt();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,a=Lt();return this.Ut.getCollectionParents(e,i).next((function(o){return nr.forEach(o,(function(o){var s=function(e,t){return new Ce(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))},e.prototype.An=function(e,t,n){var r,i,a=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var a=n[t],o=0,s=a.mutations;o<s.length;o++){var u=s[o],c=u.key,l=r.get(c);null==l&&(l=se.newInvalidDocument(c),r=r.insert(c,l)),ft(u,l,a.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){Ve(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=Bt(),i=0,a=t;i<a.length;i++)for(var o=0,s=a[i].mutations;o<s.length;o++){var u=s[o];u instanceof yt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),gi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=Bt(),i=Bt(),a=0,o=n.docChanges;a<o.length;a++){var s=o[a];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),bi=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var a=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(T.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(o){var s=a.Cn(t,o);return(Pe(t)||De(t))&&a.Nn(t.limitType,s,r,n)?a.Dn(e,t):(h()<=i.a.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ue(t)),a.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new Pt(qe(e));return t.forEach((function(t,r){Ve(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return h()<=i.a.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Ue(t)),this.Sn.getDocumentsMatchingQuery(e,t,T.min())},e}(),_i=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new Ct(w),this.kn=new ni((function(e){return le(e)}),he),this.On=T.min(),this._n=e.getMutationQueue(n),this.$n=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new yi(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Fn)}))},e}();function wi(e,t,n,r){return new _i(e,t,n,r)}function xi(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.d)(this,(function(o){switch(o.label){case 0:return n=g(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var a;return n._n.getAllMutationBatches(e).next((function(o){return a=o,r=n.persistence.getMutationQueue(t),i=new yi(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],o=Bt(),s=0,u=a;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];o=o.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];o=o.add(g.key)}}return i.pn(e,o).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return a=o.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),a)]}}))}))}function ki(e,t){var n=g(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=nr.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);y(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function Ei(e){var t=g(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function Ti(e,t){var n=g(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var o=[];t.targetChanges.forEach((function(t,a){var s=i.get(a);if(s){o.push(n.qe.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,a)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return y(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&o.push(n.qe.updateTargetData(e,c))}}}));var s=Mt();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Si(e,a,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(T.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return nr.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.Fn=i,e}))}function Si(e,t,n,r,i){var a=Bt();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Mt();return n.forEach((function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(T.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),a}))}function Ii(e,t){var n=g(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function Ci(e,t){var n=g(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,nr.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new mr(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e}))}function Ai(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s;return Object(o.d)(this,(function(o){switch(o.label){case 0:r=g(e),i=r.Fn.get(t),a=n?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",a,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!sr(s=o.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}}))}))}function Oi(e,t,n){var r=g(e),i=T.min(),a=Bt();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=g(e),i=r.kn.get(n);return void 0!==i?nr.resolve(r.Fn.get(i)):r.qe.getTargetData(t,n)}(r,e,je(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:T.min(),n?a:Bt())})).next((function(e){return{documents:e,Bn:a}}))}))}function Pi(e,t){var n=g(e),r=g(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Di(e){var t=g(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=g(e),i=Mt(),a=_r(n),o=si(t),s=IDBKeyRange.lowerBound(a,!0);return o.Ot({index:qn.readTimeIndex,range:s},(function(e,t){var n=gr(r.R,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{wn:i,readTime:wr(a)}}))}(t.$n,e,t.On)})).then((function(e){var n=e.wn,r=e.readTime;return t.On=r,n}))}function Ri(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){return[2,(t=g(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=si(e),n=T.min();return t.Ot({index:qn.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=wr(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.On=e}))]}))}))}function Mi(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a,s,u,c,l,h,f,d,p;return Object(o.d)(this,(function(o){switch(o.label){case 0:for(i=g(e),a=Bt(),s=Mt(),u=Ft(),c=0,l=n;c<l.length;c++)h=l[c],f=t.qn(h.metadata.name),h.document&&(a=a.add(f)),s=s.insert(f,t.Un(h)),u=u.insert(f,t.Qn(h.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Ci(i,function(e){return je(Oe(O.fromString("__bundle__/docs/"+e)))}(r))];case 1:return p=o.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Si(e,d,s,T.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.qe.addMatchingKeys(e,a,p.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Ni(e,t,n){return void 0===n&&(n=Bt()),Object(o.b)(this,void 0,void 0,(function(){var r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return[4,Ci(e,je(Ir(t.bundledQuery)))];case 1:return r=a.sent(),[2,(i=g(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var a=an(t.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Qe.saveNamedQuery(e,t);var o=r.withResumeToken(M.EMPTY_BYTE_STRING,a);return i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(e,o).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(e,t)}))}))]}}))}))}var Li=function(){function e(e){this.R=e,this.Kn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return nr.resolve(this.Kn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Kn.set(t.id,{id:(n=t).id,version:n.version,createTime:an(n.createTime)}),nr.resolve()},e.prototype.getNamedQuery=function(e,t){return nr.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Ir(e.bundledQuery),readTime:an(e.readTime)}}(t)),nr.resolve()},e}(),ji=function(){function e(){this.Wn=new Pt(Fi.Gn),this.zn=new Pt(Fi.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Fi(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new Fi(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new K(new O([])),r=new Fi(n,e),i=new Fi(n,e+1),a=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),a.push(e.key)})),a},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new K(new O([])),n=new Fi(t,e),r=new Fi(t,e+1),i=Bt();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Fi(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Fi=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return K.comparator(e.key,t.key)||w(e.ns,t.ns)},e.Hn=function(e,t){return w(e.ns,t.ns)||K.comparator(e.key,t.key)},e}(),zi=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new Pt(Fi.Gn)}return e.prototype.checkEmpty=function(e){return nr.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var a=new pr(i,t,n,r);this._n.push(a);for(var o=0,s=r;o<s.length;o++){var u=s[o];this.rs=this.rs.add(new Fi(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return nr.resolve(a)},e.prototype.lookupMutationBatch=function(e,t){return nr.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return nr.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return nr.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return nr.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Fi(t,0),i=new Fi(t,Number.POSITIVE_INFINITY),a=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);a.push(t)})),nr.resolve(a)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Pt(w);return t.forEach((function(e){var t=new Fi(e,0),i=new Fi(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),nr.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;K.isDocumentKey(i)||(i=i.child(""));var a=new Fi(new K(i),0),o=new Pt(w);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ns)),!0)}),a),nr.resolve(this.us(o))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;y(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return nr.forEach(t.mutations,(function(i){var a=new Fi(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new Fi(t,0),r=this.rs.firstAfterOrEqual(n);return nr.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,nr.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),Bi=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new Ct(K.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return nr.resolve(n?n.document.clone():se.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Mt();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():se.newInvalidDocument(e))})),nr.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Mt(),i=new K(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ve(t,c)&&(r=r.insert(c.key,c.clone()))}return nr.resolve(r)},e.prototype.fs=function(e,t){return nr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new Ui(this)},e.prototype.getSize=function(e){return nr.resolve(this.size)},e}(),Ui=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return Object(o.c)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),nr.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ri),Vi=function(){function e(e){this.persistence=e,this.ds=new ni((function(e){return le(e)}),he),this.lastRemoteSnapshotVersion=T.min(),this.highestTargetId=0,this.ws=0,this._s=new ji,this.targetCount=0,this.ys=Gr.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),nr.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return nr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return nr.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),nr.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),nr.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Gr(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,nr.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),nr.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,nr.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,a=[];return this.ds.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),nr.waitFor(a).next((function(){return i}))},e.prototype.getTargetCount=function(e){return nr.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return nr.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),nr.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),nr.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),nr.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return nr.resolve(n)},e.prototype.containsKey=function(e,t){return nr.resolve(this._s.containsKey(t))},e}(),qi=function(){function e(e,t){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Vi(this),this.Ut=new Pr,this.Ue=function(e,t){return new Bi(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new yr(t),this.Qe=new Li(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new zi(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;f("MemoryPersistence","Starting transaction:",e);var i=new Gi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return nr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Gi=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return Object(o.c)(t,e),t}(er),Ki=function(){function e(e){this.persistence=e,this.As=new ji,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw m()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),nr.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),nr.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),nr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nr.forEach(this.vs,(function(r){var i=K.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return nr.or([function(){return nr.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),Hi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function Wi(e,t){return"firestore_clients_"+e+"_"+t}function Zi(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Xi(e,t){return"firestore_targets_"+e+"_"+t}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid");var Yi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&(o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new c(a.error.code,a.error.message)),o?new e(t,n,a.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Qi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),a?new e(t,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),$i=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Vt(),o=0;i&&o<r.activeTargetIds.length;++o)i=G(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(d("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Ji=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+t),null)},e}(),ea=function(){function e(){this.activeTargetIds=Vt()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),ta=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ct(w),this.started=!1,this.Os=[];var a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Wi(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new ea),this.Ls=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Qs=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,u,c,l,h,f=this;return Object(o.d)(this,(function(o){switch(o.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=o.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(Wi(this.persistenceKey,r)))&&(a=$i.Vs(r,i))&&(this.ks=this.ks.insert(a.clientId,a));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.Os;c<l.length;c++)h=l[c],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Xi(this.persistenceKey,e));if(n){var r=Qi.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Ks(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Ks()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Xi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return f("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){f("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){f("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(o.b)(t,void 0,void 0,(function(){var e,t,r,i,a,u;return Object(o.d)(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(a=this.js(n.newValue)))return[2,this.Ws(a)]}else if(n.key===this.Ms)(u=function(e){var t=s.o;if(null!=e)try{var n=JSON.parse(e);y("number"==typeof n),t=n}catch(e){d("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Yi(this.currentUser,e,t,n),i=Zi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=Zi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=Xi(this.persistenceKey,e),i=new Qi(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return $i.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yi.Vs(new Hi(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return Qi.Vs(r,t)},e.prototype.js=function(e){return Ji.Vs(e)},e.prototype.ii=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),a=this.Gs(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.hi(o,s).then((function(){n.ks=r}))},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Vt();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),na=function(){function e(){this.li=new ea,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new ea,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),ra=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),ia=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),aa={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},oa=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),sa=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n}return Object(o.c)(t,e),t.prototype.ki=function(e,t,n,r){return new Promise((function(i,o){var s=new a.f;s.listenOnce(a.c.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case a.a.NO_ERROR:var t=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(t)),i(t);break;case a.a.TIMEOUT:f("Connection",'RPC "'+e+'" timed out'),o(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case a.a.HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(t)>=0?t:u.UNKNOWN}(r.status);o(new c(l,r.message))}else o(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new c(u.UNAVAILABLE,"Connection failed."));break;default:m()}}finally{f("Connection",'RPC "'+e+'" completed.')}}));var l=JSON.stringify(r);s.send(t,"POST",l,n,15)}))},t.prototype.$i=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(a.g)(),o=Object(a.h)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,t),Object(r.y)()||Object(r.B)()||Object(r.u)()||Object(r.w)()||Object(r.C)()||Object(r.t)()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=i.createWebChannel(l,s),d=!1,v=!1,m=new oa({Ei:function(e){v?f("Connection","Not sending because WebChannel is closed:",e):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",e),h.send(e))},Ti:function(){return h.close()}}),g=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return g(h,a.e.EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),g(h,a.e.EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),m.Vi())})),g(h,a.e.EventType.ERROR,(function(e){v||(v=!0,p("Connection","WebChannel transport errored:",e),m.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),g(h,a.e.EventType.MESSAGE,(function(e){var t;if(!v){var n=e.data[0];y(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){f("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=wt[e];if(void 0!==t)return It(t)}(a),s=i.message;void 0===o&&(o=u.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),v=!0,m.Vi(new c(o,s)),h.close()}else f("Connection","WebChannel received:",n),m.Si(n)}})),g(o,a.b.STAT_EVENT,(function(e){e.stat===a.d.PROXY?f("Connection","Detected buffering proxy"):e.stat===a.d.NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){m.Pi()}),0),m},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);f("RestConnection","Sending: ",i,n);var a={};return this.Fi(a,r),this.ki(e,i,a,n).then((function(e){return f("RestConnection","Received: ",e),e}),(function(t){throw p("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.Oi=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.3.2",e["X-Firebase-GMPID"]=this.databaseInfo.appId,e["Content-Type"]="text/plain",t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=aa[e];return this.Di+"/v1/"+t+":"+n},e}());function ua(){return"undefined"!=typeof window?window:null}function ca(){return"undefined"!=typeof document?document:null}function la(e){return new en(e,!0)}var ha=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Ki=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Qi=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),fa=function(){function e(e,t,n,r,i,a){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=a,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ha(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===u.RESOURCE_EXHAUSTED?(d(t.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):t&&t.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return Object(o.b)(e,void 0,void 0,(function(){return Object(o.d)(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return f("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),da=function(e){function t(t,n,r,i,a){var o=this;return(o=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,a)||this).R=i,o}return Object(o.c)(t,e),t.prototype.wr=function(e){return this.Hi.$i("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:m()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.I?(y(void 0===t||"string"==typeof t),M.fromBase64String(t||"")):(y(void 0===t||t instanceof Uint8Array),M.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?u.UNKNOWN:It(e.code);return new c(t,e.message||"")}(s);n=new Wt(r,i,a,o||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=cn(e,r.document.name),a=an(r.document.updateTime);var s=new ae({mapValue:{fields:r.document.fields}}),l=(o=se.newFoundDocument(i,a,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new Kt(l,h,o.key,o)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=cn(e,r.document),a=r.readTime?an(r.readTime):T.min(),s=se.newNoDocument(i,a),o=r.removedTargetIds||[],n=new Kt([],o,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=cn(e,r.document),a=r.removedTargetIds||[],n=new Kt([],a,i,null);else{if(!("filter"in t))return m();t.filter;var f=t.filter;f.targetId,r=f.count||0,i=new Tt(r),a=f.targetId,n=new Ht(a,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return T.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?T.min():t.readTime?an(t.readTime):T.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=fn(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=fe(r)?{documents:gn(e,r)}:{query:bn(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=nn(e,t.resumeToken):t.snapshotVersion.compareTo(T.min())>0&&(n.readTime=tn(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=fn(this.R),t.removeTarget=e,this.cr(t)},t}(fa),pa=function(e){function t(t,n,r,i,a){var o=this;return(o=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,a)||this).R=i,o.gr=!1,o}return Object(o.c)(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.$i("Write",e)},t.prototype.onMessage=function(e){if(y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(y(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?an(e.updateTime):an(t);return n.isEqual(T.min())&&(n=an(t)),new st(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=an(e.commitTime);return this.listener.Tr(n,t)}return y(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=fn(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return mn(t.R,e)}))};this.cr(n)},t}(fa),va=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(o.c)(t,e),t.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e}))},t.prototype.Oi=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(e,t,n,i)})).catch((function(e){throw e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e}))},t.prototype.terminate=function(){this.Rr=!1},t}((function(){})),ma=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(t),this.Vr=!1):f("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),ya=function(e,t,n,r,i){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return Object(o.b)(a,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return Sa(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return(t=g(e)).$r.add(4),[4,ba(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.$r.delete(4),[4,ga(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new ma(n,r)};function ga(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:if(!Sa(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function ba(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function _a(e,t){var n=g(e);n.Or.has(t.targetId)||(n.Or.set(t.targetId,t),Ta(n)?Ea(n):Ua(n).er()&&xa(n,t))}function wa(e,t){var n=g(e),r=Ua(n);n.Or.delete(t),r.er()&&ka(n,t),0===n.Or.size&&(r.er()?r.ir():Sa(n)&&n.Br.set("Unknown"))}function xa(e,t){e.qr.U(t.targetId),Ua(e).mr(t)}function ka(e,t){e.qr.U(t),Ua(e).yr(t)}function Ea(e){e.qr=new Xt({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.Or.get(t)||null}}),Ua(e).start(),e.Br.Sr()}function Ta(e){return Sa(e)&&!Ua(e).tr()&&e.Or.size>0}function Sa(e){return 0===g(e).$r.size}function Ia(e){e.qr=void 0}function Ca(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){return e.Or.forEach((function(t,n){xa(e,t)})),[2]}))}))}function Aa(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(n){return Ia(e),Ta(e)?(e.Br.Nr(t),Ea(e)):e.Br.set("Unknown"),[2]}))}))}function Oa(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a;return Object(o.d)(this,(function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof Wt&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.d)(this,(function(o){switch(o.label){case 0:n=t.cause,r=0,i=t.targetIds,o.label=1;case 1:return r<i.length?(a=i[r],e.Or.has(a)?[4,e.remoteSyncer.rejectListen(a,n)]:[3,3]):[3,5];case 2:o.sent(),e.Or.delete(a),e.qr.removeTarget(a),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Pa(e,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Kt?e.qr.X(t):t instanceof Ht?e.qr.rt(t):e.qr.et(t),n.isEqual(T.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ei(e.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Or.get(r);i&&e.Or.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Or.get(t);if(n){e.Or.set(t,n.withResumeToken(M.EMPTY_BYTE_STRING,n.snapshotVersion)),ka(e,t);var r=new mr(n.target,t,1,n.sequenceNumber);xa(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,Pa(e,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Pa(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r=this;return Object(o.d)(this,(function(i){switch(i.label){case 0:if(!sr(t))throw t;return e.$r.add(1),[4,ba(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Ei(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return Object(o.b)(r,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.$r.delete(1),[4,ga(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Da(e,t){return t().catch((function(n){return Pa(e,n,t)}))}function Ra(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i,a;return Object(o.d)(this,(function(o){switch(o.label){case 0:t=g(e),n=Va(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,o.label=1;case 1:if(!function(e){return Sa(e)&&e.kr.length<10}(t))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,Ii(t.localStore,r)];case 3:return null===(i=o.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=Va(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return a=o.sent(),[4,Pa(t,a)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Ma(t)&&Na(t),[2]}}))}))}function Ma(e){return Sa(e)&&!Va(e).tr()&&e.kr.length>0}function Na(e){Va(e).start()}function La(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){return Va(e).Ar(),[2]}))}))}function ja(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(o.d)(this,(function(a){for(t=Va(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function Fa(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return r=e.kr.shift(),i=vr.from(r,t,n),[4,Da(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return a.sent(),[4,Ra(e)];case 2:return a.sent(),[2]}}))}))}function za(e,t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(n){switch(n.label){case 0:return t&&Va(e).pr?[4,function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.d)(this,(function(i){switch(i.label){case 0:return St(r=t.code)&&r!==u.ABORTED?(n=e.kr.shift(),Va(e).sr(),[4,Da(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,Ra(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ma(e)&&Na(e),[2]}}))}))}function Ba(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return n=g(e),t?(n.$r.delete(2),[4,ga(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.$r.add(2),[4,ba(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Ua(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=g(e);return r.br(),new da(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Ca.bind(null,e),Ri:Aa.bind(null,e),_r:Oa.bind(null,e)}),e.Mr.push((function(n){return Object(o.b)(t,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),Ta(e)?Ea(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),Ia(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function Va(e){var t=this;return e.Qr||(e.Qr=function(e,t,n){var r=g(e);return r.br(),new pa(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:La.bind(null,e),Ri:za.bind(null,e),Ir:ja.bind(null,e),Tr:Fa.bind(null,e)}),e.Mr.push((function(n){return Object(o.b)(t,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return n?(e.Qr.sr(),[4,Ra(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Qr.stop()];case 3:t.sent(),e.kr.length>0&&(f("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Qr}var qa=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Ga(e,t){if(d("AsyncQueue",t+": "+e),sr(e))return new c(u.UNAVAILABLE,t+": "+e);throw e}var Ka=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||K.comparator(t.key,n.key)}:function(e,t){return K.comparator(e.key,t.key)},this.keyedMap=Lt(),this.sortedSet=new Ct(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Ha=function(){function e(){this.Kr=new Ct(K.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Kr.get(t);n?0!==e.type&&3===n.type?this.Kr=this.Kr.insert(t,e):3===e.type&&1!==n.type?this.Kr=this.Kr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Kr=this.Kr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Kr=this.Kr.remove(t):1===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):m():this.Kr=this.Kr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Kr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Wa=function(){function e(e,t,n,r,i,a,o,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Ka.emptySet(n),a,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ze(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Za=function(){this.Wr=void 0,this.listeners=[]},Xa=function(){this.queries=new ni((function(e){return Be(e)}),ze),this.onlineState="Unknown",this.Gr=new Set};function Ya(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c;return Object(o.d)(this,(function(o){switch(o.label){case 0:if(n=g(e),r=t.query,i=!1,(a=n.queries.get(r))||(i=!0,a=new Za),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),s=a,[4,n.onListen(r)];case 2:return s.Wr=o.sent(),[3,4];case 3:return u=o.sent(),c=Ga(u,"Initialization of query '"+Ue(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.queries.set(r,a),a.listeners.push(t),t.zr(n.onlineState),a.Wr&&t.Hr(a.Wr)&&eo(n),[2]}}))}))}function Qa(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.d)(this,(function(o){return n=g(e),r=t.query,i=!1,(a=n.queries.get(r))&&(s=a.listeners.indexOf(t))>=0&&(a.listeners.splice(s,1),i=0===a.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function $a(e,t){for(var n=g(e),r=!1,i=0,a=t;i<a.length;i++){var o=a[i],s=o.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(o)&&(r=!0);u.Wr=o}}r&&eo(n)}function Ja(e,t,n){var r=g(e),i=r.queries.get(t);if(i)for(var a=0,o=i.listeners;a<o.length;a++)o[a].onError(n);r.queries.delete(t)}function eo(e){e.Gr.forEach((function(e){e.next()}))}var to=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new Wa(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),a=!0):this.eo(e,this.onlineState)&&(this.no(e),a=!0),this.Xr=e,a},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),no=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),ro=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return cn(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?vn(this.R,e.document,!1):se.newNoDocument(this.qn(e.metadata.name),this.Qn(e.metadata.readTime))},e.prototype.Qn=function(e){return an(e)},e}(),io=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=ao(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new ro(this.R),r=0,i=e;r<i.length;r++){var a=i[r];if(a.metadata.queries)for(var o=n.qn(a.metadata.name),s=0,u=a.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||Bt()).add(o);t.set(c,l)}}return t},e.prototype.complete=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return[4,Mi(this.localStore,new ro(this.R),this.documents,this.ro.id)];case 1:e=a.sent(),t=this.co(this.documents),n=0,r=this.queries,a.label=2;case 2:return n<r.length?(i=r[n],[4,Ni(this.localStore,i,t.get(i.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new mi(Object.assign({},this.progress),e))]}}))}))},e}();function ao(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var oo=function(e){this.key=e},so=function(e){this.key=e},uo=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Bt(),this.mutatedKeys=Bt(),this.lo=qe(e),this.fo=new Ka(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new Ha,i=t?t.fo:this.fo,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=Pe(this.query)&&i.size===this.query.limit?i.last():null,c=De(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ve(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Pe(this.query)||De(this.query))for(;o.size>this.query.limit;){var l=Pe(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{fo:o,mo:r,Nn:s,mutatedKeys:a}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var a=e.mo.jr();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var o=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==a.length||u?{snapshot:new Wa(this.query,e.fo,i,a,e.mutatedKeys,0===s,u,!1),To:o}:{To:o}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ha,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Bt(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new so(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new oo(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Bt();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return Wa.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),co=function(e,t,n){this.query=e,this.targetId=t,this.view=n},lo=function(e){this.key=e,this.bo=!1},ho=function(){function e(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.vo={},this.Po=new ni((function(e){return Be(e)}),ze),this.Vo=new Map,this.So=new Set,this.Do=new Ct(K.comparator),this.Co=new Map,this.No=new ji,this.xo={},this.Fo=new Map,this.ko=Gr.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),e}();function fo(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return Object(o.d)(this,(function(o){switch(o.label){case 0:return n=Vo(e),(a=n.Po.get(t))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,Ci(n.localStore,je(t))];case 2:return s=o.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,po(n,t,r,"current"===u)];case 3:i=o.sent(),n.isPrimaryClient&&_a(n.remoteStore,s),o.label=4;case 4:return[2,i]}}))}))}function po(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a,s,u,c,l;return Object(o.d)(this,(function(h){switch(h.label){case 0:return e.$o=function(t,n,r){return function(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a,s;return Object(o.d)(this,(function(o){switch(o.label){case 0:return(i=t.view._o(n)).Nn?[4,Oi(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return a=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,a),[2,(Io(e,t.targetId,s.To),s.snapshot)]}}))}))}(e,t,n,r)},[4,Oi(e.localStore,t,!0)];case 1:return i=h.sent(),a=new uo(t,i.Bn),s=a._o(i.documents),u=Gt.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=a.applyChanges(s,e.isPrimaryClient,u),Io(e,n,c.To),l=new co(t,n,a),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),c.snapshot)]}}))}))}function vo(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return n=g(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!ze(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ai(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),wa(n.remoteStore,r.targetId),To(n,r.targetId)})).catch(Xr)]):[3,3];case 1:a.sent(),a.label=2;case 2:return[3,5];case 3:return To(n,r.targetId),[4,Ai(n.localStore,r.targetId,!0)];case 4:a.sent(),a.label=5;case 5:return[2]}}))}))}function mo(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s;return Object(o.d)(this,(function(o){switch(o.label){case 0:r=qo(e),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,function(e,t){var n,r=g(e),i=E.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Bt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,a).next((function(a){n=a;for(var o=[],s=0,u=t;s<u.length;s++){var c=u[s],l=dt(c,n.get(c.key));null!=l&&o.push(new yt(c.key,l,oe(l.toProto().mapValue),ut.exists(!0)))}return r._n.addMutationBatch(e,i,o,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(r.localStore,t)];case 2:return i=o.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new Ct(w)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,Oo(r,i.changes)];case 3:return o.sent(),[4,Ra(r.remoteStore)];case 4:return o.sent(),[3,6];case 5:return a=o.sent(),s=Ga(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function yo(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.d)(this,(function(i){switch(i.label){case 0:n=g(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ti(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(y(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?y(r.bo):e.removedDocuments.size>0&&(y(r.bo),r.bo=!1))})),[4,Oo(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Xr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function go(e,t,n){var r=g(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=g(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,a=n.listeners;i<a.length;i++)a[i].zr(t)&&(r=!0)})),r&&eo(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bo(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,u,c;return Object(o.d)(this,(function(o){switch(o.label){case 0:return(r=g(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(a=i&&i.key)?(s=(s=new Ct(K.comparator)).insert(a,se.newNoDocument(a,T.min())),u=Bt().add(a),c=new qt(T.min(),new Map,new Pt(w),s,u),[4,yo(r,c)]):[3,2];case 1:return o.sent(),r.Do=r.Do.remove(a),r.Co.delete(t),Ao(r),[3,4];case 2:return[4,Ai(r.localStore,t,!1).then((function(){return To(r,t,n)})).catch(Xr)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}function _o(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:n=g(e),r=t.batch.batchId,a.label=1;case 1:return a.trys.push([1,4,,6]),[4,ki(n.localStore,t)];case 2:return i=a.sent(),Eo(n,r,null),ko(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Oo(n,i)];case 3:return a.sent(),[3,6];case 4:return[4,Xr(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}}))}))}function wo(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:r=g(e),a.label=1;case 1:return a.trys.push([1,4,,6]),[4,function(e,t){var n=g(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return y(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(r.localStore,t)];case 2:return i=a.sent(),Eo(r,t,n),ko(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Oo(r,i)];case 3:return a.sent(),[3,6];case 4:return[4,Xr(a.sent())];case 5:return a.sent(),[3,6];case 6:return[2]}}))}))}function xo(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.d)(this,(function(o){switch(o.label){case 0:Sa((n=g(e)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){var t=g(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=o.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return a=o.sent(),s=Ga(a,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}function ko(e,t){(e.Fo.get(t)||[]).forEach((function(e){e.resolve()})),e.Fo.delete(t)}function Eo(e,t,n){var r=g(e),i=r.xo[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function To(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var a=i[r];e.Po.delete(a),n&&e.vo.Mo(a,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||So(e,t)}))}function So(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(wa(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Ao(e))}function Io(e,t,n){for(var r=0,i=n;r<i.length;r++){var a=i[r];a instanceof oo?(e.No.addReference(a.key,t),Co(e,a)):a instanceof so?(f("SyncEngine","Document no longer in limbo: "+a.key),e.No.removeReference(a.key,t),e.No.containsKey(a.key)||So(e,a.key)):m()}}function Co(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(f("SyncEngine","New document in limbo: "+n),e.So.add(r),Ao(e))}function Ao(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new K(O.fromString(t)),r=e.ko.next();e.Co.set(r,new lo(n)),e.Do=e.Do.insert(n,r),_a(e.remoteStore,new mr(je(Oe(n.path)),r,2,s.o))}}function Oo(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s;return Object(o.d)(this,(function(u){switch(u.label){case 0:return r=g(e),i=[],a=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,o){s.push(r.$o(o,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=gi.Pn(o.targetId,e);a.push(t)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,l,h;return Object(o.d)(this,(function(o){switch(o.label){case 0:n=g(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return nr.forEach(t,(function(t){return nr.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return nr.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return o.sent(),[3,4];case 3:if(!sr(r=o.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,a=t;i<a.length;i++)s=a[i],u=s.targetId,s.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(r.localStore,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Po(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.d)(this,(function(i){switch(i.label){case 0:return(n=g(e)).currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.toKey()),[4,xi(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.Fo.forEach((function(e){e.forEach((function(e){e.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Oo(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Do(e,t){var n=g(e),r=n.Co.get(t);if(r&&r.bo)return Bt().add(r.key);var i=Bt(),a=n.Vo.get(t);if(!a)return i;for(var o=0,s=a;o<s.length;o++){var u=s[o],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Ro(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return[4,Oi((n=g(e)).localStore,t.query,!0)];case 1:return r=a.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&Io(n,t.targetId,i.To),i)]}}))}))}function Mo(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){return[2,Di((t=g(e)).localStore).then((function(e){return Oo(t,e)}))]}))}))}function No(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a;return Object(o.d)(this,(function(o){switch(o.label){case 0:return[4,function(e,t){var n=g(e),r=g(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):nr.resolve(null)}))}))}((i=g(e)).localStore,t)];case 1:return null===(a=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,Ra(i.remoteStore)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Eo(i,t,r||null),ko(i,t),function(e,t){g(g(e)._n).Gt(t)}(i.localStore,t)):m(),o.label=4;case 4:return[4,Oo(i,a)];case 5:return o.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+t),o.label=7;case 7:return[2]}}))}))}function Lo(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,l;return Object(o.d)(this,(function(o){switch(o.label){case 0:return Vo(n=g(e)),qo(n),!0!==t||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,jo(n,r.toArray())]);case 1:return i=o.sent(),n.Oo=!0,[4,Ba(n.remoteStore,!0)];case 2:for(o.sent(),a=0,s=i;a<s.length;a++)u=s[a],_a(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.Oo?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return To(n,t),Ai(n.localStore,t,!0)})),wa(n.remoteStore,t)})),[4,l]);case 4:return o.sent(),[4,jo(n,c)];case 5:return o.sent(),function(e){var t=g(e);t.Co.forEach((function(e,n){wa(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new Ct(K.comparator)}(n),n.Oo=!1,[4,Ba(n.remoteStore,!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))}function jo(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,u,c,l,h,f,d,p,v,m;return Object(o.d)(this,(function(o){switch(o.label){case 0:n=g(e),r=[],i=[],a=0,s=t,o.label=1;case 1:return a<s.length?(u=s[a],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Ci(n.localStore,je(l[0]))]:[3,7]):[3,13];case 2:c=o.sent(),h=0,f=l,o.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Ro(n,p)]):[3,6];case 4:(v=o.sent()).snapshot&&i.push(v.snapshot),o.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Pi(n.localStore,u)];case 8:return m=o.sent(),[4,Ci(n.localStore,m)];case 9:return c=o.sent(),[4,po(n,Fo(m),u,!1)];case 10:o.sent(),o.label=11;case 11:r.push(c),o.label=12;case 12:return a++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Fo(e){return Ae(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function zo(e){var t=g(e);return g(g(t.localStore).persistence).fn()}function Bo(e,t,n,r){return Object(o.b)(this,void 0,void 0,(function(){var i,a,s;return Object(o.d)(this,(function(o){switch(o.label){case 0:return(i=g(e)).Oo?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Di(i.localStore)];case 3:return a=o.sent(),s=qt.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Oo(i,a,s)];case 4:return o.sent(),[3,8];case 5:return[4,Ai(i.localStore,t,!0)];case 6:return o.sent(),To(i,t,r),[3,8];case 7:m(),o.label=8;case 8:return[2]}}))}))}function Uo(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,u,c,l,h,d,p;return Object(o.d)(this,(function(v){switch(v.label){case 0:if(!(r=Vo(e)).Oo)return[3,10];i=0,a=t,v.label=1;case 1:return i<a.length?(s=a[i],r.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Pi(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,Ci(r.localStore,u)];case 3:return c=v.sent(),[4,po(r,Fo(u),c.targetId,!1)];case 4:v.sent(),_a(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:l=function(e){return Object(o.d)(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,Ai(r.localStore,e,!1).then((function(){wa(r.remoteStore,e),To(r,e)})).catch(Xr)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,d=n,v.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Vo(e){var t=g(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Do.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bo.bind(null,t),t.vo._r=$a.bind(null,t.eventManager),t.vo.Mo=Ja.bind(null,t.eventManager),t}function qo(e){var t=g(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_o.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wo.bind(null,t),t}function Go(e,t,n){var r=g(e);(function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,u,c;return Object(o.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=o.sent(),[4,function(e,t){var n=g(e),r=an(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qe.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,r)];case 2:return o.sent()?[4,t.close()]:[3,4];case 3:return[2,(o.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(ao(r)),i=new io(r,e.localStore,t.R),[4,t.Lo()];case 5:a=o.sent(),o.label=6;case 6:return a?[4,i.oo(a)]:[3,10];case 7:return(s=o.sent())&&n._updateProgress(s),[4,t.Lo()];case 8:a=o.sent(),o.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return u=o.sent(),[4,Oo(e,u.wn,void 0)];case 12:return o.sent(),[4,function(e,t){var n=g(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qe.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return o.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=o.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Ko=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return this.R=la(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Qo(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Qo=function(e){return wi(this.persistence,new bi,e.initialUser,this.R)},e.prototype.qo=function(e){return new qi(Ki.bs,this.R)},e.prototype.Bo=function(e){return new na},e.prototype.terminate=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),Ho=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Ko=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(o.c)(t,e),t.prototype.initialize=function(t){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Ri(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,t)];case 3:return n.sent(),[4,qo(this.Ko.syncEngine)];case 4:return n.sent(),[4,Ra(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Qo=function(e){return wi(this.persistence,new bi,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new $r(t,e.asyncQueue)},t.prototype.qo=function(e){var t=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Lr.withCacheSize(this.cacheSizeBytes):Lr.DEFAULT;return new fi(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ua(),ca(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new na},t}(Ko),Wo=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Ko=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(o.c)(t,e),t.prototype.initialize=function(t){return Object(o.b)(this,void 0,void 0,(function(){var n,r=this;return Object(o.d)(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof ta?(this.sharedClientState.syncEngine={ui:No.bind(null,n),ai:Bo.bind(null,n),hi:Uo.bind(null,n),fn:zo.bind(null,n),ci:Mo.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return Object(o.b)(r,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return[4,Lo(this.Ko.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=ua();if(!ta.yt(t))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ta(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(Ho),Zo=function(){function e(){}return e.prototype.initialize=function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n=this;return Object(o.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return go(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Po.bind(null,this.syncEngine),[4,Ba(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new Xa},e.prototype.createDatastore=function(e){var t,n=la(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new sa(t));return function(e,t,n){return new va(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return go(o.syncEngine,e,0)},a=ia.yt()?new ia:new ra,new ya(t,n,r,i,a)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,a,o){var s=new ho(e,t,n,r,i,a);return o&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return t=g(e),f("RemoteStore","RemoteStore shutting down."),t.$r.add(5),[4,ba(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();function Xo(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return Object(o.b)(this,void 0,void 0,(function(){var r;return Object(o.d)(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Yo=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Qo=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new tr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t,n,r;return Object(o.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new no(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),$o=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n=this;return Object(o.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i,a,s,u;return Object(o.d)(this,(function(o){switch(o.label){case 0:return n=g(e),r=fn(n.R)+"/documents",i={documents:t.map((function(e){return un(n.R,e)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return a=o.sent(),s=new Map,a.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){y(!!t.found),t.found.name,t.found.updateTime;var n=cn(e,t.found.name),r=an(t.found.updateTime),i=new ae({mapValue:{fields:t.found.fields}});return se.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){y(!!t.missing),y(!!t.readTime);var n=cn(e,t.missing),r=an(t.readTime);return se.newNoDocument(n,r)}(e,t):m()}(n.R,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());y(!!t),u.push(t)})),u)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new kt(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t=this;return Object(o.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=K.fromPath(n);t.mutations.push(new Et(r,t.precondition(r)))})),[4,function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return n=g(e),r=fn(n.R)+"/documents",i={writes:t.map((function(e){return mn(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return a.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw m();t=T.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ut.updateTime(t):ut.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(T.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),Jo=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new ha(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return Object(o.b)(e,void 0,void 0,(function(){var e,t,n=this;return Object(o.d)(this,(function(r){return e=new $o(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!V(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!St(t)}return!1},e}(),es=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Hi.UNAUTHENTICATED,this.clientId=_.u(),this.credentialListener=function(){},this.receivedInitialUser=new tr,this.credentials.setChangeListener((function(e){f("FirestoreClient","Received user=",e.uid),r.user=e,r.credentialListener(e),r.receivedInitialUser.resolve()}))}return e.prototype.getConfiguration=function(){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(e.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},e.prototype.setCredentialChangeListener=function(e){var t=this;this.credentialListener=e,this.receivedInitialUser.promise.then((function(){return t.credentialListener(t.user)}))},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(o.b)(e,void 0,void 0,(function(){var e,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=Ga(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function ts(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(o.d)(this,(function(a){switch(a.label){case 0:return e.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=a.sent(),[4,t.initialize(n)];case 2:return a.sent(),r=n.initialUser,e.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,e.asyncQueue.enqueueRetryable((function(){return Object(o.b)(i,void 0,void 0,(function(){return Object(o.d)(this,(function(e){switch(e.label){case 0:return[4,xi(t.localStore,n)];case 1:return e.sent(),[2]}}))}))})))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function ns(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.d)(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,rs(e)];case 1:return n=i.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(n){return e.asyncQueue.enqueueRetryable((function(){return function(e,t){return Object(o.b)(this,void 0,void 0,(function(){var n,r;return Object(o.d)(this,(function(i){switch(i.label){case 0:return(n=g(e)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),r=Sa(n),n.$r.add(3),[4,ba(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.$r.delete(3),[4,ga(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,n)}))})),e.onlineComponents=t,[2]}}))}))}function rs(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,ts(e,new Ko)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function is(e){return Object(o.b)(this,void 0,void 0,(function(){return Object(o.d)(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,ns(e,new Zo)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function as(e){return rs(e).then((function(e){return e.persistence}))}function os(e){return rs(e).then((function(e){return e.localStore}))}function ss(e){return is(e).then((function(e){return e.remoteStore}))}function us(e){return is(e).then((function(e){return e.syncEngine}))}function cs(e){return Object(o.b)(this,void 0,void 0,(function(){var t,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return[4,is(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=fo.bind(null,t.syncEngine),n.onUnlisten=vo.bind(null,t.syncEngine),n)]}}))}))}function ls(e,t,n){var r=this;void 0===n&&(n={});var i=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(r,void 0,void 0,(function(){var r;return Object(o.d)(this,(function(a){switch(a.label){case 0:return r=function(e,t,n,r,i){var a=new Yo({next:function(a){t.enqueueAndForget((function(){return Qa(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new to(Oe(n.path),a,{includeMetadataChanges:!0,so:!0});return Ya(e,o)},[4,cs(e)];case 1:return[2,r.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function hs(e,t,n){var r=this;void 0===n&&(n={});var i=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(r,void 0,void 0,(function(){var r;return Object(o.d)(this,(function(a){switch(a.label){case 0:return r=function(e,t,n,r,i){var a=new Yo({next:function(n){t.enqueueAndForget((function(){return Qa(e,o)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new to(n,a,{includeMetadataChanges:!0,so:!0});return Ya(e,o)},[4,cs(e)];case 1:return[2,r.apply(void 0,[a.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var fs=function(e,t,n,r,i,a,o){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o},ds=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),ps=new Map,vs=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ms=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){this.changeListener=e,e(Hi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ys=function(){function e(e){var t=this;this.oc=null,this.currentUser=Hi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){t.cc++,t.currentUser=t.uc(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.cc=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),e.get().then((function(e){t.auth=e,t.oc&&t.auth.addAuthTokenListener(t.oc)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(y("string"==typeof n.accessToken),new vs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},e.prototype.uc=function(){var e=this.auth&&this.auth.getUid();return y(null===e||"string"==typeof e),new Hi(e)},e}(),gs=function(){function e(e,t){this.ac=e,this.hc=t,this.type="FirstParty",this.user=Hi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.hc},t=this.ac.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!1,configurable:!0}),e}(),bs=function(){function e(e,t){this.ac=e,this.hc=t}return e.prototype.getToken=function(){return Promise.resolve(new gs(this.ac,this.hc))},e.prototype.setChangeListener=function(e){e(Hi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function _s(e,t,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function ws(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function xs(e,t,n,r){if(!0===t&&!0===r)throw new c(u.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function ks(e){if(!K.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Es(e){if(K.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Ts(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":m()}function Ss(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ts(e);throw new c(u.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Is(e,t){if(t<=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var Cs=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,xs("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),As=function(){function e(e,t){this._persistenceKey="(lite)",this._settings=new Cs({}),this._settingsFrozen=!1,e instanceof ds?(this._databaseId=e,this._credentials=new ms):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ds(e.options.projectId)}(e),this._credentials=new ys(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cs(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new ms;switch(e.type){case"gapi":var t=e.client;return y(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new bs(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=ps.get(this))&&(f("ComponentProvider","Removing Datastore"),ps.delete(this),e.terminate()),Promise.resolve();var e},e}(),Os=function(){function e(e,t,n){this._converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ds(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Ps=function(){function e(e,t,n){this._converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Ds=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Oe(r))||this).firestore=t,i._path=r,i.type="collection",i}return Object(o.c)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Os(this.firestore,null,new K(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Ps);function Rs(e,t){for(var n,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];if(e=Object(r.p)(e),_s("collection","path",t),e instanceof As)return Es(n=O.fromString.apply(O,Object(o.f)([t],i))),new Ds(e,null,n);if(!(e instanceof Os||e instanceof Ds))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Es(n=O.fromString.apply(O,Object(o.f)([e.path],i)).child(O.fromString(t))),new Ds(e.firestore,null,n)}function Ms(e,t){for(var n,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];if(e=Object(r.p)(e),1===arguments.length&&(t=_.u()),_s("doc","path",t),e instanceof As)return ks(n=O.fromString.apply(O,Object(o.f)([t],i))),new Os(e,null,new K(n));if(!(e instanceof Os||e instanceof Ds))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ks(n=e._path.child(O.fromString.apply(O,Object(o.f)([t],i)))),new Os(e.firestore,e instanceof Ds?e._converter:null,new K(n))}function Ns(e,t){return e=Object(r.p)(e),t=Object(r.p)(t),(e instanceof Os||e instanceof Ds)&&(t instanceof Os||t instanceof Ds)&&e.firestore===t.firestore&&e.path===t.path&&e._converter===t._converter}function Ls(e,t){return e=Object(r.p)(e),t=Object(r.p)(t),e instanceof Ps&&t instanceof Ps&&e.firestore===t.firestore&&ze(e._query,t._query)&&e._converter===t._converter}var js=function(){function e(){var e=this;this.lc=Promise.resolve(),this.fc=[],this.dc=!1,this.wc=[],this._c=null,this.mc=!1,this.yc=[],this.Zi=new ha(this,"async_queue_retry"),this.gc=function(){var t=ca();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=ca();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.gc)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this.dc},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ec(),this.Tc(e)},e.prototype.enterRestrictedMode=function(){if(!this.dc){this.dc=!0;var e=ca();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.gc)}},e.prototype.enqueue=function(e){return this.Ec(),this.dc?new Promise((function(e){})):this.Tc(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.fc.push(e),t.Ic()}))},e.prototype.Ic=function(){return Object(o.b)(this,void 0,void 0,(function(){var e,t=this;return Object(o.d)(this,(function(n){switch(n.label){case 0:if(0===this.fc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fc[0]()];case 2:return n.sent(),this.fc.shift(),this.Zi.reset(),[3,4];case 3:if(!sr(e=n.sent()))throw e;return f("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.fc.length>0&&this.Zi.ji((function(){return t.Ic()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Tc=function(e){var t=this,n=this.lc.then((function(){return t.mc=!0,e().catch((function(e){throw t._c=e,t.mc=!1,d("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.mc=!1,e}))}));return this.lc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ec(),this.yc.indexOf(e)>-1&&(t=0);var i=qa.createAndSchedule(this,e,t,n,(function(e){return r.Ac(e)}));return this.wc.push(i),i},e.prototype.Ec=function(){this._c&&m()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Rc=function(){return Object(o.b)(this,void 0,void 0,(function(){var e;return Object(o.d)(this,(function(t){switch(t.label){case 0:return[4,e=this.lc];case 1:t.sent(),t.label=2;case 2:if(e!==this.lc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.bc=function(e){for(var t=0,n=this.wc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.vc=function(e){var t=this;return this.Rc().then((function(){t.wc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.wc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Rc()}))},e.prototype.Pc=function(e){this.yc.push(e)},e.prototype.Ac=function(e){var t=this.wc.indexOf(e);this.wc.splice(t,1)},e}();function Fs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var a=i[r];if(a in n&&"function"==typeof n[a])return!0}return!1}(e)}var zs=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),Bs=-1,Us=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._queue=new js,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return Object(o.c)(t,e),t.prototype._terminate=function(){return this._firestoreClient||qs(this),this._firestoreClient.terminate()},t}(As);function Vs(e){return e._firestoreClient||qs(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function qs(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new fs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new es(e._credentials,e._queue,r)}function Gs(e,t,n){var r=this,i=new tr;return e.asyncQueue.enqueue((function(){return Object(o.b)(r,void 0,void 0,(function(){var r;return Object(o.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,ts(e,n)];case 1:return a.sent(),[4,ns(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===u.FAILED_PRECONDITION||e.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=a.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Ks(e){if(e._initialized||e._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Hs=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new D(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Ws=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(M.fromBase64String(t))}catch(t){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(M.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Zs=function(e){this._methodName=e},Xs=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return w(this._lat,e._lat)||w(this._long,e._long)},e}(),Ys=/^__.*__$/,Qs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new yt(e,this.data,this.fieldMask,t,this.fieldTransforms):new mt(e,this.data,t,this.fieldTransforms)},e}(),$s=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new yt(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function Js(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m()}}var eu=function(){function e(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Vc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Sc",{get:function(){return this.settings.Sc},enumerable:!1,configurable:!0}),e.prototype.Dc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.Cc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Dc({path:n,Nc:!1});return r.xc(e),r},e.prototype.Fc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Dc({path:n,Nc:!1});return r.Vc(),r},e.prototype.kc=function(e){return this.Dc({path:void 0,Nc:!0})},e.prototype.Oc=function(e){return _u(e,this.settings.methodName,this.settings.$c||!1,this.path,this.settings.Mc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Vc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.xc(this.path.get(e))},e.prototype.xc=function(e){if(0===e.length)throw this.Oc("Document fields must not be empty");if(Js(this.Sc)&&Ys.test(e))throw this.Oc('Document fields cannot begin and end with "__"')},e}(),tu=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||la(e)}return e.prototype.Lc=function(e,t,n,r){return void 0===r&&(r=!1),new eu({Sc:e,methodName:t,Mc:n,path:D.emptyPath(),Nc:!1,$c:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function nu(e){var t=e._freezeSettings(),n=la(e._databaseId);return new tu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ru(e,t,n,r,i,a){void 0===a&&(a={});var o=e.Lc(a.merge||a.mergeFields?2:0,t,n,i);mu("Data must be an object, but it was:",o,r);var s,l,h=pu(r,o);if(a.merge)s=new R(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){for(var f=[],d=0,p=a.mergeFields;d<p.length;d++){var v=yu(t,p[d],n);if(!o.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");wu(f,v)||f.push(v)}s=new R(f),l=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,l=o.fieldTransforms;return new Qs(new ae(h),s,l)}var iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Sc)throw 1===e.Sc?e.Oc(this._methodName+"() can only appear at the top level of your update data"):e.Oc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Zs);function au(e,t,n){return new eu({Sc:3,Mc:t.settings.Mc,methodName:e._methodName,Nc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype._toFieldTransform=function(e){return new ot(e.path,new $e)},t.prototype.isEqual=function(e){return e instanceof t},t}(Zs),su=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Bc=n,r}return Object(o.c)(t,e),t.prototype._toFieldTransform=function(e){var t=au(this,e,!0),n=this.Bc.map((function(e){return du(e,t)})),r=new Je(n);return new ot(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Zs),uu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Bc=n,r}return Object(o.c)(t,e),t.prototype._toFieldTransform=function(e){var t=au(this,e,!0),n=this.Bc.map((function(e){return du(e,t)})),r=new tt(n);return new ot(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Zs),cu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).qc=n,r}return Object(o.c)(t,e),t.prototype._toFieldTransform=function(e){var t=new rt(e.R,We(e.R,this.qc));return new ot(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Zs);function lu(e,t,n,i){var a=e.Lc(1,t,n);mu("Data must be an object, but it was:",a,i);var o=[],s=ae.empty();I(i,(function(e,i){var u=bu(t,e,n);i=Object(r.p)(i);var c=a.Fc(u);if(i instanceof iu)o.push(u);else{var l=du(i,c);null!=l&&(o.push(u),s.set(u,l))}}));var u=new R(o);return new $s(s,u,a.fieldTransforms)}function hu(e,t,n,i,a,o){var s=e.Lc(1,t,n),l=[yu(t,i,n)],h=[a];if(o.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<o.length;f+=2)l.push(yu(t,o[f])),h.push(o[f+1]);for(var d=[],p=ae.empty(),v=l.length-1;v>=0;--v)if(!wu(d,l[v])){var m=l[v],y=h[v];y=Object(r.p)(y);var g=s.Fc(m);if(y instanceof iu)d.push(m);else{var b=du(y,g);null!=b&&(d.push(m),p.set(m,b))}}var _=new R(d);return new $s(p,_,s.fieldTransforms)}function fu(e,t,n,r){return void 0===r&&(r=!1),du(n,e.Lc(r?4:3,t))}function du(e,t){if(vu(e=Object(r.p)(e)))return mu("Unsupported field value:",t,e),pu(e,t);if(e instanceof Zs)return function(e,t){if(!Js(t.Sc))throw t.Oc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Oc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nc&&4!==t.Sc)throw t.Oc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,a=e;i<a.length;i++){var o=du(a[i],t.kc(r));null==o&&(o={nullValue:"NULL_VALUE"}),n.push(o),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(r.p)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return We(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=E.fromDate(e);return{timestampValue:tn(t.R,n)}}if(e instanceof E)return n=new E(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:tn(t.R,n)};if(e instanceof Xs)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ws)return{bytesValue:nn(t.R,e._byteString)};if(e instanceof Os){n=t.databaseId;var i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Oc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:on(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Oc("Unsupported field value: "+Ts(e))}(e,t)}function pu(e,t){var n={};return C(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):I(e,(function(e,r){var i=du(r,t.Cc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof E||e instanceof Xs||e instanceof Ws||e instanceof Os||e instanceof Zs)}function mu(e,t,n){if(!vu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ts(n);throw"an object"===r?t.Oc(e+" a custom object"):t.Oc(e+" "+r)}}function yu(e,t,n){if((t=Object(r.p)(t))instanceof Hs)return t._internalPath;if("string"==typeof t)return bu(e,t);throw _u("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var gu=new RegExp("[~\\*/\\[\\]]");function bu(e,t,n){if(t.search(gu)>=0)throw _u("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Hs.bind.apply(Hs,Object(o.f)([void 0],t.split(".")))))._internalPath}catch(r){throw _u("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function _u(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(a||o)&&(l+=" (found",a&&(l+=" in field "+r),o&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+e+l)}function wu(e,t){return e.some((function(e){return e.isEqual(t)}))}var xu=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Os(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new ku(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Eu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),ku=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(xu);function Eu(e,t){return"string"==typeof t?bu(e,t):t instanceof Hs?t._internalPath:t._delegate._internalPath}var Tu=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Su=function(e){function t(t,n,r,i,a,o){var s=this;return(s=e.call(this,t,n,r,i,o)||this)._firestore=t,s._firestoreImpl=t,s.metadata=a,s}return Object(o.c)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Eu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(xu),Iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Su),Cu=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Tu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Iu(n._firestore,n._userDataWriter,r.key,r,new Tu(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Iu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query._converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Iu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Tu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query._converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Au(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function Au(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m()}}function Ou(e,t){return e instanceof Su&&t instanceof Su?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Cu&&t instanceof Cu&&e._firestore===t._firestore&&Ls(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Pu(e){if(De(e)&&0===e.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Du=function(){};function Ru(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var a=i[r];e=a._apply(e)}return e}var Mu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Uc=t,i.Qc=n,i.Kc=r,i.type="where",i}return Object(o.c)(t,e),t.prototype._apply=function(e){var t=nu(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a+"' queries on FieldPath.documentId().");if("in"===a||"not-in"===a){Uu(o,a);for(var l=[],h=0,f=o;h<f.length;h++){var d=f[h];l.push(Bu(r,e,d))}s={arrayValue:{values:l}}}else s=Bu(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Uu(o,a),s=fu(n,"where",o,"in"===a||"not-in"===a);var p=de.create(i,a,s);return function(e,t){if(t.g()){var n=Me(e);if(null!==n&&!n.isEqual(t.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Re(e);null!==r&&Vu(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}(e._query,0,t,e.firestore._databaseId,this.Uc,this.Qc,this.Kc);return new Ps(e.firestore,e._converter,function(e,t){var n=e.filters.concat([t]);return new Ce(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Du),Nu=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Uc=t,r.jc=n,r.type="orderBy",r}return Object(o.c)(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ee(t,n);return function(e,t){if(null===Re(e)){var n=Me(e);null!==n&&Vu(e,n,t.field)}}(e,r),r}(e._query,this.Uc,this.jc);return new Ps(e.firestore,e._converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ce(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Du),Lu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Wc=n,i.Gc=r,i}return Object(o.c)(t,e),t.prototype._apply=function(e){return new Ps(e.firestore,e._converter,Fe(e._query,this.Wc,this.Gc))},t}(Du),ju=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.zc=n,i.Hc=r,i}return Object(o.c)(t,e),t.prototype._apply=function(e){var t=zu(e,this.type,this.zc,this.Hc);return new Ps(e.firestore,e._converter,function(e,t){return new Ce(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Du),Fu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.zc=n,i.Hc=r,i}return Object(o.c)(t,e),t.prototype._apply=function(e){var t=zu(e,this.type,this.zc,this.Hc);return new Ps(e.firestore,e._converter,function(e,t){return new Ce(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Du);function zu(e,t,n,i){if(n[0]=Object(r.p)(n[0]),n[0]instanceof xu)return function(e,t,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var a=[],o=0,s=Le(e);o<s.length;o++){var l=s[o];if(l.field.isKeyField())a.push(J(t,r.key));else{var h=r.data.field(l.field);if(z(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}a.push(h)}}return new xe(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,i);var a=nu(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(o[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Ne(e)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=e.path.child(O.fromString(h));if(!K.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new K(f);s.push(J(t,d))}else{var p=fu(n,r,h);s.push(p)}}return new xe(s,a)}(e._query,e.firestore._databaseId,a,t,n,i)}function Bu(e,t,n){if("string"==typeof(n=Object(r.p)(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ne(t)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=t.path.child(O.fromString(n));if(!K.isDocumentKey(i))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return J(e,new K(i))}if(n instanceof Os)return J(e,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ts(n)+".")}function Uu(e,t){if(!Array.isArray(e)||0===e.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Vu(e,t,n){if(!n.isEqual(t))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var qu=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),H(e)){case 0:return null;case 1:return e.booleanValue;case 2:return j(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(F(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw m()}},e.prototype.convertObject=function(e,t){var n=this,r={};return I(e.fields||{},(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Xs(j(e.latitude),j(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=B(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(U(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=L(e);return new E(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=O.fromString(e);y(Pn(n));var r=new ds(n.get(1),n.get(3)),i=new K(n.popFirst(5));return r.isEqual(t)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function Gu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ku=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(o.c)(t,e),t.prototype.convertBytes=function(e){return new Ws(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,t)},t}(qu),Hu=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nu(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=Wu(e,this._firestore),i=Gu(r._converter,t,n),a=ru(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(a.toMutation(r._key,ut.none())),this},e.prototype.update=function(e,t,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];this._verifyNotCommitted();var o,s=Wu(e,this._firestore);return o="string"==typeof(t=Object(r.p)(t))||t instanceof Hs?hu(this._dataReader,"WriteBatch.update",s._key,t,n,i):lu(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ut.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=Wu(e,this._firestore);return this._mutations=this._mutations.concat(new kt(t._key,ut.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function Wu(e,t){if((e=Object(r.p)(e)).firestore!==t)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Zu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(o.c)(t,e),t.prototype.convertBytes=function(e){return new Ws(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Os(this.firestore,null,t)},t}(qu);function Xu(e,t,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];e=Ss(e,Os);var o=Ss(e.firestore,Us),s=nu(o);return Qu(o,[("string"==typeof(t=Object(r.p)(t))||t instanceof Hs?hu(s,"updateDoc",e._key,t,n,i):lu(s,"updateDoc",e._key,t)).toMutation(e._key,ut.exists(!0))])}function Yu(e){for(var t,n,i,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];e=Object(r.p)(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof a[c]||Fs(a[c])||(u=a[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Fs(a[c])){var p=a[c];a[c]=null===(t=p.next)||void 0===t?void 0:t.bind(p),a[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),a[c+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(e instanceof Os)h=Ss(e.firestore,Us),f=Oe(e._key.path),l={next:function(t){a[c]&&a[c]($u(h,e,t))},error:a[c+1],complete:a[c+2]};else{var v=Ss(e,Ps);h=Ss(v.firestore,Us),f=v._query;var m=new Zu(h);l={next:function(e){a[c]&&a[c](new Cu(h,m,v,e))},error:a[c+1],complete:a[c+2]},Pu(e._query)}return function(e,t,n,r){var i=this,a=new Yo(r),s=new to(t,a,n);return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(i,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return t=Ya,[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))})),function(){a.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(i,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return t=Qa,[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))}))}}(Vs(h),f,d,l)}function Qu(e,t){return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(n,void 0,void 0,(function(){var n;return Object(o.d)(this,(function(i){switch(i.label){case 0:return n=mo,[4,us(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(Vs(e),t)}function $u(e,t,n){var r=n.docs.get(t._key),i=new Zu(e);return new Su(e,i,t._key,r,new Tu(n.hasPendingWrites,n.fromCache),t._converter)}var Ju=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return Object(o.c)(t,e),t.prototype.get=function(t){var n=this,r=Wu(t,this._firestore),i=new Zu(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Su(n._firestore,i,r._key,e._document,new Tu(!1,!1),r._converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=nu(e)}return e.prototype.get=function(e){var t=this,n=Wu(e,this._firestore),r=new Ku(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return m();var i=e[0];if(i.isFoundDocument())return new xu(t._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new xu(t._firestore,r,n._key,null,n._converter);throw m()}))},e.prototype.set=function(e,t,n){var r=Wu(e,this._firestore),i=Gu(r._converter,t,n),a=ru(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,a),this},e.prototype.update=function(e,t,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var o,s=Wu(e,this._firestore);return o="string"==typeof(t=Object(r.p)(t))||t instanceof Hs?hu(this._dataReader,"Transaction.update",s._key,t,n,i):lu(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,o),this},e.prototype.delete=function(e){var t=Wu(e,this._firestore);return this._transaction.delete(t._key),this},e}());function ec(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function tc(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var nc=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return tc(),new e(Ws.fromBase64String(t))},e.fromUint8Array=function(t){return ec(),new e(Ws.fromUint8Array(t))},e.prototype.toBase64=function(){return tc(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return ec(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),rc=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Ks(e=Ss(e,Us));var n=Vs(e),r=e._freezeSettings(),i=new Zo;return Gs(n,i,new Ho(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Ks(e=Ss(e,Us));var t=Vs(e),n=e._freezeSettings(),r=new Zo;return Gs(t,r,new Wo(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new tr;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(o.b)(t,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return ir.yt()?(t=e+"main",[4,ir.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(vi(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),ic=function(){function e(e,t,n){var r=this;this._delegate=t,this.Jc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof ds||(this.Yc=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){e.merge&&delete(e=Object.assign(Object.assign({},this._delegate._getSettings()),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t){!function(e,t,n){var r=(e=Ss(e,As))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==t&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},r),{host:t+":"+n,ssl:!1}))}(this._delegate,e,t)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(o.b)(t,void 0,void 0,(function(){var t,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return[4,as(e)];case 1:return t=r.sent(),[4,ss(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=g(e);return t.$r.delete(0),ga(t)}(n))]}}))}))}))}(Vs(Ss(this._delegate,Us)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(o.b)(t,void 0,void 0,(function(){var t,n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return[4,as(e)];case 1:return t=r.sent(),[4,ss(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return Object(o.b)(this,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return(t=g(e)).$r.add(0),[4,ba(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Vs(Ss(this._delegate,Us)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&xs("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Jc.enableMultiTabIndexedDbPersistence(this):this.Jc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Jc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Yc&&(this.Yc._removeServiceInstance("firestore"),this.Yc._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(t,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(r){switch(r.label){case 0:return t=xo,[4,us(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Vs(Ss(this._delegate,Us)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new Yo(t);return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(n,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return t=function(e,t){g(e).Gr.add(t),t.next()},[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(n,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return t=function(e,t){g(e).Gr.delete(t)},[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(Vs(e=Ss(e,Us)),Fs(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Yc)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Yc},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new bc(this,Rs(this._delegate,e))}catch(e){throw hc(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new lc(this,Ms(this._delegate,e))}catch(e){throw hc(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new mc(this,function(e,t){if(e=Ss(e,As),_s("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ps(e,null,function(e){return new Ce(O.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw hc(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(n,void 0,void 0,(function(){var n;return Object(o.d)(this,(function(i){switch(i.label){case 0:return[4,function(e){return is(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new Jo(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(Vs(e),(function(n){return t(new Ju(e,n))}))}(this._delegate,(function(n){return e(new sc(t,n))}))},e.prototype.batch=function(){var e=this;return Vs(this._delegate),new uc(new Hu(this._delegate,(function(t){return Qu(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),ac=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(o.c)(t,e),t.prototype.convertBytes=function(e){return new nc(new Ws(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return lc.Xc(t,this.firestore,null)},t}(qu);function oc(e){var t;t=e,l.setLogLevel(t)}var sc=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ac(e)}return e.prototype.get=function(e){var t=this,n=_c(e);return this._delegate.get(n).then((function(e){return new pc(t._firestore,new Su(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n._converter))}))},e.prototype.set=function(e,t,n){var r=_c(e);return n?(ws("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=_c(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,Object(o.f)([s,t,n],i)),this},e.prototype.delete=function(e){var t=_c(e);return this._delegate.delete(t),this},e}(),uc=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=_c(e);return n?(ws("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var s=_c(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,Object(o.f)([s,t,n],i)),this},e.prototype.delete=function(e){var t=_c(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),cc=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new Iu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vc(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.Zc=function(t,n){var r=e.tu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new ac(t),n),i.set(n,a)),a},e}();cc.tu=new WeakMap;var lc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ac(e)}return e.eu=function(t,n,r){if(t.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Os(n._delegate,r,new K(t)))},e.Xc=function(t,n,r){return new e(n,new Os(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new bc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new bc(this.firestore,Rs(this._delegate,e))}catch(e){throw hc(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=Object(r.p)(e))instanceof Os&&Ns(this._delegate,e)},e.prototype.set=function(e,t){t=ws("DocumentReference.set",t);try{return function(e,t,n){e=Ss(e,Os);var r=Ss(e.firestore,Us),i=Gu(e._converter,t,n);return Qu(r,[ru(nu(r),"setDoc",e._key,i,null!==e._converter,n).toMutation(e._key,ut.none())])}(this._delegate,e,t)}catch(e){throw hc(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Xu(this._delegate,e):Xu.apply(void 0,Object(o.f)([this._delegate,e,t],n))}catch(e){throw hc(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Qu(Ss((e=this._delegate).firestore,Us),[new kt(e._key,ut.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fc(t),i=dc(t,(function(t){return new pc(e.firestore,new Su(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}));return Yu(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Ss(e,Os);var t=Ss(e.firestore,Us),n=Vs(t),r=new Zu(t);return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(n,void 0,void 0,(function(){var n;return Object(o.d)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i;return Object(o.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(e,t){var n=g(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(i=a.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=a.sent(),i=Ga(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,os(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Su(t,r,e._key,n,new Tu(null!==n&&n.hasLocalMutations,!0),e._converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Ss(e,Os);var t=Ss(e.firestore,Us);return ls(Vs(t),e._key,{source:"server"}).then((function(n){return $u(t,e,n)}))}(this._delegate):function(e){e=Ss(e,Os);var t=Ss(e.firestore,Us);return ls(Vs(t),e._key).then((function(n){return $u(t,e,n)}))}(this._delegate)).then((function(e){return new pc(t.firestore,new Su(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(cc.Zc(this.firestore,t)):this._delegate.withConverter(null))},e}();function hc(e,t,n){return e.message=e.message.replace(t,n),e}function fc(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!Fs(r))return r}return{}}function dc(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Fs(e[0])?e[0]:Fs(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new lc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return Ou(this._delegate,e._delegate)},e}(),vc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(pc),mc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ac(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ru(this._delegate,function(e,t,n){var r=t,i=Eu("where",e);return new Mu(i,r,n)}(t,n,r)))}catch(t){throw hc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ru(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Eu("orderBy",e);return new Nu(r,n)}(t,n)))}catch(t){throw hc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ru(this._delegate,function(e){return Is("limit",e),new Lu("limit",e,"F")}(t)))}catch(t){throw hc(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ru(this._delegate,function(e){return Is("limitToLast",e),new Lu("limitToLast",e,"L")}(t)))}catch(t){throw hc(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ju("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw hc(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new ju("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw hc(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Fu("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw hc(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Fu("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw hc(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Ls(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Ss(e,Ps);var t=Ss(e.firestore,Us),n=Vs(t),r=new Zu(t);return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(n,void 0,void 0,(function(){var n;return Object(o.d)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return Object(o.b)(this,void 0,void 0,(function(){var r,i,a,s,u;return Object(o.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Oi(e,t,!0)];case 1:return u=o.sent(),r=new uo(t,u.Bn),i=r._o(u.documents),a=r.applyChanges(i,!1),n.resolve(a.snapshot),[3,3];case 2:return s=o.sent(),u=Ga(s,"Failed to execute query '"+t+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,os(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new Cu(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Ss(e,Ps);var t=Ss(e.firestore,Us),n=Vs(t),r=new Zu(t);return hs(n,e._query,{source:"server"}).then((function(n){return new Cu(t,r,e,n)}))}(this._delegate):function(e){e=Ss(e,Ps);var t=Ss(e.firestore,Us),n=Vs(t),r=new Zu(t);return Pu(e._query),hs(n,e._query).then((function(n){return new Cu(t,r,e,n)}))}(this._delegate)).then((function(e){return new gc(t.firestore,new Cu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fc(t),i=dc(t,(function(t){return new gc(e.firestore,new Cu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Yu(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(cc.Zc(this.firestore,t)):this._delegate.withConverter(null))},e}(),yc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new vc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),gc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new mc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new vc(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new yc(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new vc(n._firestore,r))}))},e.prototype.isEqual=function(e){return Ou(this._delegate,e._delegate)},e}(),bc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return Object(o.c)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new lc(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new lc(this.firestore,void 0===e?Ms(this._delegate):Ms(this._delegate,e))}catch(e){throw hc(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Ss(e.firestore,Us),r=Ms(e),i=Gu(e._converter,t);return Qu(n,[ru(nu(e.firestore),"addDoc",r._key,i,null!==e._converter,{}).toMutation(r._key,ut.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new lc(t.firestore,e)}))},t.prototype.isEqual=function(e){return Ns(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(cc.Zc(this.firestore,e)):this._delegate.withConverter(null))},t}(mc);function _c(e){return Ss(e,Os)}var wc=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Hs.bind.apply(Hs,Object(o.f)([void 0],e)))}return e.documentId=function(){return new e(D.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=Object(r.p)(e))instanceof Hs&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),xc=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new ou("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new iu("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new su("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new uu("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new cu("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();function kc(e){return function(e,t){var n=Vs(e=Ss(e,Us)),r=new zs;return function(e,t,n,r){var i=this,a=function(e,t){return function(e,t){return new Qo(e,t)}(function(e,t){if(e instanceof Uint8Array)return Xo(e,t);if(e instanceof ArrayBuffer)return Xo(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,la(t));e.asyncQueue.enqueueAndForget((function(){return Object(o.b)(i,void 0,void 0,(function(){var t;return Object(o.d)(this,(function(n){switch(n.label){case 0:return t=Go,[4,us(e)];case 1:return t.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(n,e._databaseId,t,r),r}(this._delegate,e)}function Ec(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return Object(o.b)(n,void 0,void 0,(function(){var n;return Object(o.d)(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=g(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qe.getNamedQuery(e,t)}))},[4,os(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(Vs(t=Ss(t,Us)),n).then((function(e){return e?new Ps(t,null,e.query):null}))).then((function(e){return e?new mc(r,e):null}))}}).call(this,n(53))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a}));var r,i,a=n(4),o=(n(52),n(87),n(1)),s=n(10),u=(n(16),n(13)),c=n(11),l={Firestore:u.a,GeoPoint:u.r,Timestamp:u.l,Blob:u.s,Transaction:u.b,WriteBatch:u.o,DocumentReference:u.g,DocumentSnapshot:u.c,Query:u.d,QueryDocumentSnapshot:u.t,QuerySnapshot:u.i,CollectionReference:u.h,FieldPath:u.q,FieldValue:u.k,setLogLevel:u.e,CACHE_SIZE_UNLIMITED:u.j};(function(e,t){e.INTERNAL.registerComponent(new c.a("firestore",(function(e){return function(e,t){return new u.a(e,new u.m(e,t),new u.f)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},l)))})(r=a.a),r.registerVersion("@firebase/firestore","2.2.2"),(i=u.a).prototype.loadBundle=u.n,i.prototype.namedQuery=u.p;var h=n(0),f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=function(e){function t(n,r,i){var a=e.call(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a.code=n,a.details=i,a}return Object(h.c)(t,e),t}(Error);var p=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(r){return[2,void 0]}return[2]}))}))},e.prototype.getContext=function(){return Object(h.b)(this,void 0,void 0,(function(){var e,t;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function v(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var m=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return v(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?v(e,(function(e){return t.decode(e)})):e},e}();var y=function(){function e(e,t,n,i,a){var o=this;void 0===i&&(i="us-central1"),this.app_=e,this.fetchImpl=a,this.serializer=new m,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new p(t,n),this.cancelAllRequests=new Promise((function(e){o.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(r){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:n["Content-Type"]="application/json",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=a.sent(),[3,4];case 3:return a.sent(),[2,{status:0,json:null}];case 4:i=null,a.label=5;case 5:return a.trys.push([5,7,,8]),[4,r.json()];case 6:return i=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},e.prototype.call=function(e,t,n){return Object(h.b)(this,void 0,void 0,(function(){var i,a,o,s,u,c,l,p,v,m,y;return Object(h.d)(this,(function(h){switch(h.label){case 0:return i=this._url(e),t=this.serializer.encode(t),a={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(s=h.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=n.timeout||7e4,c=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new d("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(u),l=c.timer,p=c.promise,[4,Promise.race([g(l,this.postJSON(i,a,o)),p,g(l,this.cancelAllRequests)])];case 2:if(!(v=h.sent()))throw new d("cancelled","Firebase Functions instance was deleted.");if(m=function(e,t,n){var i=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),a=i,o=void 0;try{var s=t&&t.error;if(s){var u=s.status;if("string"===typeof u){if(!f[u])return new d("internal","internal");i=f[u],a=u}var c=s.message;"string"===typeof c&&(a=c),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(r){}return"ok"===i?null:new d(i,a,o)}(v.status,v.json,this.serializer))throw m;if(!v.json)throw new d("internal","Response is not valid JSON object.");if("undefined"===typeof(y=v.json.data)&&(y=v.json.result),"undefined"===typeof y)throw new d("internal","Response is missing data field.");return[2,{data:this.serializer.decode(y)}]}}))}))},e}();function g(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}!function(e,t){var n={Functions:y};e.INTERNAL.registerComponent(new c.a("functions",(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),o=e.getProvider("messaging");return new y(i,a,o,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(a.a,fetch.bind(self)),a.a.registerVersion("@firebase/functions","0.6.5");var b,_=n(27),w="0.4.23",x=1e4,k="w:0.4.23",E="FIS_v2",T=36e5,S=((b={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',b["not-registered"]="Firebase Installation is not registered.",b["installation-not-found"]="Firebase Installation not found.",b["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',b["app-offline"]="Could not process request. Application offline.",b["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",b),I=new o.b("installations","Installations",S);function C(e){return e instanceof o.c&&e.code.includes("request-failed")}function A(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function O(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function P(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,I.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function D(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function R(e,t){var n=t.refreshToken,r=D(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function M(e){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function N(e,t){var n=t.fid;return Object(h.b)(this,void 0,void 0,(function(){var t,r,i,a,o,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return t=A(e),r=D(e),i={fid:n,authVersion:E,appId:e.appId,sdkVersion:k},a={method:"POST",headers:r,body:JSON.stringify(i)},[4,M((function(){return fetch(t,a)}))];case 1:return(o=u.sent()).ok?[4,o.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:O(s.authToken)}];case 3:return[4,P("Create Installation",o)];case 4:throw u.sent()}}))}))}function L(e){return new Promise((function(t){setTimeout(t,e)}))}var j=/^[cdef][\w-]{21}$/;function F(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(h.f)([],Object(h.e)(t)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return j.test(t)?t:""}catch(n){return""}}function z(e){return e.appName+"!"+e.appId}var B=new Map;function U(e,t){var n=z(e);V(n,t),function(e,t){var n=G();n&&n.postMessage({key:e,fid:t});K()}(n,t)}function V(e,t){var n,r,i=B.get(e);if(i)try{for(var a=Object(h.g)(i),o=a.next();!o.done;o=a.next()){(0,o.value)(t)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var q=null;function G(){return!q&&"BroadcastChannel"in self&&((q=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){V(e.data.key,e.data.fid)}),q}function K(){0===B.size&&q&&(q.close(),q=null)}var H,W,Z="firebase-installations-store",X=null;function Y(){return X||(X=Object(_.openDb)("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(Z)}}))),X}function Q(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a,o;return Object(h.d)(this,(function(s){switch(s.label){case 0:return n=z(e),[4,Y()];case 1:return r=s.sent(),i=r.transaction(Z,"readwrite"),[4,(a=i.objectStore(Z)).get(n)];case 2:return o=s.sent(),[4,a.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),o&&o.fid===t.fid||U(e,t.fid),[2,t]}}))}))}function $(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return t=z(e),[4,Y()];case 1:return n=i.sent(),[4,(r=n.transaction(Z,"readwrite")).objectStore(Z).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function J(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a,o,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return n=z(e),[4,Y()];case 1:return r=u.sent(),i=r.transaction(Z,"readwrite"),[4,(a=i.objectStore(Z)).get(n)];case 2:return o=u.sent(),void 0!==(s=t(o))?[3,4]:[4,a.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,a.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||o&&o.fid===s.fid||U(e,s.fid),[2,s]}}))}))}function ee(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,J(e,(function(n){var r=function(e){return re(e||{fid:F(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(I.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,N(e,t)];case 1:return n=i.sent(),[2,Q(e,n)];case 2:return C(r=i.sent())&&409===r.customData.serverCode?[4,$(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Q(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:te(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function te(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return[4,ne(e)];case 1:t=a.sent(),a.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,L(100)];case 3:return a.sent(),[4,ne(e)];case 4:return t=a.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,ee(e)];case 6:return n=a.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function ne(e){return J(e,(function(e){if(!e)throw I.create("installation-not-found");return re(e)}))}function re(e){return 1===(t=e).registrationStatus&&t.registrationTime+x<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function ie(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(h.b)(this,void 0,void 0,(function(){var e,i,a,o,s,u,c;return Object(h.d)(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return A(e)+"/"+n+"/authTokens:generate"}(n,t),i=R(n,t),(a=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",a.getPlatformInfoString()),o={installation:{sdkVersion:k}},s={method:"POST",headers:i,body:JSON.stringify(o)},[4,M((function(){return fetch(e,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,O(c)];case 3:return[4,P("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function ae(e,t){return void 0===t&&(t=!1),Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return[4,J(e.appConfig,(function(r){if(!se(r))throw I.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+T}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,oe(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,L(100)];case 3:return i.sent(),[4,oe(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ae(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw I.create("app-offline");var a=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(h.a)(Object(h.a)({},e),{authToken:t})}(r);return n=function(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,8]),[4,ie(e,t)];case 1:return n=a.sent(),i=Object(h.a)(Object(h.a)({},t),{authToken:n}),[4,Q(e.appConfig,i)];case 2:return a.sent(),[2,n];case 3:return!C(r=a.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,$(e.appConfig)];case 4:return a.sent(),[3,7];case 5:return i=Object(h.a)(Object(h.a)({},t),{authToken:{requestStatus:0}}),[4,Q(e.appConfig,i)];case 6:a.sent(),a.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,a),a}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return i=a.sent(),[3,4];case 3:i=r.authToken,a.label=4;case 4:return[2,i]}}))}))}function oe(e){return J(e,(function(e){if(!se(e))throw I.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+x<Date.now()?Object(h.a)(Object(h.a)({},e),{authToken:{requestStatus:0}}):e}))}function se(e){return void 0!==e&&2===e.registrationStatus}function ue(e){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,ee(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function ce(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a;return Object(h.d)(this,(function(o){switch(o.label){case 0:return n=function(e,t){var n=t.fid;return A(e)+"/"+n}(e,t),r=R(e,t),i={method:"DELETE",headers:r},[4,M((function(){return fetch(n,i)}))];case 1:return(a=o.sent()).ok?[3,3]:[4,P("Delete Installation",a)];case 2:throw o.sent();case 3:return[2]}}))}))}function le(e,t){var n=e.appConfig;return function(e,t){G();var n=z(e),r=B.get(n);r||(r=new Set,B.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=z(e),r=B.get(n);r&&(r.delete(t),0===r.size&&B.delete(n),K())}(n,t)}}function he(e){return I.create("missing-app-config-values",{valueName:e})}(H=a.a).INTERNAL.registerComponent(new c.a("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw he("App Configuration");if(!e.name)throw he("App Name");try{for(var r=Object(h.g)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var a=i.value;if(!e.options[a])throw he(a)}}catch(o){t={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,ee(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):ae(e).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,ue(e.appConfig)];case 1:return n.sent(),[4,ae(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,J(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw I.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw I.create("app-offline");case 3:return[4,ce(t,n)];case 4:return r.sent(),[4,$(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return le(n,e)}}}),"PUBLIC")),H.registerVersion("@firebase/installations",w);var fe,de=((W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["only-available-in-window"]="This method is available in a Window context.",W["only-available-in-sw"]="This method is available in a service worker context.",W["permission-default"]="The notification permission was not granted and dismissed instead.",W["permission-blocked"]="The notification permission was not granted and blocked instead.",W["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",W["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",W["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",W["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",W["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",W["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",W["token-update-no-token"]="FCM returned no token when updating the user to push.",W["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",W["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",W["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",W["invalid-vapid-key"]="The public VAPID key must be a string.",W["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",W),pe=new o.b("messaging","Messaging",de),ve="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",me="google.c.a.c_id";function ye(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(h.f)([],Object(h.e)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ge(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(fe||(fe={}));var be="fcm_token_details_db",_e="fcm_token_object_Store";function we(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map((function(e){return e.name})).includes(be))return[2,null];i.label=2;case 2:return n=null,[4,Object(_.openDb)(be,5,(function(t){return Object(h.b)(r,void 0,void 0,(function(){var r,i,a,o;return Object(h.d)(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(_e)?[4,(r=t.transaction.objectStore(_e)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(a=i).auth||!a.p256dh||!a.endpoint)return[2];n={token:a.fcmToken,createTime:null!==(o=a.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:"string"===typeof a.vapidKey?a.vapidKey:ye(a.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(n={token:(a=i).fcmToken,createTime:a.createTime,subscriptionOptions:{auth:ye(a.auth),p256dh:ye(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:ye(a.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Object(_.deleteDb)(be)];case 4:return i.sent(),[4,Object(_.deleteDb)("fcm_vapid_details_db")];case 5:return i.sent(),[4,Object(_.deleteDb)("undefined")];case 6:return i.sent(),[2,xe(n)?n:null]}}))}))}function xe(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var ke="firebase-messaging-store",Ee=null;function Te(){return Ee||(Ee=Object(_.openDb)("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(ke)}}))),Ee}function Se(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return t=Ae(e),[4,Te()];case 1:return[4,i.sent().transaction(ke).objectStore(ke).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,we(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,Ie(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Ie(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return n=Ae(e),[4,Te()];case 1:return r=a.sent(),[4,(i=r.transaction(ke,"readwrite")).objectStore(ke).put(t,n)];case 2:return a.sent(),[4,i.complete];case 3:return a.sent(),[2,t]}}))}))}function Ce(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return t=Ae(e),[4,Te()];case 1:return n=i.sent(),[4,(r=n.transaction(ke,"readwrite")).objectStore(ke).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ae(e){return e.appConfig.appId}function Oe(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a,o,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,Me(e)];case 1:n=u.sent(),r=Ne(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Re(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return a=u.sent(),[3,6];case 5:throw o=u.sent(),pe.create("token-subscribe-failed",{errorInfo:o});case 6:if(a.error)throw s=a.error.message,pe.create("token-subscribe-failed",{errorInfo:s});if(!a.token)throw pe.create("token-subscribe-no-token");return[2,a.token]}}))}))}function Pe(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a,o,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,Me(e)];case 1:n=u.sent(),r=Ne(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Re(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return a=u.sent(),[3,6];case 5:throw o=u.sent(),pe.create("token-update-failed",{errorInfo:o});case 6:if(a.error)throw s=a.error.message,pe.create("token-update-failed",{errorInfo:s});if(!a.token)throw pe.create("token-update-no-token");return[2,a.token]}}))}))}function De(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a,o;return Object(h.d)(this,(function(s){switch(s.label){case 0:return[4,Me(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Re(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw a=i.error.message,pe.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw o=s.sent(),pe.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))}function Re(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function Me(e){var t=e.appConfig,n=e.installations;return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function Ne(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,a={web:{endpoint:r,auth:n,p256dh:t}};return i!==ve&&(a.web.applicationPubKey=i),a}function Le(e,t,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,a,o;return Object(h.d)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw pe.create("permission-blocked");return[4,Be(t,n)];case 1:return r=s.sent(),[4,Se(e)];case 2:return i=s.sent(),a={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:ye(r.getKey("auth")),p256dh:ye(r.getKey("p256dh"))},i?[3,3]:[2,ze(e,a)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,a=t.p256dh===e.p256dh;return n&&r&&i&&a}(i.subscriptionOptions,a))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,De(e,i.token)];case 5:return s.sent(),[3,7];case 6:return o=s.sent(),console.warn(o),[3,7];case 7:return[2,ze(e,a)];case 8:return Date.now()>=i.createTime+6048e5?[2,Fe({token:i.token,createTime:Date.now(),subscriptionOptions:a},e,t)]:[2,i.token];case 9:return[2]}}))}))}function je(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,Se(e)];case 1:return(n=i.sent())?[4,De(e,n.token)]:[3,4];case 2:return i.sent(),[4,Ce(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Fe(e,t,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,a;return Object(h.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,5]),[4,Pe(t,e)];case 1:return r=o.sent(),i=Object(h.a)(Object(h.a)({},e),{token:r,createTime:Date.now()}),[4,Ie(t,i)];case 2:return o.sent(),[2,r];case 3:return a=o.sent(),[4,je(t,n)];case 4:throw o.sent(),a;case 5:return[2]}}))}))}function ze(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,Oe(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Ie(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Be(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ge(t)})]}}))}))}function Ue(e){return"object"===typeof e&&!!e&&me in e}function Ve(e){return new Promise((function(t){setTimeout(t,e)}))}var qe=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw pe.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Se(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:ve,r.label=2;case 2:return[2,Le(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return je(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw pe.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw pe.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw pe.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw pe.create("only-available-in-window")},e.prototype.onMessage=function(){throw pe.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw pe.create("only-available-in-window")},e.prototype.onPush=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,We()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=a.sent())?[2,He(n,t)]:(r=!1,t.notification?[4,Ze(Ge(t))]:[3,3]);case 2:a.sent(),r=!0,a.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,Ve(1e3)]);case 4:return a.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return Object(h.b)(this,void 0,void 0,(function(){var r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,je(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Se(this.firebaseDependencies)];case 3:return r=i.sent(),[4,je(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Le(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:ve)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return Object(h.b)(this,void 0,void 0,(function(){var r,i,a,o,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Ue(e.data)?self.location.origin:null}(r))?(a=new URL(i,self.location.href),o=new URL(self.location.origin),a.host!==o.host?[2]:[4,Ke(a)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,Ve(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=fe.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function Ge(e){var t,n=Object(h.a)({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function Ke(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r,i,a,o,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,We()];case 1:t=u.sent();try{for(n=Object(h.g)(t),r=n.next();!r.done;r=n.next())if(i=r.value,a=new URL(i.url,self.location.href),e.host===a.host)return[2,i]}catch(c){o={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return[2,null]}}))}))}function He(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=fe.PUSH_RECEIVED;try{for(var i=Object(h.g)(e),a=i.next();!a.done;a=i.next()){a.value.postMessage(t)}}catch(o){n={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function We(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Ze(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var Xe=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===fe.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),Ue(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw pe.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Le(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=ve),[2]}))}))},e.prototype.updateSwReg=function(e){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw pe.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return Object(h.b)(this,void 0,void 0,(function(){var e,t;return Object(h.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),pe.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,je(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?pe.create("permission-blocked"):pe.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw pe.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw pe.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw pe.create("invalid-sw-registration");if(this.swRegistration)throw pe.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw pe.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw pe.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case fe.NOTIFICATION_CLICKED:return"notification_open";case fe.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function Ye(e){return pe.create("missing-app-config-values",{valueName:e})}var Qe={isSupported:$e};function $e(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}a.a.INTERNAL.registerComponent(new c.a("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw Ye("App Configuration Object");if(!e.name)throw Ye("App Name");var r=e.options;try{for(var i=Object(h.g)(["projectId","apiKey","appId","messagingSenderId"]),a=i.next();!a.done;a=i.next()){var o=a.value;if(!r[o])throw Ye(o)}}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!$e())throw pe.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new qe(n):new Xe(n)}),"PUBLIC").setServiceProps(Qe));var Je="firebasestorage.googleapis.com",et=function(e){function t(n,r){var i=e.call(this,tt(n),"Firebase Storage: "+r+" ("+tt(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,t.prototype),i}return Object(h.c)(t,e),t.prototype._codeEquals=function(e){return tt(e)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e},enumerable:!1,configurable:!0}),t}(o.c);function tt(e){return"storage/"+e}function nt(){return new et("unknown","An unknown error occurred, please check the error payload for server response.")}function rt(){return new et("canceled","User canceled the upload/download.")}function it(){return new et("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function at(e){return new et("invalid-argument",e)}function ot(){return new et("app-deleted","The Firebase app was deleted.")}function st(e){return new et("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ut(e,t){return new et("invalid-format","String does not match format '"+e+"': "+t)}function ct(e){throw new et("internal-error","Internal error: "+e)}var lt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ht=function(e,t){this.data=e,this.contentType=t||null};function ft(e,t){switch(e){case lt.RAW:return new ht(dt(t));case lt.BASE64:case lt.BASE64URL:return new ht(pt(e,t));case lt.DATA_URL:return new ht(function(e){var t=new vt(e);return t.base64?pt(lt.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(r){throw ut(lt.DATA_URL,"Malformed data URL.")}return dt(t)}(t.rest)}(t),new vt(t).contentType)}throw nt()}function dt(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function pt(e,t){switch(e){case lt.BASE64:var n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i)throw ut(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case lt.BASE64URL:var a=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(a||o)throw ut(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(r){throw ut(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var vt=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw ut(lt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i};var mt,yt={STATE_CHANGED:"state_changed"},gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bt(e){switch(e){case"running":case"pausing":case"canceling":return gt.RUNNING;case"paused":return gt.PAUSED;case"success":return gt.SUCCESS;case"canceled":return gt.CANCELED;case"error":default:return gt.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(mt||(mt={}));var _t=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=mt.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=mt.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=mt.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw ct("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw ct("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw ct("cannot .getStatus() before sending");try{return this.xhr_.status}catch(r){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw ct("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),wt=function(){function e(){}return e.prototype.createXhrIo=function(){return new _t},e}(),xt=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new et("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var o=Je.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){var h=l[c.indices.bucket],f=l[c.indices.path];f||(f=""),n=new e(h,f),c.postModify(n);break}}if(null==n)throw function(e){return new et("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}(),kt=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function Et(e){return"string"===typeof e||e instanceof String}function Tt(e){return St()&&e instanceof Blob}function St(){return"undefined"!==typeof Blob}function It(e,t,n,r){if(r<t)throw at("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw at("Invalid value for '"+e+"'. Expected "+n+" or less.")}function Ct(e){return"https://"+Je+"/v0"+e}function At(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}var Ot=function(){function e(e,t,n,r,i,a,o,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=o,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var i,a=e.resolve_,o=e.reject_,s=n.xhr;if(n.wasSuccessCode)try{var u=e.callback_(s,s.getResponseText());void 0!==u?a(u):a()}catch(r){o(r)}else null!==s?((i=nt()).serverResponse=s.getResponseText(),e.errorCallback_?o(e.errorCallback_(s,i)):o(i)):n.canceled?o(i=e.appDelete_?ot():rt()):o(i=new et("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Pt(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=!1,o=0;function s(){return 2===o}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(f,s())}),t)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)c.call.apply(c,Object(h.f)([null,e],t));else{var i;s()||a?c.call.apply(c,Object(h.f)([null,e],t)):(r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),l(i))}}var d=!1;function p(e){d||(d=!0,u||(null!==i?(e||(o=2),clearTimeout(i),l(0)):e||(o=1)))}return l(0),setTimeout((function(){a=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Pt(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===mt.NO_ERROR,a=n.getStatus();if(r&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Pt(o,n))}else{var s=n.getErrorCode()===mt.ABORT;t(!1,new Pt(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),Pt=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function Dt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Rt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Dt();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(St())return new Blob(e);throw new et("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Mt=function(){function e(e,t){var n=0,r="";Tt(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Tt(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(St()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(Rt.apply(null,r))}var i=t.map((function(e){return Et(e)?ft(lt.RAW,e).data:e.data_})),a=0;i.forEach((function(e){a+=e.byteLength}));var o=new Uint8Array(a),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)o[s++]=e[t]})),new e(o,!0)},e.prototype.uploadData=function(){return this.data_},e}();function Nt(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t}function Lt(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function jt(e,t){return t}var Ft=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||jt},zt=null;function Bt(){if(zt)return zt;var e=[];e.push(new Ft("bucket")),e.push(new Ft("generation")),e.push(new Ft("metageneration")),e.push(new Ft("name","fullPath",!0));var t=new Ft("name");t.xform=function(e,t){return function(e){return!Et(e)||e.length<2?e:Lt(e)}(t)},e.push(t);var n=new Ft("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ft("timeCreated")),e.push(new Ft("updated")),e.push(new Ft("md5Hash",null,!0)),e.push(new Ft("cacheControl",null,!0)),e.push(new Ft("contentDisposition",null,!0)),e.push(new Ft("contentEncoding",null,!0)),e.push(new Ft("contentLanguage",null,!0)),e.push(new Ft("contentType",null,!0)),e.push(new Ft("metadata","customMetadata",!0)),zt=e}function Ut(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new xt(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Vt(e,t,n){var r=Nt(t);return null===r?null:Ut(e,r,n)}function qt(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Gt(e,t,n){var r=Nt(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,a=n.prefixes;i<a.length;i++){var o=a[i].replace(/\/$/,""),s=e._makeStorageReference(new xt(t,o));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=e._makeStorageReference(new xt(t,l.name)),r.items.push(s)}return r}(e,t,r)}var Kt=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Ht(e){if(!e)throw nt()}function Wt(e,t){return function(n,r){var i=Vt(e,r,t);return Ht(null!==i),i}}function Zt(e,t){return function(n,r){var i=Vt(e,r,t);return Ht(null!==i),function(e,t){var n=Nt(t);if(null===n)return null;if(!Et(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.bucket,r=e.fullPath;return Ct("/b/"+i(n)+"/o/"+i(r))+At({alt:"media",token:t})}))[0]}(i,r)}}function Xt(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=new et("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new et("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new et("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Yt(e){var t=Xt(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new et("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Qt(e,t,n){var r=Ct(t.fullServerUrl()),i=e.maxOperationRetryTime,a=new Kt(r,"GET",Wt(e,n),i);return a.errorHandler=Yt(t),a}function $t(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Ct(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime,u=new Kt(o,"GET",function(e,t){return function(n,r){var i=Gt(e,t,r);return Ht(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Xt(t),u}function Jt(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var en=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function tn(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ht(!1)}return Ht(!!n&&-1!==(t||["active"]).indexOf(n)),n}var nn=262144;function rn(e,t,n,r,i,a,o,s){var u=new en(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new et("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,f);if(null===p)throw it();var v=t.maxUploadRetryTime,m=new Kt(n,"POST",(function(e,n){var i,o=tn(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?Wt(t,a)(e,n):null,new en(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Xt(e),m}var an=function(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};function on(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var sn=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Bt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;this._ref.storage._getAuthToken().then((function(n){switch(t._state){case"running":e(n);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,i,a){var o=t.bucketOnlyServerUrl(),s=Jt(t,i,a),u={name:s.fullPath},c=Ct(o),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=qt(s,n),f=e.maxUploadRetryTime,d=new Kt(c,"POST",(function(e){var t;tn(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(r){Ht(!1)}return Ht(Et(t)),t}),f);return d.urlParams=u,d.headers=l,d.body=h,d.errorHandler=Xt(t),d}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(n,t);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n){var i=function(e,t,n,i){var a=e.maxUploadRetryTime,o=new Kt(n,"POST",(function(e){var t=tn(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(r){Ht(!1)}n||Ht(!1);var a=Number(n);return Ht(!isNaN(a)),new en(a,i.size(),"final"===t)}),a);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Xt(t),o}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,n);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=nn*this._chunkMultiplier,n=new en(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((function(a){var o;try{o=rn(e._ref._location,e._ref.storage,i,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(r){return e._error=r,void e._transition("error")}var s=e._ref.storage._makeRequest(o,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){nn*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t){var n=Qt(e._ref.storage,e._ref._location,e._mappings),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Jt(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qt(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Mt.getBlob(c,r,l);if(null===h)throw it();var f={name:u.fullPath},d=Ct(a),p=e.maxUploadRetryTime,v=new Kt(d,"POST",Wt(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=Xt(t),v}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=rt(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=bt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,a=new an(t,n,r);return this._addObserver(a),function(){i._removeObserver(a)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(bt(this._state)){case gt.SUCCESS:on(this._resolve.bind(null,this.snapshot))();break;case gt.CANCELED:case gt.ERROR:on(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(bt(this._state)){case gt.RUNNING:case gt.PAUSED:e.next&&on(e.next.bind(e,this.snapshot))();break;case gt.SUCCESS:e.complete&&on(e.complete.bind(e))();break;case gt.CANCELED:case gt.ERROR:e.error&&on(e.error.bind(e,this._error))();break;default:e.error&&on(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),un=function(){function e(e,t){this._service=e,this._location=t instanceof xt?t:xt.makeFromUrl(t)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new xt(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Lt(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new xt(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw st(e)},e}();function cn(e){var t={prefixes:[],items:[]};return ln(e,t).then((function(){return t}))}function ln(e,t,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,a;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,hn(e,{pageToken:n})];case 1:return r=o.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(a=t.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,ln(e,t,r.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function hn(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return null!=t&&"number"===typeof t.maxResults&&It("options.maxResults",1,1e3,t.maxResults),[4,e.storage._getAuthToken()];case 1:return n=a.sent(),r=t||{},i=$t(e.storage,e._location,"/",r.pageToken,r.maxResults),[2,e.storage._makeRequest(i,n).getPromise()]}}))}))}function fn(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage._getAuthToken()];case 1:return n=i.sent(),r=function(e,t,n,r){var i=Ct(t.fullServerUrl()),a=qt(n,r),o=e.maxOperationRetryTime,s=new Kt(i,"PATCH",Wt(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=Yt(t),s}(e.storage,e._location,t,Bt()),[2,e.storage._makeRequest(r,n).getPromise()]}}))}))}function dn(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t,n){var r=Ct(t.fullServerUrl()),i=e.maxOperationRetryTime,a=new Kt(r,"GET",Zt(e,n),i);return a.errorHandler=Yt(t),a}(e.storage,e._location,Bt()),[2,e.storage._makeRequest(n,t).getPromise().then((function(e){if(null===e)throw new et("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function pn(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t){var n=Ct(t.fullServerUrl()),r=e.maxOperationRetryTime,i=new Kt(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Yt(t),i}(e.storage,e._location),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}function vn(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new xt(e._location.bucket,n);return new un(e.storage,r)}function mn(e){return/^[A-Za-z]+:\/\//.test(e)}function yn(e,t){if(e instanceof bn){var n=e;if(null==n._bucket)throw new et("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new un(n,n._bucket);return null!=t?yn(r,t):r}if(void 0!==t){if(t.includes(".."))throw at('`path` param cannot contain ".."');return vn(e,t)}return e}function gn(e,t){if(t&&mn(t)){if(e instanceof bn)return new un(e,t);throw at("To use ref(service, url), the first argument must be a Storage instance.")}return yn(e,t)}var bn=function(){function e(e,t,n,r,i){this.app=e,this._authProvider=t,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?xt.makeFromBucketSpec(r):function(e){var t=null===e||void 0===e?void 0:e.storageBucket;return null==t?null:xt.makeFromBucketSpec(t)}(this.app.options)}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){It("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){It("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return Object(h.b)(this,void 0,void 0,(function(){var e,t;return Object(h.d)(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new un(this,e)},e.prototype._makeRequest=function(e,t){var n=this;if(this._deleted)return new kt(ot());var r=function(e,t,n,r,i){var a=At(e.urlParams),o=e.url+a,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,i),new Ot(o,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,t,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},e}();function _n(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new sn(e,new Mt(t),n)}(e,t,n)}function wn(e){return function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=Qt(e.storage,e._location,Bt()),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}(e)}function xn(e,t){return gn(e,t)}var kn=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),En=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new kn(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new kn(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new kn(e,i,i._ref))}:{next:t.next?function(e){return t.next(new kn(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)},e}(),Tn=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Sn(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Sn(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Sn=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return vn(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new En(_n(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=lt.RAW),this._throwIfRoot("putString");var r=ft(t,e),i=Object(h.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new En(new sn(this._delegate,new Mt(r.data,!0),i),this)},e.prototype.listAll=function(){var e,t=this;return(e=this._delegate,cn(e)).then((function(e){return new Tn(e,t.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return hn(e,t)}(this._delegate,e||void 0).then((function(e){return new Tn(e,t.storage)}))},e.prototype.getMetadata=function(){return wn(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return fn(e,t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return dn(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),pn(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw st(e)},e}(),In=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(mn(e))throw at("ref() expected a child path but got a URL, use refFromURL instead.");return new Sn(xn(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!mn(e))throw at("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xt.makeFromUrl(e)}catch(r){throw at("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sn(xn(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e}();function Cn(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal");return new In(r,new bn(r,i,new wt,n,a.a.SDK_VERSION))}!function(e){var t={TaskState:gt,TaskEvent:yt,StringFormat:lt,Storage:bn,Reference:Sn};e.INTERNAL.registerComponent(new c.a("storage",Cn,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.4.6")}(a.a);var An,On,Pn,Dn="0.4.9",Rn=Dn,Mn="FB-PERF-TRACE-MEASURE",Nn="_wt_",Ln="_fcp",jn="_fid",Fn="@firebase/performance/config",zn="@firebase/performance/configexpire",Bn="Performance",Un=((An={})["trace started"]="Trace {$traceName} was started before.",An["trace stopped"]="Trace {$traceName} is not running.",An["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",An["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",An["no window"]="Window is not available.",An["no app id"]="App id is not available.",An["no project id"]="Project id is not available.",An["no api key"]="Api key is not available.",An["invalid cc log"]="Attempted to queue invalid cc event",An["FB not default"]="Performance can only start when Firebase app instance is the default one.",An["RC response not ok"]="RC response is not ok",An["invalid attribute name"]="Attribute name {$attributeName} is invalid.",An["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",An["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",An["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",An),Vn=new o.b("performance",Bn,Un),qn=new s.b(Bn);qn.logLevel=s.a.INFO;var Gn,Kn=function(){function e(e){if(this.window=e,!e)throw Vn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(o.x)()||(qn.info("IndexedDB is not supported by current browswer"),!1):(qn.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===On&&(On=new e(Pn)),On},e}();function Hn(e,t){var n=e.length-t.length;if(n<0||n>1)throw Vn.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var Wn,Zn,Xn=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Hn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Hn("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw Vn.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw Vn.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw Vn.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===Gn&&(Gn=new e),Gn},e}();function Yn(){return Wn}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(Zn||(Zn={}));var Qn=["firebase_","google_","ga_"],$n=new RegExp("^[a-zA-Z]\\w*$");function Jn(){var e=Kn.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function er(){switch(Kn.getInstance().document.visibilityState){case"visible":return Zn.VISIBLE;case"hidden":return Zn.HIDDEN;default:return Zn.UNKNOWN}}function tr(){var e=Kn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var nr="0.0.1",rr=!0,ir="FIREBASE_INSTALLATIONS_AUTH";function ar(e){var t=function(){var e=Kn.getInstance().localStorage;if(!e)return;var t=e.getItem(zn);if(!t||(n=t,!(Number(n)>Date.now())))return;var n;var r=e.getItem(Fn);if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return t?(sr(t),Promise.resolve()):function(e){return function(){var e=Xn.getInstance().installationsService.getToken();return e.then((function(e){})),e}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Xn.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Xn.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:ir+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Xn.getInstance().getAppId(),app_version:Rn,sdk_version:nr})});return fetch(r).then((function(e){if(e.ok)return e.json();throw Vn.create("RC response not ok")}))})).catch((function(){qn.info(or)}))}(e).then(sr).then((function(e){return function(e){var t=Kn.getInstance().localStorage;if(!e||!t)return;t.setItem(Fn,JSON.stringify(e)),t.setItem(zn,String(Date.now()+60*Xn.getInstance().configTimeToLive*60*1e3))}(e)}),(function(){}))}var or="Could not fetch config, will use default configs";function sr(e){if(!e)return e;var t=Xn.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=rr,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=ur(t.tracesSamplingRate),t.logNetworkAfterSampling=ur(t.networkRequestsSamplingRate),e}function ur(e){return Math.random()<=e}var cr,lr=1;function hr(){return lr=2,cr=cr||function(){var e=Kn.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return function(){var e=Xn.getInstance().installationsService.getId();return e.then((function(e){Wn=e})),e}()})).then((function(e){return ar(e)})).then((function(){return fr()}),(function(){return fr()}))}function fr(){lr=3}var dr,pr=1e4,vr=3,mr=[],yr=!1;function gr(e){setTimeout((function(){if(0!==vr)return mr.length?void function(){var e=mr.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}));(function(e,t){return function(e){var t=Xn.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||qn.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=pr;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(mr=Object(h.f)(Object(h.f)([],t),mr),qn.info("Retry transport request later.")),vr=3,gr(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Xn.getInstance().logSource,log_event:t},e).catch((function(){mr=Object(h.f)(Object(h.f)([],e),mr),vr--,qn.info("Tries left: "+vr+"."),gr(pr)}))}():gr(pr)}),e)}function br(e){if(!e.eventTime||!e.message)throw Vn.create("invalid cc log");mr=Object(h.f)(Object(h.f)([],mr),[e])}function _r(e,t){dr||(dr=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];br({message:e.apply(void 0,t),eventTime:Date.now()})}}(kr)),dr(e,t)}function wr(e){var t=Xn.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Kn.getInstance().requiredApisAvailable()&&(e.isAuto&&er()!==Zn.VISIBLE||(3===lr?xr(e):hr().then((function(){return xr(e)}),(function(){return xr(e)}))))}function xr(e){if(Yn()){var t=Xn.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return _r(e,1)}),0)}}function kr(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Er(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:Er(),trace_metric:t};return JSON.stringify(r)}(e)}function Er(){return{google_app_id:Xn.getInstance().getAppId(),app_instance_id:Yn(),web_app_info:{sdk_version:Rn,page_url:Kn.getInstance().getUrl(),service_worker_status:Jn(),visibility_state:er(),effective_connection_type:tr()},application_process_state:0}}var Tr=["_fp",Ln,jn];var Sr=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=Kn.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw Vn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw Vn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),wr(this)},e.prototype.record=function(e,t,n){if(e<=0)throw Vn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Vn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object(h.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var a=i[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Number(Math.floor(n.metrics[a])))}wr(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(n=e,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith(Nn)&&Tr.indexOf(n)>-1)&&n.startsWith("_"))throw Vn.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=function(e){var t=Math.floor(e);return t<e&&qn.info("Metric value should be an Integer, setting the value as : "+t+"."),t}(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40)&&!Qn.some((function(e){return n.startsWith(e)}))&&!!n.match($n),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw Vn.create("invalid attribute name",{attributeName:e});if(!i)throw Vn.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return Object(h.a)({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=Kn.getInstance().getUrl();if(i){var a=new e(Nn+i,!0),o=Math.floor(1e3*Kn.getInstance().getTimeOrigin());a.setStartTime(o),t&&t[0]&&(a.setDuration(Math.floor(1e3*t[0].duration)),a.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),a.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),a.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&a.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&a.putMetric(Ln,Math.floor(1e3*u.startTime)),r&&a.putMetric(jn,Math.floor(1e3*r))}wr(a)}},e.createUserTimingTrace=function(t){wr(new e(t,!1,t))},e}();function Ir(e){var t=e;if(t&&void 0!==t.responseStart){var n=Kn.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,a=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=Xn.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return _r(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a})}}function Cr(){Yn()&&(setTimeout((function(){return function(){var e=Kn.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){Sr.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),Sr.createOobTrace(t,n,e))}))}else Sr.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=Kn.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){Ir(r[n])}e.setupObserver("resource",Ir)}()}),0),setTimeout((function(){return function(){for(var e=Kn.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){Ar(r[n])}e.setupObserver("measure",Ar)}()}),0))}function Ar(e){var t=e.name;t.substring(0,Mn.length)!==Mn&&Sr.createUserTimingTrace(t)}var Or=function(){function e(e){this.app=e,Kn.getInstance().requiredApisAvailable()&&Object(o.O)().then((function(e){e&&(yr||(gr(5500),yr=!0),hr().then(Cr,Cr))})).catch((function(e){qn.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new Sr(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Xn.getInstance().instrumentationEnabled},set:function(e){Xn.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Xn.getInstance().dataCollectionEnabled},set:function(e){Xn.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();!function(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw Vn.create("FB not default");if("undefined"===typeof window)throw Vn.create("no window");return function(e){Pn=e}(window),Xn.getInstance().firebaseAppInstance=e,Xn.getInstance().installationsService=t,new Or(e)};e.INTERNAL.registerComponent(new c.a("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance",Dn)}(a.a);var Pr,Dr,Rr="https://www.googletagmanager.com/gtag/js";!function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"}(Pr||(Pr={})),function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(Dr||(Dr={}));var Mr,Nr=new s.b("@firebase/analytics");function Lr(e,t,n,r,i,a){return Object(h.b)(this,void 0,void 0,(function(){var o,s,u,c;return Object(h.d)(this,(function(l){switch(l.label){case 0:o=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),o?[4,t[o]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(e){return e.measurementId===i})))?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),Nr.error(c),[3,8];case 8:return e(Pr.CONFIG,i,a),[2]}}))}))}function jr(e,t,n,r,i){return Object(h.b)(this,void 0,void 0,(function(){var a,o,s,u,c,l,f,d;return Object(h.d)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),a=[],i&&i.send_to?(o=i.send_to,Array.isArray(o)||(o=[o]),[4,Promise.all(n)]):[3,2];case 1:for(s=h.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return a=[],"break";a.push(r)},c=0,l=o;c<l.length&&(f=l[c],"break"!==u(f));c++);h.label=2;case 2:return 0===a.length&&(a=Object.values(t)),[4,Promise.all(a)];case 3:return h.sent(),e(Pr.EVENT,r,i||{}),[3,5];case 4:return d=h.sent(),Nr.error(d),[3,5];case 5:return[2]}}))}))}function Fr(e,t,n,r,i){var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){return function(i,a,o){return Object(h.b)(this,void 0,void 0,(function(){var s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==Pr.EVENT?[3,2]:[4,jr(e,t,n,a,o)];case 1:return u.sent(),[3,5];case 2:return i!==Pr.CONFIG?[3,4]:[4,Lr(e,t,n,r,a,o)];case 3:return u.sent(),[3,5];case 4:e(Pr.SET,a),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),Nr.error(s),[3,7];case 7:return[2]}}))}))}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}var zr=((Mr={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Mr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Mr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Mr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Mr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Mr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Mr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Mr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Mr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Mr),Br=new o.b("analytics","Analytics",zr),Ur=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function Vr(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function qr(e){var t;return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,a,o,s,u;return Object(h.d)(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:Vr(r)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(a,i)];case 1:if(200===(o=c.sent()).status||304===o.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,o.json()];case 3:return u=c.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Br.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}}))}))}function Gr(e,t,n,r){var i=t.throttleEndTimeMillis,a=t.backoffCount;return void 0===r&&(r=Ur),Object(h.b)(this,void 0,void 0,(function(){var t,s,u,c,l,f,d;return Object(h.d)(this,(function(h){switch(h.label){case 0:t=e.appId,s=e.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Kr(n,i)];case 2:return h.sent(),[3,4];case 3:if(u=h.sent(),s)return Nr.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:t,measurementId:s}];throw u;case 4:return h.trys.push([4,6,,7]),[4,qr(e)];case 5:return c=h.sent(),r.deleteThrottleMetadata(t),[2,c];case 6:if(!function(e){if(!(e instanceof o.c)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l=h.sent())){if(r.deleteThrottleMetadata(t),s)return Nr.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:t,measurementId:s}];throw l}return f=503===Number(l.customData.httpStatus)?Object(o.j)(a,r.intervalMillis,30):Object(o.j)(a,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},r.setThrottleMetadata(t,d),Nr.debug("Calling attemptFetch again in "+f+" millis"),[2,Gr(e,d,n,r)];case 7:return[2]}}))}))}function Kr(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Br.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var Hr=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();function Wr(e,t,n,r,i,a){return Object(h.b)(this,void 0,void 0,(function(){var s,u,c,l,f,d,p;return Object(h.d)(this,(function(v){switch(v.label){case 0:return(s=function(e,t,n){return void 0===t&&(t=Ur),Object(h.b)(this,void 0,void 0,(function(){var r,i,a,o,s,u,c=this;return Object(h.d)(this,(function(l){if(r=e.options,i=r.appId,a=r.apiKey,o=r.measurementId,!i)throw Br.create("no-app-id");if(!a){if(o)return[2,{measurementId:o,appId:i}];throw Br.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Hr,setTimeout((function(){return Object(h.b)(c,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,Gr({appId:i,apiKey:a,measurementId:o},s,u,t)]}))}))}(e)).then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Nr.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return Nr.error(e)})),t.push(s),u=function(){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(t){switch(t.label){case 0:return Object(o.x)()?[3,1]:(Nr.warn(Br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Object(o.O)()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Nr.warn(Br.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([s,u])];case 1:return c=v.sent(),l=c[0],f=c[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Rr))return r}return null}()||function(e,t){var n=document.createElement("script");n.src=Rr+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(a,l.measurementId),i("js",new Date),(p={}).origin="firebase",p.update=!0,d=p,null!=f&&(d.firebase_id=f),i(Pr.CONFIG,l.measurementId,d),[2,l.measurementId]}}))}))}var Zr,Xr,Yr={},Qr=[],$r={},Jr="dataLayer",ei="gtag",ti=!1;function ni(e){if(ti)throw Br.create("already-initialized");e.dataLayerName&&(Jr=e.dataLayerName),e.gtagName&&(ei=e.gtagName)}function ri(e,t){!function(){var e=[];if(Object(o.t)()&&e.push("This is a browser extension environment."),Object(o.e)()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=Br.create("invalid-analytics-context",{errorInfo:t});Nr.warn(n.message)}}();var n=e.options.appId;if(!n)throw Br.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Br.create("no-api-key");Nr.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Yr[n])throw Br.create("already-exists",{id:n});if(!ti){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Jr);var r=Fr(Yr,Qr,$r,Jr,ei),i=r.wrappedGtag,a=r.gtagCore;Xr=i,Zr=a,ti=!0}return Yr[n]=Wr(e,Qr,$r,t,Zr,Jr),{app:e,logEvent:function(e,t,r){(function(e,t,n,r,i){return Object(h.b)(this,void 0,void 0,(function(){var a,o;return Object(h.d)(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(Pr.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:a=s.sent(),o=Object(h.a)(Object(h.a)({},r),{send_to:a}),e(Pr.EVENT,n,o),s.label=3;case 3:return[2]}}))}))})(Xr,Yr[n],e,t,r).catch((function(e){return Nr.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return r&&r.global?(e(Pr.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=a.sent(),e(Pr.CONFIG,i,{update:!0,screen_name:n}),a.label=3;case 3:return[2]}}))}))})(Xr,Yr[n],e,t).catch((function(e){return Nr.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i;return Object(h.d)(this,(function(a){switch(a.label){case 0:return r&&r.global?(e(Pr.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=a.sent(),e(Pr.CONFIG,i,{update:!0,user_id:n}),a.label=3;case 3:return[2]}}))}))})(Xr,Yr[n],e,t).catch((function(e){return Nr.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,a,o,s,u;return Object(h.d)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},a=0,o=Object.keys(n);a<o.length;a++)s=o[a],i["user_properties."+s]=n[s];return e(Pr.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(Pr.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Xr,Yr[n],e,t).catch((function(e){return Nr.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(Yr[n],e).catch((function(e){return Nr.error(e)}))},INTERNAL:{delete:function(){return delete Yr[n],Promise.resolve()}}}}var ii="analytics";function ai(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:if(Object(o.t)())return[2,!1];if(!Object(o.e)())return[2,!1];if(!Object(o.x)())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Object(o.O)()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}!function(e){e.INTERNAL.registerComponent(new c.a(ii,(function(e){return ri(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:ni,EventName:Dr,isSupported:ai})),e.INTERNAL.registerComponent(new c.a("analytics-internal",(function(e){try{return{logEvent:e.getProvider(ii).getImmediate().logEvent}}catch(r){throw Br.create("interop-component-reg-failed",{reason:r})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.7")}(a.a);var oi,si=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r,i,a;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=o.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=o.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&a.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(a)];case 3:return o.sent(),[2,i]}}))}))},e}(),ui=((oi={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",oi["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",oi["registration-api-key"]="Undefined API key. Check Firebase app initialization.",oi["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",oi["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",oi["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",oi["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",oi["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",oi["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",oi["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',oi["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',oi["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",oi["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",oi),ci=new o.b("remoteconfig","Remote Config",ui);var li=function(){function e(e,t,n,r,i,a){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=a}return e.prototype.fetch=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n,r,i,a,o,s,u,c,l,f,d,p,v,m,y,g,b,_;return Object(h.d)(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=h.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:o,body:JSON.stringify(s)},c=fetch(a,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return h.sent(),[4,c];case 4:return f=h.sent(),[3,6];case 5:throw d=h.sent(),p="fetch-client-network","AbortError"===d.name&&(p="fetch-timeout"),ci.create(p,{originalErrorMessage:d.message});case 6:if(v=f.status,m=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,f.json()];case 8:return b=h.sent(),[3,10];case 9:throw _=h.sent(),ci.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:y=b.entries,g=b.state,h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?v=500:"NO_CHANGE"===g?v=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==v&&200!==v)throw ci.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:m,config:y}]}var w}))}))},e}(),hi=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),fi=["1","true","t","yes","y","on"],di=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&fi.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),pi=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=s.a.DEBUG;break;case"silent":this._logger.logLevel=s.a.SILENT;break;default:this._logger.logLevel=s.a.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return Object(h.b)(this,void 0,void 0,(function(){var e,t,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return Object(h.b)(this,void 0,void 0,(function(){var e,t,n,r=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:e=new hi,setTimeout((function(){return Object(h.b)(r,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof o.c&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys(Object(h.a)(Object(h.a)({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new di("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new di("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new di("static"))},e}();function vi(e,t){var n=e.target.error||void 0;return ci.create(t,{originalErrorMessage:n&&n.message})}var mi="app_namespace_store";var yi=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(vi(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(mi,{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return t=i.sent(),[2,new Promise((function(i,a){var o=t.transaction([mi],"readonly").objectStore(mi),s=n.createCompositeKey(e);try{var u=o.get(s);u.onerror=function(e){a(vi(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;i(t?t.value:void 0)}}catch(r){a(ci.create("storage-get",{originalErrorMessage:r&&r.message}))}}))]}}))}))},e.prototype.set=function(e,t){return Object(h.b)(this,void 0,void 0,(function(){var n,i=this;return Object(h.d)(this,(function(a){switch(a.label){case 0:return[4,this.openDbPromise];case 1:return n=a.sent(),[2,new Promise((function(a,o){var s=n.transaction([mi],"readwrite").objectStore(mi),u=i.createCompositeKey(e);try{var c=s.put({compositeKey:u,value:t});c.onerror=function(e){o(vi(e,"storage-set"))},c.onsuccess=function(){a()}}catch(r){o(ci.create("storage-set",{originalErrorMessage:r&&r.message}))}}))]}}))}))},e.prototype.delete=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t,n=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return t=i.sent(),[2,new Promise((function(i,a){var o=t.transaction([mi],"readwrite").objectStore(mi),s=n.createCompositeKey(e);try{var u=o.delete(s);u.onerror=function(e){a(vi(e,"storage-delete"))},u.onsuccess=function(){i()}}catch(r){a(ci.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),gi=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return Object(h.b)(this,void 0,void 0,(function(){var e,t,n,r,i,a;return Object(h.d)(this,(function(o){switch(o.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=o.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=o.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(a=o.sent())&&(this.activeConfig=a),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();function bi(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(ci.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var _i,wi=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return Object(h.b)(this,void 0,void 0,(function(){var t,i,a;return Object(h.d)(this,(function(s){switch(s.label){case 0:return[4,bi(e.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof o.c)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=s.sent()))throw i;return a={throttleEndTimeMillis:Date.now()+Object(o.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(a)];case 6:return s.sent(),[2,this.attemptFetch(e,a)];case 7:return[2]}}))}))},e}(),xi="@firebase/remote-config";(_i=a.a).INTERNAL.registerComponent(new c.a("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"===typeof window)throw ci.create("registration-window");var a=r.options,o=a.projectId,u=a.apiKey,c=a.appId;if(!o)throw ci.create("registration-project-id");if(!u)throw ci.create("registration-api-key");if(!c)throw ci.create("registration-app-id");n=n||"firebase";var l=new yi(c,r.name,n),h=new gi(l),f=new s.b(xi);f.logLevel=s.a.ERROR;var d=new li(i,_i.SDK_VERSION,n,o,u,c),p=new wi(d,l),v=new si(p,l,h,f),m=new pi(r,v,h,l,f);return m.ensureInitialized(),m}),"PUBLIC").setMultipleInstances(!0)),_i.registerVersion(xi,"0.1.34");a.a.registerVersion("firebase","8.3.2","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),a.a.registerVersion("firebase","8.3.2")},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ir})),n.d(t,"b",(function(){return or})),n.d(t,"c",(function(){return ar})),n.d(t,"d",(function(){return sr})),n.d(t,"e",(function(){return ur})),n.d(t,"f",(function(){return cr})),n.d(t,"g",(function(){return nr})),n.d(t,"h",(function(){return rr}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var a,o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},s=s||{},u=o||self;function c(){}function l(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function h(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f="closure_uid_"+(1e9*Math.random()>>>0),d=0;function p(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function m(e,t,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:v).apply(null,arguments)}function y(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function g(){return Date.now()}function b(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(e){Object.prototype.hasOwnProperty.call(e,f)&&e[f]||(e[f]=++d)})(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},x=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function k(e){return Array.prototype.concat.apply([],arguments)}function E(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function T(e){return/^[\s\xa0]*$/.test(e)}var S,I=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function C(e,t){return-1!=e.indexOf(t)}function A(e,t){return e<t?-1:e>t?1:0}e:{var O=u.navigator;if(O){var P=O.userAgent;if(P){S=P;break e}}S=""}function D(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function R(e){var t={};for(var n in e)t[n]=e[n];return t}var M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<M.length;a++)n=M[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){return L[" "](e),e}L[" "]=c;var j,F=C(S,"Opera"),z=C(S,"Trident")||C(S,"MSIE"),B=C(S,"Edge"),U=B||z,V=C(S,"Gecko")&&!(C(S.toLowerCase(),"webkit")&&!C(S,"Edge"))&&!(C(S,"Trident")||C(S,"MSIE"))&&!C(S,"Edge"),q=C(S.toLowerCase(),"webkit")&&!C(S,"Edge");function G(){var e=u.document;return e?e.documentMode:void 0}e:{var K="",H=function(){var e=S;return V?/rv:([^\);]+)(\)|;)/.exec(e):B?/Edge\/([\d\.]+)/.exec(e):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):q?/WebKit\/(\S+)/.exec(e):F?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(H&&(K=H?H[1]:""),z){var W=G();if(null!=W&&W>parseFloat(K)){j=String(W);break e}}j=K}var Z,X={};function Y(e){return function(e,t){var n=X;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=I(String(j)).split("."),r=I(String(e)).split("."),i=Math.max(n.length,r.length),a=0;0==t&&a<i;a++){var o=n[a]||"",s=r[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=A(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||A(0==o[2].length,0==s[2].length)||A(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&z){var Q=G();Z=Q||(parseInt(j,10)||void 0)}else Z=void 0;var $=Z,J=!z||9<=Number($),ee=z&&!Y("9"),te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",c,t),u.removeEventListener("test",c,t)}catch(n){}return e}();function ne(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function re(e,t){if(ne.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(V){e:{try{L(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ie[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}ne.prototype.b=function(){this.defaultPrevented=!0},b(re,ne);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.b=function(){re.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ee)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function se(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++oe,this.Y=this.Z=!1}function ue(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function ce(e){this.src=e,this.a={},this.b=0}function le(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],a=w(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ue(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function he(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.Y&&a.listener==t&&a.capture==!!n&&a.ca==r)return i}return-1}ce.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.b++);var o=he(e,t,r,i);return-1<o?(t=e[o],n||(t.Z=!1)):((t=new se(t,this.src,a,!!r,i)).Z=n,e.push(t)),t};var fe="closure_lm_"+(1e6*Math.random()|0),de={};function pe(e,t,n,r,i){if(r&&r.once)return me(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)pe(e,t[a],n,r,i);return null}return n=Ee(n),e&&e[ae]?e.va(t,n,h(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=h(i)?!!i.capture:!!i;if(o&&!J)return null;var s=xe(e);if(s||(e[fe]=s=new ce(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=we,t=J?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)te||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function me(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)me(e,t[a],n,r,i);return null}return n=Ee(n),e&&e[ae]?e.wa(t,n,h(r)?!!r.capture:!!r,i):ve(e,t,n,!0,r,i)}function ye(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ye(e,t[a],n,r,i);else r=h(r)?!!r.capture:!!r,n=Ee(n),e&&e[ae]?(e=e.c,(t=String(t).toString())in e.a&&(-1<(n=he(a=e.a[t],n,r,i))&&(ue(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.a[t],e.b--)))):e&&(e=xe(e))&&(t=e.a[t.toString()],e=-1,t&&(e=he(t,n,r,i)),(n=-1<e?t[e]:null)&&ge(n))}function ge(e){if("number"!==typeof e&&e&&!e.Y){var t=e.src;if(t&&t[ae])le(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xe(t))?(le(n,e),0==n.b&&(n.src=null,t[fe]=null)):ue(e)}}}function be(e){return e in de?de[e]:de[e]="on"+e}function _e(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&ge(e),n.call(r,t)}function we(e,t){if(e.Y)return!0;if(!J){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return _e(e,t=new re(t,this))}return _e(e,new re(t,this))}function xe(e){return(e=e[fe])instanceof ce?e:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(e){return"function"===typeof e?e:(e[ke]||(e[ke]=function(t){return e.handleEvent(t)}),e[ke])}function Te(){_.call(this),this.c=new ce(this),this.J=this,this.C=null}function Se(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,"string"===typeof t)t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var i=t;N(t=new ne(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.a=n[a];i=Ie(o,r,!0,t)&&i}if(i=Ie(o=t.a=e,r,!0,t)&&i,i=Ie(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Ie(o=t.a=n[a],r,!1,t)&&i}function Ie(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.Y&&o.capture==n){var s=o.listener,u=o.ca||o.src;o.Z&&le(e.c,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Te,_),Te.prototype[ae]=!0,(a=Te.prototype).addEventListener=function(e,t,n,r){pe(this,e,t,n,r)},a.removeEventListener=function(e,t,n,r){ye(this,e,t,n,r)},a.G=function(){if(Te.X.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ue(n[r]);delete t.a[e],t.b--}}this.C=null},a.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},a.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ce=u.JSON.stringify;function Ae(){this.b=this.a=null}var Oe,Pe=new(function(){function e(e,t){this.c=e,this.f=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new Re}),(function(e){e.reset()}));function De(){var e=je,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Re(){this.next=this.b=this.a=null}function Me(e){u.setTimeout((function(){throw e}),0)}function Ne(e,t){Oe||function(){var e=u.Promise.resolve(void 0);Oe=function(){e.then(Fe)}}(),Le||(Oe(),Le=!0),je.add(e,t)}Ae.prototype.add=function(e,t){var n=Pe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Re.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Re.prototype.reset=function(){this.next=this.b=this.a=null};var Le=!1,je=new Ae;function Fe(){for(var e;e=De();){try{e.a.call(e.b)}catch(n){Me(n)}var t=Pe;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Le=!1}function ze(e,t){Te.call(this),this.b=e||1,this.a=t||u,this.f=m(this.Za,this),this.g=g()}function Be(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function Ue(e,t,n){if("function"===typeof e)n&&(e=m(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=m(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Ve(e){e.a=Ue((function(){e.a=null,e.c&&(e.c=!1,Ve(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}b(ze,Te),(a=ze.prototype).aa=!1,a.M=null,a.Za=function(){if(this.aa){var e=g()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Se(this,"tick"),this.aa&&(Be(this),this.start()))}},a.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=g())},a.G=function(){ze.X.G.call(this),Be(this),delete this.a};var qe=function(e){function t(t,n){var r=e.call(this)||this;return r.g=t,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Ve(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(_);function Ge(e){_.call(this),this.b=e,this.a={}}b(Ge,_);var Ke=[];function He(e,t,n,r){Array.isArray(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var i=0;i<n.length;i++){var a=pe(t,n[i],r||e.handleEvent,!1,e.b||e);if(!a)break;e.a[a.key]=a}}function We(e){D(e.a,(function(e,t){this.a.hasOwnProperty(t)&&ge(e)}),e),e.a={}}function Ze(){this.a=!0}function Xe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ce(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Ge.prototype.G=function(){Ge.X.G.call(this),We(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ze.prototype.info=function(){};var Ye={},Qe=null;function $e(){return Qe=Qe||new Te}function Je(e){ne.call(this,Ye.Fa,e)}function et(e){var t=$e();Se(t,new Je(t,e))}function tt(e,t){ne.call(this,Ye.STAT_EVENT,e),this.stat=t}function nt(e){var t=$e();Se(t,new tt(t,e))}function rt(e){ne.call(this,Ye.Ga,e)}function it(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){e()}),t)}Ye.Fa="serverreachability",b(Je,ne),Ye.STAT_EVENT="statevent",b(tt,ne),Ye.Ga="timingevent",b(rt,ne);var at={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ot={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function st(){}function ut(e){var t;return(t=e.a)||(t=e.a={}),t}function ct(){}st.prototype.a=null;var lt,ht={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ft(){ne.call(this,"d")}function dt(){ne.call(this,"c")}function pt(){}function vt(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new Ge(this),this.P=mt,e=U?125:void 0,this.R=new ze(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}b(ft,ne),b(dt,ne),b(pt,st),lt=new pt;var mt=45e3,yt={},gt={};function bt(e,t,n){e.H=1,e.i=Ut(Nt(t)),e.j=n,e.I=!0,_t(e,null)}function _t(e,t){e.u=g(),kt(e),e.l=Nt(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),en(n.b,"t",r),e.D=0,e.a=Xn(e.g,e.g.C?t:null),0<e.O&&(e.F=new qe(m(e.Ca,e,e.a),e.O)),He(e.J,e.a,"readystatechange",e.Xa),t=e.B?R(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),et(1),function(e,t,n,r,i,a){e.info((function(){if(e.a)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.c,e.m,e.l,e.f,e.S,e.j)}function wt(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=xt(e,n);if(i==gt){4==t&&(e.h=4,nt(14),r=!1),Xe(e.c,e.f,null,"[Incomplete Response]");break}if(i==yt){e.h=4,nt(15),Xe(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}Xe(e.c,e.f,i,null),Ct(e,i)}4==t&&0==n.length&&(e.h=1,nt(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,(t=e.g).a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Un(t),t.F=!0,nt(11))):(Xe(e.c,e.f,n,"[Invalid Chunked Response]"),It(e),St(e))}function xt(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?gt:(n=Number(t.substring(n,r)),isNaN(n)?yt:(r+=1)+n>t.length?gt:(t=t.substr(r,n),e.D=r+n,t))}function kt(e){e.T=g()+e.P,Et(e,e.P)}function Et(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=it(m(e.Va,e),t)}function Tt(e){e.o&&(u.clearTimeout(e.o),e.o=null)}function St(e){0==e.g.v||e.A||Gn(e.g,e)}function It(e){Tt(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Be(e.R),We(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Ct(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||un(n.b,e)))if(n.I=e.N,!e.C&&un(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;qn(n),Dn(n)}Bn(n),nt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=it(m(n.Sa,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Hn(n,11)}else if((e.C||n.a==e)&&qn(n),!T(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var a=i[3];null!=a&&(n.ha=a,n.c.info("VER="+n.ha));var o=i[4];null!=o&&(n.pa=o,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=e.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(C(l,"spdy")||C(l,"quic")||C(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(cn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Bt(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=g()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=e;if((u=n).la=Zn(u,u.C?u.ga:null,u.fa),d.C){ln(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Tt(p),kt(p)),u.a=d}else zn(u);0<n.g.length&&Nn(n)}else"stop"!=i[0]&&"close"!=i[0]||Hn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Hn(n,7):Pn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);et(4)}catch(y){}}function At(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(l(e)||"string"===typeof e)x(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(l(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"===typeof e)return e.split("");if(l(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ot(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ot)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Dt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Dt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Dt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(a=vt.prototype).setTimeout=function(e){this.P=e},a.Xa=function(e){e=e.target;var t=this.F;t&&3==In(e)?t.f():this.Ca(e)},a.Ca=function(e){try{if(e==this.a)e:{var t=In(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||3==t&&!U&&!this.a.$())){this.A||4!=t||7==n||et(8==n||0>=r?3:2),Tt(this);var i=this.a.W();this.N=i;var a=this.a.$();if(this.b=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var o,s=this.a;if((o=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(o)){var u=o;break t}}u=null}if(!u){this.b=!1,this.h=3,nt(12),It(this),St(this);break e}Xe(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ct(this,u)}this.I?(wt(this,t,a),U&&this.b&&3==t&&(He(this.J,this.R,"tick",this.Wa),this.R.start())):(Xe(this.c,this.f,a,null),Ct(this,a)),4==t&&It(this),this.b&&!this.A&&(4==t?Gn(this.g,this):(this.b=!1,kt(this)))}else 400==i&&0<a.indexOf("Unknown SID")?(this.h=3,nt(12)):(this.h=0,nt(13)),It(this),St(this)}}}catch(c){}},a.Wa=function(){if(this.a){var e=In(this.a),t=this.a.$();this.D<t.length&&(Tt(this),wt(this,e,t),this.b&&4!=e&&kt(this))}},a.cancel=function(){this.A=!0,It(this)},a.Va=function(){this.o=null;var e=g();0<=e-this.T?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(et(3),nt(17)),It(this),this.h=2,St(this)):Et(this,this.T-e)},(a=Ot.prototype).K=function(){Pt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},a.L=function(){return Pt(this),this.a.concat()},a.get=function(e,t){return Dt(this.b,e)?this.b[e]:t},a.set=function(e,t){Dt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},a.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Rt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mt(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Mt){this.a=void 0!==t?t:e.a,Lt(this,e.f),this.j=e.j,jt(this,e.c),Ft(this,e.h),this.g=e.g,t=e.b;var n=new Yt;n.c=t.c,t.a&&(n.a=new Ot(t.a),n.b=t.b),zt(this,n),this.i=e.i}else e&&(n=String(e).match(Rt))?(this.a=!!t,Lt(this,n[1]||"",!0),this.j=Vt(n[2]||""),jt(this,n[3]||"",!0),Ft(this,n[4]),this.g=Vt(n[5]||"",!0),zt(this,n[6]||"",!0),this.i=Vt(n[7]||"")):(this.a=!!t,this.b=new Yt(null,this.a))}function Nt(e){return new Mt(e)}function Lt(e,t,n){e.f=n?Vt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function jt(e,t,n){e.c=n?Vt(t,!0):t}function Ft(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function zt(e,t,n){t instanceof Yt?(e.b=t,function(e,t){t&&!e.f&&(Qt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($t(this,t),en(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=qt(t,Zt)),e.b=new Yt(t,e.a))}function Bt(e,t,n){e.b.set(t,n)}function Ut(e){return Bt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^g()).toString(36)),e}function Vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Mt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(qt(t,Kt,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(qt(t,Kt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(qt(n,"/"==n.charAt(0)?Wt:Ht,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",qt(n,Xt)),e.join("")};var Kt=/[#\/\?@]/g,Ht=/[#\?:]/g,Wt=/[#\?]/g,Zt=/[#\?@]/g,Xt=/#/g;function Yt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Qt(e){e.a||(e.a=new Ot,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $t(e,t){Qt(e),t=tn(e,t),Dt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Dt((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Pt(e)))}function Jt(e,t){return Qt(e),t=tn(e,t),Dt(e.a.b,t)}function en(e,t,n){$t(e,t),0<n.length&&(e.c=null,e.a.set(tn(e,t),E(n)),e.b+=n.length)}function tn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(a=Yt.prototype).add=function(e,t){Qt(this),this.c=null,e=tn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},a.forEach=function(e,t){Qt(this),this.a.forEach((function(n,r){x(n,(function(n){e.call(t,n,r,this)}),this)}),this)},a.L=function(){Qt(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},a.K=function(e){Qt(this);var t=[];if("string"===typeof e)Jt(this,e)&&(t=k(t,this.a.get(tn(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=k(t,e[n])}return t},a.set=function(e,t){return Qt(this),this.c=null,Jt(this,e=tn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},a.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},a.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.c=e.join("&")};var nn=function(e,t){this.b=e,this.a=t};function rn(e){this.g=e||an,u.PerformanceNavigationTiming?e=0<(e=u.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var an=10;function on(e){return!!e.b||!!e.a&&e.a.size>=e.f}function sn(e){return e.b?1:e.a?e.a.size:0}function un(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function cn(e,t){e.a?e.a.add(t):e.b=t}function ln(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function hn(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var a=i(e.a.values()),o=a.next();!o.done;o=a.next()){var s=o.value;r=r.concat(s.s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}return E(e.c)}function fn(){}function dn(){this.a=new fn}function pn(e,t,n){var r=n||"";try{At(e,(function(e,n){var i=e;h(e)&&(i=Ce(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}rn.prototype.cancel=function(){var e,t;if(this.c=hn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},fn.prototype.stringify=function(e){return u.JSON.stringify(e,void 0)},fn.prototype.parse=function(e){return u.JSON.parse(e,void 0)};var mn=u.JSON.parse;function yn(e){Te.call(this),this.headers=new Ot,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}b(yn,Te);var gn="",bn=/^https?$/i,_n=["POST","PUT"];function wn(e){return"content-type"==e.toLowerCase()}function xn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,kn(e),Tn(e)}function kn(e){e.u||(e.u=!0,Se(e,"complete"),Se(e,"error"))}function En(e){if(e.b&&"undefined"!=typeof s&&(!e.s[1]||4!=In(e)||2!=e.W()))if(e.l&&4==In(e))Ue(e.za,0,e);else if(Se(e,"readystatechange"),4==In(e)){e.b=!1;try{var t,n=e.W();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.B).match(Rt)[1]||null;if(!a&&u.self&&u.self.location){var o=u.self.location.protocol;a=o.substr(0,o.length-1)}i=!bn.test(a?a.toLowerCase():"")}t=i}if(t)Se(e,"complete"),Se(e,"success");else{e.h=6;try{var c=2<In(e)?e.a.statusText:""}catch(n){c=""}e.f=c+" ["+e.W()+"]",kn(e)}}finally{Tn(e)}}}function Tn(e,t){if(e.a){Sn(e);var n=e.a,r=e.s[0]?c:null;e.a=null,e.s=null,t||Se(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Sn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(u.clearTimeout(e.m),e.m=null)}function In(e){return e.a?e.a.readyState:0}function Cn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return D(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Bt(e,t,n))}function An(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function On(e){this.pa=0,this.g=[],this.c=new Ze,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=An("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=An("baseRetryDelayMs",5e3,e),this.Ra=An("retryDelaySeedMs",1e4,e),this.Ma=An("forwardChannelMaxRetries",2,e),this.ma=An("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new rn(e&&e.concurrentRequestLimit),this.ka=new dn,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Pn(e){if(Rn(e),3==e.v){var t=e.R++,n=Nt(e.B);Bt(n,"SID",e.J),Bt(n,"RID",t),Bt(n,"TYPE","terminate"),jn(e,n),(t=new vt(e,e.c,t,void 0)).H=2,t.i=Ut(Nt(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(t.i.toString(),"")),!n&&u.Image&&((new Image).src=t.i,n=!0),n||(t.a=Xn(t.g,null),t.a.ba(t.i)),t.u=g(),kt(t)}Wn(e)}function Dn(e){e.a&&(Un(e),e.a.cancel(),e.a=null)}function Rn(e){Dn(e),e.j&&(u.clearTimeout(e.j),e.j=null),qn(e),e.b.cancel(),e.h&&("number"===typeof e.h&&u.clearTimeout(e.h),e.h=null)}function Mn(e,t){e.g.push(new nn(e.Oa++,t)),3==e.v&&Nn(e)}function Nn(e){on(e.b)||e.h||(e.h=!0,Ne(e.Ba,e),e.u=0)}function Ln(e,t){var n;n=t?t.f:e.R++;var r=Nt(e.B);Bt(r,"SID",e.J),Bt(r,"RID",n),Bt(r,"AID",e.P),jn(e,r),e.i&&e.l&&Cn(r,e.i,e.l),n=new vt(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=Fn(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),cn(e.b,n),bt(n,r,t)}function jn(e,t){e.f&&At({},(function(e,n){Bt(t,n,e)}))}function Fn(e,t,n){n=Math.min(e.g.length,n);var r=e.f?m(e.f.Ja,e.f,e):null;e:for(var i=e.g,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].b,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=a))a=Math.max(0,i[u].b-100),s=!1;else try{pn(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function zn(e){e.a||e.j||(e.T=1,Ne(e.Aa,e),e.o=0)}function Bn(e){return!(e.a||e.j||3<=e.o)&&(e.T++,e.j=it(m(e.Aa,e),Kn(e,e.o)),e.o++,!0)}function Un(e){null!=e.s&&(u.clearTimeout(e.s),e.s=null)}function Vn(e){e.a=new vt(e,e.c,"rpc",e.T),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Nt(e.la);Bt(t,"RID","rpc"),Bt(t,"SID",e.J),Bt(t,"CI",e.H?"0":"1"),Bt(t,"AID",e.P),jn(e,t),Bt(t,"TYPE","xmlhttp"),e.i&&e.l&&Cn(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=Ut(Nt(t)),n.j=null,n.I=!0,_t(n,e)}function qn(e){null!=e.m&&(u.clearTimeout(e.m),e.m=null)}function Gn(e,t){var n=null;if(e.a==t){qn(e),Un(e),e.a=null;var r=2}else{if(!un(e.b,t))return;n=t.s,ln(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=g()-t.u;var i=e.u;Se(r=$e(),new rt(r,n,t,i)),Nn(e)}else zn(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(sn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.g=t.s.concat(e.g),!0):!(1==e.v||2==e.v||e.u>=(e.La?0:e.Ma))&&(e.h=it(m(e.Ba,e,t),Kn(e,e.u)),e.u++,!0))}(e,t)||2==r&&Bn(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:Hn(e,5);break;case 4:Hn(e,10);break;case 3:Hn(e,6);break;default:Hn(e,2)}}function Kn(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function Hn(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=m(e.Ya,e);n||(n=new Mt("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Lt(n,"https"),Ut(n)),function(e,t){var n=new Ze;if(u.Image){var r=new Image;r.onload=y(vn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=y(vn,n,r,"TestLoadImage: error",!1,t),r.onabort=y(vn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=y(vn,n,r,"TestLoadImage: timeout",!1,t),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nt(2);e.v=0,e.f&&e.f.ra(t),Wn(e),Rn(e)}function Wn(e){e.v=0,e.I=-1,e.f&&(0==hn(e.b).length&&0==e.g.length||(e.b.c.length=0,E(e.g),e.g.length=0),e.f.qa())}function Zn(e,t,n){var r=function(e){return e instanceof Mt?Nt(e):new Mt(e,void 0)}(n);if(""!=r.c)t&&jt(r,t+"."+r.c),Ft(r,r.h);else{var i=u.location;r=function(e,t,n,r){var i=new Mt(null,void 0);return e&&Lt(i,e),t&&jt(i,t),n&&Ft(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&D(e.V,(function(e,t){Bt(r,t,e)})),t=e.A,n=e.na,t&&n&&Bt(r,t,n),Bt(r,"VER",e.ha),jn(e,r),r}function Xn(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new yn(e.Na)).F=e.C,t}function Yn(){}function Qn(){if(z&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function $n(e,t){Te.call(this),this.a=new On(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!T(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new tr(this)}function Jn(e){ft.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function er(){dt.call(this),this.status=1}function tr(e){this.a=e}(a=yn.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ut(this.H):ut(lt),this.a.onreadystatechange=m(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(a){return void xn(this,a)}e=n||"";var i=new Ot(this.headers);r&&At(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=wn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.L()),n=u.FormData&&e instanceof u.FormData,!(0<=w(_n,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Sn(this),0<this.o&&((this.D=function(e){return z&&Y(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=m(this.xa,this)):this.m=Ue(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(a){xn(this,a)}},a.xa=function(){"undefined"!=typeof s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Se(this,"timeout"),this.abort(8))},a.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,Se(this,"complete"),Se(this,"abort"),Tn(this))},a.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Tn(this,!0)),yn.X.G.call(this)},a.za=function(){this.j||(this.A||this.l||this.g?En(this):this.Ua())},a.Ua=function(){En(this)},a.W=function(){try{return 2<In(this)?this.a.status:-1}catch(e){return-1}},a.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},a.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mn(t)}},a.ua=function(){return this.h},a.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(a=On.prototype).ha=8,a.v=1,a.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new vt(this,this.c,e,void 0),r=this.l;if(this.O&&(r?N(r=R(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var a=this.g[i];if(void 0===(a="__data__"in a.a&&"string"===typeof(a=a.a.__data__)?a.length:void 0))break;if(4096<(t+=a)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Fn(this,n,t),Bt(i=Nt(this.B),"RID",e),Bt(i,"CVER",22),this.A&&Bt(i,"X-HTTP-Session-Id",this.A),jn(this,i),this.i&&r&&Cn(i,this.i,r),cn(this.b,n),this.Ia&&Bt(i,"TYPE","init"),this.da?(Bt(i,"$req",t),Bt(i,"SID","null"),n.U=!0,bt(n,i,null)):bt(n,i,t),this.v=2}}else 3==this.v&&(e?Ln(this,e):0==this.g.length||on(this.b)||Ln(this))},a.Aa=function(){if(this.j=null,Vn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=it(m(this.Ta,this),e)}},a.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,nt(10),Dn(this),Vn(this))},a.Sa=function(){null!=this.m&&(this.m=null,Dn(this),Bn(this),nt(19))},a.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),nt(2)):(this.c.info("Failed to ping google.com"),nt(1))},(a=Yn.prototype).ta=function(){},a.sa=function(){},a.ra=function(){},a.qa=function(){},a.Ja=function(){},Qn.prototype.a=function(e,t){return new $n(e,t)},b($n,Te),$n.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;nt(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=Zn(e,null,e.fa),Nn(e)},$n.prototype.close=function(){Pn(this.a)},$n.prototype.h=function(e){if("string"===typeof e){var t={};t.__data__=e,Mn(this.a,t)}else this.l?((t={}).__data__=Ce(e),Mn(this.a,t)):Mn(this.a,e)},$n.prototype.G=function(){this.a.f=null,delete this.f,Pn(this.a),delete this.a,$n.X.G.call(this)},b(Jn,ft),b(er,dt),b(tr,Yn),tr.prototype.ta=function(){Se(this.a,"a")},tr.prototype.sa=function(e){Se(this.a,new Jn(e))},tr.prototype.ra=function(e){Se(this.a,new er(e))},tr.prototype.qa=function(){Se(this.a,"b")},Qn.prototype.createWebChannel=Qn.prototype.a,$n.prototype.send=$n.prototype.h,$n.prototype.open=$n.prototype.g,$n.prototype.close=$n.prototype.close,at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,ot.COMPLETE="complete",ct.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Te.prototype.listen=Te.prototype.va,yn.prototype.listenOnce=yn.prototype.wa,yn.prototype.getLastError=yn.prototype.Qa,yn.prototype.getLastErrorCode=yn.prototype.ua,yn.prototype.getStatus=yn.prototype.W,yn.prototype.getResponseJson=yn.prototype.Pa,yn.prototype.getResponseText=yn.prototype.$,yn.prototype.send=yn.prototype.ba;var nr=function(){return new Qn},rr=function(){return $e()},ir=at,ar=ot,or=Ye,sr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ur=ct,cr=yn}).call(this,n(32))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2);var i=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t};function a(e){var t=i(e);return Object(r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}},function(e,t,n){"use strict";var r=n(19);function i(e,t){return function(e){var t=Object(r.a)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var a=/([A-Z])/g;var o=/^ms-/;function s(e){return function(e){return e.replace(a,"-$1").toLowerCase()}(e).replace(o,"-ms-")}var u=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;t.a=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(s(t))||i(e).getPropertyValue(s(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!u.test(e))}(i)?n+=s(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(s(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return v}));var r=n(6),i=n(15),a=(n(8),n(2)),o=n.n(a),s=n(21),u=n.n(s),c=!1,l=o.a.createContext(null),h="unmounted",f="exited",d="entering",p="entered",v="exiting",m=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=f,r.appearStatus=d):i=p:i=t.unmountOnExit||t.mountOnEnter?h:f,r.state={status:i},r.nextCallback=null,r}Object(i.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===h?{status:f}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==p&&(t=d):n!==d&&n!==p||(t=v)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===d?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===f&&this.setState({status:h})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[u.a.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||c?this.safeSetState({status:p},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:d},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(a,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:u.a.findDOMNode(this);t&&!c?(this.props.onExit(r),this.safeSetState({status:v},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:f},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:f},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:u.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===h)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(r.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.a.createElement(l.Provider,{value:null},"function"===typeof n?n(e,i):o.a.cloneElement(o.a.Children.only(n),i))},t}(o.a.Component);function y(){}m.contextType=l,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:y,onEntering:y,onEntered:y,onExit:y,onExiting:y,onExited:y},m.UNMOUNTED=h,m.EXITED=f,m.ENTERING=d,m.ENTERED=p,m.EXITING=v;t.e=m},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(68)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));var r=n(2),i=n.n(r).a.createContext(null),a=function(e,t){return void 0===t&&(t=null),null!=e?String(e):t||null};t.a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=Function.prototype.bind.call(Function.prototype.call,[].slice);function i(e,t){return r(e.querySelectorAll(t))}},function(e,t,n){"use strict";var r=n(2),i=n.n(r).a.createContext(null);i.displayName="NavbarContext",t.a=i},function(e,t,n){"use strict";t.a=!("undefined"===typeof window||!window.document||!window.document.createElement)},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(3),i=n(6),a=n(9),o=n.n(a),s=/-(.)/g;var u=n(2),c=n.n(u),l=n(12),h=function(e){return e[0].toUpperCase()+(t=e,t.replace(s,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function f(e,t){var n=void 0===t?{}:t,a=n.displayName,s=void 0===a?h(e):a,u=n.Component,f=n.defaultProps,d=c.a.forwardRef((function(t,n){var a=t.className,s=t.bsPrefix,h=t.as,f=void 0===h?u||"div":h,d=Object(i.a)(t,["className","bsPrefix","as"]),p=Object(l.a)(s,e);return c.a.createElement(f,Object(r.a)({ref:n,className:o()(a,p)},d))}));return d.defaultProps=f,d.displayName=s,d}},function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,a=new Promise((function(a,o){n(i=e[t].apply(e,r)).then(a,o)}));return a.request=i,a}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function a(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),a=i.request;return a&&(a.onupgradeneeded=function(e){n&&n(new d(a.result,e.oldVersion,a.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}a(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},a(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},a(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},a(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";t.a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return i}))},function(e,t,n){var r=n(92),i=n(55),a=n(93),o=n(34),s=n(56),u=n(96),c=n(97),l=n(100),h=n(102),f=n(105),d=n(106),p=n(107),v=n(108),m=n(109);e.exports=function(){"use strict";var e=t;function t(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===n[r=e&&e.failIfMajorPerformanceCaveat]&&(n[r]=function(e){var n,r=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e);if(!r)return!1;try{n=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!n||r.isContextLost())&&(r.shaderSource(n,"void main() {}"),r.compileShader(n),!0===r.getShaderParameter(n,r.COMPILE_STATUS))}(r)),n[r]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var r}(e)}var n={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var y="2.2.0",g=b;function b(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}b.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},b.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},b.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},b.prototype.solveCurveX=function(e,t){var n,r,i,a,o;for(void 0===t&&(t=1e-6),i=e,o=0;o<8;o++){if(a=this.sampleCurveX(i)-e,Math.abs(a)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(a=this.sampleCurveX(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i},b.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var _=w;function w(e,t){this.x=e,this.y=t}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(e){return e instanceof w?e:Array.isArray(e)?new w(e[0],e[1]):e};var x="undefined"!=typeof self?self:{};function k(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!k(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!k(e[r],t[r]))return!1;return!0}return e===t}var E=Math.pow(2,53)-1,T=Math.PI/180,S=180/Math.PI;function I(e){return e*T}function C(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function A(e){var t,n=1/0,r=1/0,i=-1/0,a=-1/0,o=m(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(u){o.e(u)}finally{o.f()}return{min:new _(n,r),max:new _(i,a)}}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new _(n,n),a=e.sub(i),o=t.add(i),s=[a,new _(o.x,a.y),o,new _(a.x,o.y)];return r&&s.push(a),s}function P(e,t,n,r){var i=new g(e,t,n,r);return function(e){return i.solve(e)}}var D=P(.25,.1,.25,1);function R(e,t,n){return Math.min(n,Math.max(t,e))}function M(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function N(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),i[o]=t,0==--r&&n(a,i)}))}))}function L(e){var t=[];for(var n in e)t.push(e[n]);return t}function j(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}function F(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n}var z=1;function B(){return z++}function U(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function V(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function q(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function G(e,t){return-1!==e.indexOf(t,e.length-t.length)}function K(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function H(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function W(e){return Array.isArray(e)?e.map(W):"object"==typeof e&&e?K(e,W):e}var Z={};function X(e){Z[e]||("undefined"!=typeof console&&console.warn(e),Z[e]=!0)}function Y(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Q(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],r+=((n=e[o]).x-t.x)*(t.y+n.y);return r}function $(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function J(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var ee,te,ne,re=null;function ie(e){if(null==re){var t=e.navigator?e.navigator.userAgent:null;re=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return re}function ae(e){try{var t=x[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var oe,se={now:function(){return void 0!==ne?ne:x.performance.now()},setNow:function(e){ne=e},restoreNow:function(){ne=void 0},frame:function(e){var t=x.requestAnimationFrame(e);return{cancel:function(){return x.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=x.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=e.width,n.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return ee||(ee=x.document.createElement("a")),ee.href=e,ee.href},get devicePixelRatio(){return x.devicePixelRatio},get prefersReducedMotion(){return!!x.matchMedia&&(null==te&&(te=x.matchMedia("(prefers-reduced-motion: reduce)")),te.matches)}},ue={create:function(e,t,n){var r=x.document.createElement(e);return void 0!==t&&(r.className=t),n&&n.appendChild(r),r},createNS:function(e,t){return x.document.createElementNS(e,t)}},ce=x.document&&x.document.documentElement.style,le=ce&&void 0!==ce.userSelect?"userSelect":"WebkitUserSelect";ue.disableDrag=function(){ce&&le&&(oe=ce[le],ce[le]="none")},ue.enableDrag=function(){ce&&le&&(ce[le]=oe)},ue.setTransform=function(e,t){e.style.transform=t};var he=!1;try{var fe=Object.defineProperty({},"passive",{get:function(){he=!0}});x.addEventListener("test",fe,fe),x.removeEventListener("test",fe,fe)}catch(e){he=!1}ue.addEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,n,"passive"in r&&he?r:r.capture)},ue.removeEventListener=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,n,"passive"in r&&he?r:r.capture)};var de,pe=function e(t){t.preventDefault(),t.stopPropagation(),x.removeEventListener("click",e,!0)};function ve(e,t,n){var r=e.offsetWidth===t.width?1:e.offsetWidth/t.width;return new _((n.clientX-t.left)*r,(n.clientY-t.top)*r)}ue.suppressClick=function(){x.addEventListener("click",pe,!0),x.setTimeout((function(){x.removeEventListener("click",pe,!0)}),0)},ue.mousePos=function(e,t){var n=e.getBoundingClientRect();return ve(e,n,t)},ue.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.length;i++)r.push(ve(e,n,t[i]));return r},ue.mouseButton=function(e){return void 0!==x.InstallTrigger&&2===e.button&&e.ctrlKey&&x.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},ue.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var me,ye,ge={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==de){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{de=null!=Object({NODE_ENV:"production",PUBLIC_URL:"/Pixelpedia",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX?new RegExp(Object({NODE_ENV:"production",PUBLIC_URL:"/Pixelpedia",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL_REGEX):e}catch(t){de=e}}return de},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},be={supported:!1,testSupport:function(e){!_e&&ye&&(we?xe(e):me=e)}},_e=!1,we=!1;function xe(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,ye),e.isContextLost())return;be.supported=!0}catch(e){}e.deleteTexture(t),_e=!0}x.document&&((ye=x.document.createElement("img")).onload=function(){me&&xe(me),me=null,we=!0},ye.onerror=function(){_e=!0,me=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ke="01",Ee="NO_ACCESS_TOKEN",Te=function(){function e(t,n,r){p(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!r,this._createSkuToken()}return v(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ke,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!Se(e))return e;var n=Ae(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!Se(e))return e;var n=Ae(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t){if(!Se(e))return e;var n=Ae(e);return n.path="/v4/".concat(n.authority,".json"),n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,r){var i=Ae(e);return Se(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),Oe(i))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Se(e))return e;var r=Ae(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(be.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(ge.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(ge.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||ge.ACCESS_TOKEN;return ge.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(e,t){var n=Ae(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(ge.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(ge.TILE_URL_VERSION,"/"),""));var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(e,t){var n,r=!!t&&Se(t),i=[],a=m(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;Ie(o)?i.push(this.canonicalizeTileURL(o,r)):i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=Ae(ge.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!ge.REQUIRE_ACCESS_TOKEN)return Oe(e);if(t=t||ge.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Oe(e)}}]),e}();function Se(e){return 0===e.indexOf("mapbox:")}function Ie(e){return ge.API_URL_REGEX.test(e)}var Ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ae(e){var t=e.match(Ce);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Oe(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function Pe(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(x.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var De=function(){function e(t){p(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return v(e,[{key:"getStorageKey",value:function(e){var t=Pe(ge.ACCESS_TOKEN),n="";return n=t&&t.u?x.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):ge.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(n):"mapbox.eventData:".concat(n)}},{key:"fetchEventData",value:function(){var e=ae("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=x.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=x.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){X("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=ae("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{x.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&x.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){X("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,r){var i=this;if(ge.EVENTS_URL){var a=Ae(ge.EVENTS_URL);a.params.push("access_token=".concat(r||ge.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:y,skuId:ke,userId:this.anonId},s=t?j(o,t):o,u={url:Oe(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=it(u,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Re=new(function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this,"appUserTurnstile"))._customAccessToken=e,r}return v(n,[{key:"postTurnstileEvent",value:function(e,t){ge.EVENTS_URL&&ge.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Se(e)||Ie(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Pe(ge.ACCESS_TOKEN),r=n?n.u:ge.ACCESS_TOKEN,i=r!==this.eventData.tokenU;V(this.anonId)||(this.anonId=U(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),u=(a-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||o.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=r)}),e)}}}]),n}(De)),Me=Re.postTurnstileEvent.bind(Re),Ne=new(function(e){f(n,e);var t=d(n);function n(){var e;return p(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return v(n,[{key:"postMapLoadEvent",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,ge.EVENTS_URL&&(n||ge.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Ee)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),V(this.anonId)||(this.anonId=U()),this.postEvent(i,{skuToken:this.skuToken},(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e))}}}]),n}(De)),Le=Ne.postMapLoadEvent.bind(Ne),je=new(function(e){f(n,e);var t=d(n);function n(){var e;return p(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return v(n,[{key:"getSession",value:function(e,t,n,r){var i=this;if(ge.API_URL&&ge.SESSION_PATH){var a=Ae(ge.API_URL+ge.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(r||ge.ACCESS_TOKEN||""));var o={url:Oe(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=at(o,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,ge.SESSION_PATH&&ge.API_URL&&(n||ge.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(Ee)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e)}}}]),n}(De)),Fe=je.getSessionAPI.bind(je),ze=new Set;function Be(e,t){t?ze.add(e):ze.delete(e)}var Ue,Ve,qe="mapbox-tiles",Ge=500,Ke=50;function He(){x.caches&&!Ue&&(Ue=x.caches.open(qe))}function We(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var Ze,Xe=1/0;function Ye(e){++Xe>Ke&&(e.getActor().send("enforceCacheSizeLimit",Ge),Xe=0)}function Qe(){return null==Ze&&(Ze=x.OffscreenCanvas&&new x.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof x.createImageBitmap),Ze}var $e={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze($e);var Je=function(e){f(n,e);var t=d(n);function n(e,r,i){var a;return p(this,n),401===r&&Ie(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=r,a.url=i,a}return v(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(h(Error)),et=$()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===x.location.protocol?x.parent:x).location.href},tt=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(et())&&!/^\w+:/.test(n))){if(x.fetch&&x.Request&&x.AbortController&&x.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new x.AbortController,i=new x.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:et(),signal:r.signal}),a=!1,o=!1,s=(n=i.url).indexOf("sku=")>0&&Ie(n);"json"===e.type&&i.headers.set("Accept","application/json");var u=function(n,r,a){if(!o){if(n&&"SecurityError"!==n.message&&X(n),r&&a)return c(r);var u=Date.now();x.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return c(n,r,u)}return t(new Je(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},c=function(n,r,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(r&&s&&function(e,t,n){if(He(),Ue){var r={status:t.status,statusText:t.statusText,headers:new x.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var i=J(t.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(e,t){if(void 0===Ve)try{new Response(new ReadableStream),Ve=!0}catch(e){Ve=!1}Ve?t(e.body):e.blob().then(t)}(t,(function(t){var n=new x.Response(t,r);He(),Ue&&Ue.then((function(t){return t.put(We(e.url),n)})).catch((function(e){return X(e.message)}))})))}}(i,r,s),a=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(He(),!Ue)return t(null);var n=We(e.url);Ue.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=J(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,u):u(null,null),{cancel:function(){o=!0,a||r.abort()}}}(e,t);if($()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new x.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new Je(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},nt=function(e,t){return tt(j(e,{type:"json"}),t)},rt=function(e,t){return tt(j(e,{type:"arrayBuffer"}),t)},it=function(e,t){return tt(j(e,{method:"POST"}),t)},at=function(e,t){return tt(j(e,{method:"GET"}),t)};function ot(e){var t=x.document.createElement("a");return t.href=e,t.protocol===x.document.location.protocol&&t.host===x.document.location.host}var st,ut,ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";st=[],ut=0;var lt=function e(t,n){if(be.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),ut>=ge.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return st.push(r),r}ut++;var i=!1,a=function(){if(!i)for(i=!0,ut--;st.length&&ut<ge.MAX_PARALLEL_IMAGE_REQUESTS;){var t=st.shift(),n=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=e(n,r).cancel)}},o=rt(t,(function(e,t,r,i){a(),e?n(e):t&&(Qe()?function(e,t){var n=new x.Blob([new Uint8Array(e)],{type:"image/png"});x.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,n):function(e,t,n,r){var i=new x.Image,a=x.URL;i.onload=function(){t(null,i),a.revokeObjectURL(i.src),i.onload=null,x.requestAnimationFrame((function(){i.src=ct}))},i.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var o=new x.Blob([new Uint8Array(e)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=e.byteLength?a.createObjectURL(o):ct}(t,n,r,i))}));return{cancel:function(){o.cancel(),a()}}};function ht(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ft(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var dt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),j(this,n),this.type=t},pt=function(e){f(n,e);var t=d(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,n),t.call(this,"error",j({error:e},r))}return n}(dt),vt=function(){function e(){p(this,e)}return v(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},ht(e,t,this._listeners),this}},{key:"off",value:function(e,t){return ft(e,t,this._listeners),ft(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},ht(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new dt(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=m(i);try{for(a.s();!(r=a.n()).done;)r.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],u=m(s);try{for(u.s();!(o=u.n()).done;){var c=o.value;ft(n,c,this._oneTimeListeners),c.call(this,e)}}catch(h){u.e(h)}finally{u.f()}var l=this._eventedParent;l&&(j(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(e))}else e instanceof pt&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},yt=function e(t,n,r,i){p(this,e),this.message=(t?"".concat(t,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)};function gt(e){var t=e.value;return t?[new yt(e.key,t,"constants have been deprecated as of v8")]:[]}function bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}function _t(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function wt(e){if(Array.isArray(e))return e.map(wt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=wt(e[n]);return t}return _t(e)}var xt=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,r)).message=r,i.key=e,i}return n}(h(Error)),kt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];p(this,e),this.parent=t,this.bindings={};var r,i=m(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(u){i.e(u)}finally{i.f()}}return v(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),Et={kind:"null"},Tt={kind:"number"},St={kind:"string"},It={kind:"boolean"},Ct={kind:"color"},At={kind:"object"},Ot={kind:"value"},Pt={kind:"collator"},Dt={kind:"formatted"},Rt={kind:"resolvedImage"};function Mt(e,t){return{kind:"array",itemType:e,N:t}}function Nt(e){if("array"===e.kind){var t=Nt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var Lt=[Et,Tt,St,It,Ct,Dt,At,Mt(Ot),Rt];function jt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!jt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var n,r=m(Lt);try{for(r.s();!(n=r.n()).done;)if(!jt(n.value,t))return null}catch(i){r.e(i)}finally{r.f()}}}return"Expected ".concat(Nt(e)," but found ").concat(Nt(t)," instead.")}function Ft(e,t){return t.some((function(t){return t.kind===e.kind}))}function zt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}function Bt(e){var t={exports:{}};return e(t,t.exports),t.exports}var Ut=Bt((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=s.indexOf("("),c=s.indexOf(")");if(-1!==u&&c+1===s.length){var l=s.substr(0,u),h=s.substr(u+1,c-(u+1)).split(","),f=1;switch(l){case"rgba":if(4!==h.length)return null;f=a(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),f];case"hsla":if(4!==h.length)return null;f=a(h.pop());case"hsl":if(3!==h.length)return null;var d=(parseFloat(h[0])%360+360)%360/360,p=a(h[1]),v=a(h[2]),m=v<=.5?v*(p+1):v+p-v*p,y=2*v-m;return[r(255*o(y,m,d+1/3)),r(255*o(y,m,d)),r(255*o(y,m,d-1/3)),f];default:return null}}return null}}catch(e){}})),Vt=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;p(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return v(e,[{key:"toString",value:function(){var e=this.toArray(),t=l(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=Ut.parseCSSColor(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Vt.black=new Vt(0,0,0,1),Vt.white=new Vt(1,1,1,1),Vt.transparent=new Vt(0,0,0,0),Vt.red=new Vt(1,0,0,1),Vt.blue=new Vt(0,0,1,1);var qt=function(){function e(t,n,r){p(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return v(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),Gt=function e(t,n,r,i,a){p(this,e),this.text=t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a},Kt=function(){function e(t){p(this,e),this.sections=t}return v(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=m(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new Gt(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Ht=function(){function e(t){p(this,e),this.name=t.name,this.available=t.available}return v(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Wt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Zt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Vt)return!0;if(e instanceof qt)return!0;if(e instanceof Kt)return!0;if(e instanceof Ht)return!0;if(Array.isArray(e)){var t,n=m(e);try{for(n.s();!(t=n.n()).done;)if(!Zt(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof e){for(var r in e)if(!Zt(e[r]))return!1;return!0}return!1}function Xt(e){if(null===e)return Et;if("string"==typeof e)return St;if("boolean"==typeof e)return It;if("number"==typeof e)return Tt;if(e instanceof Vt)return Ct;if(e instanceof qt)return Pt;if(e instanceof Kt)return Dt;if(e instanceof Ht)return Rt;if(Array.isArray(e)){var t,n,r=e.length,i=m(e);try{for(i.s();!(n=i.n()).done;){var a=Xt(n.value);if(t){if(t===a)continue;t=Ot;break}t=a}}catch(o){i.e(o)}finally{i.f()}return Mt(t||Ot,r)}return At}function Yt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Vt||e instanceof Kt||e instanceof Ht?e.toString():JSON.stringify(e)}var Qt=function(){function e(t,n){p(this,e),this.type=t,this.value=n}return v(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Vt?["rgba"].concat(this.value.toArray()):this.value instanceof Kt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Zt(t[1]))return n.error("invalid value");var r=t[1],i=Xt(r),a=n.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new e(i,r)}}]),e}(),$t=function(){function e(t){p(this,e),this.name="ExpressionEvaluationError",this.message=t}return v(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),Jt={string:St,number:Tt,boolean:It,object:At},en=function(){function e(t,n){p(this,e),this.type=t,this.args=n}return v(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!jt(this.type,Xt(n)))return n;if(t===this.args.length-1)throw new $t("Expected value to be of type ".concat(Nt(this.type),", but found ").concat(Nt(Xt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in Jt)||"object"===u)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=Jt[u],i++}else o=Ot;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}r=Mt(o,s)}else r=Jt[a];for(var c=[];i<t.length;i++){var l=n.parse(t[i],i,Ot);if(!l)return null;c.push(l)}return new e(r,c)}}]),e}(),tn=function(){function e(t){p(this,e),this.type=Dt,this.sections=t}return v(e,[{key:"evaluate",value:function(e){return new Kt(this.sections.map((function(t){var n=t.content.evaluate(e);return Xt(n)===Rt?new Gt("",n,null,null,null):new Gt(Yt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=m(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=m(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var u=null;if(s["font-scale"]&&!(u=n.parse(s["font-scale"],1,Tt)))return null;var c=null;if(s["text-font"]&&!(c=n.parse(s["text-font"],1,Mt(St))))return null;var l=null;if(s["text-color"]&&!(l=n.parse(s["text-color"],1,Ct)))return null;var h=i[i.length-1];h.scale=u,h.font=c,h.textColor=l}else{var f=n.parse(t[o],1,Ot);if(!f)return null;var d=f.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),nn=function(){function e(t){p(this,e),this.type=Rt,this.input=t}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Ht.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,St);return r?new e(r):n.error("No image name provided.")}}]),e}(),rn={"to-boolean":It,"to-color":Ct,"to-number":Tt,"to-string":St},an=function(){function e(t,n){p(this,e),this.type=t,this.args=n}return v(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,r,i=m(this.args);try{for(i.s();!(r=i.n()).done;){if(t=r.value.evaluate(e),n=null,t instanceof Vt)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Wt(t[0],t[1],t[2],t[3])))return new Vt(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(l){i.e(l)}finally{i.f()}throw new $t(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,u=m(this.args);try{for(u.s();!(o=u.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var c=Number(s);if(!isNaN(c))return c}}catch(l){u.e(l)}finally{u.f()}throw new $t("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Kt.fromString(Yt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Ht.fromString(Yt(this.args[0].evaluate(e))):Yt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new tn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new nn(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=rn[r],a=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,Ot);if(!s)return null;a.push(s)}return new e(i,a)}}]),e}(),on=["Unknown","Point","LineString","Polygon"],sn=function(){function e(){p(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}return v(e,[{key:"id",value:function(){return this.feature&&"id"in this.feature?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?on[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Vt.parse(e)),t}}]),e}(),un=function(){function e(t,n,r,i){p(this,e),this.name=t,this.type=n,this._evaluate=r,this.args=i}return v(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var r,i=t[0],a=e.definitions[i];if(!a)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,u=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,h=u.filter((function(e){var n=l(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),f=null,d=m(h);try{for(d.s();!(o=d.n()).done;){var p=l(o.value,2),v=p[0],y=p[1];f=new Pn(n.registry,n.path,null,n.scope);for(var g=[],b=!1,_=1;_<t.length;_++){var w=t[_],x=Array.isArray(v)?v[_-1]:v.type,k=f.parse(w,1+g.length,x);if(!k){b=!0;break}g.push(k)}if(!b)if(Array.isArray(v)&&v.length!==g.length)f.error("Expected ".concat(v.length," arguments, but found ").concat(g.length," instead."));else{for(var E=0;E<g.length;E++){var T=Array.isArray(v)?v[E]:v.type,S=g[E];f.concat(E+1).checkSubtype(T,S.type)}if(0===f.errors.length)return new e(i,s,y,g)}}}catch(P){d.e(P)}finally{d.f()}if(1===h.length)(r=n.errors).push.apply(r,c(f.errors));else{for(var I=(h.length?h:u).map((function(e){var t;return t=l(e,1)[0],Array.isArray(t)?"(".concat(t.map(Nt).join(", "),")"):"(".concat(Nt(t.type),"...)")})).join(" | "),C=[],A=1;A<t.length;A++){var O=n.parse(t[A],1+C.length);if(!O)return null;C.push(Nt(O.type))}n.error("Expected arguments of type ".concat(I,", but found (").concat(C.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var r in e.definitions=n,n)t[r]=e}}]),e}(),cn=function(){function e(t,n,r){p(this,e),this.type=Pt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}return v(e,[{key:"evaluate",value:function(e){return new qt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,It);if(!i)return null;var a=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,It);if(!a)return null;var o=null;return r.locale&&!(o=n.parse(r.locale,1,St))?null:new e(i,a,o)}}]),e}(),ln=8192;function hn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function fn(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function dn(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*ln),Math.round(r*i*ln)]}function pn(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function vn(e,t){for(var n,r,i,a=!1,o=0,s=t.length;o<s;o++)for(var u=t[o],c=0,l=u.length;c<l-1;c++){if(pn(e,u[c],u[c+1]))return!1;(r=u[c])[1]>(n=e)[1]!=(i=u[c+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(a=!a)}return a}function mn(e,t){for(var n=0;n<t.length;n++)if(vn(e,t[n]))return!0;return!1}function yn(e,t,n,r){var i=r[0]-n[0],a=r[1]-n[1],o=(e[0]-n[0])*a-i*(e[1]-n[1]),s=(t[0]-n[0])*a-i*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function gn(e,t,n){var r,i,a,o,s,u,c,l=m(n);try{for(l.s();!(r=l.n()).done;)for(var h=r.value,f=0;f<h.length-1;++f)if(0!=(u=[(s=h[f+1])[0]-(o=h[f])[0],s[1]-o[1]])[0]*(c=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-u[1]*c[0]&&yn(i,a,o,s)&&yn(o,s,i,a))return!0}catch(d){l.e(d)}finally{l.f()}return!1}function bn(e,t){for(var n=0;n<e.length;++n)if(!vn(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(gn(e[r],e[r+1],t))return!1;return!0}function _n(e,t){for(var n=0;n<t.length;n++)if(bn(e,t[n]))return!0;return!1}function wn(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var a=[],o=0;o<e[i].length;o++){var s=dn(e[i][o],n);hn(t,s),a.push(s)}r.push(a)}return r}function xn(e,t,n){for(var r=[],i=0;i<e.length;i++){var a=wn(e[i],t,n);r.push(a)}return r}function kn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,a=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===a&&(a=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=a}hn(t,e)}function En(e,t,n,r){var i,a=Math.pow(2,r.z)*ln,o=[r.x*ln,r.y*ln],s=[],u=m(e);try{for(u.s();!(i=u.n()).done;){var c,l=i.value,h=m(l);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=[f.x+o[0],f.y+o[1]];kn(d,t,n,a),s.push(d)}}catch(p){h.e(p)}finally{h.f()}}}catch(p){u.e(p)}finally{u.f()}return s}function Tn(e,t,n,r){var i,a,o=Math.pow(2,r.z)*ln,s=[r.x*ln,r.y*ln],u=[],c=m(e);try{for(c.s();!(i=c.n()).done;){var l,h=i.value,f=[],d=m(h);try{for(d.s();!(l=d.n()).done;){var p=l.value,v=[p.x+s[0],p.y+s[1]];hn(t,v),f.push(v)}}catch(x){d.e(x)}finally{d.f()}u.push(f)}}catch(x){c.e(x)}finally{c.f()}if(t[2]-t[0]<=o/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;var y,g=m(u);try{for(g.s();!(y=g.n()).done;){var b,_=y.value,w=m(_);try{for(w.s();!(b=w.n()).done;)kn(b.value,t,n,o)}catch(x){w.e(x)}finally{w.f()}}}catch(x){g.e(x)}finally{g.f()}}return u}var Sn=function(){function e(t,n){p(this,e),this.type=It,this.geojson=t,this.geometries=n}return v(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var a=wn(t.coordinates,r,i),o=En(e.geometry(),n,r,i);if(!fn(n,r))return!1;var s,u=m(o);try{for(u.s();!(s=u.n()).done;)if(!vn(s.value,a))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var c=xn(t.coordinates,r,i),l=En(e.geometry(),n,r,i);if(!fn(n,r))return!1;var h,f=m(l);try{for(f.s();!(h=f.n()).done;)if(!mn(h.value,c))return!1}catch(d){f.e(d)}finally{f.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){var a=wn(t.coordinates,r,i),o=Tn(e.geometry(),n,r,i);if(!fn(n,r))return!1;var s,u=m(o);try{for(u.s();!(s=u.n()).done;)if(!bn(s.value,a))return!1}catch(d){u.e(d)}finally{u.f()}}if("MultiPolygon"===t.type){var c=xn(t.coordinates,r,i),l=Tn(e.geometry(),n,r,i);if(!fn(n,r))return!1;var h,f=m(l);try{for(f.s();!(h=f.n()).done;)if(!_n(h.value,c))return!1}catch(d){f.e(d)}finally{f.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Zt(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var a=r.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new e(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}();function In(e){if(e instanceof un){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Sn)return!1;var t=!0;return e.eachChild((function(e){t&&!In(e)&&(t=!1)})),t}function Cn(e){if(e instanceof un&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Cn(e)&&(t=!1)})),t}function An(e,t){if(e instanceof un&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!An(e,t)&&(n=!1)})),n}var On=function(){function e(t,n){p(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return v(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new e(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Pn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new kt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];p(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=a,this.expectedType=r}return v(e,[{key:"parse",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new en(t,[e]):"coerce"===n?new an(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof Qt)&&"resolvedImage"!==a.type.kind&&Dn(a)){var u=new sn;try{a=new Qt(a.type,a.evaluate(u))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,a=r?this.scope.concat(r):this.scope;return new e(this.registry,i,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new xt(i,e))}},{key:"checkSubtype",value:function(e,t){var n=jt(e,t);return n&&this.error(n),n}}]),e}();function Dn(e){if(e instanceof On)return Dn(e.boundExpression);if(e instanceof un&&"error"===e.name)return!1;if(e instanceof cn)return!1;if(e instanceof Sn)return!1;var t=e instanceof an||e instanceof en,n=!0;return e.eachChild((function(e){n=t?n&&Dn(e):n&&e instanceof Qt})),!!n&&In(e)&&An(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function Rn(e,t){for(var n,r,i=e.length-1,a=0,o=i,s=0;a<=o;)if(n=e[s=Math.floor((a+o)/2)],r=e[s+1],n<=t){if(s===i||t<r)return s;a=s+1}else{if(!(n>t))throw new $t("Input is not a number.");o=s-1}return 0}var Mn=function(){function e(t,n,r){p(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var i,a=m(r);try{for(a.s();!(i=a.n()).done;){var o=l(i.value,2),s=o[0],u=o[1];this.labels.push(s),this.outputs.push(u)}}catch(c){a.e(c)}finally{a.f()}}return v(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Rn(t,r)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=m(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,Tt);if(!r)return null;var i=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],u=t[o+1],c=o,l=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);var h=n.parse(u,l,a);if(!h)return null;a=a||h.type,i.push([s,h])}return new e(a,r,i)}}]),e}();function Nn(e,t,n){return e*(1-n)+t*n}var Ln=Object.freeze({__proto__:null,number:Nn,color:function(e,t,n){return new Vt(Nn(e.r,t.r,n),Nn(e.g,t.g,n),Nn(e.b,t.b,n),Nn(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return Nn(e,t[r],n)}))}}),jn=.95047,Fn=1.08883,zn=4/29,Bn=6/29,Un=3*Bn*Bn,Vn=Math.PI/180,qn=180/Math.PI;function Gn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Un+zn}function Kn(e){return e>Bn?e*e*e:Un*(e-zn)}function Hn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Wn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Zn(e){var t=Wn(e.r),n=Wn(e.g),r=Wn(e.b),i=Gn((.4124564*t+.3575761*n+.1804375*r)/jn),a=Gn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-Gn((.0193339*t+.119192*n+.9503041*r)/Fn)),alpha:e.a}}function Xn(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Kn(t),n=jn*Kn(n),r=Fn*Kn(r),new Vt(Hn(3.2404542*n-1.5371385*t-.4985314*r),Hn(-.969266*n+1.8760108*t+.041556*r),Hn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Yn(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var Qn={forward:Zn,reverse:Xn,interpolate:function(e,t,n){return{l:Nn(e.l,t.l,n),a:Nn(e.a,t.a,n),b:Nn(e.b,t.b,n),alpha:Nn(e.alpha,t.alpha,n)}}},$n={forward:function(e){var t=Zn(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*qn;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Vn,n=e.c;return Xn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Yn(e.h,t.h,n),c:Nn(e.c,t.c,n),l:Nn(e.l,t.l,n),alpha:Nn(e.alpha,t.alpha,n)}}},Jn=Object.freeze({__proto__:null,lab:Qn,hcl:$n}),er=function(){function e(t,n,r,i,a){p(this,e),this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var o,s=m(a);try{for(s.s();!(o=s.n()).done;){var u=l(o.value,2),c=u[0],h=u[1];this.labels.push(c),this.outputs.push(h)}}catch(f){s.e(f)}finally{s.f()}}return v(e,[{key:"evaluate",value:function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);var o=Rn(n,i),s=e.interpolationFactor(this.interpolation,i,n[o],n[o+1]),u=r[o].evaluate(t),c=r[o+1].evaluate(t);return"interpolate"===this.operator?Ln[this.type.kind.toLowerCase()](u,c,s):"interpolate-hcl"===this.operator?$n.reverse($n.interpolate($n.forward(u),$n.forward(c),s)):Qn.reverse(Qn.interpolate(Qn.forward(u),Qn.forward(c),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=m(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,n,r){var i=0;if("exponential"===e.name)i=tr(t,e.base,n,r);else if("linear"===e.name)i=tr(t,1,n,r);else if("cubic-bezier"===e.name){var a=e.controlPoints;i=new g(a[0],a[1],a[2],a[3]).solve(tr(t,1,n,r))}return i}},{key:"parse",value:function(t,n){var r=u(t),i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var c=a[1];if("number"!=typeof c)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:c}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var l=a.slice(1);if(4!==l.length||l.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:l}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,Tt)))return null;var h=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=Ct:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var d=0;d<s.length;d+=2){var p=s[d],v=s[d+1],m=d+3,y=d+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(h.length&&h[h.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var g=n.parse(v,y,f);if(!g)return null;f=f||g.type,h.push([p,g])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new e(f,i,a,o,h):n.error("Type ".concat(Nt(f)," is not interpolatable."))}}]),e}();function tr(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var nr=function(){function e(t,n){p(this,e),this.type=t,this.args=n}return v(e,[{key:"evaluate",value:function(e){var t,n,r=null,i=0,a=m(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i++,(r=o.evaluate(e))&&r instanceof Ht&&!r.available&&(t||(t=r.name),r=null,i===this.args.length&&(r=t)),null!==r)break}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var a,o=[],s=m(t.slice(1));try{for(s.s();!(a=s.n()).done;){var u=a.value,c=n.parse(u,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!c)return null;r=r||c.type,o.push(c)}}catch(l){s.e(l)}finally{s.f()}return new e(i&&o.some((function(e){return jt(i,e.type)}))?Ot:r,o)}}]),e}(),rr=function(){function e(t,n){p(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return v(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=m(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(r){n.e(r)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=m(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=l(e.value,2),i=r[0],a=r[1];t.push(i,a.serialize())}}catch(o){n.e(o)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var r=[],i=1;i<t.length-1;i+=2){var a=t[i];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=n.parse(t[i+1],i+1);if(!o)return null;r.push([a,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return s?new e(r,s):null}}]),e}(),ir=function(){function e(t,n,r){p(this,e),this.type=t,this.index=n,this.input=r}return v(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new $t("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new $t("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new $t("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Tt),i=n.parse(t[2],2,Mt(n.expectedType||Ot));return r&&i?new e(i.type.itemType,r,i):null}}]),e}(),ar=function(){function e(t,n){p(this,e),this.type=It,this.needle=t,this.haystack=n}return v(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!n)return!1;if(!zt(t,["boolean","string","number","null"]))throw new $t("Expected first argument to be of type boolean, string, number or null, but found ".concat(Nt(Xt(t))," instead."));if(!zt(n,["string","array"]))throw new $t("Expected second argument to be of type array or string, but found ".concat(Nt(Xt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Ot),i=n.parse(t[2],2,Ot);return r&&i?Ft(r.type,[It,St,Tt,Et,Ot])?new e(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Nt(r.type)," instead")):null}}]),e}(),or=function(){function e(t,n,r){p(this,e),this.type=Tt,this.needle=t,this.haystack=n,this.fromIndex=r}return v(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!zt(t,["boolean","string","number","null"]))throw new $t("Expected first argument to be of type boolean, string, number or null, but found ".concat(Nt(Xt(t))," instead."));if(!zt(n,["string","array"]))throw new $t("Expected second argument to be of type array or string, but found ".concat(Nt(Xt(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Ot),i=n.parse(t[2],2,Ot);if(!r||!i)return null;if(!Ft(r.type,[It,St,Tt,Et,Ot]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Nt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,Tt);return a?new e(r,i,a):null}return new e(r,i)}}]),e}(),sr=function(){function e(t,n,r,i,a,o){p(this,e),this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Xt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],a={},o=m(r);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=a[this.cases[s]];void 0===u?(a[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[u][1].push(s)}}catch(y){o.e(y)}finally{o.f()}for(var c=function(e){return"number"===t.inputType.kind?Number(e):e},h=0,f=i;h<f.length;h++){var d=l(f[h],2),p=d[0],v=d[1];n.push(1===v.length?c(v[0]):v.map(c)),n.push(this.outputs[p].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var u=t[s],c=t[s+1];Array.isArray(u)||(u=[u]);var l=n.concat(s);if(0===u.length)return l.error("Expected at least one branch label.");var h,f=m(u);try{for(f.s();!(h=f.n()).done;){var d=h.value;if("number"!=typeof d&&"string"!=typeof d)return l.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof d&&Math.floor(d)!==d)return l.error("Numeric branch labels must be integer values.");if(r){if(l.checkSubtype(r,Xt(d)))return null}else r=Xt(d);if(void 0!==a[String(d)])return l.error("Branch labels must be unique.");a[String(d)]=o.length}}catch(g){f.e(g)}finally{f.f()}var p=n.parse(c,s,i);if(!p)return null;i=i||p.type,o.push(p)}var v=n.parse(t[1],1,Ot);if(!v)return null;var y=n.parse(t[t.length-1],t.length-1,i);return y?"value"!==v.type.kind&&n.concat(1).checkSubtype(r,v.type)?null:new e(r,i,v,a,o,y):null}}]),e}(),ur=function(){function e(t,n,r){p(this,e),this.type=t,this.branches=n,this.otherwise=r}return v(e,[{key:"evaluate",value:function(e){var t,n=m(this.branches);try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1];if(i.evaluate(e))return a.evaluate(e)}}catch(o){n.e(o)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=m(this.branches);try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1];e(i),e(a)}}catch(o){n.e(o)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=l(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],a=1;a<t.length-1;a+=2){var o=n.parse(t[a],a,It);if(!o)return null;var s=n.parse(t[a+1],a+1,r);if(!s)return null;i.push([o,s]),r=r||s.type}var u=n.parse(t[t.length-1],t.length-1,r);return u?new e(r,i,u):null}}]),e}(),cr=function(){function e(t,n,r,i){p(this,e),this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!zt(t,["string","array"]))throw new $t("Expected first argument to be of type array or string, but found ".concat(Nt(Xt(t))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Ot),i=n.parse(t[2],2,Tt);if(!r||!i)return null;if(!Ft(r.type,[Mt(Ot),St,Ot]))return n.error("Expected first argument to be of type array or string, but found ".concat(Nt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,Tt);return a?new e(r.type,r,i,a):null}return new e(r.type,r,i)}}]),e}();function lr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function hr(e,t,n,r){return 0===r.compare(t,n)}function fr(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){p(this,i),this.type=It,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return v(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Xt(a),u=Xt(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new $t('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var c=Xt(a),l=Xt(o);if("string"!==c.kind||"string"!==l.kind)return t(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):t(i,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,Ot);if(!a)return null;if(!lr(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Nt(a.type),"'."));var o=t.parse(e[2],2,Ot);if(!o)return null;if(!lr(n,o.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Nt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Nt(a.type),"' and '").concat(Nt(o.type),"'."));r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new en(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new en(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Pt)))return null}return new i(a,o,s)}}]),i}()}var dr=fr("==",(function(e,t,n){return t===n}),hr),pr=fr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!hr(0,t,n,r)})),vr=fr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),mr=fr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),yr=fr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),gr=fr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),br=function(){function e(t,n,r,i,a){p(this,e),this.type=St,this.number=t,this.locale=n,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=a}return v(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,Tt);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=n.parse(i.locale,1,St)))return null;var o=null;if(i.currency&&!(o=n.parse(i.currency,1,St)))return null;var s=null;if(i["min-fraction-digits"]&&!(s=n.parse(i["min-fraction-digits"],1,Tt)))return null;var u=null;return i["max-fraction-digits"]&&!(u=n.parse(i["max-fraction-digits"],1,Tt))?null:new e(r,a,o,s,u)}}]),e}(),_r={"==":dr,"!=":pr,">":mr,"<":vr,">=":gr,"<=":yr,array:en,at:ir,boolean:en,case:ur,coalesce:nr,collator:cn,format:tn,image:nn,in:ar,"index-of":or,interpolate:er,"interpolate-hcl":er,"interpolate-lab":er,length:function(){function e(t){p(this,e),this.type=Tt,this.input=t}return v(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new $t("Expected value to be of type string or array, but found ".concat(Nt(Xt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Nt(r.type)," instead.")):new e(r):null}}]),e}(),let:rr,literal:Qt,match:sr,number:en,"number-format":br,object:en,slice:cr,step:Mn,string:en,"to-boolean":an,"to-color":an,"to-number":an,"to-string":an,var:On,within:Sn};function wr(e,t){var n=l(t,4),r=n[0],i=n[1],a=n[2],o=n[3];r=r.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,u=Wt(r,i,a,s);if(u)throw new $t(u);return new Vt(r/255*s,i/255*s,a/255*s,s)}function xr(e,t){return e in t}function kr(e,t){var n=t[e];return void 0===n?null:n}function Er(e){return{type:e}}function Tr(e){return{result:"success",value:e}}function Sr(e){return{result:"error",value:e}}function Ir(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Cr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Ar(e){return!!e.expression&&e.expression.interpolated}function Or(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Pr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Dr(e){return e}function Rr(e,t){var n,r,i,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),u=e.type||(Ar(t)?"exponential":"interval");if(a&&((e=bt({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],Vt.parse(e[1])]}))),e.default=Vt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Jn[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===u)n=jr;else if("interval"===u)n=Lr;else if("categorical"===u){n=Nr,r=Object.create(null);var c,l=m(e.stops);try{for(l.s();!(c=l.n()).done;){var h=c.value;r[h[0]]=h[1]}}catch(E){l.e(E)}finally{l.f()}i=typeof e.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'.concat(u,'"'));n=Fr}if(o){for(var f={},d=[],p=0;p<e.stops.length;p++){var v=e.stops[p],y=v[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},d.push(y)),f[y].stops.push([v[0].value,v[1]])}for(var g=[],b=0,_=d;b<_.length;b++){var w=_[b];g.push([f[w].zoom,Rr(f[w],t)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:er.interpolationFactor.bind(void 0,x),zoomStops:g.map((function(e){return e[0]})),evaluate:function(n,r){var i=n.zoom;return jr({stops:g,base:e.base},t,i).evaluate(i,r)}}}if(s){var k="exponential"===u?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:er.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return n(e,t,o,r,i)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Mr(e.default,t.default):n(e,t,s,r,i)}}}function Mr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Nr(e,t,n,r,i){return Mr(typeof n===i?r[n]:void 0,e.default,t.default)}function Lr(e,t,n){if("number"!==Or(n))return Mr(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=Rn(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function jr(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Or(n))return Mr(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var a=Rn(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],u=e.stops[a+1][1],c=Ln[t.type]||Dr;if(e.colorSpace&&"rgb"!==e.colorSpace){var l=Jn[e.colorSpace];c=function(e,t){return l.reverse(l.interpolate(l.forward(e),l.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.evaluate.apply(void 0,t),i=u.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return c(r,i,o)}}:c(s,u,o)}function Fr(e,t,n){return"color"===t.type?n=Vt.parse(n):"formatted"===t.type?n=Kt.fromString(n.toString()):"resolvedImage"===t.type?n=Ht.fromString(n.toString()):Or(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Mr(n,e.default,t.default)}un.register(_r,{error:[{kind:"error"},[St],function(e,t){var n=l(t,1)[0];throw new $t(n.evaluate(e))}],typeof:[St,[Ot],function(e,t){return Nt(Xt(l(t,1)[0].evaluate(e)))}],"to-rgba":[Mt(Tt,4),[Ct],function(e,t){return l(t,1)[0].evaluate(e).toArray()}],rgb:[Ct,[Tt,Tt,Tt],wr],rgba:[Ct,[Tt,Tt,Tt,Tt],wr],has:{type:It,overloads:[[[St],function(e,t){return xr(l(t,1)[0].evaluate(e),e.properties())}],[[St,At],function(e,t){var n=l(t,2),r=n[0],i=n[1];return xr(r.evaluate(e),i.evaluate(e))}]]},get:{type:Ot,overloads:[[[St],function(e,t){return kr(l(t,1)[0].evaluate(e),e.properties())}],[[St,At],function(e,t){var n=l(t,2),r=n[0],i=n[1];return kr(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[Ot,[St],function(e,t){return kr(l(t,1)[0].evaluate(e),e.featureState||{})}],properties:[At,[],function(e){return e.properties()}],"geometry-type":[St,[],function(e){return e.geometryType()}],id:[Ot,[],function(e){return e.id()}],zoom:[Tt,[],function(e){return e.globals.zoom}],"heatmap-density":[Tt,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Tt,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[Tt,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[Ot,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Tt,Er(Tt),function(e,t){var n,r=0,i=m(t);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"*":[Tt,Er(Tt),function(e,t){var n,r=1,i=m(t);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"-":{type:Tt,overloads:[[[Tt,Tt],function(e,t){var n=l(t,2),r=n[0],i=n[1];return r.evaluate(e)-i.evaluate(e)}],[[Tt],function(e,t){return-l(t,1)[0].evaluate(e)}]]},"/":[Tt,[Tt,Tt],function(e,t){var n=l(t,2),r=n[0],i=n[1];return r.evaluate(e)/i.evaluate(e)}],"%":[Tt,[Tt,Tt],function(e,t){var n=l(t,2),r=n[0],i=n[1];return r.evaluate(e)%i.evaluate(e)}],ln2:[Tt,[],function(){return Math.LN2}],pi:[Tt,[],function(){return Math.PI}],e:[Tt,[],function(){return Math.E}],"^":[Tt,[Tt,Tt],function(e,t){var n=l(t,2),r=n[0],i=n[1];return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.log(n.evaluate(e))}],log2:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.atan(n.evaluate(e))}],min:[Tt,Er(Tt),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[Tt,Er(Tt),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.abs(n.evaluate(e))}],round:[Tt,[Tt],function(e,t){var n=l(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[Tt,[Tt],function(e,t){var n=l(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[It,[St,Ot],function(e,t){var n=l(t,2),r=n[0],i=n[1];return e.properties()[r.value]===i.value}],"filter-id-==":[It,[Ot],function(e,t){var n=l(t,1)[0];return e.id()===n.value}],"filter-type-==":[It,[St],function(e,t){var n=l(t,1)[0];return e.geometryType()===n.value}],"filter-<":[It,[St,Ot],function(e,t){var n=l(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<o}],"filter-id-<":[It,[Ot],function(e,t){var n=l(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[It,[St,Ot],function(e,t){var n=l(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>o}],"filter-id->":[It,[Ot],function(e,t){var n=l(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[It,[St,Ot],function(e,t){var n=l(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[It,[Ot],function(e,t){var n=l(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[It,[St,Ot],function(e,t){var n=l(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[It,[Ot],function(e,t){var n=l(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[It,[Ot],function(e,t){return l(t,1)[0].value in e.properties()}],"filter-has-id":[It,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[It,[Mt(St)],function(e,t){return l(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[It,[Mt(Ot)],function(e,t){return l(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[It,[St,Mt(Ot)],function(e,t){var n=l(t,2),r=n[0];return n[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[It,[St,Mt(Ot)],function(e,t){var n=l(t,2),r=n[0],i=n[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:It,overloads:[[[It,It],function(e,t){var n=l(t,2),r=n[0],i=n[1];return r.evaluate(e)&&i.evaluate(e)}],[Er(It),function(e,t){var n,r=m(t);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:It,overloads:[[[It,It],function(e,t){var n=l(t,2),r=n[0],i=n[1];return r.evaluate(e)||i.evaluate(e)}],[Er(It),function(e,t){var n,r=m(t);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(e))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[It,[It],function(e,t){return!l(t,1)[0].evaluate(e)}],"is-supported-script":[It,[St],function(e,t){var n=l(t,1)[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[St,[St],function(e,t){return l(t,1)[0].evaluate(e).toUpperCase()}],downcase:[St,[St],function(e,t){return l(t,1)[0].evaluate(e).toLowerCase()}],concat:[St,Er(Ot),function(e,t){return t.map((function(t){return Yt(t.evaluate(e))})).join("")}],"resolved-locale":[St,[Pt],function(e,t){return l(t,1)[0].evaluate(e).resolvedLocale()}]});var zr=function(){function e(t,n){p(this,e),this.expression=t,this._warningHistory={},this._evaluator=new sn,this._defaultValue=n?function(e){return"color"===e.type&&Pr(e.default)?new Vt(0,0,0,0):"color"===e.type?Vt.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return v(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,r,i,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new $t("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(o)," instead."));return o}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function Br(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in _r}function Ur(e,t){var n=new Pn(_r,[],t?function(e){var t={color:Ct,string:St,number:Tt,enum:St,boolean:It,formatted:Dt,resolvedImage:Rt};return"array"===e.type?Mt(t[e.value]||Ot,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Tr(new zr(r,t)):Sr(n.errors)}var Vr=function(){function e(t,n){p(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!Cn(n.expression)}return v(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}}]),e}(),qr=function(){function e(t,n,r,i){p(this,e),this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!Cn(n.expression),this.interpolationType=i}return v(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?er.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function Gr(e,t){if("error"===(e=Ur(e,t)).result)return e;var n=e.value.expression,r=In(n);if(!r&&!Ir(t))return Sr([new xt("","data expressions not supported")]);var i=An(n,["zoom"]);if(!i&&!Cr(t))return Sr([new xt("","zoom expressions not supported")]);var a=Hr(n);return a||i?a instanceof xt?Sr([a]):a instanceof er&&!Ar(t)?Sr([new xt("",'"interpolate" expressions cannot be used with this property')]):Tr(a?new qr(r?"camera":"composite",e.value,a.labels,a instanceof er?a.interpolation:void 0):new Vr(r?"constant":"source",e.value)):Sr([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var Kr=function(){function e(t,n){p(this,e),this._parameters=t,this._specification=n,bt(this,Rr(this._parameters,this._specification))}return v(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function Hr(e){var t=null;if(e instanceof rr)t=Hr(e.result);else if(e instanceof nr){var n,r=m(e.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t=Hr(i))break}}catch(a){r.e(a)}finally{r.f()}}else(e instanceof Mn||e instanceof er)&&e.input instanceof un&&"zoom"===e.input.name&&(t=e);return t instanceof xt||e.eachChild((function(e){var n=Hr(e);n instanceof xt?t=n:!t&&n?t=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Wr(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],u=Or(n);if("object"!==u)return[new yt(t,n,"object expected, ".concat(u," found"))];for(var c in n){var l=c.split(".")[0],h=r[l]||r["*"],f=void 0;if(i[l])f=i[l];else if(r[l])f=wi;else if(i["*"])f=i["*"];else{if(!r["*"]){s.push(new yt(t,n[c],'unknown property "'.concat(c,'"')));continue}f=wi}s=s.concat(f({key:(t?"".concat(t,"."):t)+c,value:n[c],valueSpec:h,style:a,styleSpec:o,object:n,objectKey:c},n))}for(var d in r)i[d]||r[d].required&&void 0===r[d].default&&void 0===n[d]&&s.push(new yt(t,n,'missing required property "'.concat(d,'"')));return s}function Zr(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||wi;if("array"!==Or(t))return[new yt(a,t,"array expected, ".concat(Or(t)," found"))];if(n.length&&t.length!==n.length)return[new yt(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new yt(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(s.function=n.function),"object"===Or(n.value)&&(s=n.value);for(var u=[],c=0;c<t.length;c++)u=u.concat(o({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:r,styleSpec:i,key:"".concat(a,"[").concat(c,"]")}));return u}function Xr(e){var t=e.key,n=e.value,r=e.valueSpec,i=Or(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new yt(t,n,"number expected, ".concat(i," found"))];if("minimum"in r){var a=r.minimum;if("array"===Or(r.minimum)&&(a=r.minimum[e.arrayIndex]),n<a)return[new yt(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in r){var o=r.maximum;if("array"===Or(r.maximum)&&(o=r.maximum[e.arrayIndex]),n>o)return[new yt(t,n,"".concat(n," is greater than the maximum value ").concat(o))]}return[]}function Yr(e){var t,n,r,i=e.valueSpec,a=_t(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,u=!s,c="array"===Or(e.value.stops)&&"array"===Or(e.value.stops[0])&&"object"===Or(e.value.stops[0][0]),l=Wr({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new yt(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(Zr({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Or(n)&&0===n.length&&t.push(new yt(e.key,n,"array must have at least one stop")),t},default:function(e){return wi({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&l.push(new yt(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||l.push(new yt(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Ar(e.valueSpec)&&l.push(new yt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Ir(e.valueSpec)?l.push(new yt(e.key,e.value,"property functions not supported")):s&&!Cr(e.valueSpec)&&l.push(new yt(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!c||void 0!==e.value.property||l.push(new yt(e.key,e.value,'"property" property is required')),l;function h(e){var t=[],a=e.value,s=e.key;if("array"!==Or(a))return[new yt(s,a,"array expected, ".concat(Or(a)," found"))];if(2!==a.length)return[new yt(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(c){if("object"!==Or(a[0]))return[new yt(s,a,"object expected, ".concat(Or(a[0])," found"))];if(void 0===a[0].zoom)return[new yt(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new yt(s,a,"object stop key must have value")];if(r&&r>_t(a[0].zoom))return[new yt(s,a[0].zoom,"stop zoom values must appear in ascending order")];_t(a[0].zoom)!==r&&(r=_t(a[0].zoom),n=void 0,o={}),t=t.concat(Wr({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Xr,value:f}}))}else t=t.concat(f({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return Br(wt(a[1]))?t.concat([new yt("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(wi({key:"".concat(s,"[1]"),value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function f(e,r){var s=Or(e.value),u=_t(e.value),c=null!==e.value?e.value:r;if(t){if(s!==t)return[new yt(e.key,c,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new yt(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var l="number expected, ".concat(s," found");return Ir(i)&&void 0===a&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new yt(e.key,c,l)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==n&&u<n?[new yt(e.key,c,"stop domain values must appear in ascending order")]:(n=u,"categorical"===a&&u in o?[new yt(e.key,c,"stop domain values must be unique")]:(o[u]=!0,[])):[new yt(e.key,c,"integer expected, found ".concat(u))]}}function Qr(e){var t=("property"===e.expressionContext?Gr:Ur)(wt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new yt("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new yt(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Cn(n))return[new yt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Cn(n))return[new yt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!An(n,["zoom","feature-state"]))return[new yt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!In(n))return[new yt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $r(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(_t(n))&&i.push(new yt(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(_t(n))&&i.push(new yt(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function Jr(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=m(e.slice(1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Jr(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}var ei={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ti(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};Jr(e)||(e=ii(e));var t=Ur(e,ei);if("error"===t.result)throw new Error(t.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return{filter:function(e,n,r){return t.value.evaluate(e,n,{},r)},needGeometry:ri(e)}}function ni(e,t){return e<t?-1:e>t?1:0}function ri(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(ri(e[t]))return!0;return!1}function ii(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?ai(e[1],e[2],"=="):"!="===n?ui(ai(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?ai(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(ii))):"all"===n?["all"].concat(e.slice(1).map(ii)):"none"===n?["all"].concat(e.slice(1).map(ii).map(ui)):"in"===n?oi(e[1],e.slice(2)):"!in"===n?ui(oi(e[1],e.slice(2))):"has"===n?si(e[1]):"!has"===n?ui(si(e[1])):"within"!==n||e}function ai(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function oi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(ni)]]:["filter-in-small",e,["literal",t]]}}function si(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ui(e){return["!",e]}function ci(e){return Jr(wt(e.value))?Qr(bt({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):li(e)}function li(e){var t=e.value,n=e.key;if("array"!==Or(t))return[new yt(n,t,"array expected, ".concat(Or(t)," found"))];var r,i=e.styleSpec,a=[];if(t.length<1)return[new yt(n,t,"filter array must have at least 1 element")];switch(a=a.concat($r({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),_t(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===_t(t[1])&&a.push(new yt(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new yt(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(r=Or(t[1]))&&a.push(new yt("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));for(var o=2;o<t.length;o++)r=Or(t[o]),"$type"===_t(t[1])?a=a.concat($r({key:"".concat(n,"[").concat(o,"]"),value:t[o],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new yt("".concat(n,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(li({key:"".concat(n,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Or(t[1]),2!==t.length?a.push(new yt(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&a.push(new yt("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));break;case"within":r=Or(t[1]),2!==t.length?a.push(new yt(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==r&&a.push(new yt("".concat(n,"[1]"),t[1],"object expected, ".concat(r," found")))}return a}function hi(e,t){var n=e.key,r=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return wi({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});var c,l=e.valueSpec||s[o];if(!l)return[new yt(n,a,'unknown property "'.concat(o,'"'))];if("string"===Or(a)&&Ir(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(a)))return[new yt(n,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(c[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&h.push(new yt(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Pr(wt(a))&&"identity"===_t(a.type)&&h.push(new yt(n,a,'"text-font" does not support identity functions'))),h.concat(wi({key:e.key,value:a,valueSpec:l,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function fi(e){return hi(e,"paint")}function di(e){return hi(e,"layout")}function pi(e){var t=[],n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new yt(r,n,'either "type" or "ref" is required'));var o,s=_t(n.type),u=_t(n.ref);if(n.id)for(var c=_t(n.id),l=0;l<e.arrayIndex;l++){var h=i.layers[l];_t(h.id)===c&&t.push(new yt(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new yt(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){_t(e.id)===u&&(o=e)})),o?o.ref?t.push(new yt(r,n.ref,"ref cannot reference another ref layer")):s=_t(o.type):t.push(new yt(r,n.ref,'ref layer "'.concat(u,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=i.sources&&i.sources[n.source],d=f&&_t(f.type);f?"vector"===d&&"raster"===s?t.push(new yt(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===d&&"raster"!==s?t.push(new yt(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new yt(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===d&&f.lineMetrics||t.push(new yt(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new yt(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new yt(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new yt(r,n,'missing required property "source"'));return t=t.concat(Wr({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wi({key:"".concat(r,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:ci,layout:function(e){return Wr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return di(bt({layerType:s},e))}}})},paint:function(e){return Wr({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return fi(bt({layerType:s},e))}}})}}}))}function vi(e){var t=e.value,n=e.key,r=Or(t);return"string"!==r?[new yt(n,t,"string expected, ".concat(r," found"))]:[]}var mi={promoteId:function(e){var t=e.key,n=e.value;if("string"===Or(n))return vi({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,c(vi({key:"".concat(t,".").concat(i),value:n[i]})));return r}};function yi(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new yt(n,t,'"type" is required')];var a,o=_t(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=Wr({key:n,value:t,valueSpec:r["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:mi});case"geojson":if(a=Wr({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:mi}),t.cluster)for(var s in t.clusterProperties){var u,h,f=l(t.clusterProperties[s],2),d=f[0],p=f[1],v="string"==typeof d?[d,["accumulated"],["get",s]]:d;(u=a).push.apply(u,c(Qr({key:"".concat(n,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(h=a).push.apply(h,c(Qr({key:"".concat(n,".").concat(s,".reduce"),value:v,expressionContext:"cluster-reduce"})))}return a;case"video":return Wr({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Wr({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new yt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $r({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function gi(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,a=[],o=Or(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new yt("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var u=s.match(/^(.*)-transition$/);a=a.concat(u&&r[u[1]]&&r[u[1]].transition?wi({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?wi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new yt(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function bi(e){var t=e.value,n=e.key,r=e.style,i=e.styleSpec,a=i.terrain,o=[],s=Or(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new yt("terrain",t,"object expected, ".concat(s," found"))]);for(var u in t){var c=u.match(/^(.*)-transition$/);o=o.concat(c&&a[c[1]]&&a[c[1]].transition?wi({key:u,value:t[u],valueSpec:i.transition,style:r,styleSpec:i}):a[u]?wi({key:u,value:t[u],valueSpec:a[u],style:r,styleSpec:i}):[new yt(u,t[u],'unknown property "'.concat(u,'"'))])}if(t.source){var l=r.sources&&r.sources[t.source],h=l&&_t(l.type);l?"raster-dem"!==h&&o.push(new yt(n,t.source,"terrain cannot be used with a source of type ".concat(h,', it only be used with a "raster-dem" source type'))):o.push(new yt(n,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new yt(n,t,'terrain is missing required property "source"'));return o}var _i={"*":function(){return[]},array:Zr,boolean:function(e){var t=e.value,n=e.key,r=Or(t);return"boolean"!==r?[new yt(n,t,"boolean expected, ".concat(r," found"))]:[]},number:Xr,color:function(e){var t=e.key,n=e.value,r=Or(n);return"string"!==r?[new yt(t,n,"color expected, ".concat(r," found"))]:null===Ut.parseCSSColor(n)?[new yt(t,n,'color expected, "'.concat(n,'" found'))]:[]},constants:gt,enum:$r,filter:ci,function:Yr,layer:pi,object:Wr,source:yi,light:gi,terrain:bi,string:vi,formatted:function(e){return 0===vi(e).length?[]:Qr(e)},resolvedImage:function(e){return 0===vi(e).length?[]:Qr(e)}};function wi(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Pr(_t(t))?Yr(e):n.expression&&Br(wt(t))?Qr(e):n.type&&_i[n.type]?_i[n.type](e):Wr(bt({},e,{valueSpec:n.type?r[n.type]:n}))}function xi(e){var t=e.value,n=e.key,r=vi(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new yt(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new yt(n,t,'"glyphs" url must include a "{range}" token'))),r}function ki(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mt,n=[];return n=n.concat(wi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:xi,"*":function(){return[]}}})),e.constants&&(n=n.concat(gt({key:"constants",value:e.constants,style:e,styleSpec:t}))),Ei(n)}function Ei(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function Ti(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ei(e.apply(this,n))}}ki.source=Ti(yi),ki.light=Ti(gi),ki.terrain=Ti(bi),ki.layer=Ti(pi),ki.filter=Ti(ci),ki.paintProperty=Ti(fi),ki.layoutProperty=Ti(di);var Si=ki,Ii=Si.light,Ci=Si.paintProperty,Ai=Si.layoutProperty;function Oi(e,t){var n=!1;if(t&&t.length){var r,i=m(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fire(new pt(new Error(a.message))),n=!0}}catch(o){i.e(o)}finally{i.f()}}return n}var Pi=Di;function Di(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];r.push(o===s?null:i.subarray(o,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var l=n/t*e;this.min=-l,this.max=e+l}Di.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Di.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Di.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},Di.prototype.query=function(e,t,n,r,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Di.prototype._queryCell=function(e,t,n,r,i,a,o,s){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,h=0;h<u.length;h++){var f=u[h];if(void 0===o[f]){var d=4*f;(s?s(l[d+0],l[d+1],l[d+2],l[d+3]):e<=l[d+2]&&t<=l[d+3]&&n>=l[d+0]&&r>=l[d+1])?(o[f]=!0,a.push(c[f])):o[f]=!1}}},Di.prototype._forEachCell=function(e,t,n,r,i,a,o,s){for(var u=this._convertToCellCoord(e),c=this._convertToCellCoord(t),l=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=u;f<=l;f++)for(var d=c;d<=h;d++){var p=this.d*d+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&i.call(this,e,t,n,r,p,a,o,s))return}},Di.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Di.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Di.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+e.length]=a,i.set(this.keys,a),i[3+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var Ri=x.ImageData,Mi=x.ImageBitmap,Ni={};function Li(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Ni[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var ji in Li("Object",Object),Pi.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Pi.deserialize=function(e){return new Pi(e.buffer)},Li("Grid",Pi),Li("Color",Vt),Li("Error",Error),Li("ResolvedImage",Ht),Li("StylePropertyFunction",Kr),Li("StyleExpression",zr,{omit:["_evaluator"]}),Li("ZoomDependentExpression",qr),Li("ZoomConstantExpression",Vr),Li("CompoundExpression",un,{omit:["_evaluate"]}),_r)_r[ji]._classRegistryKey||Li("Expression_".concat(ji),_r[ji]);function Fi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function zi(e){return Mi&&e instanceof Mi}function Bi(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Fi(e)||zi(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof Ri)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var r,i=[],a=m(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(Bi(o,t))}}catch(f){a.e(f)}finally{a.f()}return i}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var c=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var l in e)if(e.hasOwnProperty(l)&&!(Ni[u].omit.indexOf(l)>=0)){var h=e[l];c[l]=Ni[u].shallow.indexOf(l)>=0?h:Bi(h,t)}e instanceof Error&&(c.message=e.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(c.$name=u),c}throw new Error("can't serialize object of type "+typeof e)}function Ui(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Fi(e)||zi(e)||ArrayBuffer.isView(e)||e instanceof Ri)return e;if(Array.isArray(e))return e.map(Ui);if("object"==typeof e){var t=e.$name||"Object",n=Ni[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];if("$name"!==o){var s=e[o];r[o]=Ni[t].shallow.indexOf(o)>=0?s:Ui(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var Vi=function(){function e(){p(this,e),this.first=!0}return v(e,[{key:"update",value:function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}]),e}(),qi=function(e){return e>=12352&&e<=12447},Gi=function(e){return e>=12448&&e<=12543},Ki=function(e){return e>=19968&&e<=40959},Hi=function(e){return e>=44032&&e<=55215};function Wi(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;)if(Zi(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function Zi(e){return!(746!==e&&747!==e&&(e<4352||!(function(e){return e>=12704&&e<=12735}(e)||function(e){return e>=12544&&e<=12591}(e)||function(e){return e>=65072&&e<=65103}(e)&&!(e>=65097&&e<=65103)||function(e){return e>=63744&&e<=64255}(e)||function(e){return e>=13056&&e<=13311}(e)||function(e){return e>=11904&&e<=12031}(e)||function(e){return e>=12736&&e<=12783}(e)||!(!function(e){return e>=12288&&e<=12351}(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||function(e){return e>=13312&&e<=19903}(e)||Ki(e)||function(e){return e>=12800&&e<=13055}(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||Hi(e)||qi(e)||function(e){return e>=12272&&e<=12287}(e)||function(e){return e>=12688&&e<=12703}(e)||function(e){return e>=12032&&e<=12255}(e)||function(e){return e>=12784&&e<=12799}(e)||Gi(e)&&12540!==e||!(!function(e){return e>=65280&&e<=65519}(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!function(e){return e>=65104&&e<=65135}(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||function(e){return e>=65040&&e<=65055}(e)||function(e){return e>=19904&&e<=19967}(e)||function(e){return e>=40960&&e<=42127}(e)||function(e){return e>=42128&&e<=42191}(e))))}function Xi(e){return e>=1424&&e<=2303||function(e){return e>=64336&&e<=65023}(e)||function(e){return e>=65136&&e<=65279}(e)}function Yi(e,t){return!(!t&&Xi(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function Qi(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;)if(Xi(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var $i="deferred",Ji="loading",ea="loaded",ta=null,na="unavailable",ra=null,ia=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(na="error"),ta&&ta(e)};function aa(){oa.fire(new dt("pluginStateChange",{pluginStatus:na,pluginURL:ra}))}var oa=new vt,sa=function(){return na},ua=function(){if(na!==$i||!ra)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");na=Ji,aa(),ra&&rt({url:ra},(function(e){e?ia(e):(na=ea,aa())}))},ca={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return na===ea||null!=ca.applyArabicShaping},isLoading:function(){return na===Ji},setState:function(e){na=e.pluginStatus,ra=e.pluginURL},isParsed:function(){return null!=ca.applyArabicShaping&&null!=ca.processBidirectionalText&&null!=ca.processStyledBidirectionalText},getPluginURL:function(){return ra}},la=function(){function e(t,n){p(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vi,this.transition={})}return v(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,r=m(e);try{for(r.s();!(n=r.n()).done;)if(!Yi(n.value.charCodeAt(0),t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,ca.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}]),e}(),ha=function(){function e(t,n){p(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(Pr(e))return new Kr(e,t);if(Br(e)){var n=Gr(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Vt.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?t.specification.default:n,t.specification)}return v(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),fa=function(){function e(t){p(this,e),this.property=t,this.value=new ha(t,void 0)}return v(e,[{key:"transitioned",value:function(e,t){return new pa(this.property,this.value,t,j({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new pa(this.property,this.value,null,{},0)}}]),e}(),da=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return v(e,[{key:"getValue",value:function(e){return W(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new fa(this._values[e].property)),this._values[e].value=new ha(this._values[e].property,null===t?void 0:W(t))}},{key:"getTransition",value:function(e){return W(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new fa(this._values[e].property)),this._values[e].transition=W(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var a=this.getTransition(r);void 0!==a&&(e["".concat(r,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new va(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var a=i[r];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new va(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e}}]),e}(),pa=function(){function e(t,n,r,i,a){p(this,e),this.property=t,this.value=n,this.begin=a+i.delay||0,this.end=this.begin+i.duration||0,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return v(e,[{key:"possiblyEvaluate",value:function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(e,t,n);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),i,C(o))}return i}}]),e}(),va=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return v(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new ga(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),ma=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return v(e,[{key:"getValue",value:function(e){return W(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new ha(this._values[e].property,null===t?void 0:W(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new ga(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}}]),e}(),ya=function(){function e(t,n,r){p(this,e),this.property=t,this.value=n,this.parameters=r}return v(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}]),e}(),ga=function(){function e(t){p(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return v(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),ba=function(){function e(t){p(this,e),this.specification=t}return v(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var r=Ln[this.specification.type];return r?r(e,t,n):e}}]),e}(),_a=function(){function e(t,n){p(this,e),this.specification=t,this.overrides=n}return v(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return new ya(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ya(this,{kind:"constant",value:void 0},e.parameters);var r=Ln[this.specification.type];return r?new ya(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,r,i,a){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,a)}}]),e}(),wa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"possiblyEvaluate",value:function(e,t,n,r){if(void 0===e.value)return new ya(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r),a="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,t);return new ya(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new ya(this,{kind:"constant",value:s},t)}return new ya(this,e.expression,t)}},{key:"evaluate",value:function(e,t,n,r,i,a){if("source"===e.kind){var o=e.evaluate(t,n,r,i,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}},{key:"_calculate",value:function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),n}(_a),xa=function(){function e(t){p(this,e),this.specification=t}return v(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new la(Math.floor(t.zoom-1),t)),e.expression.evaluate(new la(Math.floor(t.zoom),t)),e.expression.evaluate(new la(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),ka=function(){function e(t){p(this,e),this.specification=t}return v(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),e}(),Ea=function e(t){for(var n in p(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var r=t[n];r.specification.overridable&&this.overridableProperties.push(n);var i=this.defaultPropertyValues[n]=new ha(r,void 0),a=this.defaultTransitionablePropertyValues[n]=new fa(r);this.defaultTransitioningPropertyValues[n]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};function Ta(e,t){return 256*(e=R(Math.floor(e),0,255))+R(Math.floor(t),0,255)}Li("DataDrivenProperty",_a),Li("DataConstantProperty",ba),Li("CrossFadedDataDrivenProperty",wa),Li("CrossFadedProperty",xa),Li("ColorRampProperty",ka);var Sa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ia=function e(t,n){p(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ca=function(){function e(){p(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return v(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function Aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((function(e){var i=Sa[e.type].BYTES_PER_ELEMENT,a=n=Oa(n,Math.max(t,i)),o=e.components||1;return r=Math.max(r,i),n+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:Oa(n,Math.max(r,t)),alignment:t}}function Oa(e,t){return Math.ceil(e/t)*t}var Pa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}]),n}(Ca);Pa.prototype.bytesPerElement=4,Li("StructArrayLayout2i4",Pa);var Da=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e}}]),n}(Ca);Da.prototype.bytesPerElement=8,Li("StructArrayLayout4i8",Da);var Ra=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var u=6*e,c=12*e,l=3*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=a,this.uint8[c+7]=o,this.float32[l+2]=s,e}}]),n}(Ca);Ra.prototype.bytesPerElement=12,Li("StructArrayLayout2i4ub1f12",Ra);var Ma=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}]),n}(Ca);Ma.prototype.bytesPerElement=8,Li("StructArrayLayout2f8",Ma);var Na=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,c){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,a,o,s,u,c)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,c,l){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=u,this.uint16[h+8]=c,this.uint16[h+9]=l,e}}]),n}(Ca);Na.prototype.bytesPerElement=20,Li("StructArrayLayout10ui20",Na);var La=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,c,l,h){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,a,o,s,u,c,l,h)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f){var d=12*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.uint16[d+4]=a,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=u,this.int16[d+8]=c,this.int16[d+9]=l,this.int16[d+10]=h,this.int16[d+11]=f,e}}]),n}(Ca);La.prototype.bytesPerElement=24,Li("StructArrayLayout4i4ui4i24",La);var ja=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}]),n}(Ca);ja.prototype.bytesPerElement=12,Li("StructArrayLayout3f12",ja);var Fa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(Ca);Fa.prototype.bytesPerElement=4,Li("StructArrayLayout1ul4",Fa);var za=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,c){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,a,o,s,u,c)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,c,l){var h=16*e,f=8*e;return this.int16[h+0]=t,this.int16[h+1]=n,this.float32[f+1]=r,this.float32[f+2]=i,this.float32[f+3]=a,this.float32[f+4]=o,this.int16[h+10]=s,this.uint32[f+6]=u,this.uint16[h+14]=c,this.uint16[h+15]=l,e}}]),n}(Ca);za.prototype.bytesPerElement=32,Li("StructArrayLayout2i4f1i1ul2ui32",za);var Ba=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),n}(Ca);Ba.prototype.bytesPerElement=12,Li("StructArrayLayout2i2i2i12",Ba);var Ua=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,e}}]),n}(Ca);Ua.prototype.bytesPerElement=16,Li("StructArrayLayout2f1f2i16",Ua);var Va=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,e}}]),n}(Ca);Va.prototype.bytesPerElement=12,Li("StructArrayLayout2ub2f12",Va);var qa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}]),n}(Ca);qa.prototype.bytesPerElement=6,Li("StructArrayLayout3ui6",qa);var Ga=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m){var y=this.length;return this.resize(y+1),this.emplace(y,e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m,y){var g=24*e,b=12*e,_=48*e;return this.int16[g+0]=t,this.int16[g+1]=n,this.uint16[g+2]=r,this.uint16[g+3]=i,this.uint32[b+2]=a,this.uint32[b+3]=o,this.uint32[b+4]=s,this.uint16[g+10]=u,this.uint16[g+11]=c,this.uint16[g+12]=l,this.float32[b+7]=h,this.float32[b+8]=f,this.uint8[_+36]=d,this.uint8[_+37]=p,this.uint8[_+38]=v,this.uint32[b+10]=m,this.int16[g+22]=y,e}}]),n}(Ca);Ga.prototype.bytesPerElement=48,Li("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ga);var Ka=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m,y,g,b,_,w,x,k,E,T,S,I){var C=this.length;return this.resize(C+1),this.emplace(C,e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m,y,g,b,_,w,x,k,E,T,S,I)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m,y,g,b,_,w,x,k,E,T,S,I,C){var A=34*e,O=17*e;return this.int16[A+0]=t,this.int16[A+1]=n,this.int16[A+2]=r,this.int16[A+3]=i,this.int16[A+4]=a,this.int16[A+5]=o,this.int16[A+6]=s,this.int16[A+7]=u,this.uint16[A+8]=c,this.uint16[A+9]=l,this.uint16[A+10]=h,this.uint16[A+11]=f,this.uint16[A+12]=d,this.uint16[A+13]=p,this.uint16[A+14]=v,this.uint16[A+15]=m,this.uint16[A+16]=y,this.uint16[A+17]=g,this.uint16[A+18]=b,this.uint16[A+19]=_,this.uint16[A+20]=w,this.uint16[A+21]=x,this.uint16[A+22]=k,this.uint32[O+12]=E,this.float32[O+13]=T,this.float32[O+14]=S,this.float32[O+15]=I,this.float32[O+16]=C,e}}]),n}(Ca);Ka.prototype.bytesPerElement=68,Li("StructArrayLayout8i15ui1ul4f68",Ka);var Ha=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(Ca);Ha.prototype.bytesPerElement=4,Li("StructArrayLayout1f4",Ha);var Wa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}]),n}(Ca);Wa.prototype.bytesPerElement=6,Li("StructArrayLayout3i6",Wa);var Za=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,this.uint16[a+4]=i,e}}]),n}(Ca);Za.prototype.bytesPerElement=12,Li("StructArrayLayout1ul3ui12",Za);var Xa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}]),n}(Ca);Xa.prototype.bytesPerElement=4,Li("StructArrayLayout2ui4",Xa);var Ya=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(Ca);Ya.prototype.bytesPerElement=2,Li("StructArrayLayout1ui2",Ya);var Qa=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e}}]),n}(Ca);Qa.prototype.bytesPerElement=16,Li("StructArrayLayout4f16",Qa);var $a=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"anchorPointX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorPointY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+1]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"anchorPoint",get:function(){return new _(this.anchorPointX,this.anchorPointY)}}]),n}(Ia);$a.prototype.size=32;var Ja=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"get",value:function(e){return new $a(this,e)}}]),n}(za);Li("CollisionBoxArray",Ja);var eo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+2]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+3]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+4]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+7]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+8]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+36]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+37]},set:function(e){this._structArray.uint8[this._pos1+37]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+38]},set:function(e){this._structArray.uint8[this._pos1+38]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+10]},set:function(e){this._structArray.uint32[this._pos4+10]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+22]}}]),n}(Ia);eo.prototype.size=48;var to=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"get",value:function(e){return new eo(this,e)}}]),n}(Ga);Li("PlacedSymbolArray",to);var no=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"anchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"anchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+5]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+6]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+7]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+10]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+11]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+12]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+13]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+12]},set:function(e){this._structArray.uint32[this._pos4+12]=e}},{key:"textBoxScale",get:function(){return this._structArray.float32[this._pos4+13]}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+14]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+15]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+16]}}]),n}(Ia);no.prototype.size=68;var ro=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"get",value:function(e){return new no(this,e)}}]),n}(Ka);Li("SymbolInstanceArray",ro);var io=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(Ha);Li("GlyphOffsetArray",io);var ao=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),n}(Wa);Li("SymbolLineVertexArray",ao);var oo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(Ia);oo.prototype.size=12;var so=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"get",value:function(e){return new oo(this,e)}}]),n}(Za);Li("FeatureIndexArray",so);var uo=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"a_centroid_pos0",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"a_centroid_pos1",get:function(){return this._structArray.uint16[this._pos2+1]}}]),n}(Ia);uo.prototype.size=4;var co=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"get",value:function(e){return new uo(this,e)}}]),n}(Xa);Li("FillExtrusionCentroidArray",co);var lo=Aa([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),ho=Bt((function(e){e.exports=function(e,t){var n,r,i,a,o,s,u,c;for(r=e.length-(n=3&e.length),i=t,o=3432918353,s=461845907,c=0;c<r;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(a=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),fo=Bt((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),po=ho,vo=fo;po.murmur3=ho,po.murmur2=vo;var mo=function(){function e(){p(this,e),this.ids=[],this.positions=[],this.indexed=!1}return v(e,[{key:"add",value:function(e,t,n,r){this.ids.push(yo(e)),this.positions.push(t,n,r)}},{key:"getPositions",value:function(e){for(var t=yo(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return go(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function yo(e){var t=+e;return!isNaN(t)&&t<=E?t:po(String(e))}function go(e,t,n,r){for(;n<r;){for(var i=e[n+r>>1],a=n-1,o=r+1;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;bo(e,a,o),bo(t,3*a,3*o),bo(t,3*a+1,3*o+1),bo(t,3*a+2,3*o+2)}o-n<r-o?(go(e,t,n,o),n=o+1):(go(e,t,o+1,r),r=o)}}function bo(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Li("FeaturePositionMap",mo);var _o=function e(t,n){p(this,e),this.gl=t.gl,this.location=n},wo=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=0,i}return v(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}}]),n}(_o),xo=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=0,i}return v(n,[{key:"set",value:function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}]),n}(_o),ko=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=[0,0],i}return v(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}}]),n}(_o),Eo=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=[0,0,0],i}return v(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}}]),n}(_o),To=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=[0,0,0,0],i}return v(n,[{key:"set",value:function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}]),n}(_o),So=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=Vt.transparent,i}return v(n,[{key:"set",value:function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}]),n}(_o),Io=new Float32Array(16),Co=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=Io,i}return v(n,[{key:"set",value:function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}}]),n}(_o),Ao=new Float32Array(9),Oo=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).current=Ao,i}return v(n,[{key:"set",value:function(e){for(var t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}}]),n}(_o);function Po(e){return[Ta(255*e.r,255*e.g),Ta(255*e.b,255*e.a)]}var Do=function(){function e(t,n,r){p(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=r}return v(e,[{key:"setUniform",value:function(e,t,n){e.set(n.constantOr(this.value))}},{key:"getBinding",value:function(e,t,n){return"color"===this.type?new So(e,t):new xo(e,t)}}]),e}(),Ro=function(){function e(t,n){p(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return v(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}},{key:"setUniform",value:function(e,t,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&e.set(i)}},{key:"getBinding",value:function(e,t,n){return"u_pattern"===n.substr(0,9)?new To(e,t):new xo(e,t)}}]),e}(),Mo=function(){function e(t,n,r,i){p(this,e),this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return v(e,[{key:"populatePaintArray",value:function(e,t,n,r,i){var a=this.paintVertexArray.length,o=this.expression.evaluate(new la(0),t,{},r,[],i);this.paintVertexArray.resize(e),this._setPaintValue(a,e,o)}},{key:"updatePaintArray",value:function(e,t,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(e,t,i)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var r=Po(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),No=function(){function e(t,n,r,i,a,o){p(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o}return v(e,[{key:"populatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate(new la(this.zoom),t,{},r,[],i),o=this.expression.evaluate(new la(this.zoom+1),t,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,a,o)}},{key:"updatePaintArray",value:function(e,t,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(e,t,i,a)}},{key:"_setPaintValue",value:function(e,t,n,r){if("color"===this.type)for(var i=Po(n),a=Po(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t){var n=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=R(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);e.set(r)}},{key:"getBinding",value:function(e,t,n){return new xo(e,t)}}]),e}(),Lo=function(){function e(t,n,r,i,a,o,s){p(this,e),this.expression=t,this.type=r,this.useIntegerZoom=i,this.zoom=a,this.layerId=s;for(var u=0;u<n.length;++u);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return v(e,[{key:"populatePaintArray",value:function(e,t,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,r,i){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],i)}},{key:"_setPaintValues",value:function(e,t,n,r){if(r&&n){var i=n.min,a=n.mid,o=n.max,s=r[i],u=r[a],c=r[o];if(s&&u&&c)for(var l=e;l<t;l++)this.zoomInPaintVertexArray.emplace(l,u.tl[0],u.tl[1],u.br[0],u.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],u.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(l,u.tl[0],u.tl[1],u.br[0],u.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],u.pixelRatio,c.pixelRatio)}}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,lo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,lo.members,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),jo=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,e),this.binders={},this._buffers=[];var i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof ya&&Ir(o.property.specification)){var s=zo(a,t.type),u=o.value,c=o.property.specification.type,l=o.property.useIntegerZoom,h=o.property.specification["property-type"],f="cross-faded"===h||"cross-faded-data-driven"===h;if("constant"===u.kind)this.binders[a]=f?new Ro(u.value,s):new Do(u.value,s,c),i.push("/u_".concat(a));else if("source"===u.kind||f){var d=Bo(a,c,"source");this.binders[a]=f?new Lo(u,s,c,l,n,d,t.id):new Mo(u,s,c,d),i.push("/a_".concat(a))}else{var v=Bo(a,c,"composite");this.binders[a]=new No(u,s,c,l,n,v),i.push("/z_".concat(a))}}}this.cacheKey=i.sort().join("")}return v(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof Mo||t instanceof No?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,r,i){for(var a in this.binders){var o=this.binders[a];(o instanceof Mo||o instanceof No||o instanceof Lo)&&o.populatePaintArray(e,t,n,r,i)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var n in this.binders){var r=this.binders[n];r instanceof Ro&&r.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,n,r,i){var a=!1;for(var o in e){var s,u=t.getPositions(o),c=m(u);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=n.feature(l.index);for(var f in this.binders){var d=this.binders[f];if((d instanceof Mo||d instanceof No||d instanceof Lo)&&!0===d.expression.isStateDependent){var p=r.paint.get(f);d.expression=p.value,d.updatePaintArray(l.start,l.end,h,e[o],i),a=!0}}}}catch(v){c.e(v)}finally{c.f()}}return a}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof Do||n instanceof Ro)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Mo||n instanceof No)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name);else if(n instanceof Lo)for(var i=0;i<lo.members.length;i++)e.push(lo.members[i].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof Do||n instanceof Ro||n instanceof No){var r,i=m(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.push(a)}}catch(o){i.e(o)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e,t){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Do||i instanceof Ro||i instanceof No){var a,o=m(i.uniformNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t[s]){var u=i.getBinding(e,t[s],s);n.push({name:s,property:r,binding:u})}}}catch(c){o.e(c)}finally{o.f()}}}return n}},{key:"setUniforms",value:function(e,t,n,r){var i,a=m(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.name,u=o.property,c=o.binding;this.binders[u].setUniform(c,r,n.get(u),s)}}catch(l){a.e(l)}finally{a.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Lo){var r=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Mo||n instanceof No)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof Mo||n instanceof No||n instanceof Lo)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Mo||t instanceof No||t instanceof Lo)&&t.destroy()}}}]),e}(),Fo=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};p(this,e),this.programConfigurations={};var i,a=m(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.programConfigurations[o.id]=new jo(o,n,r)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new mo,this._bufferOffset=0}return v(e,[{key:"populatePaintArrays",value:function(e,t,n,r,i,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,r,i,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,r){var i,a=m(n);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r)||this.needsUpload}}catch(s){a.e(s)}finally{a.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}();function zo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}function Bo(e,t,n){var r={color:{source:Ma,composite:Qa},number:{source:Ha,composite:Ma}},i=function(e){return{"line-pattern":{source:Na,composite:Na},"fill-pattern":{source:Na,composite:Na},"fill-extrusion-pattern":{source:Na,composite:Na}}[e]}(e);return i&&i[n]||r[t][n]}Li("ConstantBinder",Do),Li("CrossFadedConstantBinder",Ro),Li("SourceExpressionBinder",Mo),Li("CrossFadedCompositeBinder",Lo),Li("CompositeExpressionBinder",No),Li("ProgramConfiguration",jo,{omit:["_buffers"]}),Li("ProgramConfigurationSet",Fo);var Uo="-transition",Vo=function(e){f(n,e);var t=d(n);function n(e,r){var i;if(p(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(i.metadata=(e=e).metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),r.layout&&(i._unevaluatedLayout=new ma(r.layout)),r.paint)){for(var a in i._transitionablePaint=new da(r.paint),e.paint)i.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)i.setLayoutProperty(o,e.layout[o],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new ga(r.paint)}return s(i)}return v(n,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Ai,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return G(e,Uo)?this._transitionablePaint.getTransition(e.slice(0,-Uo.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(Ci,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(G(e,Uo))return this._transitionablePaint.setTransition(e.slice(0,-Uo.length),t||void 0),!1;var r=this._transitionablePaint._values[e],i="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||i||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),H(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Oi(this,e.call(Si,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof ya&&Ir(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}]),n}(vt),qo=Aa([{name:"a_pos",components:2,type:"Int16"}],4).members,Go=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p(this,e),this.segments=t}return v(e,[{key:"prepareSegment",value:function(t,n,r,i){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&X("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=m(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,r,i){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();Go.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Li("SegmentVector",Go);var Ko=8192,Ho=Math.pow(2,14)-1,Wo=-Ho-1;function Zo(e){for(var t=Ko/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<i.length;a++){var o=i[a],s=Math.round(o.x*t),u=Math.round(o.y*t);o.x=R(s,Wo,Ho),o.y=R(u,Wo,Ho),(s<o.x||s>o.x+1||u<o.y||u>o.y+1)&&X("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Xo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Zo(e):[]}}function Yo(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var Qo=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Pa,this.indexArray=new qa,this.segments=new Go,this.programConfigurations=new Fo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return v(e,[{key:"populate",value:function(e,t,n){var r=this.layers[0],i=[],a=null;"circle"===r.type&&(a=r.layout.get("circle-sort-key"));var o,s=m(e);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=u.feature,l=u.id,h=u.index,f=u.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,p=Xo(c,d);if(this.layers[0]._featureFilter.filter(new la(this.zoom),p,n)){var v=a?a.evaluate(p,{},n):void 0,y={id:l,properties:c.properties,type:c.type,sourceLayerIndex:f,index:h,geometry:d?p.geometry:Zo(c),patterns:{},sortKey:v};i.push(y)}}}catch(T){s.e(T)}finally{s.f()}a&&i.sort((function(e,t){return e.sortKey-t.sortKey}));for(var g=0,b=i;g<b.length;g++){var _=b[g],w=_.geometry,x=_.index,k=_.sourceLayerIndex,E=e[x].feature;this.addFeature(_,w,x,n),t.featureIndex.insert(E,w,x,k,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qo),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r){var i,a=m(t);try{for(a.s();!(i=a.n()).done;){var o,s=i.value,u=m(s);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=c.x,h=c.y;if(!(l<0||l>=Ko||h<0||h>=Ko)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),d=f.vertexLength;Yo(this.layoutVertexArray,l,h,-1,-1),Yo(this.layoutVertexArray,l,h,1,-1),Yo(this.layoutVertexArray,l,h,1,1),Yo(this.layoutVertexArray,l,h,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),f.vertexLength+=4,f.primitiveLength+=2}}}catch(p){u.e(p)}finally{u.f()}}}catch(p){a.e(p)}finally{a.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r)}}]),e}();function $o(e,t){for(var n=0;n<e.length;n++)if(ss(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(ss(e,t[r]))return!0;return!!ns(e,t)}function Jo(e,t,n){return!!ss(e,t)||!!is(t,e,n)}function es(e,t){if(1===e.length)return os(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(ss(e,r[i]))return!0;for(var a=0;a<e.length;a++)if(os(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(ns(e,t[o]))return!0;return!1}function ts(e,t,n){if(e.length>1){if(ns(e,t))return!0;for(var r=0;r<t.length;r++)if(is(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(is(e[i],t,n))return!0;return!1}function ns(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++)if(rs(r,i,t[a],t[a+1]))return!0;return!1}function rs(e,t,n,r){return Y(e,n,r)!==Y(t,n,r)&&Y(e,t,n)!==Y(e,t,r)}function is(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(as(e,t[i-1],t[i])<r)return!0;return!1}function as(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function os(e,t){for(var n,r,i,a=!1,o=0;o<e.length;o++)for(var s=0,u=(n=e[o]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function ss(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function us(e,t,n,r,i){var a,o=m(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(f){o.e(f)}finally{o.f()}var u=[new _(t,n),new _(t,i),new _(r,i),new _(r,n)];if(e.length>2){var c,l=m(u);try{for(l.s();!(c=l.n()).done;)if(ss(e,c.value))return!0}catch(f){l.e(f)}finally{l.f()}}for(var h=0;h<e.length-1;h++)if(cs(e[h],e[h+1],u))return!0;return!1}function cs(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var a=Y(e,t,n[0]);return a!==Y(e,t,n[1])||a!==Y(e,t,n[2])||a!==Y(e,t,n[3])}function ls(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function hs(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function fs(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=_.convert(t)._mult(i);"viewport"===n&&a._rotate(-r);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function ds(e,t,n,r){var i=_.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}Li("CircleBucket",Qo,{omit:["layers"]});var ps=new Ea({"circle-sort-key":new _a(mt.layout_circle["circle-sort-key"])}),vs={paint:new Ea({"circle-radius":new _a(mt.paint_circle["circle-radius"]),"circle-color":new _a(mt.paint_circle["circle-color"]),"circle-blur":new _a(mt.paint_circle["circle-blur"]),"circle-opacity":new _a(mt.paint_circle["circle-opacity"]),"circle-translate":new ba(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new ba(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ba(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ba(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _a(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _a(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _a(mt.paint_circle["circle-stroke-opacity"])}),layout:ps},ms="undefined"!=typeof Float32Array?Float32Array:Array;function ys(){var e=new ms(9);return ms!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function gs(){var e=new ms(16);return ms!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function bs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _s(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],g=n*s-r*o,b=n*u-i*o,_=n*c-a*o,w=r*u-i*s,x=r*c-a*s,k=i*c-a*u,E=l*v-h*p,T=l*m-f*p,S=l*y-d*p,I=h*m-f*v,C=h*y-d*v,A=f*y-d*m,O=g*A-b*C+_*I+w*S-x*T+k*E;return O?(e[0]=(s*A-u*C+c*I)*(O=1/O),e[1]=(i*C-r*A-a*I)*O,e[2]=(v*k-m*x+y*w)*O,e[3]=(f*x-h*k-d*w)*O,e[4]=(u*S-o*A-c*T)*O,e[5]=(n*A-i*S+a*T)*O,e[6]=(m*_-p*k-y*b)*O,e[7]=(l*k-f*_+d*b)*O,e[8]=(o*C-s*S+c*E)*O,e[9]=(r*S-n*C-a*E)*O,e[10]=(p*x-v*_+y*g)*O,e[11]=(h*_-l*x-d*g)*O,e[12]=(s*T-o*I-u*E)*O,e[13]=(n*I-r*T+i*E)*O,e[14]=(v*b-p*w-m*g)*O,e[15]=(l*w-h*b+f*g)*O,e):null}function ws(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],v=t[12],m=t[13],y=t[14],g=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*r+_*s+w*h+x*v,e[1]=b*i+_*u+w*f+x*m,e[2]=b*a+_*c+w*d+x*y,e[3]=b*o+_*l+w*p+x*g,e[4]=(b=n[4])*r+(_=n[5])*s+(w=n[6])*h+(x=n[7])*v,e[5]=b*i+_*u+w*f+x*m,e[6]=b*a+_*c+w*d+x*y,e[7]=b*o+_*l+w*p+x*g,e[8]=(b=n[8])*r+(_=n[9])*s+(w=n[10])*h+(x=n[11])*v,e[9]=b*i+_*u+w*f+x*m,e[10]=b*a+_*c+w*d+x*y,e[11]=b*o+_*l+w*p+x*g,e[12]=(b=n[12])*r+(_=n[13])*s+(w=n[14])*h+(x=n[15])*v,e[13]=b*i+_*u+w*f+x*m,e[14]=b*a+_*c+w*d+x*y,e[15]=b*o+_*l+w*p+x*g,e}function xs(e,t,n){var r,i,a,o,s,u,c,l,h,f,d,p,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=r*v+s*m+h*y+t[12],e[13]=i*v+u*m+f*y+t[13],e[14]=a*v+c*m+d*y+t[14],e[15]=o*v+l*m+p*y+t[15]),e}function ks(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Es(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+c*r,e[5]=o*i+l*r,e[6]=s*i+h*r,e[7]=u*i+f*r,e[8]=c*i-a*r,e[9]=l*i-o*r,e[10]=h*i-s*r,e[11]=f*i-u*r,e}function Ts(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[8],l=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-c*r,e[1]=o*i-l*r,e[2]=s*i-h*r,e[3]=u*i-f*r,e[8]=a*r+c*i,e[9]=o*r+l*i,e[10]=s*r+h*i,e[11]=u*r+f*i,e}function Ss(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],c=t[4],l=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+c*r,e[1]=o*i+l*r,e[2]=s*i+h*r,e[3]=u*i+f*r,e[4]=c*i-a*r,e[5]=l*i-o*r,e[6]=h*i-s*r,e[7]=f*i-u*r,e}function Is(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,d=i*s,p=i*u,v=a*o,m=a*s,y=a*u;return e[0]=1-h-p,e[1]=l+y,e[2]=f-m,e[3]=0,e[4]=l-y,e[5]=1-c-p,e[6]=d+v,e[7]=0,e[8]=f+m,e[9]=d-v,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cs(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(a=1/(r-i)),e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function As(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*c,e[15]=1,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Os=ws;function Ps(){var e=new ms(3);return ms!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ds(e){var t=new ms(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Rs(e){return Math.hypot(e[0],e[1],e[2])}function Ms(e,t,n){var r=new ms(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ns(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Ls(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function js(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Fs(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function zs(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Bs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Us(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function Vs(e,t,n){var r=n[0],i=n[1],a=n[2],o=t[0],s=t[1],u=t[2],c=i*u-a*s,l=a*o-r*u,h=r*s-i*o,f=i*h-a*l,d=a*c-r*h,p=r*l-i*c,v=2*n[3];return l*=v,h*=v,d*=2,p*=2,e[0]=o+(c*=v)+(f*=2),e[1]=s+l+d,e[2]=u+h+p,e}var qs,Gs=Ls,Ks=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},Hs=Rs;function Ws(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Zs(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function Xs(){var e=new ms(4);return ms!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ys(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Qs(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e}Ps(),qs=new ms(4),ms!=Float32Array&&(qs[0]=0,qs[1]=0,qs[2]=0,qs[3]=0),Ps(),Ms(1,0,0),Ms(0,1,0),Xs(),Xs(),ys();var $s=function(){function e(t,n){p(this,e),this.pos=t,this.dir=n}return v(e,[{key:"intersectsPlane",value:function(e,t,n){var r=Bs(t,this.dir);if(Math.abs(r)<1e-6)return!1;var i=Bs(Gs(Ps(),e,this.pos),t)/r;return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}(n,Fs(Ps(),this.pos,this.dir,i)),!0}}]),e}(),Js=function(){function e(t,n){p(this,e),this.points=t,this.planes=n}return v(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r){var i=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var r=Zs([],e,t),a=1/r[3]/n*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(r,r,[a,a,1/r[3],a])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=zs([],Us([],Gs([],a[e[0]],a[e[1]]),Gs([],a[e[2]],a[e[1]]))),n=-Bs(t,a[e[1]]);return t.concat(n)}));return new e(a,o)}}]),e}(),eu=function(){function e(t,n){p(this,e),this.min=t,this.max=n,this.center=js([],Ns([],this.min,this.max),.5)}return v(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=Ds(this.min),i=Ds(this.max),a=0;a<n.length;a++)r[a]=n[a]?this.min[a]:this.center[a],i[a]=n[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"intersects",value:function(e){for(var t,n,r=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],i=!0,a=0;a<e.planes.length;a++){for(var o=e.planes[a],s=0,u=0;u<r.length;u++)s+=(t=o)[0]*(n=r[u])[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]>=0;if(0===s)return 0;s!==r.length&&(i=!1)}if(i)return 2;for(var c=0;c<3;c++){for(var l=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<e.points.length;f++){var d=e.points[f][c]-this.min[c];l=Math.min(l,d),h=Math.max(h,d)}if(h<0||l>this.max[c]-this.min[c])return 0}return 1}}]),e}();function tu(e,t,n){var r=Zs([],[e.x,e.y,t,1],n);return new _(r[0]/r[3],r[1]/r[3])}var nu=Ms(0,0,0),ru=Ms(0,0,1);function iu(e,t){var n=Ps();return nu[2]=t,e.intersectsPlane(nu,ru,n),new _(n[0],n[1])}var au=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(Qo);function ou(e,t,n,r){var i=t.width,a=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function su(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var a=ou({},{width:r,height:i},n);uu(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=a.data}}function uu(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,u=0;u<i.height;u++)for(var c=((n.y+u)*e.width+n.x)*a,l=((r.y+u)*t.width+r.x)*a,h=0;h<i.width*a;h++)s[l+h]=o[c+h];return t}Li("HeatmapBucket",au,{omit:["layers"]});var cu=function(){function e(t,n){p(this,e),ou(this,t,1,n)}return v(e,[{key:"resize",value:function(e){su(this,e,1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){uu(e,t,n,r,i,1)}}]),e}(),lu=function(){function e(t,n){p(this,e),ou(this,t,4,n)}return v(e,[{key:"resize",value:function(e){su(this,e,4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){uu(e,t,n,r,i,4)}}]),e}();Li("AlphaImage",cu),Li("RGBAImage",lu);var hu={paint:new Ea({"heatmap-radius":new _a(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _a(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ba(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ka(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ba(mt.paint_heatmap["heatmap-opacity"])})};function fu(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new lu({width:n,height:r}),a=function(n,r,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<r;++o,s+=4*n)for(var u=0,c=0;u<n;u++,c+=4){var l=u/(n-1),h=e.clips[o];a(s,c,h.start*(1-l)+h.end*l)}else for(var f=0,d=0;f<n;f++,d+=4)a(0,d,f/(n-1));return i}var du={paint:new Ea({"hillshade-illumination-direction":new ba(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ba(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ba(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ba(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ba(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ba(mt.paint_hillshade["hillshade-accent-color"])})},pu=Aa([{name:"a_pos",components:2,type:"Int16"}],4).members,vu=yu,mu=yu;function yu(e,t,n){n=n||2;var r,i,a,o,s,u,c,l=t&&t.length,h=l?t[0]*n:e.length,f=gu(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=gu(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Au(o));for(s.sort(Tu),i=0;i<s.length;i++)Su(s[i],n),n=bu(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);c=0!==(c=Math.max(a-r,o-i))?1/c:0}return _u(f,d,n,r,i,c),d}function gu(e,t,n,r,i){var a,o;if(i===Vu(e,t,n,r)>0)for(a=t;a<n;a+=r)o=zu(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=zu(a,e[a],e[a+1],o);return o&&Ru(o,o.next)&&(Bu(o),o=o.next),o}function bu(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ru(r,r.next)&&0!==Du(r.prev,r,r.next))r=r.next;else{if(Bu(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function _u(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Cu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?xu(e,r,i,a):wu(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Bu(e),e=u.next,c=u.next;else if((e=u)===c){o?1===o?_u(e=ku(bu(e),t,n),t,n,r,i,a,2):2===o&&Eu(e,t,n,r,i,a):_u(bu(e),t,n,r,i,a,1);break}}}function wu(e){var t=e.prev,n=e,r=e.next;if(Du(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Ou(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Du(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function xu(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Du(i,a,o)>=0)return!1;for(var s=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,c=Cu(i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,t,n,r),l=Cu(s,u,t,n,r),h=e.prevZ,f=e.nextZ;h&&h.z>=c&&f&&f.z<=l;){if(h!==e.prev&&h!==e.next&&Ou(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Du(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&Ou(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Du(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&Ou(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&Du(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=l;){if(f!==e.prev&&f!==e.next&&Ou(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Du(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function ku(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Ru(i,a)&&Mu(i,r,r.next,a)&&ju(i,a)&&ju(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Bu(r),Bu(r.next),r=e=a),r=r.next}while(r!==e);return bu(r)}function Eu(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Pu(o,s)){var u=Fu(o,s);return o=bu(o,o.next),u=bu(u,u.next),_u(o,t,n,r,i,a),void _u(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Tu(e,t){return e.x-t.x}function Su(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,c=n,l=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&Ou(a<h?i:o,a,l,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),ju(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&Iu(n,r)))&&(n=r,f=u)),r=r.next}while(r!==c);return n}(e,t)){var n=Fu(t,e);bu(t,t.next),bu(n,n.next)}}function Iu(e,t){return Du(e.prev,e,t.prev)<0&&Du(t.next,e,e.next)<0}function Cu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Au(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ou(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Pu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Mu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ju(e,t)&&ju(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Du(e.prev,e,t.prev)||Du(e,t.prev,t))||Ru(e,t)&&Du(e.prev,e,e.next)>0&&Du(t.prev,t,t.next)>0)}function Du(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ru(e,t){return e.x===t.x&&e.y===t.y}function Mu(e,t,n,r){var i=Lu(Du(e,t,n)),a=Lu(Du(e,t,r)),o=Lu(Du(n,r,e)),s=Lu(Du(n,r,t));return i!==a&&o!==s||!(0!==i||!Nu(e,n,t))||!(0!==a||!Nu(e,r,t))||!(0!==o||!Nu(n,e,r))||!(0!==s||!Nu(n,t,r))}function Nu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Lu(e){return e>0?1:e<0?-1:0}function ju(e,t){return Du(e.prev,e,e.next)<0?Du(e,t,e.next)>=0&&Du(e,e.prev,t)>=0:Du(e,t,e.prev)<0||Du(e,e.next,t)<0}function Fu(e,t){var n=new Uu(e.i,e.x,e.y),r=new Uu(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function zu(e,t,n,r){var i=new Uu(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Uu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vu(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function qu(e,t,n,r,i){Gu(e,t,n||0,r||e.length-1,i||Hu)}function Gu(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(a-u)/a)*(o-a/2<0?-1:1);Gu(e,t,Math.max(n,Math.floor(t-o*u/a+c)),Math.min(r,Math.floor(t+(a-o)*u/a+c)),i)}var l=e[t],h=n,f=r;for(Ku(e,n,t),i(e[r],l)>0&&Ku(e,n,r);h<f;){for(Ku(e,h,f),h++,f--;i(e[h],l)<0;)h++;for(;i(e[f],l)>0;)f--}0===i(e[n],l)?Ku(e,n,f):Ku(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function Ku(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Hu(e,t){return e<t?-1:e>t?1:0}function Wu(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,a=[],o=0;o<n;o++){var s=Q(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}if(r&&a.push(r),t>1)for(var u=0;u<a.length;u++)a[u].length<=t||(qu(a[u],t,1,a[u].length-1,Zu),a[u]=a[u].slice(0,t));return a}function Zu(e,t){return t.area-e.area}function Xu(e,t,n){var r,i=n.patternDependencies,a=!1,o=m(t);try{for(o.s();!(r=o.n()).done;){var s=r.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var u=s.constantOr(null);u&&(a=!0,i[u.to]=!0,i[u.from]=!0)}}catch(c){o.e(c)}finally{o.f()}return a}function Yu(e,t,n,r,i){var a,o=i.patternDependencies,s=m(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.paint.get("".concat(e,"-pattern")).value;if("constant"!==c.kind){var l=c.evaluate({zoom:r-1},n,{},i.availableImages),h=c.evaluate({zoom:r},n,{},i.availableImages),f=c.evaluate({zoom:r+1},n,{},i.availableImages);l=l&&l.name?l.name:l,h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[l]=!0,o[h]=!0,o[f]=!0,n.patterns[u.id]={min:l,mid:h,max:f}}}}catch(d){s.e(d)}finally{s.f()}return n}yu.deviation=function(e,t,n,r){var i=t&&t.length,a=Math.abs(Vu(e,0,i?t[0]*n:e.length,n));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(Vu(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var u=0;for(o=0;o<r.length;o+=3){var c=r[o]*n,l=r[o+1]*n,h=r[o+2]*n;u+=Math.abs((e[c]-e[h])*(e[l+1]-e[c+1])-(e[c]-e[l])*(e[h+1]-e[c+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},yu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&n.holes.push(r+=e[i-1].length)}return n},vu.default=mu;var Qu=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Pa,this.indexArray=new qa,this.indexArray2=new Xa,this.programConfigurations=new Fo(t.layers,t.zoom),this.segments=new Go,this.segments2=new Go,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return v(e,[{key:"populate",value:function(e,t,n){this.hasPattern=Xu("fill",this.layers,t);var r,i=this.layers[0].layout.get("fill-sort-key"),a=[],o=m(e);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.feature,c=s.id,l=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=Xo(u,f);if(this.layers[0]._featureFilter.filter(new la(this.zoom),d,n)){var p=i?i.evaluate(d,{},n,t.availableImages):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:l,geometry:f?d.geometry:Zo(u),patterns:{},sortKey:p};a.push(v)}}}catch(E){o.e(E)}finally{o.f()}i&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,g=a;y<g.length;y++){var b=g[y],_=b.geometry,w=b.index,x=b.sourceLayerIndex;if(this.hasPattern){var k=Yu("fill",this.layers,b,this.zoom,t);this.patternFeatures.push(k)}else this.addFeature(b,_,w,n,{});t.featureIndex.insert(e[w].feature,_,w,x,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(e,t,n){var r,i=m(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.addFeature(a,a.geometry,a.index,t,n)}}catch(o){i.e(o)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var a,o=m(Wu(t,500));try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=0,l=m(u);try{for(l.s();!(s=l.n()).done;)c+=s.value.length}catch(E){l.e(E)}finally{l.f()}var h,f=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),d=f.vertexLength,p=[],v=[],y=m(u);try{for(y.s();!(h=y.n()).done;){var g=h.value;if(0!==g.length){g!==u[0]&&v.push(p.length/2);var b=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),_=b.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(_+g.length-1,_),p.push(g[0].x),p.push(g[0].y);for(var w=1;w<g.length;w++)this.layoutVertexArray.emplaceBack(g[w].x,g[w].y),this.indexArray2.emplaceBack(_+w-1,_+w),p.push(g[w].x),p.push(g[w].y);b.vertexLength+=g.length,b.primitiveLength+=g.length}}}catch(E){y.e(E)}finally{y.f()}for(var x=vu(p,v),k=0;k<x.length;k+=3)this.indexArray.emplaceBack(d+x[k],d+x[k+1],d+x[k+2]);f.vertexLength+=c,f.primitiveLength+=x.length/3}}catch(E){o.e(E)}finally{o.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}}]),e}();Li("FillBucket",Qu,{omit:["layers","patternFeatures"]});var $u=new Ea({"fill-sort-key":new _a(mt.layout_fill["fill-sort-key"])}),Ju={paint:new Ea({"fill-antialias":new ba(mt.paint_fill["fill-antialias"]),"fill-opacity":new _a(mt.paint_fill["fill-opacity"]),"fill-color":new _a(mt.paint_fill["fill-color"]),"fill-outline-color":new _a(mt.paint_fill["fill-outline-color"]),"fill-translate":new ba(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new ba(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new wa(mt.paint_fill["fill-pattern"])}),layout:$u},ec=Aa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),tc=Aa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),nc=ec.members,rc=ic;function ic(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(ac,this,t)}function ac(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function oc(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)r+=((n=e[o]).x-(t=e[i]).x)*(t.y+n.y);return r}ic.types=["Unknown","Point","LineString","Polygon"],ic.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,o=0,s=[];e.pos<n;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)a+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new _(a,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},ic.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<u&&(u=a),a>c&&(c=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,u,s,c]},ic.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,u=this.loadGeometry(),c=ic.types[this.type];function l(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];l(u=h);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=oc(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i])}1===u.length?u=u[0]:c="Multi"+c;var f={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f};var sc=uc;function uc(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(cc,this,t),this.length=this._features.length}function cc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function lc(e,t,n){if(3===e){var r=new sc(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}uc.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new rc(this._pbf,t,this.extent,this._keys,this._values)};var hc={VectorTile:function(e,t){this.layers=e.readFields(lc,{},t)},VectorTileFeature:rc,VectorTileLayer:sc},fc=hc.VectorTileFeature.types,dc=Math.pow(2,13);function pc(e,t,n,r,i,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(r*dc)<<1)+i,Math.round(s))}var vc=function(){function e(){p(this,e),this.acc=new _(0,0),this.polyCount=[]}return v(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new _(e.x,e.y),this.max=new _(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=!!this.borders,r=this.min,i=this.max;e.x<r.x?(r.x=e.x,n=!0):e.x>i.x&&(i.x=e.x,n=!0),e.y<r.y?(r.y=e.y,n=!0):e.y>i.y&&(i.y=e.y,n=!0),((0===e.x||e.x===Ko)&&e.x===t.x)!=((0===e.y||e.y===Ko)&&e.y===t.y)&&this.processBorderOverlap(e,t),n&&this.checkBorderIntersection(e,t)}},{key:"checkBorderIntersection",value:function(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,Nn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Ko!=e.x>Ko&&this.addBorderIntersection(1,Nn(t.y,e.y,(Ko-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Nn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Ko!=e.y>Ko&&this.addBorderIntersection(3,Nn(t.x,e.x,(Ko-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new _(0,0)}},{key:"span",value:function(){return new _(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),mc=function(){function e(t){p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Da,this.centroidVertexArray=new co,this.indexArray=new qa,this.programConfigurations=new Fo(t.layers,t.zoom),this.segments=new Go,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return v(e,[{key:"populate",value:function(e,t,n){this.features=[],this.hasPattern=Xu("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Ko/(1<<e.z)}(n);var r,i=m(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.feature,s=a.id,u=a.index,c=a.sourceLayerIndex,l=this.layers[0]._featureFilter.needGeometry,h=Xo(o,l);if(this.layers[0]._featureFilter.filter(new la(this.zoom),h,n)){var f={id:s,sourceLayerIndex:c,index:u,geometry:l?h.geometry:Zo(o),properties:o.properties,type:o.type,patterns:{}},d=this.layoutVertexArray.length;this.hasPattern?this.features.push(Yu("fill-extrusion",this.layers,f,this.zoom,t)):this.addFeature(f,f.geometry,u,n,{}),t.featureIndex.insert(o,f.geometry,u,c,this.index,d)}}}catch(p){i.e(p)}finally{i.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n){var r,i=m(this.features);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.geometry;this.addFeature(a,o,a.index,t,n)}}catch(s){i.e(s)}finally{i.f()}this.sortBorders()}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,tc.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var a,o,s=this.enableTerrain&&e.properties&&"Polygon"===fc[e.type]?new vc:null,u=m(Wu(t,500));try{for(u.s();!(a=u.n()).done;){var c=a.value,l=0,h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(!(0===c.length||(o=c[0]).every((function(e){return e.x<=0}))||o.every((function(e){return e.x>=Ko}))||o.every((function(e){return e.y<=0}))||o.every((function(e){return e.y>=Ko})))){for(var f=0;f<c.length;f++){var d=c[f];if(0!==d.length){l+=d.length;var p=0;s&&s.startRing(d[0]);for(var v=0;v<d.length;v++){var y=d[v];if(v>=1){var g=d[v-1];if(!yc(y,g)){s&&s.append(y,g),h.vertexLength+4>Go.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var b=y.sub(g)._perp(),_=b.x/(Math.abs(b.x)+Math.abs(b.y)),w=b.y>0?1:0,x=g.dist(y);p+x>32768&&(p=0),pc(this.layoutVertexArray,y.x,y.y,_,w,0,0,p),pc(this.layoutVertexArray,y.x,y.y,_,w,0,1,p),p+=x,pc(this.layoutVertexArray,g.x,g.y,_,w,0,0,p),pc(this.layoutVertexArray,g.x,g.y,_,w,0,1,p);var k=h.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),h.vertexLength+=4,h.primitiveLength+=2}}}}}if(h.vertexLength+l>Go.MAX_VERTEX_ARRAY_LENGTH&&(h=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===fc[e.type]){for(var E=[],T=[],S=h.vertexLength,I=0;I<c.length;I++){var C=c[I];if(0!==C.length){C!==c[0]&&T.push(E.length/2);for(var A=0;A<C.length;A++){var O=C[A];pc(this.layoutVertexArray,O.x,O.y,0,0,1,1,0),E.push(O.x),E.push(O.y),s&&s.currentPolyCount.top++}}}for(var P=vu(E,T),D=0;D<P.length;D+=3)this.indexArray.emplaceBack(S+P[D],S+P[D+2],S+P[D+1]);h.primitiveLength+=P.length/3,h.vertexLength+=l}}}}catch(L){u.e(L)}finally{u.f()}if(s&&s.polyCount.length>0){if(s.borders){s.vertexArrayOffset=this.centroidVertexArray.length;for(var R=s.borders,M=this.featuresOnBorder.push(s)-1,N=0;N<4;N++)R[N][0]!==Number.MAX_VALUE&&this.borders[N].push(M)}this.encodeCentroid(s.borders?void 0:s.centroid(),s)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,r){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[r].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7.3*e.x),r=0;else n=0,r=+i;var o,s=i?this.centroidVertexArray.length:t.vertexArrayOffset,u=m(t.polyCount);try{for(u.s();!(o=u.n()).done;){var c=o.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*c.edges+c.top);for(var l=0;l<2*c.edges;l++)this.centroidVertexArray.emplace(s++,0,r),this.centroidVertexArray.emplace(s++,n,r);for(var h=0;h<c.top;h++)this.centroidVertexArray.emplace(s++,n,r)}}catch(f){u.e(f)}finally{u.f()}}}]),e}();function yc(e,t){return e.x===t.x&&(e.x<0||e.x>Ko)||e.y===t.y&&(e.y<0||e.y>Ko)}Li("FillExtrusionBucket",mc,{omit:["layers","features"]}),Li("PartMetadata",vc);var gc={paint:new Ea({"fill-extrusion-opacity":new ba(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _a(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ba(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ba(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new wa(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _a(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _a(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ba(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function bc(e,t){return e.x*t.x+e.y*t.y}function _c(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var a=t[r],o=e[0],s=n.sub(i),u=a.sub(i),c=o.sub(i),l=bc(s,s),h=bc(s,u),f=bc(u,u),d=bc(c,s),p=bc(c,u),v=l*f-h*h,y=(f*d-h*p)/v,g=(l*p-h*d)/v,b=i.z*(1-y-g)+n.z*y+a.z*g;if(isFinite(b))return b}return 1/0}var _,w=1/0,x=m(t);try{for(x.s();!(_=x.n()).done;){var k=_.value;w=Math.min(w,k.z)}}catch(E){x.e(E)}finally{x.f()}return w}function wc(e){var t=new _(e[0],e[1]);return t.z=e[2],t}function xc(e,t,n,r,i,a,o,s){var u=o*i.getElevationAt(e,t,!0,!0),c=0!==a[0],l=c?0===a[1]?o*(a[0]/7.3):o*function(e,t,n){var r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*r),o=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),u=e.getMeterToDEM(n),c=Math.floor(.5*(a*u-1)),l=Math.floor(.5*(o*u-1)),h=e.tileCoordToPixel(r,i),f=2*c+1,d=2*l+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-c,h.y-l,f,d),v=Math.abs(p[0]-p[1]),m=Math.abs(p[2]-p[3]),y=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),g=Math.min(.25,.5*u*(v+m)/f),b=Math.min(.25,.5*u*y/d);return s+Math.max(g*a,b*o)}(i,a,s):u;return{base:u+(0===n)?-1:n,top:c?Math.max(l+r,u+n+2):u+r}}var kc=Aa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,Ec=Aa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Tc=hc.VectorTileFeature.types,Sc=Math.cos(Math.PI/180*37.5),Ic=function(){function e(t){var n=this;p(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new Ra,this.layoutVertexArray2=new Ma,this.indexArray=new qa,this.programConfigurations=new Fo(t.layers,t.zoom),this.segments=new Go,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return v(e,[{key:"populate",value:function(e,t,n){this.hasPattern=Xu("line",this.layers,t);var r,i=this.layers[0].layout.get("line-sort-key"),a=[],o=m(e);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.feature,c=s.id,l=s.index,h=s.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,d=Xo(u,f);if(this.layers[0]._featureFilter.filter(new la(this.zoom),d,n)){var p=i?i.evaluate(d,{},n):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:l,geometry:f?d.geometry:Zo(u),patterns:{},sortKey:p};a.push(v)}}}catch(E){o.e(E)}finally{o.f()}i&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,g=a;y<g.length;y++){var b=g[y],_=b.geometry,w=b.index,x=b.sourceLayerIndex;if(this.hasPattern){var k=Yu("line",this.layers,b,this.zoom,t);this.patternFeatures.push(k)}else this.addFeature(b,_,w,n,{});t.featureIndex.insert(e[w].feature,_,w,x,this.index)}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)}},{key:"addFeatures",value:function(e,t,n){var r,i=m(this.patternFeatures);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.addFeature(a,a.geometry,a.index,t,n)}}catch(o){i.e(o)}finally{i.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Ec)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kc),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,r,i){var a=this.layers[0].layout,o=a.get("line-join").evaluate(e,{}),s=a.get("line-cap"),u=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var l,h=m(t);try{for(h.s();!(l=h.n()).done;){var f=l.value;this.addLine(f,e,o,s,u,c)}}catch(d){h.e(d)}finally{h.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,r)}},{key:"addLine",value:function(e,t,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Tc[t.type],u=e.length;u>=2&&e[u-1].equals(e[u-2]);)u--;for(var c=0;c<u-1&&e[c].equals(e[c+1]);)c++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var l,h,f,d,p,v=this.overscaling<=16?122880/(512*this.overscaling):0,m=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(l=e[u-2],p=e[c].sub(l)._unit()._perp());for(var y=c;y<u;y++)if(!(f=y===u-1?s?e[c+1]:void 0:e[y+1])||!e[y].equals(f)){p&&(d=p),l&&(h=l),l=e[y],p=f?f.sub(l)._unit()._perp():d;var g=(d=d||p).add(p);0===g.x&&0===g.y||g._unit();var b=d.x*p.x+d.y*p.y,_=g.x*p.x+g.y*p.y,w=0!==_?1/_:1/0,x=2*Math.sqrt(2-2*_),k=_<Sc&&h&&f,E=d.x*p.y-d.y*p.x>0;if(k&&y>c){var T=l.dist(h);if(T>2*v){var S=l.sub(l.sub(h)._mult(v/T)._round());this.updateDistance(h,S),this.addCurrentVertex(S,d,0,0,m),h=S}}var I=h&&f,C=I?n:s?"butt":r;if(I&&"round"===C&&(w<a?C="miter":w<=2&&(C="fakeround")),"miter"===C&&w>i&&(C="bevel"),"bevel"===C&&(w>2&&(C="flipbevel"),w<i&&(C="miter")),h&&this.updateDistance(h,l),"miter"===C)g._mult(w),this.addCurrentVertex(l,g,0,0,m);else if("flipbevel"===C){if(w>100)g=p.mult(-1);else{var A=w*d.add(p).mag()/d.sub(p).mag();g._perp()._mult(A*(E?-1:1))}this.addCurrentVertex(l,g,0,0,m),this.addCurrentVertex(l,g.mult(-1),0,0,m)}else if("bevel"===C||"fakeround"===C){var O=-Math.sqrt(w*w-1),P=E?O:0,D=E?0:O;if(h&&this.addCurrentVertex(l,d,P,D,m),"fakeround"===C)for(var R=Math.round(180*x/Math.PI/20),M=1;M<R;M++){var N=M/R;if(.5!==N){var L=N-.5;N+=N*L*(N-1)*((1.0904+b*(b*(3.55645-1.43519*b)-3.2452))*L*L+(.848013+b*(.215638*b-1.06021)))}var j=p.sub(d)._mult(N)._add(d)._unit()._mult(E?-1:1);this.addHalfVertex(l,j.x,j.y,!1,E,0,m)}f&&this.addCurrentVertex(l,p,-P,-D,m)}else if("butt"===C)this.addCurrentVertex(l,g,0,0,m);else if("square"===C){var F=h?1:-1;this.addCurrentVertex(l,g,F,F,m)}else"round"===C&&(h&&(this.addCurrentVertex(l,d,0,0,m),this.addCurrentVertex(l,d,1,1,m,!0)),f&&(this.addCurrentVertex(l,p,-1,-1,m,!0),this.addCurrentVertex(l,p,0,0,m)));if(k&&y<u-1){var z=l.dist(f);if(z>2*v){var B=l.add(f.sub(l)._mult(v/z)._round());this.updateDistance(l,B),this.addCurrentVertex(B,p,0,0,m),l=B}}}}}},{key:"addCurrentVertex",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,i),this.addHalfVertex(e,o,s,a,!0,-r,i)}},{key:"addHalfVertex",value:function(e,t,n,r,i,a,o){var s=e.x,u=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(u<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);var c=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),o.primitiveLength++),i?this.e2=c:this.e1=c}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();Li("LineBucket",Ic,{omit:["layers","patternFeatures"]});var Cc=new Ea({"line-cap":new ba(mt.layout_line["line-cap"]),"line-join":new _a(mt.layout_line["line-join"]),"line-miter-limit":new ba(mt.layout_line["line-miter-limit"]),"line-round-limit":new ba(mt.layout_line["line-round-limit"]),"line-sort-key":new _a(mt.layout_line["line-sort-key"])}),Ac={paint:new Ea({"line-opacity":new _a(mt.paint_line["line-opacity"]),"line-color":new _a(mt.paint_line["line-color"]),"line-translate":new ba(mt.paint_line["line-translate"]),"line-translate-anchor":new ba(mt.paint_line["line-translate-anchor"]),"line-width":new _a(mt.paint_line["line-width"]),"line-gap-width":new _a(mt.paint_line["line-gap-width"]),"line-offset":new _a(mt.paint_line["line-offset"]),"line-blur":new _a(mt.paint_line["line-blur"]),"line-dasharray":new xa(mt.paint_line["line-dasharray"]),"line-pattern":new wa(mt.paint_line["line-pattern"]),"line-gradient":new ka(mt.paint_line["line-gradient"])}),layout:Cc},Oc=new(function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new la(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),a(o(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,r,i){return t=j({},t,{zoom:Math.floor(t.zoom)}),a(o(n.prototype),"evaluate",this).call(this,e,t,r,i)}}]),n}(_a))(Ac.paint.properties["line-width"].specification);function Pc(e,t){return t>0?t+2*e:e}Oc.useIntegerZoom=!0;var Dc=Aa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Rc=Aa([{name:"a_projected_pos",components:3,type:"Float32"}],4);Aa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Mc=Aa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Nc=Aa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Aa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Lc=Aa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),jc=Aa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Aa([{name:"triangle",components:3,type:"Uint16"}]),Aa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Aa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Aa([{type:"Float32",name:"offsetX"}]),Aa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Fc=128;function zc(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new la(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,a=0;a<r.length&&r[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[a],u=r[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new la(s)),maxSize:n.evaluate(new la(u)),interpolationType:i}}function Bc(e,t,n){var r=t.uSize,i=t.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===e.kind?a/Fc:"composite"===e.kind?Nn(a/Fc,o/Fc,i):r}function Uc(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=i?R(er.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?r=Nn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var Vc=Object.freeze({__proto__:null,getSizeData:zc,evaluateSizeForFeature:Bc,evaluateSizeForZoom:Uc,SIZE_PACK_FACTOR:Fc});function qc(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),ca.applyArabicShaping&&(e=ca.applyArabicShaping(e)),e}(e.text,t,n)})),e}var Gc={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Kc=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+h],h+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=c}return(d?-1:1)*o*Math.pow(2,a-r)},Hc=function(e,t,n,r,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=l?(s=0,o=l):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[n+d]=255&o,d+=p,o/=256,c-=8);e[n+d-p]|=128*v},Wc=Zc;function Zc(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Zc.Varint=0,Zc.Fixed64=1,Zc.Bytes=2,Zc.Fixed32=5;var Xc=4294967296,Yc=1/Xc,Qc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $c(e){return e.type===Zc.Bytes?e.readVarint()+e.pos:e.pos+1}function Jc(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function el(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function tl(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function nl(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function rl(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function il(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function al(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function ol(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function sl(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function ul(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function cl(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function ll(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function hl(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function fl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function dl(e,t,n){1===e&&n.readMessage(pl,t)}function pl(e,t,n){if(3===e){var r=n.readMessage(vl,{}),i=r.id,a=r.bitmap,o=r.width,s=r.height,u=r.left,c=r.top,l=r.advance;t.push({id:i,bitmap:new cu({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:u,top:c,advance:l}})}}function vl(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function ml(e){var t,n=0,r=0,i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=a.w*a.h,r=Math.max(r,a.w)}}catch(v){i.e(v)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],u=0,c=0,l=m(e);try{for(l.s();!(o=l.n()).done;)for(var h=o.value,f=s.length-1;f>=0;f--){var d=s[f];if(!(h.w>d.w||h.h>d.h)){if(h.x=d.x,h.y=d.y,c=Math.max(c,h.y+h.h),u=Math.max(u,h.x+h.w),h.w===d.w&&h.h===d.h){var p=s.pop();f<s.length&&(s[f]=p)}else h.h===d.h?(d.x+=h.w,d.w-=h.w):h.w===d.w?(d.y+=h.h,d.h-=h.h):(s.push({x:d.x+h.w,y:d.y,w:d.w-h.w,h:h.h}),d.y+=h.h,d.h-=h.h);break}}}catch(v){l.e(v)}finally{l.f()}return{w:u,h:c,fill:n/(u*c)||0}}Zc.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ll(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=fl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ll(this.buf,this.pos)+ll(this.buf,this.pos+4)*Xc;return this.pos+=8,e},readSFixed64:function(){var e=ll(this.buf,this.pos)+fl(this.buf,this.pos+4)*Xc;return this.pos+=8,e},readFloat:function(){var e=Kc(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Kc(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return Jc(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return Jc(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return Jc(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return Jc(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return Jc(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return Jc(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Qc?function(e,t,n){return Qc.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var a,o,s,u=e[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(a=e[i+1]))&&(c=(31&u)<<6|63&a)<=127&&(c=null):3===l?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((c=(15&u)<<12|(63&a)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Zc.Bytes)return e.push(this.readVarint(t));var n=$c(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Zc.Bytes)return e.push(this.readSVarint());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Zc.Bytes)return e.push(this.readBoolean());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Zc.Bytes)return e.push(this.readFloat());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Zc.Bytes)return e.push(this.readDouble());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Zc.Bytes)return e.push(this.readFixed32());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Zc.Bytes)return e.push(this.readSFixed32());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Zc.Bytes)return e.push(this.readFixed64());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Zc.Bytes)return e.push(this.readSFixed64());var t=$c(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Zc.Varint)for(;this.buf[this.pos++]>127;);else if(t===Zc.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Zc.Fixed32)this.pos+=4;else{if(t!==Zc.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),hl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),hl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),hl(this.buf,-1&e,this.pos),hl(this.buf,Math.floor(e*Yc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),hl(this.buf,-1&e,this.pos),hl(this.buf,Math.floor(e*Yc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&el(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Hc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Hc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&el(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Zc.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,tl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,nl,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,al,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,rl,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,il,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,ol,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,sl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,ul,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,cl,t)},writeBytesField:function(e,t){this.writeTag(e,Zc.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Zc.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Zc.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Zc.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Zc.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Zc.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Zc.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Zc.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Zc.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Zc.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var yl=function(){function e(t,n){var r=n.pixelRatio,i=n.version,a=n.stretchX,o=n.stretchY,s=n.content;p(this,e),this.paddedRect=t,this.pixelRatio=r,this.stretchX=a,this.stretchY=o,this.content=s,this.version=i}return v(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"tlbr",get:function(){return this.tl.concat(this.br)}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}();Li("ImagePosition",yl),Li("ImageAtlas",function(){function e(t,n){p(this,e);var r={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,r,a),this.addImages(n,i,a);var o=ml(a),s=o.w,u=o.h,c=new lu({width:s||1,height:u||1});for(var l in t){var h=t[l],f=r[l].paddedRect;lu.copy(h.data,c,{x:0,y:0},{x:f.x+1,y:f.y+1},h.data)}for(var d in n){var v=n[d],m=i[d].paddedRect,y=m.x+1,g=m.y+1,b=v.data.width,_=v.data.height;lu.copy(v.data,c,{x:0,y:0},{x:y,y:g},v.data),lu.copy(v.data,c,{x:0,y:_-1},{x:y,y:g-1},{width:b,height:1}),lu.copy(v.data,c,{x:0,y:0},{x:y,y:g+_},{width:b,height:1}),lu.copy(v.data,c,{x:b-1,y:0},{x:y-1,y:g},{width:1,height:_}),lu.copy(v.data,c,{x:0,y:0},{x:y+b,y:g},{width:1,height:_})}this.image=c,this.iconPositions=r,this.patternPositions=i}return v(e,[{key:"addImages",value:function(e,t,n){for(var r in e){var i=e[r],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(a),t[r]=new yl(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=l(e.tl,2),i=r[0],a=r[1];n.update(t.data,void 0,{x:i,y:a})}}}]),e}());var gl={horizontal:1,vertical:2,horizontalOnly:3};function bl(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}Li("Anchor",function(e){f(n,e);var t=d(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,e,r)).angle=i,void 0!==a&&(o.segment=a),o}return v(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.angle,this.segment)}}]),n}(_));var _l=kl,wl=kl,xl=1e20;function kl(e,t,n,r,i,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer,s=o+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function El(e,t,n,r,i,a){for(var o=0;o<t;o++)Tl(e,o,t,n,r,i,a);for(var s=0;s<n;s++)Tl(e,s*t,1,t,r,i,a)}function Tl(e,t,n,r,i,a,o){var s,u,c,l;for(a[0]=0,o[0]=-xl,o[1]=xl,s=0;s<r;s++)i[s]=e[t+s*n];for(s=1,u=0,c=0;s<r;s++){do{c=(i[s]-i[l=a[u]]+s*s-l*l)/(s-l)/2}while(c<=o[u]&&--u>-1);a[++u]=s,o[u]=c,o[u+1]=xl}for(s=0,u=0;s<r;s++){for(;o[u+1]<s;)u++;e[t+s*n]=i[l=a[u]]+(s-l)*(s-l)}}kl.prototype._draw=function(e,t){var n,r,i,a,o,s,u,c,l,h=this.ctx.measureText(e),f=h.width,d=2*this.buffer;t&&this.useMetrics?(o=Math.floor(h.actualBoundingBoxAscent),c=this.buffer+Math.ceil(h.actualBoundingBoxAscent),s=this.buffer,u=this.buffer,n=(r=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)))+d,i=(a=Math.min(this.size-s,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)))+d,this.ctx.textBaseline="alphabetic"):(n=r=this.size,i=a=this.size,o=19*this.fontSize/24,s=u=0,c=this.middle,this.ctx.textBaseline="middle"),r&&a&&(this.ctx.clearRect(u,s,r,a),this.ctx.fillText(e,this.buffer,c),l=this.ctx.getImageData(u,s,r,a));var p=new Uint8ClampedArray(n*i);return function(e,t,n,r,i,a,o){a.fill(xl,0,t*n),o.fill(0,0,t*n);for(var s=(t-r)/2,u=0;u<i;u++)for(var c=0;c<r;c++){var l=(u+s)*t+c+s,h=e.data[4*(u*r+c)+3]/255;if(1===h)a[l]=0,o[l]=xl;else if(0===h)a[l]=xl,o[l]=0;else{var f=Math.max(0,.5-h),d=Math.max(0,h-.5);a[l]=f*f,o[l]=d*d}}}(l,n,i,r,a,this.gridOuter,this.gridInner),El(this.gridOuter,n,i,this.f,this.v,this.z),El(this.gridInner,n,i,this.f,this.v,this.z),function(e,t,n,r,i,a,o){for(var s=0;s<t*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(u/a+o))}}(p,n,i,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:r,height:a,sdfWidth:n,sdfHeight:i,top:o,left:0,advance:f}}},kl.prototype.draw=function(e){return this._draw(e,!1).data},kl.prototype.drawWithMetrics=function(e){return this._draw(e,!0)},_l.default=wl;var Sl=function(){function e(t,n,r){p(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return v(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var r=this,i=[];for(var a in t){var o,s=m(t[a]);try{for(s.s();!(o=s.n()).done;){var u=o.value;i.push({stack:a,id:u})}}catch(c){s.e(c)}finally{s.f()}}N(i,(function(t,n){var i=t.stack,a=t.id,o=r.entries[i];o||(o=r.entries[i]={glyphs:{},requests:{},ranges:{}});var s=o.glyphs[a];if(void 0===s){if(s=r._tinySDF(o,i,a))return o.glyphs[a]=s,void n(null,{stack:i,id:a,glyph:s});var u=Math.floor(a/256);if(256*u>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[u])n(null,{stack:i,id:a,glyph:s});else{var l=o.requests[u];l||(l=o.requests[u]=[],e.loadGlyphRange(i,u,r.url,r.requestManager,(function(e,t){if(t){for(var n in t)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t[+n]);o.ranges[u]=!0}var i,a=m(l);try{for(a.s();!(i=a.n()).done;)(0,i.value)(e,t)}catch(c){a.e(c)}finally{a.f()}delete o.requests[u]}))),l.push((function(e,t){e?n(e):t&&n(null,{stack:i,id:a,glyph:t[a]||null})}))}}else n(null,{stack:i,id:a,glyph:s})}),(function(e,t){if(e)n(e);else if(t){var r,i={},a=m(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.stack,u=o.id,l=o.glyph;(i[s]||(i[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}}catch(c){a.e(c)}finally{a.f()}n(null,i)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return 0!==this.localGlyphMode&&(2===this.localGlyphMode?!!this.localFontFamily:!!this.localFontFamily&&(Ki(e)||Hi(e)||qi(e)||Gi(e)))}},{key:"_tinySDF",value:function(t,n,r){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),a=t.tinySDF=new e.TinySDF(48,6,16,.25,i,o)}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];var s=a.drawWithMetrics(String.fromCharCode(r)),u=s.data,c=s.metrics,l=c.sdfWidth,h=c.sdfHeight,f=c.width,d=c.height,p=c.left,v=c.top,m=c.advance;return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new cu({width:l,height:h},u),metrics:{width:f/2,height:d/2,left:p/2,top:v/2-27,advance:m/2,localGlyph:!0}}}}}]),e}();Sl.loadGlyphRange=function(e,t,n,r,i){var a=256*t,o=a+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),$e.Glyphs);rt(s,(function(e,t){if(e)i(e);else if(t){var n,r={},a=m(function(e){return new Wc(e).readFields(dl,[])}(t));try{for(a.s();!(n=a.n()).done;){var o=n.value;r[o.id]=o}}catch(s){a.e(s)}finally{a.f()}i(null,r)}}))},Sl.TinySDF=_l;var Il=Number.POSITIVE_INFINITY;function Cl(e,t){return t[1]!==Il?function(e,t,n){var r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){var n=0,r=0;t<0&&(t=0);var i=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}var Al=hc.VectorTileFeature.types,Ol=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Pl(e,t,n,r,i,a,o,s,u,c,l,h,f){var d=s?Math.min(32640,Math.round(s[0])):0,p=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,o,(d<<1)+(u?1:0),p,16*c,16*l,256*h,256*f)}function Dl(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}function Rl(e){var t,n=m(e.sections);try{for(n.s();!(t=n.n()).done;)if(Qi(t.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Ml=function(){function e(t){p(this,e),this.layoutVertexArray=new La,this.indexArray=new qa,this.programConfigurations=t,this.segments=new Go,this.dynamicLayoutVertexArray=new ja,this.opacityVertexArray=new Fa,this.placedSymbolArray=new to}return v(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Dc.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Rc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Ol,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}]),e}();Li("SymbolBuffers",Ml);var Nl=function(){function e(t,n,r){p(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new r,this.segments=new Go,this.collisionVertexArray=new Va,this.collisionVertexArrayExt=new ja}return v(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Mc.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Nc.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();Li("CollisionBuffers",Nl);var Ll=function(){function e(t){p(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bs([]),this.placementViewportMatrix=bs([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zc(this.zoom,n["text-size"]),this.iconSizeData=zc(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((function(e){return gl[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID}return v(e,[{key:"createArrays",value:function(){this.text=new Ml(new Fo(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new Ml(new Fo(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new io,this.lineVertexArray=new ao,this.symbolInstances=new ro}},{key:"calculateGlyphDependencies",value:function(e,t,n,r,i){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,(n||r)&&i){var o=Gc[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n){var r=this.layers[0],i=r.layout,a=i.get("text-font"),o=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==o.value.kind||o.value.value instanceof Kt&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,l=i.get("symbol-sort-key");if(this.features=[],u||c){var h,f=t.iconDependencies,d=t.glyphDependencies,p=t.availableImages,v=new la(this.zoom),y=m(e);try{for(y.s();!(h=y.n()).done;){var g=h.value,b=g.feature,_=g.id,w=g.index,x=g.sourceLayerIndex,k=r._featureFilter.needGeometry,E=Xo(b,k);if(r._featureFilter.filter(v,E,n)){var T=void 0,S=void 0;if(k||(E.geometry=Zo(b)),u){var I=r.getValueAndResolveTokens("text-field",E,n,p),C=Kt.factory(I);Rl(C)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===sa()||this.hasRTLText&&ca.isParsed())&&(T=qc(C,r,E))}if(c){var A=r.getValueAndResolveTokens("icon-image",E,n,p);S=A instanceof Ht?A:Ht.fromString(A)}if(T||S){var O=this.sortFeaturesByKey?l.evaluate(E,{},n):void 0;if(this.features.push({id:_,text:T,icon:S,index:w,sourceLayerIndex:x,geometry:E.geometry,properties:b.properties,type:Al[b.type],sortKey:O}),S&&(f[S.name]=!0),T){var P=a.evaluate(E,{},n).join(","),D="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(gl.vertical)>=0;var R,M=m(T.sections);try{for(M.s();!(R=M.n()).done;){var N=R.value;if(N.image)f[N.image.name]=!0;else{var L=Wi(T.toString()),j=N.fontStack||P,F=d[j]=d[j]||{};this.calculateGlyphDependencies(N.text,F,D,this.allowVerticalPlacement,L)}}}catch(z){M.e(z)}finally{M.f()}}}}}}catch(z){y.e(z)}finally{y.f()}"line"===i.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){var a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(e,n,i){var a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(var c=0;c<e.length;c++){var l=e[c],h=l.geometry,f=l.text?l.text.toString():null;if(f){var d=u(f,h),p=u(f,h,!0);if(d in n&&p in t&&n[d]!==t[p]){var v=s(d,p,h),m=o(d,p,r[v].geometry);delete t[d],delete n[p],n[u(f,r[m].geometry,!0)]=m,r[v].geometry=null}else d in n?o(d,p,h):p in t?s(d,p,h):(a(c),t[d]=i-1,n[p]=i-1)}else a(c)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),a={},o=e.segment+1;o<t.length;o++)a[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var c=a[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,r,i,a,o,s,u,c,l,h){for(var f=e.indexArray,d=e.layoutVertexArray,p=e.segments.prepareSegment(4*t.length,d,f,this.canOverlap?a.sortKey:void 0),v=this.glyphOffsetArray.length,m=p.vertexLength,y=this.allowVerticalPlacement&&o===gl.vertical?Math.PI/2:0,g=a.text&&a.text.sections,b=0;b<t.length;b++){var _=t[b],w=_.tl,x=_.tr,k=_.bl,E=_.br,T=_.tex,S=_.pixelOffsetTL,I=_.pixelOffsetBR,C=_.minFontScaleX,A=_.minFontScaleY,O=_.glyphOffset,P=_.isSDF,D=_.sectionIndex,R=p.vertexLength,M=O[1];Pl(d,s.x,s.y,w.x,M+w.y,T.x,T.y,n,P,S.x,S.y,C,A),Pl(d,s.x,s.y,x.x,M+x.y,T.x+T.w,T.y,n,P,I.x,S.y,C,A),Pl(d,s.x,s.y,k.x,M+k.y,T.x,T.y+T.h,n,P,S.x,I.y,C,A),Pl(d,s.x,s.y,E.x,M+E.y,T.x+T.w,T.y+T.h,n,P,I.x,I.y,C,A),Dl(e.dynamicLayoutVertexArray,s,y),f.emplaceBack(R,R+1,R+2),f.emplaceBack(R+1,R+2,R+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(O[0]),b!==t.length-1&&D===t[b+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,a,a.index,{},h,g&&g[D])}e.placedSymbolArray.emplaceBack(s.x,s.y,v,this.glyphOffsetArray.length-v,m,u,c,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,0,!1,0,l)}},{key:"_commitLayoutVertex",value:function(e,t,n,r,i){e.emplaceBack(t.x,t.y,n,r,Math.round(i.x),Math.round(i.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,r,i){for(var a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),o=a.vertexLength,s=i.anchorX,u=i.anchorY,c=0;c<4;c++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new _(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new _(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new _(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,s,u,new _(e.x1,e.y2)),a.vertexLength+=4;var l=n.indexArray;l.emplaceBack(o,o+1),l.emplaceBack(o+1,o+2),l.emplaceBack(o+2,o+3),l.emplaceBack(o+3,o),a.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,u,this.textCollisionBox,s.anchorPoint,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceIconSize(e,t,o);this._addCollisionDebugVertices(s,u,this.iconCollisionBox,s.anchorPoint,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nl(Ba,Lc.members,Xa),this.iconCollisionBox=new Nl(Ba,Lc.members,Xa);for(var n=Uc(this.iconSizeData,e),r=Uc(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,r){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),a=Bc(this.textSizeData,e,i)/24;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var r=this.icon.placedSymbolArray.get(n),i=Bc(this.iconSizeData,e,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),u=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,u,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,r,i){for(var a=r;a<i;a++){var o=n.get(a),s=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,o.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=Uc(this.iconSizeData,e),r=Uc(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,r,i,a,o,s,u){for(var c={},l=t;l<n;l++){var h=e.get(l);c.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},c.textFeatureIndex=h.featureIndex;break}for(var f=r;f<i;f++){var d=e.get(f);c.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,padding:d.padding,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.verticalTextFeatureIndex=d.featureIndex;break}for(var p=a;p<o;p++){var v=e.get(p);c.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,padding:v.padding,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},c.iconFeatureIndex=v.featureIndex;break}for(var m=s;m<u;m++){var y=e.get(m);c.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,padding:y.padding,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},c.verticalIconFeatureIndex=y.featureIndex;break}return c}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return a.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,r=m(this.symbolInstanceIndexes);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){e>=0&&r.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(o){r.e(o)}finally{r.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();Li("SymbolBucket",Ll,{omit:["layers","collisionBoxArray","features","compareText"]}),Ll.MAX_GLYPHS=65535,Ll.addDynamicAttributes=Dl;var jl=new Ea({"symbol-placement":new ba(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new ba(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ba(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _a(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ba(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ba(mt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ba(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ba(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ba(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new _a(mt.layout_symbol["icon-size"]),"icon-text-fit":new ba(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ba(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new _a(mt.layout_symbol["icon-image"]),"icon-rotate":new _a(mt.layout_symbol["icon-rotate"]),"icon-padding":new ba(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new ba(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new _a(mt.layout_symbol["icon-offset"]),"icon-anchor":new _a(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ba(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ba(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ba(mt.layout_symbol["text-rotation-alignment"]),"text-field":new _a(mt.layout_symbol["text-field"]),"text-font":new _a(mt.layout_symbol["text-font"]),"text-size":new _a(mt.layout_symbol["text-size"]),"text-max-width":new _a(mt.layout_symbol["text-max-width"]),"text-line-height":new ba(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new _a(mt.layout_symbol["text-letter-spacing"]),"text-justify":new _a(mt.layout_symbol["text-justify"]),"text-radial-offset":new _a(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ba(mt.layout_symbol["text-variable-anchor"]),"text-anchor":new _a(mt.layout_symbol["text-anchor"]),"text-max-angle":new ba(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new ba(mt.layout_symbol["text-writing-mode"]),"text-rotate":new _a(mt.layout_symbol["text-rotate"]),"text-padding":new ba(mt.layout_symbol["text-padding"]),"text-keep-upright":new ba(mt.layout_symbol["text-keep-upright"]),"text-transform":new _a(mt.layout_symbol["text-transform"]),"text-offset":new _a(mt.layout_symbol["text-offset"]),"text-allow-overlap":new ba(mt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ba(mt.layout_symbol["text-ignore-placement"]),"text-optional":new ba(mt.layout_symbol["text-optional"])}),Fl={paint:new Ea({"icon-opacity":new _a(mt.paint_symbol["icon-opacity"]),"icon-color":new _a(mt.paint_symbol["icon-color"]),"icon-halo-color":new _a(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new _a(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _a(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new ba(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ba(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new _a(mt.paint_symbol["text-opacity"]),"text-color":new _a(mt.paint_symbol["text-color"],{runtimeType:Ct,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new _a(mt.paint_symbol["text-halo-color"]),"text-halo-width":new _a(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new _a(mt.paint_symbol["text-halo-blur"]),"text-translate":new ba(mt.paint_symbol["text-translate"]),"text-translate-anchor":new ba(mt.paint_symbol["text-translate-anchor"])}),layout:jl},zl=function(){function e(t){p(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:Et,this.defaultValue=t}return v(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();Li("FormatSectionOverride",zl,{omit:["defaultValue"]});var Bl=function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Fl)}return v(n,[{key:"recalculate",value:function(e,t){if(a(o(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){var i,s=[],u=m(r);try{for(u.s();!(i=u.n()).done;){var c=i.value;s.indexOf(c)<0&&s.push(c)}}catch(l){u.e(l)}finally{u.f()}this.layout._values["text-writing-mode"]=s}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||Br(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new Ll(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=m(Fl.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),a=new zl(i),o=new zr(a,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new Vr("source",o):new qr("composite",o,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new ya(i.property,s,i.parameters)}}}catch(u){t.e(u)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),r=Fl.paint.properties[t],i=!1,a=function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(r.overrides&&r.overrides.hasOverride(a))return void(i=!0)}}catch(o){n.e(o)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Kt)a(n.value.value.sections);else if("source"===n.value.kind){var o=function e(t){i||(t instanceof Qt&&Xt(t.value)===Dt?a(t.value.sections):t instanceof tn?a(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return i}}]),n}(Vo),Ul={paint:new Ea({"background-color":new ba(mt.paint_background["background-color"]),"background-pattern":new xa(mt.paint_background["background-pattern"]),"background-opacity":new ba(mt.paint_background["background-opacity"])})},Vl={paint:new Ea({"raster-opacity":new ba(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ba(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ba(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ba(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new ba(mt.paint_raster["raster-saturation"]),"raster-contrast":new ba(mt.paint_raster["raster-contrast"]),"raster-resampling":new ba(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new ba(mt.paint_raster["raster-fade-duration"])})},ql=function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this,e,{})).implementation=e,r}return v(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(Vo),Gl={paint:new Ea({"sky-type":new ba(mt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ba(mt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ba(mt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ba(mt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ba(mt.paint_sky["sky-gradient-radius"]),"sky-gradient":new ka(mt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ba(mt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ba(mt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ba(mt.paint_sky["sky-opacity"])})};function Kl(e,t,n){var r=Ms(0,0,1),i=Ys(Xs());return function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s}(i,i,n?-I(e)+Math.PI:I(e)),Qs(i,i,-I(t)),Vs(r,r,i),zs(r,r)}var Hl={circle:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,vs)}return v(n,[{key:"createBucket",value:function(e){return new Qo(e)}},{key:"queryRadius",value:function(e){var t=e;return ls("circle-radius",this,t)+ls("circle-stroke-width",this,t)+hs(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var u=this,c="map"===this.paint.get("circle-pitch-alignment");if(c&&e.queryGeometry.isAboveHorizon)return!1;var l,h=ds(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),f=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),d=c?f*e.pixelToTileUnitsFactor:f,p=m(r);try{for(p.s();!(l=p.n()).done;){var v,y=l.value,g=m(y);try{var b=function(){var t=v.value,n=t.add(h),r=s&&a.elevation?a.elevation.exaggeration()*s.getElevationAt(n.x,n.y,!0):0,i=c?n:tu(n,r,o),l=c?e.tilespaceRays.map((function(e){return iu(e,r)})):e.queryGeometry.screenGeometry,f=d,p=Zs([],[t.x,t.y,r,1],o);if("viewport"===u.paint.get("circle-pitch-scale")&&"map"===u.paint.get("circle-pitch-alignment")?f*=p[3]/a.cameraToCenterDistance:"map"===u.paint.get("circle-pitch-scale")&&"viewport"===u.paint.get("circle-pitch-alignment")&&(f*=a.cameraToCenterDistance/p[3]),Jo(l,i,f))return{v:!0}};for(g.s();!(v=g.n()).done;){var _=b();if("object"===typeof _)return _.v}}catch(w){g.e(w)}finally{g.f()}}}catch(w){p.e(w)}finally{p.f()}return!1}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}}]),n}(Vo),heatmap:function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this,e,hu))._updateColorRamp(),r}return v(n,[{key:"createBucket",value:function(e){return new au(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=fu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}}]),n}(Vo),hillshade:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,du)}return v(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}}]),n}(Vo),fill:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Ju)}return v(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}},{key:"recalculate",value:function(e,t){a(o(n.prototype),"recalculate",this).call(this,e,t);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Qu(e)}},{key:"queryRadius",value:function(){return hs(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){return!e.queryGeometry.isAboveHorizon&&es(fs(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Vo),"fill-extrusion":function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,gc)}return v(n,[{key:"createBucket",value:function(e){return new mc(e)}},{key:"queryRadius",value:function(){return hs(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s,u){var c=ds(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),l=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),f=[0,0],d=s&&a.elevation,p=a.elevation?a.elevation.exaggeration():1;if(d){var v=e.tile.getBucket(this).centroidVertexArray,y=u+1;if(y<v.length){var g=v.get(y);f[0]=g.a_centroid_pos0,f[1]=g.a_centroid_pos1}}if(0===f[0]&&1===f[1])return!1;var b=function(e,t,n,r,i,a,o,s,u){return a?function(e,t,n,r,i,a,o,s,u){var c,l=[],h=[],f=[0,0,0,1],d=m(e);try{for(d.s();!(c=d.n()).done;){var p,v=c.value,y=[],g=[],b=m(v);try{for(b.s();!(p=b.n()).done;){var _=p.value,w=_.x+r.x,x=_.y+r.y,k=xc(w,x,t,n,a,o,s,u);f[0]=w,f[1]=x,f[2]=k.base,f[3]=1,Zs(f,f,i),f[3]=Math.max(f[3],1e-5);var E=wc([f[0]/f[3],f[1]/f[3],f[2]/f[3]]);f[0]=w,f[1]=x,f[2]=k.top,f[3]=1,Zs(f,f,i),f[3]=Math.max(f[3],1e-5);var T=wc([f[0]/f[3],f[1]/f[3],f[2]/f[3]]);y.push(E),g.push(T)}}catch(S){b.e(S)}finally{b.f()}l.push(y),h.push(g)}}catch(S){d.e(S)}finally{d.f()}return[l,h]}(e,t,n,r,i,a,o,s,u):function(e,t,n,r,i){var a,o=[],s=[],u=i[8]*t,c=i[9]*t,l=i[10]*t,h=i[11]*t,f=i[8]*n,d=i[9]*n,p=i[10]*n,v=i[11]*n,y=m(e);try{for(y.s();!(a=y.n()).done;){var g,b=a.value,w=[],x=[],k=m(b);try{for(k.s();!(g=k.n()).done;){var E=g.value,T=E.x+r.x,S=E.y+r.y,I=i[0]*T+i[4]*S+i[12],C=i[1]*T+i[5]*S+i[13],A=i[2]*T+i[6]*S+i[14],O=i[3]*T+i[7]*S+i[15],P=I+u,D=C+c,R=A+l,M=Math.max(O+h,1e-5),N=I+f,L=C+d,j=A+p,F=Math.max(O+v,1e-5),z=new _(P/M,D/M);z.z=R/M,w.push(z);var B=new _(N/F,L/F);B.z=j/F,x.push(B)}}catch(U){k.e(U)}finally{k.f()}o.push(w),s.push(x)}}catch(U){y.e(U)}finally{y.f()}return[o,s]}(e,t,n,r,i)}(r,h,l,c,o,d?s:null,f,p,a.center.lat),w=e.queryGeometry;return function(e,t,n){var r=1/0;es(n,t)&&(r=_c(n,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],o=e[i],s=0;s<a.length-1;s++){var u=a[s],c=[u,a[s+1],o[s+1],o[s],u];$o(n,c)&&(r=Math.min(r,_c(n,c)))}return r!==1/0&&r}(b[0],b[1],w.isPointQuery()?w.screenBounds:w.screenGeometry)}}]),n}(Vo),line:function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this,e,Ac)).gradientVersion=0,r}return v(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Mn,this.gradientVersion=(this.gradientVersion+1)%E)}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){a(o(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=Oc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new Ic(e)}},{key:"getProgramIds",value:function(){var e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":n?"lineGradient":"line"]}},{key:"getProgramConfiguration",value:function(e){return new jo(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=Pc(ls("line-width",this,t),ls("line-gap-width",this,t)),r=ls("line-offset",this,t);return n/2+Math.abs(r)+hs(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=fs(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Pc(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){for(var n=[],r=new _(0,0),i=0;i<e.length;i++){for(var a=e[i],o=[],s=0;s<a.length;s++){var u=a[s-1],c=a[s],l=a[s+1],h=0===s?r:c.sub(u)._unit()._perp(),f=s===a.length-1?r:l.sub(c)._unit()._perp(),d=h._add(f)._unit();d._mult(1/(d.x*f.x+d.y*f.y)),o.push(d._mult(t)._add(c))}n.push(o)}return n}(r,u*e.pixelToTileUnitsFactor)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var a=0;a<i.length;a++)if(ss(e,i[a]))return!0;if(ts(e,i,n))return!0}return!1}(o,r,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Vo),symbol:Bl,background:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Ul)}return v(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(Vo),raster:function(e){f(n,e);var t=d(n);function n(e){return p(this,n),t.call(this,e,Vl)}return v(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(Vo),sky:function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this,e,Gl))._updateColorRamp(),r}return v(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=fu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}},{key:"getCenter",value:function(e,t){var n=this.paint.get("sky-type");if("atmosphere"===n){var r=this.paint.get("sky-atmosphere-sun"),i=!r,a=e.style.light,o=a.properties.get("position");return i&&"viewport"===a.properties.get("anchor")&&X("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?Kl(o.azimuthal,90-o.polar,t):Kl(r[0],90-r[1],t)}if("gradient"===n){var s=this.paint.get("sky-gradient-center");return Kl(s[0],90-s[1],t)}}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(Vo)};function Wl(e){return"custom"===e.type?new ql(e):new Hl[e.type](e)}var Zl=x.HTMLImageElement,Xl=x.HTMLCanvasElement,Yl=x.HTMLVideoElement,Ql=x.ImageData,$l=x.ImageBitmap,Jl=function(){function e(t,n,r,i){p(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return v(e,[{key:"update",value:function(e,t,n){var r=e.width,i=e.height,a=!(this.size&&this.size[0]===r&&this.size[1]===i||n),o=this.context,s=o.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),a)this.size=[r,i],e instanceof Zl||e instanceof Xl||e instanceof Yl||e instanceof Ql||$l&&e instanceof $l?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);else{var u=n||{x:0,y:0},c=u.x,l=u.y;e instanceof Zl||e instanceof Xl||e instanceof Yl||e instanceof Ql||$l&&e instanceof $l?s.texSubImage2D(s.TEXTURE_2D,0,c,l,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,c,l,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}},{key:"bind",value:function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}();function eh(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var th=function(e){f(n,e);var t=d(n);function n(){var e;return p(this,n),(e=t.call(this)).images={},e.updatedImages={},e.callbackDispatchedThisFrame={},e.loaded=!1,e.requestors=[],e.patterns={},e.atlasImage=new lu({width:1,height:1}),e.dirty=!0,e}return v(n,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=m(this.requestors);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.ids,a=r.callback;this._notify(i,a)}}catch(o){n.e(o)}finally{n.f()}this.requestors=[]}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(e,t){var n=!0;return this._validateStretch(t.stretchX,t.data&&t.data.width)||(this.fire(new pt(new Error('Image "'.concat(e,'" has invalid "stretchX" value')))),n=!1),this._validateStretch(t.stretchY,t.data&&t.data.height)||(this.fire(new pt(new Error('Image "'.concat(e,'" has invalid "stretchY" value')))),n=!1),this._validateContent(t.content,t)||(this.fire(new pt(new Error('Image "'.concat(e,'" has invalid "content" value')))),n=!1),n}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,r=0,i=m(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a[0]<r||a[1]<a[0]||t<a[1])return!1;r=a[1]}}catch(o){i.e(o)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var r,i=m(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.images[a]||(n=!1)}}catch(o){i.e(o)}finally{i.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(e,t){var n,r={},i=m(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.images[a]||this.fire(new dt("styleimagemissing",{id:a}));var o=this.images[a];o?r[a]={data:o.data.clone(),pixelRatio:o.pixelRatio,sdf:o.sdf,version:o.version,stretchX:o.stretchX,stretchY:o.stretchY,content:o.content,hasRenderCallback:Boolean(o.userImage&&o.userImage.render)}:X('Image "'.concat(a,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(s){i.e(s)}finally{i.f()}t(null,r)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(e){var t=this.patterns[e],n=this.getImage(e);if(!n)return null;if(t&&t.position.version===n.version)return t.position;if(t)t.position.version=n.version;else{var r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new yl(r,n);this.patterns[e]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}},{key:"bind",value:function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Jl(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var e=[];for(var t in this.patterns)e.push(this.patterns[t].bin);var n=ml(e),r=n.w,i=n.h,a=this.atlasImage;for(var o in a.resize({width:r||1,height:i||1}),this.patterns){var s=this.patterns[o].bin,u=s.x+1,c=s.y+1,l=this.images[o].data,h=l.width,f=l.height;lu.copy(l,a,{x:0,y:0},{x:u,y:c},{width:h,height:f}),lu.copy(l,a,{x:0,y:f-1},{x:u,y:c-1},{width:h,height:1}),lu.copy(l,a,{x:0,y:0},{x:u,y:c+f},{width:h,height:1}),lu.copy(l,a,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:f}),lu.copy(l,a,{x:0,y:0},{x:u+h,y:c},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=m(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];eh(i)&&this.updateImage(r,i)}}}catch(a){n.e(a)}finally{n.f()}}}]),n}(vt),nh=new Ea({anchor:new ba(mt.light.anchor),position:new(function(){function e(){p(this,e),this.specification=mt.light.position}return v(e,[{key:"possiblyEvaluate",value:function(e,t){return function(e){var t=l(e,3),n=t[0],r=t[1],i=t[2],a=I(r+90),o=I(i);return{x:n*Math.cos(a)*Math.sin(o),y:n*Math.sin(a)*Math.sin(o),z:n*Math.cos(o),azimuthal:r,polar:i}}(e.expression.evaluate(t))}},{key:"interpolate",value:function(e,t,n){return{x:Nn(e.x,t.x,n),y:Nn(e.y,t.y,n),z:Nn(e.z,t.z,n),azimuthal:Nn(e.azimuthal,t.azimuthal,n),polar:Nn(e.polar,t.polar,n)}}}]),e}()),color:new ba(mt.light.color),intensity:new ba(mt.light.intensity)}),rh="-transition",ih=function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this))._transitionable=new da(nh),r.setLight(e),r._transitioning=r._transitionable.untransitioned(),r}return v(n,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(Ii,e,t))for(var n in e){var r=e[n];G(n,rh)?this._transitionable.setTransition(n.slice(0,-rh.length),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(e,t,n){return(!n||!1!==n.validate)&&Oi(this,e.call(Si,j({value:t,style:{glyphs:!0,sprite:!0},styleSpec:mt})))}}]),n}(vt),ah=new Ea({source:new ba(mt.terrain.source),exaggeration:new ba(mt.terrain.exaggeration)}),oh="-transition",sh=function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this))._transitionable=new da(ah),r.set(e),r._transitioning=r._transitionable.untransitioned(),r}return v(n,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(e){for(var t in e){var n=e[t];G(t,oh)?this._transitionable.setTransition(t.slice(0,-oh.length),n):this._transitionable.setValue(t,n)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),n}(vt),uh=function(){function e(t,n){p(this,e),this.width=t,this.height=n,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}return v(e,[{key:"getDash",value:function(e,t){var n=e.join(",")+String(t);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(e,t)),this.dashEntry[n]}},{key:"getDashRanges",value:function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],u=1;u<e.length;u++){o=!o;var c=e[u];i=s*n,a=(s+=c)*n,r.push({left:i,right:a,isDash:o,zeroLength:0===c})}return r}},{key:"addRoundDash",value:function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var a=this.width*(this.nextRow+n+i),o=0,s=e[o],u=0;u<this.width;u++){u/s.right>1&&(s=e[++o]);var c=Math.abs(u-s.left),l=Math.abs(u-s.right),h=Math.min(c,l),f=void 0,d=i/n*(r+1);if(s.isDash){var p=r-Math.abs(d);f=Math.sqrt(h*h+p*p)}else f=r-Math.sqrt(h*h+d*d);this.data[a+u]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(e){for(var t=e.length-1;t>=0;--t){var n=e[t],r=e[t+1];n.zeroLength?e.splice(t,1):r&&r.isDash===n.isDash&&(r.left=n.left,e.splice(t,1))}var i=e[0],a=e[e.length-1];i.isDash===a.isDash&&(i.left=a.left-this.width,a.right=i.right+this.width);for(var o=this.width*this.nextRow,s=0,u=e[s],c=0;c<this.width;c++){c/u.right>1&&(u=e[++s]);var l=Math.abs(c-u.left),h=Math.abs(c-u.right),f=Math.min(l,h);this.data[o+c]=Math.max(0,Math.min(255,(u.isDash?f:-f)+128))}}},{key:"addDash",value:function(e,t){var n=t?7:0,r=2*n+1;if(this.nextRow+r>this.height)return X("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var i=0,a=0;a<e.length;a++)e[a]<0&&(X("Negative value is found in line dasharray, replacing values with 0"),e[a]=0),i+=e[a];if(0!==i){var o=this.width/i,s=this.getDashRanges(e,this.width,o);t?this.addRoundDash(s,o,n):this.addRegularDash(s)}var u={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:i};return this.nextRow+=r,this.dirty=!0,u}},{key:"bind",value:function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}]),e}(),ch=function(){function e(t){var n=this;p(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return v(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){delete this._channel,this._callback=function(){}}}]),e}(),lh=function(){function e(){p(this,e),this.tasks={},this.taskQueue=[],q(["process"],this),this.invoker=new ch(this.process),this.nextId=0}return v(e,[{key:"add",value:function(e,t){var n=this,r=this.nextId++,i=function(e){var t=e.type,n=e.isSymbolTile,r=e.zoom;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}(t);if(0===i){$();try{e()}finally{}return{cancel:function(){}}}return this.tasks[r]={fn:e,metadata:t,priority:i,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var e=this;$();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),hh=function(){function e(t,n){var r=this;p(this,e),this.workerPool=t,this.actors=[],this.currentActor=0,this.id=B();for(var i=this.workerPool.acquire(this.id),a=0;a<i.length;a++){var o=new e.Actor(i[a],n,this.id);o.name="Worker ".concat(a),this.actors.push(o)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){r.ready=!0}))}return v(e,[{key:"broadcast",value:function(e,t,n){N(this.actors,(function(n,r){n.send(e,t,r)}),n=n||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),e}();function fh(e,t,n){return t*(Ko/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}hh.Actor=function(){function e(t,n,r){p(this,e),this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},q(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=$()?t:x,this.scheduler=new lh}return v(e,[{key:"send",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);var u=ie(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:Bi(t,u)},u),{cancel:function(){n&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(n.mustQueue||$()){var a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return t.processTask(r,n)}),a&&a.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Ui(t.error)):r(null,Ui(t.data)))}else{var i=ie(this.globalScope)?void 0:[],a=t.hasCallback?function(t,r){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?Bi(t):null,data:Bi(r,i)},i)}:function(e){},o=Ui(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}();var dh=function(){function e(t,n){p(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return v(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof vh?new vh(e.lng,e.lat):vh.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof vh?new vh(e.lng,e.lat):vh.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this._sw,a=this._ne;if(t instanceof vh)n=t,r=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(vh.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return i||a?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new vh(n.lng,n.lat),this._ne=new vh(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new vh((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new vh(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new vh(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=vh.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),ph=6371008.8,vh=function(){function e(t,n){if(p(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return v(e,[{key:"wrap",value:function(){return new e(M(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return ph*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new dh(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),mh=2*Math.PI*ph;function yh(e){return mh*Math.cos(e*Math.PI/180)}function gh(e){return(180+e)/360}function bh(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function _h(e,t){return e/yh(t)}function wh(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function xh(e,t){return e*yh(wh(t))}var kh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;p(this,e),this.x=+t,this.y=+n,this.z=+r}return v(e,[{key:"toLngLat",value:function(){return new vh(360*this.x-180,wh(this.y))}},{key:"toAltitude",value:function(){return xh(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/mh*(e=wh(this.y),1/Math.cos(e*Math.PI/180));var e}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=vh.convert(t);return new e(gh(r.lng),bh(r.lat),_h(n,r.lat))}}]),e}(),Eh=function(){function e(t,n,r,i){p(this,e),this.screenBounds=t,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((function(e){return i.pointCoordinate3D(e)})),this.cameraGeometry=this.bufferedCameraGeometry(0)}return v(e,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(e){return O(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}},{key:"bufferedCameraGeometry",value:function(e){var t=this.screenBounds[0],n=1===this.screenBounds.length?this.screenBounds[0].add(new _(1,1)):this.screenBounds[1],r=O(t,n,0,!1);return this.cameraPoint.y>n.y&&(this.cameraPoint.x>t.x&&this.cameraPoint.x<n.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=n.x?r[2]=this.cameraPoint:this.cameraPoint.x<=t.x&&(r[3]=this.cameraPoint)),function(e,t){for(var n=[],r=0;r<e.length;r++){var i=M(r-1,-1,e.length-1),a=M(r+1,-1,e.length-1),o=e[r],s=e[a],u=e[i].sub(o).unit(),c=s.sub(o).unit(),l=c.angleWithSep(u.x,u.y),h=u.add(c).unit().mult(-1*t/Math.sin(l/2));n.push(o.add(h))}return n}(r,e)}},{key:"containsTile",value:function(e,t,n){var r,i=e.queryPadding+1,a=n?this._bufferedCameraMercator(i,t).map((function(t){return e.tileID.getTilePoint(t)})):this._bufferedScreenMercator(i,t).map((function(t){return e.tileID.getTilePoint(t)})),o=this.screenGeometryMercator.map((function(t){return e.tileID.getTileVec3(t)})),s=o.map((function(e){return new _(e[0],e[1])})),u=t.getFreeCameraOptions().position||new kh(0,0,0),c=e.tileID.getTileVec3(u),l=o.map((function(e){var t=Gs(e,e,c);return zs(t,t),new $s(c,t)})),h=fh(e,1,t.zoom);if(us(a,0,0,Ko,Ko))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:l,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(r=A(a),r.min.x=R(r.min.x,0,Ko),r.min.y=R(r.min.y,0,Ko),r.max.x=R(r.max.x,0,Ko),r.max.y=R(r.max.y,0,Ko),r),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:h}}},{key:"_bufferedScreenMercator",value:function(e,t){var n=Th(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];var r=this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._screenRaycastCache[n]=r,r}},{key:"_bufferedCameraMercator",value:function(e,t){var n=Th(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];var r=this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)}));return this._cameraRaycastCache[n]=r,r}}],[{key:"createFromScreenPoints",value:function(t,n){var r,i;if(t instanceof _||"number"==typeof t[0]){var a=_.convert(t);r=[_.convert(t)],i=n.isPointAboveHorizon(a)}else{var o=_.convert(t[0]),s=_.convert(t[1]);r=[o,s],i=O(o,s).every((function(e){return n.isPointAboveHorizon(e)}))}return new e(r,n.getCameraPoint(),i,n)}}]),e}();function Th(e){return 100*e|0}function Sh(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}var Ih=function(){function e(t,n,r){p(this,e),this.z=t,this.x=n,this.y=r,this.key=Oh(0,t,t,n,r)}return v(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n,r,i,a,o,s=(r=this.y,i=this.z,a=Sh(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),o=Sh(256*(n+1),256*(r+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(e,t,n){for(var r,i="",a=e;a>0;a--)i+=(t&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)}},{key:"getTilePoint",value:function(e){var t=Math.pow(2,this.z);return new _((e.x*t-this.x)*Ko,(e.y*t-this.y)*Ko)}},{key:"getTileVec3",value:function(e){var t=Math.pow(2,this.z);return Ms((e.x*t-this.x)*Ko,(e.y*t-this.y)*Ko,xh(e.z,e.y))}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Ch=function e(t,n){p(this,e),this.wrap=t,this.canonical=n,this.key=Oh(t,n.z,n.z,n.x,n.y)},Ah=function(){function e(t,n,r,i,a){p(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new Ih(r,+i,+a),this.key=0===n&&t===r?this.canonical.key:Oh(n,t,r,i,a)}return v(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Oh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return Oh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new e(n,this.wrap,n,r,i),new e(n,this.wrap,n,r+1,i),new e(n,this.wrap,n,r,i+1),new e(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Ch(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}},{key:"getTilePoint",value:function(e){return this.canonical.getTilePoint(new kh(e.x-this.wrap,e.y))}},{key:"getTileVec3",value:function(e){return this.canonical.getTileVec3(new kh(e.x-this.wrap,e.y,e.z))}}]),e}();function Oh(e,t,n,r,i){var a=1<<Math.min(n,22),o=a*(i%a)+r%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}function Ph(e,t,n){var r=function(r,i){if(r)return n(r);if(i){var a=F(j(i,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(e){return e.id}))),a.tiles=t.canonicalizeTileset(a,e.url),n(null,a)}};return e.url?nt(t.transformRequest(t.normalizeSourceURL(e.url),$e.Source),r):se.frame((function(){return r(null,e)}))}Li("CanonicalTileID",Ih),Li("OverscaledTileID",Ah,{omit:["posMatrix"]});var Dh=function(){function e(t,n,r){p(this,e),this.bounds=dh.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}return v(e,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(e){var t=Math.pow(2,e.z),n=Math.floor(gh(this.bounds.getWest())*t),r=Math.floor(bh(this.bounds.getNorth())*t),i=Math.ceil(gh(this.bounds.getEast())*t),a=Math.ceil(bh(this.bounds.getSouth())*t);return e.x>=n&&e.x<i&&e.y>=r&&e.y<a}}]),e}(),Rh=function(){function e(t){p(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return v(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Mh=function(){function e(t,n,r,i,a){p(this,e),this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=r,t._y=i,this.properties=t.properties,this.id=a}return v(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}]),e}(),Nh=Aa([{name:"a_pos",type:"Int16",components:2}]),Lh=function(){function e(t,n,r){p(this,e),this.tileID=t,this.uid=B(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}return v(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<se.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"loadVectorData",value:function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var r,i=m(e);try{var a=function(){var e=r.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var a,o=m(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=e}}catch(u){o.e(u)}finally{o.f()}}};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof Ll){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof Ll&&o.hasRTLText){this.hasRTLText=!0,ca.isLoading()||ca.isLoaded()||"deferred"!==sa()||ua();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(u))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Ja}},{key:"unloadVectorData",value:function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Jl(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Jl(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,r,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:o,transform:a,params:i},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",a=r._geojsonTileLayer||r[i];if(a)for(var o=ti(t&&t.filter),s=this.tileID.canonical,u=s.z,c=s.x,l=s.y,h={z:u,x:c,y:l},f=0;f<a.length;f++){var d=a.feature(f);if(o.needGeometry){var p=Xo(d,!0);if(!o.filter(new la(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!o.filter(new la(this.tileID.overscaledZ),d))continue;var v=n.getId(d,i),m=new Mh(d,u,c,l,v);m.tile=h,e.push(m)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=J(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var i=this.buckets[r],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=e[a];if(o&&s&&0!==Object.keys(s).length){i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=t&&t.style&&t.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<se.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=se.now()+e}},{key:"setDependencies",value:function(e,t){var n,r={},i=m(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(a){i.e(a)}finally{i.f()}this.dependencies[e]=r}},{key:"hasDependency",value:function(e,t){var n,r=m(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.dependencies[i];if(a){var o,s=m(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(u){s.e(u)}finally{s.f()}}}}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}}]),e}(),jh=function(){function e(){p(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return v(e,[{key:"updateState",value:function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},j(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])n[a]||(this.deletedStates[e][r][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),r=j({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var a in i)delete r[a]}return r}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),j(this.state[r][a],this.stateChanges[r][a]),i[a]=this.state[r][a];n[r]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var c in this.deletedStates[o]){if(null===this.deletedStates[o][c])this.state[o][c]={};else for(var l=0,h=Object.keys(this.deletedStates[o][c]);l<h.length;l++){var f=h[l];delete this.state[o][c][f]}s[c]=this.state[o][c]}n[o]=n[o]||{},j(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e)e[d].setFeatureState(n,t)}}]),e}(),Fh=function(){function e(t){p(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return v(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function zh(e,t,n,r){for(var i=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(r[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{var s=1/r[o],u=(e[o]-n[o])*s,c=(t[o]-n[o])*s;if(u>c){var l=u;u=c,c=l}if(u>i&&(i=u),c<a&&(a=c),i>a)return null}return i}function Bh(e,t,n,r,i,a,o,s,u,c,l){var h=r-e,f=i-t,d=a-n,p=o-e,v=s-t,m=u-n,y=l[1]*m-l[2]*v,g=l[2]*p-l[0]*m,b=l[0]*v-l[1]*p,_=h*y+f*g+d*b;if(Math.abs(_)<1e-15)return null;var w=1/_,x=c[0]-e,k=c[1]-t,E=c[2]-n,T=(x*y+k*g+E*b)*w;if(T<0||T>1)return null;var S=k*d-E*f,I=E*h-x*d,C=x*f-k*h,A=(l[0]*S+l[1]*I+l[2]*C)*w;return A<0||T+A>1?null:(p*S+v*I+m*C)*w}function Uh(e,t,n){return(e-t)/(n-t)}function Vh(e,t,n,r,i,a,o,s,u){var c=1<<n,l=a-r,h=o-i,f=(e+1)/c*l+r,d=(t+0)/c*h+i,p=(t+1)/c*h+i;s[0]=(e+0)/c*l+r,s[1]=d,u[0]=f,u[1]=p}var qh=function(){function e(t){if(p(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],r=Math.ceil(Math.pow(2,t)),i=1/r,a=function(e,t,n,r,i){var a=r?1:0,o=(e+1)*n-a,s=t*n,u=(t+1)*n-a;i[0]=e*n,i[1]=s,i[2]=o,i[3]=u},o=new Fh(r),s=[],u=0;u<r*r;u++){a(u%r,Math.floor(u/r),i,!1,s);var c=Kh(s[0],s[1],e),l=Kh(s[2],s[1],e),h=Kh(s[2],s[3],e),f=Kh(s[0],s[3],e);o.minimums.push(Math.min(c,l,h,f)),o.maximums.push(Math.max(c,l,h,f)),o.leaves.push(1)}for(n.push(o),r/=2;r>=1;r/=2){var d=n[n.length-1];o=new Fh(r);for(var p=0;p<r*r;p++){a(p%r,Math.floor(p/r),2,!0,s);var v=d.getElevation(s[0],s[1]),m=d.getElevation(s[2],s[1]),y=d.getElevation(s[2],s[3]),g=d.getElevation(s[0],s[3]),b=d.isLeaf(s[0],s[1]),_=d.isLeaf(s[2],s[1]),w=d.isLeaf(s[2],s[3]),x=d.isLeaf(s[0],s[3]),k=Math.min(v.min,m.min,y.min,g.min),E=Math.max(v.max,m.max,y.max,g.max),T=b&&_&&w&&x;o.maximums.push(E),o.minimums.push(k),o.leaves.push(E-k<=5&&T?1:0)}n.push(o)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return v(e,[{key:"raycastRoot",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return zh([e,t,-100],[n,r,this.maximums[0]*o],i,a)}},{key:"raycast",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,r,i,a,o);if(null==s)return null;for(var u=[],c=[],l=[],h=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];f.length>0;){var d=f.pop(),p=d.idx,v=d.t,m=d.nodex,y=d.nodey,g=d.depth;if(this.leaves[p]){Vh(m,y,g,e,t,n,r,l,h);var b=1<<g,_=(m+0)/b,w=(m+1)/b,x=(y+0)/b,k=(y+1)/b,E=Kh(_,x,this.dem)*o,T=Kh(w,x,this.dem)*o,S=Kh(w,k,this.dem)*o,I=Kh(_,k,this.dem)*o,C=Bh(l[0],l[1],E,h[0],l[1],T,h[0],h[1],S,i,a),A=Bh(h[0],h[1],S,l[0],h[1],I,l[0],l[1],E,i,a),O=Math.min(null!==C?C:Number.MAX_VALUE,null!==A?A:Number.MAX_VALUE);if(O!==Number.MAX_VALUE)return O;var P=Fs([],i,a,v);if(Gh(E,T,I,S,Uh(P[0],l[0],h[0]),Uh(P[1],l[1],h[1]))>=P[2])return v}else{for(var D=0,R=0;R<this._siblingOffset.length;R++){Vh((m<<1)+this._siblingOffset[R][0],(y<<1)+this._siblingOffset[R][1],g+1,e,t,n,r,l,h),l[2]=-100,h[2]=this.maximums[this.childOffsets[p]+R]*o;var M=zh(l,h,i,a);if(null!=M){var N=M;u[R]=N;for(var L=!1,j=0;j<D&&!L;j++)N>=u[c[j]]&&(c.splice(j,0,R),L=!0);L||(c[D]=R),D++}}for(var F=0;F<D;F++){var z=c[F];f.push({idx:this.childOffsets[p]+z,t:u[z],nodex:(m<<1)+this._siblingOffset[z][0],nodey:(y<<1)+this._siblingOffset[z][1],depth:g+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,r,i){if(1!==e[r].isLeaf(t,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var a,o=r-1,s=e[o],u=0,c=0;c<this._siblingOffset.length;c++){var l=2*t+this._siblingOffset[c][0],h=2*n+this._siblingOffset[c][1],f=s.getElevation(l,h),d=s.isLeaf(l,h),p=this._addNode(f.min,f.max,d);d&&(u|=1<<c),a||(a=p)}for(var v=0;v<this._siblingOffset.length;v++)u&1<<v||this._construct(e,2*t+this._siblingOffset[v][0],2*n+this._siblingOffset[v][1],o,a+v)}}}]),e}();function Gh(e,t,n,r,i,a){return Nn(Nn(e,n,a),Nn(t,r,a),i)}function Kh(e,t,n){var r=n.dim,i=R(e*r-.5,0,r-1),a=R(t*r-.5,0,r-1),o=Math.floor(i),s=Math.floor(a),u=Math.min(o+1,r-1),c=Math.min(s+1,r-1);return Gh(n.get(o,s),n.get(u,s),n.get(o,c),n.get(u,c),i-o,a-s)}var Hh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},Wh=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return X('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var o=this.dim=n.height-2;if(this.data=new Uint32Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var s=0;s<o;s++)this.data[this._idx(-1,s)]=this.data[this._idx(0,s)],this.data[this._idx(o,s)]=this.data[this._idx(o-1,s)],this.data[this._idx(s,-1)]=this.data[this._idx(s,0)],this.data[this._idx(s,o)]=this.data[this._idx(s,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return v(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new qh(this)}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Uint8Array(this.data.buffer);n&&(e=R(e,-1,this.dim),t=R(t,-1,this.dim));var i=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])}},{key:"unpackVector",get:function(){return Hh[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new lu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,u=-n*this.dim,c=a;c<o;c++)for(var l=r;l<i;l++)this.data[this._idx(l,c)]=e.data[this._idx(l+s,c+u)]}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return Hh[e]}},{key:"pack",value:function(t,n){var r=[0,0,0,0],i=e.getUnpackVector(n),a=Math.floor((t+i[3])/i[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}}]),e}();Li("DEMData",Wh),Li("DemMinMaxQuadTree",qh,{omit:["dem"]});var Zh=function(){function e(t,n){p(this,e),this.max=t,this.onRemove=n,this.reset()}return v(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=m(this.data[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(e,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var r,i=m(this.data[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;e(a.value)||t.push(a)}}catch(c){i.e(c)}finally{i.f()}}for(var o=0,s=t;o<s.length;o++){var u=s[o];this.remove(u.value.tileID,u)}}}]),e}(),Xh=function(){function e(t,n,r){p(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return v(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),Yh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Qh=function(){function e(t,n,r,i){p(this,e),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete n.arrayBuffer}return v(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[Yh[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),$h=function(){function e(t){p(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return v(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),Jh=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return Vt.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}($h),ef=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}($h),tf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}($h),nf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}($h),rf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}($h),af=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}($h),of=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}($h),sf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}($h),uf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}($h),cf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}($h),lf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}($h),hf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}($h),ff=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}($h),df=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}($h),pf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return Vt.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),n}($h),vf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}($h),mf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}($h),yf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}($h),gf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}($h),bf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}($h),_f=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}($h),wf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}($h),xf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}($h),kf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}($h),Ef=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}($h),Tf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}($h),Sf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}($h),If=function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).vao=e.extVertexArrayObject,r}return v(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}($h),Cf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}($h),Af=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}($h),Of=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}($h),Pf=function(e){f(n,e);var t=d(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).context=e,i.parent=r,i}return v(n,[{key:"getDefault",value:function(){return null}}]),n}($h),Df=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(Pf),Rf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(Pf),Mf=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Rf),Nf=function(){function e(t,n,r,i){p(this,e),this.context=t,this.width=n,this.height=r;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Df(t,a),i&&(this.depthAttachment=new Rf(t,a))}return v(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),Lf=function e(t,n,r){p(this,e),this.func=t,this.mask=n,this.range=r};Lf.ReadOnly=!1,Lf.ReadWrite=!0,Lf.disabled=new Lf(519,Lf.ReadOnly,[0,1]);var jf=7680,Ff=function e(t,n,r,i,a,o){p(this,e),this.test=t,this.ref=n,this.mask=r,this.fail=i,this.depthFail=a,this.pass=o};Ff.disabled=new Ff({func:519,mask:0},0,0,jf,jf,jf);var zf=function e(t,n,r){p(this,e),this.blendFunction=t,this.blendColor=n,this.mask=r};zf.Replace=[1,0],zf.disabled=new zf(zf.Replace,Vt.transparent,[!1,!1,!1,!1]),zf.unblended=new zf(zf.Replace,Vt.transparent,[!0,!0,!0,!0]),zf.alphaBlended=new zf([1,771],Vt.transparent,[!0,!0,!0,!0]);var Bf=1029,Uf=2305,Vf=function e(t,n,r){p(this,e),this.enable=t,this.mode=n,this.frontFace=r};Vf.disabled=new Vf(!1,Bf,Uf),Vf.backCCW=new Vf(!0,Bf,Uf),Vf.backCW=new Vf(!0,Bf,2304),Vf.frontCW=new Vf(!0,1028,2304),Vf.frontCCW=new Vf(!0,1028,Uf);var qf=function(){function e(t){p(this,e),this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Jh(this),this.clearDepth=new ef(this),this.clearStencil=new tf(this),this.colorMask=new nf(this),this.depthMask=new rf(this),this.stencilMask=new af(this),this.stencilFunc=new of(this),this.stencilOp=new sf(this),this.stencilTest=new uf(this),this.depthRange=new cf(this),this.depthTest=new lf(this),this.depthFunc=new hf(this),this.blend=new ff(this),this.blendFunc=new df(this),this.blendColor=new pf(this),this.blendEquation=new vf(this),this.cullFace=new mf(this),this.cullFaceSide=new yf(this),this.frontFace=new gf(this),this.program=new bf(this),this.activeTexture=new _f(this),this.viewport=new wf(this),this.bindFramebuffer=new xf(this),this.bindRenderbuffer=new kf(this),this.bindTexture=new Ef(this),this.bindVertexBuffer=new Tf(this),this.bindElementBuffer=new Sf(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new If(this),this.pixelStoreUnpack=new Cf(this),this.pixelStoreUnpackPremultiplyAlpha=new Af(this),this.pixelStoreUnpackFlipY=new Of(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}return v(e,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new Xh(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new Qh(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,n){return new Nf(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,r=e.stencil,i=this.gl,a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(e){k(e.blendFunction,zf.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),e}(),Gf=function(e){f(n,e);var t=d(n);function n(e,r,a){var o;return p(this,n),(o=t.call(this)).id=e,o._onlySymbols=a,r.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),r.on("error",(function(){o._sourceErrored=!0})),o._source=r,o._tiles={},o._cache=new Zh(0,o._unloadTile.bind(i(o))),o._timers={},o._cacheTimers={},o._maxTileCacheSize=null,o._loadedParentTiles={},o._coveredTiles={},o._state=new jh,o}return v(n,[{key:"onAdd",value:function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return L(this._tiles).map((function(e){return e.tileID})).sort(Kf).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,i=n.tileID,a=new _(r.canonical.x,r.canonical.y)._rotate(t.transform.angle),o=new _(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(Kf).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new pt(r,{tile:e})):this.update(this.transform));e.timeAdded=se.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new dt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var u=o;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(a)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,r){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var a;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Ah(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return i._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(Hf(this._source.type)&&0!==a.length){for(var s={},u={},c=0,l=Object.keys(o);c<l.length;c++){var h=l[c],f=o[h],d=this._tiles[h];if(d&&!(d.fadeEndTime&&d.fadeEndTime<=se.now())){var p=this.findLoadedParent(f,Math.max(f.overscaledZ-n.maxOverzooming,this._source.minzoom));p&&(this._addTile(p.tileID),s[p.tileID.key]=p.tileID),u[h]=f}}var v=a[a.length-1].overscaledZ;for(var y in this._tiles){var g=this._tiles[y];if(!o[y]&&g.hasData())for(var b=g.tileID;b.overscaledZ>v;){b=b.scaledTo(b.overscaledZ-1);var _=this._tiles[b.key];if(_&&_.hasData()&&u[b.key]){o[y]=g.tileID;break}}}for(var w in s)o[w]||(this._coveredTiles[w]=!0,o[w]=s[w])}for(var x in o)this._tiles[x].clearFadeHold();var k,E=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}(this._tiles,o),T=m(E);try{for(T.s();!(k=T.n()).done;){var S=k.value,I=this._tiles[S];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+S)}}catch(C){T.e(C)}finally{T.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var r,i={},a=e[e.length-1].overscaledZ,o=e[0].overscaledZ,s=Math.max(o-n.maxOverzooming,this._source.minzoom),u=Math.max(o+n.maxUnderzooming,this._source.minzoom),c={},l=m(e);try{for(l.s();!(r=l.n()).done;){var h=r.value,f=this._addTile(h);t[h.key]=h,f.hasData()||a<this._source.maxzoom&&(c[h.key]=h)}}catch(E){l.e(E)}finally{l.f()}this._retainLoadedChildren(c,a,u,t);var d,p=m(e);try{for(p.s();!(d=p.n()).done;){var v=d.value,y=this._tiles[v.key];if(!y.hasData()){if(v.canonical.z>=this._source.maxzoom){var g=v.children(this._source.maxzoom)[0],b=this.getTile(g);if(b&&b.hasData()){t[g.key]=g;continue}}else{var _=v.children(this._source.maxzoom);if(t[_[0].key]&&t[_[1].key]&&t[_[2].key]&&t[_[3].key])continue}for(var w=y.wasRequested(),x=v.overscaledZ-1;x>=s;--x){var k=v.scaledTo(x);if(i[k.key])break;if(i[k.key]=!0,!(y=this.getTile(k))&&w&&(y=this._addTile(k)),y&&(t[k.key]=k,w=y.wasRequested(),y.hasData()))break}}}}catch(E){p.e(E)}finally{p.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);return n||(t=new Lh(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new dt("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._cache.reset()}},{key:"tilesIn",value:function(e,t,n){var r=[],i=this.transform;if(!i)return r;for(var a in this._tiles){var o=this._tiles[a];if(n&&o.clearQueryDebugViz(),!o.holdingForFade()){var s=e.containsTile(o,i,t);s&&r.push(s)}}return r}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,r=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),i=m(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Hf(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=se.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}}]),n}(vt);function Kf(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Hf(e){return"raster"===e||"image"===e||"video"===e}Gf.maxOverzooming=10,Gf.maxUnderzooming=3;var Wf=function(){function e(t,n,r){p(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=r}return v(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new _(r,i)}},{key:"getElevationAt",value:function(e,t,n,r){var i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(i),s=Math.floor(a),u=this._dem;return r=!!r,n?Nn(Nn(u.get(o,s,r),u.get(o,s+1,r),a-s),Nn(u.get(o+1,s,r),u.get(o+1,s+1,r),a-s),i-o):u.get(o,s,r)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*_h(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,r){var i=r||t.findDEMTileFor(n);if(i&&i.dem){var a=i.dem,o=i.tileID,s=1<<n.canonical.z-o.canonical.z;return new e(i,i.tileSize/Ko/s,[(n.canonical.x/s-o.canonical.x)*a.dim,(n.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}();function Zf(e,t,n,r,i){return K(e,(function(e,a){var o=t instanceof ga?t.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function Xf(e,t){return t-e}Li("FeatureIndex",function(){function e(t,n){p(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Pi(Ko,16,0),this.featureIndexArray=new so,this.promoteId=n}return v(e,[{key:"insert",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,a);for(var s=this.grid,u=0;u<t.length;u++){for(var c=t[u],l=[1/0,1/0,-1/0,-1/0],h=0;h<c.length;h++){var f=c[h];l[0]=Math.min(l[0],f.x),l[1]=Math.min(l[1],f.y),l[2]=Math.max(l[2],f.x),l[3]=Math.max(l[3],f.y)}l[0]<Ko&&l[1]<Ko&&l[2]>=0&&l[3]>=0&&s.insert(o,l[0],l[1],l[2],l[3])}}},{key:"loadVTLayers",value:function(){return this.vtLayers||(this.vtLayers=new hc.VectorTile(new Wc(this.rawTileData)).layers,this.sourceLayerCoder=new Rh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}},{key:"query",value:function(e,t,n,r){var i=this;this.loadVTLayers();var a=e.params||{},o=ti(a.filter),s=e.tileResult,u=e.transform,c=s.bufferedTilespaceBounds,l=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,(function(e,t,n,r){return us(s.bufferedTilespaceGeometry,e,t,n,r)}));l.sort(Xf);var h=null;u.elevation&&l.length>0&&(h=Wf.create(u.elevation,this.tileID));for(var f,d={},p=function(u){var c=l[u];if(c===f)return"continue";f=c;var p=i.featureIndexArray.get(c),v=null;i.loadMatchingFeature(d,p,o,a.layers,a.availableImages,t,n,r,(function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return v||(v=Zo(t)),n.queryIntersectsFeature(s,t,r,v,i.z,e.transform,e.pixelPosMatrix,h,a)}))},v=0;v<l.length;v++)p(v);return d}},{key:"loadMatchingFeature",value:function(e,t,n,r,i,a,o,s,u){var c=t.featureIndex,l=t.bucketIndex,h=t.sourceLayerIndex,f=t.layoutVertexArrayOffset,d=this.bucketLayerIDs[l];if(!r||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,d)){var p=this.sourceLayerCoder.decode(h),v=this.vtLayers[p].feature(c);if(n.needGeometry){var m=Xo(v,!0);if(!n.filter(new la(this.tileID.overscaledZ),m,this.tileID.canonical))return}else if(!n.filter(new la(this.tileID.overscaledZ),v))return;for(var y=this.getId(v,p),g=0;g<d.length;g++){var b=d[g];if(!(r&&r.indexOf(b)<0)){var _=a[b];if(_){var w={};void 0!==y&&s&&(w=s.getState(_.sourceLayer||"_geojsonTileLayer",y));var x=j({},o[b]);x.paint=Zf(x.paint,_.paint,v,w,i),x.layout=Zf(x.layout,_.layout,v,w,i);var k=!u||u(v,_,w,f);if(k){var E=new Mh(v,this.z,this.x,this.y,y);E.layer=x;var T=e[b];void 0===T&&(T=e[b]=[]),T.push({featureIndex:c,feature:E,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,r,i,a,o,s){var u={};this.loadVTLayers();var c,l=ti(i),h=m(e);try{for(h.s();!(c=h.n()).done;){var f=c.value;this.loadMatchingFeature(u,{bucketIndex:n,sourceLayerIndex:r,featureIndex:f,layoutVertexArrayOffset:0},l,a,o,s,t)}}catch(d){h.e(d)}finally{h.f()}return u}},{key:"hasLayer",value:function(e){var t,n=m(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=m(i);try{for(a.s();!(r=a.n()).done;)if(e===r.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n}}]),e}(),{omit:["rawTileData","sourceLayerCoder"]}),Li("GlyphAtlas",function(){function e(t){p(this,e);var n={},r=[];for(var i in t){var a=t[i],o=n[i]={};for(var s in a){var u=a[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c=u.metrics.localGlyph?2:1,l={x:0,y:0,w:u.bitmap.width+2*c,h:u.bitmap.height+2*c};r.push(l),o[s]={rect:l,metrics:u.metrics}}}}var h=ml(r),f=h.w,d=h.h,v=new cu({width:f||1,height:d||1});for(var m in t){var y=t[m];for(var g in y){var b=y[+g];if(b&&0!==b.bitmap.width&&0!==b.bitmap.height){var _=n[m][g].rect,w=b.metrics.localGlyph?2:1;cu.copy(b.bitmap,v,{x:0,y:0},{x:_.x+w,y:_.y+w},b.bitmap)}}}this.image=v,this.positions=n}return e}());var Yf=function(){function e(t){p(this,e),this.entries={},this.scheduler=t}return v(e,[{key:"request",value:function(e,t,n,r){var i=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=l(a.result,2),s=o[0],u=o[1];return this.scheduler?this.scheduler.add((function(){r(s,u)}),t):r(s,u),function(){}}return a.callbacks.push(r),a.cancel||(a.cancel=n((function(n,r){a.result=[n,r];var o,s=m(a.callbacks);try{var u=function(){var e=o.value;i.scheduler?i.scheduler.add((function(){e(n,r)}),t):e(n,r)};for(s.s();!(o=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==r})),a.callbacks.length||(a.cancel(),delete i.entries[e]))}}}]),e}();function Qf(e,t,n){var r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var r=rt(e.request,(function(e,r,i,a){e?t(e):r&&t(null,{vectorTile:n?void 0:new hc.VectorTile(new Wc(r)),rawData:r,cacheControl:i,expires:a})}));return function(){r.cancel(),t()}}),t)}var $f=function(e){f(n,e);var t=d(n);function n(e,r,a,o){var s;return p(this,n),(s=t.call(this)).id=e,s.dispatcher=a,s.setEventedParent(o),s.type="raster",s.minzoom=0,s.maxzoom=22,s.roundZoom=!0,s.scheme="xyz",s.tileSize=512,s._loaded=!1,s._options=j({type:"raster"},r),j(i(s),F(r,["url","scheme","tileSize"])),s}return v(n,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new dt("dataloading",{dataType:"source"})),this._tileJSONRequest=Ph(this._options,this.map._requestManager,(function(t,n){e._tileJSONRequest=null,e._loaded=!0,t?e.fire(new pt(t)):n&&(j(e,n),n.bounds&&(e.tileBounds=new Dh(n.bounds,e.minzoom,e.maxzoom)),Me(n.tiles),e.fire(new dt("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new dt("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return j({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(e,t){var n=this,r=se.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);e.request=lt(this.map._requestManager.transformRequest(i,$e.Tile),(function(r,i){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(i){n.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=n.map.painter.context,o=a.gl;e.texture=n.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new Jl(a,i,o.RGBA,{useMipmap:!0}),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",Ye(n.dispatcher),t(null)}}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}]),n}(vt),Jf=Aa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ed=function(e){f(n,e);var t=d(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).id=e,o.dispatcher=i,o.coordinates=r.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=r,o}return v(n,[{key:"load",value:function(e,t){var n=this;this._loaded=!1,this.fire(new dt("dataloading",{dataType:"source"})),this.url=this.options.url,lt(this.map._requestManager.transformRequest(this.url,$e.Image),(function(r,i){n._loaded=!0,r?n.fire(new pt(r)):i&&(n.image=i,e&&(n.coordinates=e),t&&t(),n._finishLoading())}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new dt("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setCoordinates",value:function(e){var t=this;this.coordinates=e;var n=e.map(kh.fromLngLat);this.tileID=function(e){var t,n=1/0,r=1/0,i=-1/0,a=-1/0,o=m(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(h){o.e(h)}finally{o.f()}var u=Math.max(i-n,a-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),l=Math.pow(2,c);return new Ih(c,Math.floor((n+i)/2*l),Math.floor((r+a)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;var r=n.map((function(e){return t.tileID.getTilePoint(e)._round()}));return this._boundsArray=new Da,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,Ko,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,Ko),this._boundsArray.emplaceBack(r[2].x,r[2].y,Ko,Ko),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new dt("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Jf.members)),this.boundsSegments||(this.boundsSegments=Go.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Jl(e,this.image,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),n}(vt),td={vector:function(e){f(n,e);var t=d(n);function n(e,r,a,o){var u;if(p(this,n),(u=t.call(this)).id=e,u.dispatcher=a,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,j(i(u),F(r,["url","scheme","tileSize","promoteId"])),u._options=j({type:"vector"},r),u._collectResourceTiming=r.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(o),u._tileWorkers={},u._deduped=new Yf,s(u)}return v(n,[{key:"load",value:function(){var e=this;this._loaded=!1,this.fire(new dt("dataloading",{dataType:"source"})),this._tileJSONRequest=Ph(this._options,this.map._requestManager,(function(t,n){e._tileJSONRequest=null,e._loaded=!0,t?e.fire(new pt(t)):n&&(j(e,n),n.bounds&&(e.tileBounds=new Dh(n.bounds,e.minzoom,e.maxzoom)),Me(n.tiles,e.map._requestManager._customAccessToken),e.fire(new dt("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new dt("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();var t,n=this.map.style._getSourceCaches(this.id),r=m(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}this.load()}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return j({},this._options)}},{key:"loadTile",value:function(e,t){var n=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,$e.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:se.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=t:e.request=e.actor.send("reloadTile",i,o.bind(this));else if(e.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",i,o.bind(this),void 0,!0);else{var a=Qf.call({deduped:this._deduped},i,(function(t,r){t||!r?o.call(n,t):(i.data={cacheControl:r.cacheControl,expires:r.expires,rawData:r.rawData.slice(0)},e.actor&&e.actor.send("loadTile",i,o.bind(n),void 0,!0))}),!0);e.request={cancel:a}}function o(n,r){return delete e.request,e.aborted?t(null):n&&404!==n.status?t(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),Ye(this.dispatcher),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}}]),n}(vt),raster:$f,"raster-dem":function(e){f(n,e);var t=d(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,e,r,i,a)).type="raster-dem",o.maxzoom=22,o._options=j({type:"raster-dem"},r),o.encoding=r.encoding||"mapbox",o}return v(n,[{key:"loadTile",value:function(e,t){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(n,r){n&&(e.state="errored",t(n)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",t(null))}e.request=lt(this.map._requestManager.transformRequest(n,$e.Tile),function(n,i){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(n)e.state="errored",t(n);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=x.ImageBitmap&&i instanceof x.ImageBitmap&&Qe(),o=1-(i.width-((c=i.width)<=1?1:Math.pow(2,Math.floor(Math.log(c)/Math.LN2))))/2;o<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));var s=a?i:se.getImageData(i,o),u={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:s,encoding:this.encoding,padding:o};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",u,r.bind(this),void 0,!0))}var c}.bind(this))}},{key:"_getNeighboringTiles",value:function(e){var t=e.canonical,n=Math.pow(2,t.z),r=(t.x-1+n)%n,i=0===t.x?e.wrap-1:e.wrap,a=(t.x+1+n)%n,o=t.x+1===n?e.wrap+1:e.wrap,s={};return s[new Ah(e.overscaledZ,i,t.z,r,t.y).key]={backfilled:!1},s[new Ah(e.overscaledZ,o,t.z,a,t.y).key]={backfilled:!1},t.y>0&&(s[new Ah(e.overscaledZ,i,t.z,r,t.y-1).key]={backfilled:!1},s[new Ah(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new Ah(e.overscaledZ,o,t.z,a,t.y-1).key]={backfilled:!1}),t.y+1<n&&(s[new Ah(e.overscaledZ,i,t.z,r,t.y+1).key]={backfilled:!1},s[new Ah(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new Ah(e.overscaledZ,o,t.z,a,t.y+1).key]={backfilled:!1}),s}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),n}($f),geojson:function(e){f(n,e);var t=d(n);function n(e,r,i,a){var o;p(this,n),(o=t.call(this)).id=e,o.type="geojson",o.minzoom=0,o.maxzoom=18,o.tileSize=512,o.isTileClipped=!0,o.reparseOverscaled=!0,o._loaded=!1,o.actor=i.getActor(),o.setEventedParent(a),o._data=r.data,o._options=j({},r),o._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(o.maxzoom=r.maxzoom),r.type&&(o.type=r.type),r.attribution&&(o.attribution=r.attribution),o.promoteId=r.promoteId;var s=Ko/o.tileSize;return o.workerOptions=j({source:o.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*s,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*s,extent:Ko,maxZoom:o.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:o.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:Ko,radius:(void 0!==r.clusterRadius?r.clusterRadius:50)*s,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),o}return v(n,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}},{key:"_updateWorkerData",value:function(){var e=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new dt("dataloading",{dataType:"source"})),this._loaded=!1;var t=j({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(se.resolveURL(n),$e.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),t,(function(t,n){if(e._loaded=!0,e._pendingLoad=null,t)e.fire(new pt(t));else{var r={dataType:"source",sourceDataType:e._metadataFired?"content":"metadata"};e._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[e.id]&&(r.resourceTiming=n.resourceTiming[e.id]),e.fire(new dt("data",r)),e._metadataFired=!0}e._coalesce&&(e._updateWorkerData(),e._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(e,t){var n=this,r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:se.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(i,a){return delete e.request,e.unloadVectorData(),e.aborted?t(null):i?t(i):(e.loadVectorData(a,n.map.painter,"reloadTile"===r),t(null))}),void 0,"loadTile"===r)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return j({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),n}(vt),video:function(e){f(n,e);var t=d(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,e,r,i,a)).roundZoom=!0,o.type="video",o.options=r,o}return v(n,[{key:"load",value:function(){var e=this;this._loaded=!1;var t=this.options;this.urls=[];var n,r=m(t.urls);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.urls.push(this.map._requestManager.transformRequest(i,$e.Source).url)}}catch(a){r.e(a)}finally{r.f()}!function(e,t){var n=x.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var i=x.document.createElement("source");ot(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}}(this.urls,(function(t,n){e._loaded=!0,t?e.fire(new pt(t)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(e){if(this.video){var t=this.video.seekable;e<t.start(0)||e>t.end(0)?this.fire(new pt(new yt("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(t.start(0)," and ").concat(t.end(0),"-second mark.")))):this.video.currentTime=e}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,t=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Jf.members)),this.boundsSegments||(this.boundsSegments=Go.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,this.video)):(this.texture=new Jl(e,this.video,t.RGBA),this.texture.bind(t.LINEAR,t.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),n}(ed),image:ed,canvas:function(e){f(n,e);var t=d(n);function n(e,r,i,a){var o;return p(this,n),o=t.call(this,e,r,i,a),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||o.fire(new pt(new yt("sources.".concat(e),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):o.fire(new pt(new yt("sources.".concat(e),null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&o.fire(new pt(new yt("sources.".concat(e),null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof x.HTMLCanvasElement||o.fire(new pt(new yt("sources.".concat(e),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):o.fire(new pt(new yt("sources.".concat(e),null,'missing required property "canvas"'))),o.options=r,o.animate=void 0===r.animate||r.animate,o}return v(n,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof x.HTMLCanvasElement?this.options.canvas:x.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new pt(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Jf.members)),this.boundsSegments||(this.boundsSegments=Go.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Jl(t,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),n}(ed)},nd=function(e,t,n,r){var i=new td[t.type](e,t,n,r);if(i.id!==e)throw new Error("Expected Source id to be ".concat(e," instead of ").concat(i.id));return q(["load","abort","unload","serialize","prepare"],i),i};function rd(e,t){var n=bs([]);return ks(n,n,[.5*e.width,.5*-e.height,1]),xs(n,n,[1,-1,0]),ws(n,n,e.calculatePosMatrix(t.toUnwrapped()))}function id(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=e.tilesIn(r,o,s);u.sort(od);var c,l=[],h=m(u);try{for(h.s();!(c=h.n()).done;){var f=c.value;l.push({wrappedTileID:f.tile.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n,e._state,f,i,a,rd(e.transform,f.tile.tileID),s)})}}catch(v){h.e(v)}finally{h.f()}var d=function(e){var t,n={},r={},i=m(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,u=r[s]=r[s]||{};for(var c in o){var l,h=o[c],f=u[c]=u[c]||{},d=n[c]=n[c]||[],p=m(h);try{for(p.s();!(l=p.n()).done;){var y=l.value;f[y.featureIndex]||(f[y.featureIndex]=!0,d.push(y))}}catch(v){p.e(v)}finally{p.f()}}}}catch(v){i.e(v)}finally{i.f()}return n}(l);for(var p in d)d[p].forEach((function(t){var n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return d}function ad(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,t))}return r}function od(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function sd(){return null!=my.workerClass?new my.workerClass:new x.Worker(my.workerUrl)}var ud,cd="mapboxgl_preloaded_worker_pool",ld=function(){function e(){p(this,e),this.active={}}return v(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new sd);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[cd]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function hd(){return ud||(ud=new ld),ud}ld.workerCount=2;var fd=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dd(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return fd.forEach((function(e){e in t&&(n[e]=t[e])})),n}function pd(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=dd(e[r],t[e[r].ref]));return e}var vd={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function md(e,t,n){n.push({command:vd.addSource,args:[e,t[e]]})}function yd(e,t,n){t.push({command:vd.removeSource,args:[e]}),n[e]=!0}function gd(e,t,n,r){yd(e,n,r),md(e,t,n)}function bd(e,t,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!k(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!k(e[n][r],t[n][r]))return!1;return!0}function _d(e,t,n,r,i,a){var o;for(o in t=t||{},e=e||{})e.hasOwnProperty(o)&&(k(e[o],t[o])||n.push({command:a,args:[r,o,t[o],i]}));for(o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(k(e[o],t[o])||n.push({command:a,args:[r,o,t[o],i]}))}function wd(e){return e.id}function xd(e,t){return e[t.id]=t,e}var kd=function(){function e(t,n){p(this,e),this.reset(t,n)}return v(e,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(e){if(1===this.points.length)return this.points[0];e=R(e,0,1);for(var t=1,n=this._distances[t],r=e*this.paddedLength+this.padding;n<r&&t<this._distances.length;)n=this._distances[++t];var i=t-1,a=this._distances[i],o=n-a,s=o>0?(r-a)/o:0;return this.points[i].mult(1-s).add(this.points[t].mult(s))}}]),e}(),Ed=function(){function e(t,n,r){p(this,e);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return v(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(e,t,n,r,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,r,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(e,t,n,r,i,a){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var c=this.circles[3*u],l=this.circles[3*u+1],h=this.circles[3*u+2];o.push({key:this.circleKeys[u],x1:c-h,y1:l-h,x2:c+h,y2:l+h})}return a?o.filter(a):o}return this._forEachCell(e,t,n,r,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?o.length>0:o}},{key:"_queryCircle",value:function(e,t,n,r,i){var a=e-n,o=e+n,s=t-n,u=t+n;if(o<0||a>this.width||u<0||s>this.height)return!r&&[];var c=[];return this._forEachCell(a,s,o,u,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}},{key:"query",value:function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}},{key:"hitTestCircle",value:function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}},{key:"_queryCell",value:function(e,t,n,r,i,a,o,s){var u=o.seenUids,c=this.boxCells[i];if(null!==c){var l,h=this.bboxes,f=m(c);try{for(f.s();!(l=f.n()).done;){var d=l.value;if(!u.box[d]){u.box[d]=!0;var p=4*d;if(e<=h[p+2]&&t<=h[p+3]&&n>=h[p+0]&&r>=h[p+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:h[p],y1:h[p+1],x2:h[p+2],y2:h[p+3]})}}}}catch(T){f.e(T)}finally{f.f()}}var v=this.circleCells[i];if(null!==v){var y,g=this.circles,b=m(v);try{for(b.s();!(y=b.n()).done;){var _=y.value;if(!u.circle[_]){u.circle[_]=!0;var w=3*_;if(this._circleAndRectCollide(g[w],g[w+1],g[w+2],e,t,n,r)&&(!s||s(this.circleKeys[_]))){if(o.hitTest)return a.push(!0),!0;var x=g[w],k=g[w+1],E=g[w+2];a.push({key:this.circleKeys[_],x1:x-E,y1:k-E,x2:x+E,y2:k+E})}}}}catch(T){b.e(T)}finally{b.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,r,i,a,o,s){var u=o.circle,c=o.seenUids,l=this.boxCells[i];if(null!==l){var h,f=this.bboxes,d=m(l);try{for(d.s();!(h=d.n()).done;){var p=h.value;if(!c.box[p]){c.box[p]=!0;var v=4*p;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(this.boxKeys[p])))return a.push(!0),!0}}}catch(k){d.e(k)}finally{d.f()}}var y=this.circleCells[i];if(null!==y){var g,b=this.circles,_=m(y);try{for(_.s();!(g=_.n()).done;){var w=g.value;if(!c.circle[w]){c.circle[w]=!0;var x=3*w;if(this._circlesCollide(b[x],b[x+1],b[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[w])))return a.push(!0),!0}}}catch(k){_.e(k)}finally{_.f()}}}},{key:"_forEachCell",value:function(e,t,n,r,i,a,o,s){for(var u=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),l=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=u;f<=l;f++)for(var d=c;d<=h;d++)if(i.call(this,e,t,n,r,this.xCellCount*d+f,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,r,i,a){var o=r-e,s=i-t,u=n+a;return u*u>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,r,i,a,o){var s=(a-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var c=(o-i)/2,l=Math.abs(t-(i+c));if(l>c+n)return!1;if(u<=s||l<=c)return!0;var h=u-s,f=l-c;return h*h+f*f<=n*n}}]),e}();function Td(e,t,n,r,i){var a=gs();return t?(ks(a,a,[1/i,1/i,1]),n||Ss(a,a,r.angle)):ws(a,r.labelPlaneMatrix,e),a}function Sd(e,t,n,r,i){if(t){var a=(o=e,(s=new ms(16))[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s);return ks(a,a,[i,i,1]),n||Ss(a,a,-r.angle),a}return r.glCoordMatrix;var o,s}function Id(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[e.x,e.y,n,1];n?Zs(r,r,t):Fd(r,r,t);var i=r[3];return{point:new _(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Cd(e,t){return Math.min(.5+e/t*.5,1.5)}function Ad(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function Od(e,t,n,r,i,a,o,s,u){var c=r?e.textSizeData:e.iconSizeData,l=Uc(c,n.transform.zoom),h=[256/n.width*2+1,256/n.height*2+1],f=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();for(var d=e.lineVertexArray,p=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=n.transform.width/n.transform.height,m=!1,y=0;y<p.length;y++){var g=p.get(y);if(g.hidden||g.writingMode===gl.vertical&&!m)jd(g.numGlyphs,f);else{m=!1;var b=u?u({x:g.anchorX,y:g.anchorY}):0,w=[g.anchorX,g.anchorY,b,1];if(Zs(w,w,t),Ad(w,h)){var x=Cd(n.transform.cameraToCenterDistance,w[3]),k=Bc(c,l,g),E=o?k/x:k*x,T=new _(g.anchorX,g.anchorY),S=Id(T,i,b);if(S.signedDistanceFromCamera<=0)jd(g.numGlyphs,f);else{var I=S.point,C={},A=o?null:u,O=Rd(g,E,!1,s,t,i,a,e.glyphOffsetArray,d,f,I,T,C,v,A);m=O.useVertical,A&&O.needsFlipping&&(C={}),(O.notEnoughRoom||m||O.needsFlipping&&Rd(g,E,!0,s,t,i,a,e.glyphOffsetArray,d,f,I,T,C,v,A).notEnoughRoom)&&jd(g.numGlyphs,f)}}else jd(g.numGlyphs,f)}}r?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function Pd(e,t,n,r,i,a,o,s,u,c,l,h,f){var d=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,v=s.lineStartIndex+s.lineLength,m=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(d-1),g=Nd(e*m,n,r,i,a,o,s.segment,p,v,u,c,l,h,f,!0);if(!g)return null;var b=Nd(e*y,n,r,i,a,o,s.segment,p,v,u,c,l,h,f,!0);return b?{first:g,last:b}:null}function Dd(e,t,n,r){return e===gl.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*r?{useVertical:!0}:(e===gl.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function Rd(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p){var v,y=t/24,g=e.lineOffsetX*y,b=e.lineOffsetY*y;if(e.numGlyphs>1){var w=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,k=e.lineStartIndex+e.lineLength,E=Pd(y,s,g,b,n,l,h,e,u,a,f,p);if(!E)return{notEnoughRoom:!0};var T=Id(E.first.point,o).point,S=Id(E.last.point,o).point;if(r&&!n){var I=Dd(e.writingMode,T,S,d);if(I)return I}v=[E.first];for(var C=e.glyphStartIndex+1;C<w-1;C++)v.push(Nd(y*s.getoffsetX(C),g,b,n,l,h,e.segment,x,k,u,a,f,p));v.push(E.last)}else{if(r&&!n){var A=Id(h,i).point,O=e.lineStartIndex+e.segment+1,P=new _(u.getx(O),u.gety(O)),D=Id(P,i),R=D.signedDistanceFromCamera>0?D.point:Md(h,P,A,1,i),M=Dd(e.writingMode,A,R,d);if(M)return M}var N=Nd(y*s.getoffsetX(e.glyphStartIndex),g,b,n,l,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,p);if(!N)return{notEnoughRoom:!0};v=[N]}var L,j=m(v);try{for(j.s();!(L=j.n()).done;){var F=L.value;Dl(c,F.point,F.angle)}}catch(z){j.e(z)}finally{j.f()}return{}}function Md(e,t,n,r,i,a){var o=e.add(e.sub(t)._unit()),s=Id(o,i,a?a(o):0).point,u=n.sub(s);return n.add(u._mult(r/u.mag()))}function Nd(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p){var v=r?e-t:e+t,m=v>0?1:-1,y=0;r&&(m*=-1,y=Math.PI),m<0&&(y+=Math.PI);for(var g=m>0?s+o:s+o+1,b=i,w=i,x=0,k=0,E=Math.abs(v),T=[],S=[],I=a,C=function(){var e=g-m;return 0===x?a:new _(c.getx(e),c.gety(e))},A=function(){return Md(C(),I,w,E-x+1,l,f)};x+k<=E;){if((g+=m)<s||g>=u)return null;if(w=b,T.push(b),d&&S.push(I||C()),void 0===(b=h[g])){var O=Id(I=new _(c.getx(g),c.gety(g)),l,f?f(I):0);b=O.signedDistanceFromCamera>0?h[g]=O.point:A()}else I=null;x+=k,k=w.dist(b)}p&&f&&(I=I||new _(c.getx(g),c.gety(g)),h[g]=b=void 0===h[g]?b:A(),k=w.dist(b));var P=(E-x)/k,D=b.sub(w),R=D.mult(P)._add(w);n&&R._add(D._unit()._perp()._mult(n*m));var M=y+Math.atan2(b.y-w.y,b.x-w.x);return T.push(R),d&&(I=I||new _(c.getx(g),c.gety(g)),S.push(function(e,t,n){var r=1-n;return new _(e.x*r+t.x*n,e.y*r+t.y*n)}(S.length>0?S[S.length-1]:I,I,P))),{point:R,angle:M,path:T,tilePath:S}}var Ld=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function jd(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(Ld,3*r)}}function Fd(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var zd=100,Bd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ed(t.width+200,t.height+200,25),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ed(t.width+200,t.height+200,25);p(this,e),this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+zd,this.screenBottomBoundary=t.height+zd,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200}return v(e,[{key:"placeCollisionBox",value:function(e,t,n,r,i,a,o){var s=this.projectAndGetPerspectiveRatio(a,t.anchorPointX,t.anchorPointY,t.elevation),u=i*s.perspectiveRatio,c=(t.x1*e+n.x-t.padding)*u+s.point.x,l=(t.y1*e+n.y-t.padding)*u+s.point.y,h=(t.x2*e+n.x+t.padding)*u+s.point.x,f=(t.y2*e+n.y+t.padding)*u+s.point.y,d=s.perspectiveRatio<=.55||s.aboveHorizon;return!this.isInsideGrid(c,l,h,f)||!r&&this.grid.hitTest(c,l,h,f,o)||d?{box:[],offscreen:!1}:{box:[c,l,h,f],offscreen:this.isOffscreen(c,l,h,f)}}},{key:"placeCollisionCircles",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d){var p=[],v=this.transform.elevation,y=v?function(e){return v.getAtTileOffset(d,e.x,e.y)}:function(e){return 0},g=new _(t.anchorX,t.anchorY),b=y(g),w=this.projectAndGetPerspectiveRatio(a,g.x,g.y,b),x=w.perspectiveRatio,k=(c?i/x:i*x)/24,E=Id(g,o,b).point,T=w.signedDistanceFromCamera>0?Pd(k,r,t.lineOffsetX*k,t.lineOffsetY*k,!1,E,g,t,n,o,{},v&&!c?y:null,c&&!!v):null,S=!1,I=!1,C=!0;if(T&&!w.aboveHorizon){for(var A=.5*h*x+f,O=new _(-100,-100),P=new _(this.screenRightBoundary,this.screenBottomBoundary),D=new kd,R=T.first,M=T.last,N=[],L=R.path.length-1;L>=1;L--)N.push(R.path[L]);for(var j=1;j<M.path.length;j++)N.push(M.path[j]);var F=2.5*A;if(s){var z=N.map(v?function(e,t){var n=y(t<R.path.length-1?R.tilePath[R.path.length-1-t]:M.tilePath[t-R.path.length+2]);return Id(e,s,n)}:function(e){return Id(e,s)});N=z.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:z.map((function(e){return e.point}))}var B=[];if(N.length>0){for(var U=N[0].clone(),V=N[0].clone(),q=1;q<N.length;q++)U.x=Math.min(U.x,N[q].x),U.y=Math.min(U.y,N[q].y),V.x=Math.max(V.x,N[q].x),V.y=Math.max(V.y,N[q].y);B=U.x>=O.x&&V.x<=P.x&&U.y>=O.y&&V.y<=P.y?[N]:V.x<O.x||U.x>P.x||V.y<O.y||U.y>P.y?[]:function(e,t,n,r,i){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],u=void 0,c=0;c<s.length-1;c++){var l=s[c],h=s[c+1];l.x<t&&h.x<t||(l.x<t?l=new _(t,l.y+(t-l.x)/(h.x-l.x)*(h.y-l.y))._round():h.x<t&&(h=new _(t,l.y+(t-l.x)/(h.x-l.x)*(h.y-l.y))._round()),l.y<n&&h.y<n||(l.y<n?l=new _(l.x+(n-l.y)/(h.y-l.y)*(h.x-l.x),n)._round():h.y<n&&(h=new _(l.x+(n-l.y)/(h.y-l.y)*(h.x-l.x),n)._round()),l.x>=r&&h.x>=r||(l.x>=r?l=new _(r,l.y+(r-l.x)/(h.x-l.x)*(h.y-l.y))._round():h.x>=r&&(h=new _(r,l.y+(r-l.x)/(h.x-l.x)*(h.y-l.y))._round()),l.y>=i&&h.y>=i||(l.y>=i?l=new _(l.x+(i-l.y)/(h.y-l.y)*(h.x-l.x),i)._round():h.y>=i&&(h=new _(l.x+(i-l.y)/(h.y-l.y)*(h.x-l.x),i)._round()),u&&l.equals(u[u.length-1])||(u=[l],a.push(u)),u.push(h)))))}return a}([N],O.x,O.y,P.x,P.y)}var G,K=m(B);try{for(K.s();!(G=K.n()).done;){var H=G.value;D.reset(H,.25*A);var W=0;W=D.length<=.5*A?1:Math.ceil(D.paddedLength/F)+1;for(var Z=0;Z<W;Z++){var X=Z/Math.max(W-1,1),Y=D.lerp(X),Q=Y.x+zd,$=Y.y+zd;p.push(Q,$,A,0);var J=Q-A,ee=$-A,te=Q+A,ne=$+A;if(C=C&&this.isOffscreen(J,ee,te,ne),I=I||this.isInsideGrid(J,ee,te,ne),!e&&this.grid.hitTestCircle(Q,$,A,l)&&(S=!0,!u))return{circles:[],offscreen:!1,collisionDetected:S}}}}catch(re){K.e(re)}finally{K.f()}}return{circles:!u&&S||!I?[]:p,offscreen:C,collisionDetected:S}}},{key:"queryRenderedSymbols",value:function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var t,n=[],r=1/0,i=1/0,a=-1/0,o=-1/0,s=m(e);try{for(s.s();!(t=s.n()).done;){var u=t.value,c=new _(u.x+zd,u.y+zd);r=Math.min(r,c.x),i=Math.min(i,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),n.push(c)}}catch(g){s.e(g)}finally{s.f()}var l,h=this.grid.query(r,i,a,o).concat(this.ignoredGrid.query(r,i,a,o)),f={},d={},p=m(h);try{for(p.s();!(l=p.n()).done;){var v=l.value,y=v.key;void 0===f[y.bucketInstanceId]&&(f[y.bucketInstanceId]={}),f[y.bucketInstanceId][y.featureIndex]||$o(n,[new _(v.x1,v.y1),new _(v.x2,v.y1),new _(v.x2,v.y2),new _(v.x1,v.y2)])&&(f[y.bucketInstanceId][y.featureIndex]=!0,void 0===d[y.bucketInstanceId]&&(d[y.bucketInstanceId]=[]),d[y.bucketInstanceId].push(y.featureIndex))}}catch(g){p.e(g)}finally{p.f()}return d}},{key:"insertCollisionBox",value:function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,r,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(e,t,n,r){var i=[t,n,r||0,1],a=!1;return r||this.transform.pitch>0?(Zs(i,i,e),a=i[2]>i[3]):Fd(i,i,e),{point:new _((i[0]/i[3]+1)/2*this.transform.width+zd,(-i[1]/i[3]+1)/2*this.transform.height+zd),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/i[3]*.5,1.5),signedDistanceFromCamera:i[3],aboveHorizon:a}}},{key:"isOffscreen",value:function(e,t,n,r){return n<zd||e>=this.screenRightBoundary||r<zd||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var e=bs([]);return xs(e,e,[-100,-100,0]),e}}]),e}(),Ud=function(){function e(t,n,r,i){p(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):i&&r?1:0,this.placed=r}return v(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Vd=function(){function e(t,n,r,i,a){p(this,e),this.text=new Ud(t?t.text:null,n,r,a),this.icon=new Ud(t?t.icon:null,n,i,a)}return v(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),qd=function e(t,n,r){p(this,e),this.text=t,this.icon=n,this.skipFade=r},Gd=function e(){p(this,e),this.invProjMatrix=gs(),this.viewportMatrix=gs(),this.circles=[]},Kd=function e(t,n,r,i,a){p(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=a},Hd=function(){function e(t){p(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return v(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Wd(e,t,n,r,i){var a=bl(e),o=-(a.horizontalAlign-.5)*t,s=-(a.verticalAlign-.5)*n,u=Cl(e,r);return new _(o+u[0]*i,s+u[1]*i)}function Zd(e,t,n,r,i){var a=new _(e,t);return n&&a._rotate(r?i:-i),a}var Xd=function(){function e(t,n,r,i){p(this,e),this.transform=t.clone(),this.collisionIndex=new Bd(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Hd(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return v(e,[{key:"getBucketParts",value:function(e,t,n,r){var i=n.getBucket(t),a=n.latestFeatureIndex;if(i&&a&&t.id===i.layerIds[0]){var o=n.collisionBoxArray,s=i.layers[0].layout,u=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/Ko,l=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h="map"===s.get("text-pitch-alignment"),f="map"===s.get("text-rotation-alignment"),d=fh(n,1,this.transform.zoom),p=Td(l,h,f,this.transform,d),v=null;if(h){var y=Sd(l,h,f,this.transform,d);v=ws([],this.transform.labelPlaneMatrix,y)}this.retainedQueryData[i.bucketInstanceId]=new Kd(i.bucketInstanceId,a,i.sourceLayerIndex,i.index,n.tileID);var g={bucket:i,layout:s,posMatrix:l,textLabelPlaneMatrix:p,labelToScreenMatrix:v,scale:u,textPixelRatio:c,holdingForFade:n.holdingForFade(),collisionBoxArray:o,partiallyEvaluatedTextSize:Uc(i.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:Uc(i.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(i.sourceID)};if(r){var b,_=m(i.sortKeyRanges);try{for(_.s();!(b=_.n()).done;){var w=b.value,x=w.sortKey,k=w.symbolInstanceStart,E=w.symbolInstanceEnd;e.push({sortKey:x,symbolInstanceStart:k,symbolInstanceEnd:E,parameters:g})}}catch(T){_.e(T)}finally{_.f()}}else e.push({symbolInstanceStart:0,symbolInstanceEnd:i.symbolInstances.length,parameters:g})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,m,y){var g,b=[h.textOffset0,h.textOffset1],_=d.getSymbolInstanceTextSize(m,h,this.transform.zoom,f),w=Wd(e,n,r,b,i),x=this.collisionIndex.placeCollisionBox(_,t,Zd(w.x,w.y,a,o,this.transform.angle),l,s,u,c.predicate);if((!v||0!==this.collisionIndex.placeCollisionBox(d.getSymbolInstanceIconSize(y,this.transform.zoom,f),v,Zd(w.x,w.y,a,o,this.transform.angle),l,s,u,c.predicate).box.length)&&x.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:b,width:n,height:r,anchor:e,textBoxScale:i,prevAnchor:g},this.markUsedJustification(d,e,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:w,placedGlyphBoxes:x}}},{key:"placeLayerBucketPart",value:function(e,t,n){var r=this,i=e.parameters,a=i.bucket,o=i.layout,s=i.posMatrix,u=i.textLabelPlaneMatrix,c=i.labelToScreenMatrix,l=i.textPixelRatio,h=i.holdingForFade,f=i.collisionBoxArray,d=i.partiallyEvaluatedTextSize,p=i.partiallyEvaluatedIconSize,v=i.collisionGroup,y=o.get("text-optional"),g=o.get("icon-optional"),b=o.get("text-allow-overlap"),w=o.get("icon-allow-overlap"),x="map"===o.get("text-rotation-alignment"),k="map"===o.get("text-pitch-alignment"),E="none"!==o.get("icon-text-fit"),T="viewport-y"===o.get("symbol-z-order"),S=b&&(w||!a.hasIconData()||g),I=w&&(b||!a.hasTextData()||y);!a.collisionArrays&&f&&a.deserializeCollisionBoxes(f),n&&a.updateCollisionDebugBuffers(this.transform.zoom,f);var C=function(e,i,f){if(!t[e.crossTileID])if(h)r.placements[e.crossTileID]=new qd(!1,!1,!1);else{var T=!1,C=!1,A=!0,O=null,P={box:null,offscreen:null},D={box:null,offscreen:null},R=null,M=null,N=null,L=0,j=0,F=0;f.textFeatureIndex?L=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),f.verticalTextFeatureIndex&&(j=f.verticalTextFeatureIndex);var z=function(e){(r.transform.elevation||e.elevation)&&(e.elevation=r.transform.elevation?r.transform.elevation.getAtTileOffset(r.retainedQueryData[a.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},B=f.textBox;if(B){z(B);var U=function(t){var n=gl.horizontal;if(a.allowVerticalPlacement&&!t&&r.prevPlacement){var i=r.prevPlacement.placedOrientations[e.crossTileID];i&&(r.placedOrientations[e.crossTileID]=i,n=i,r.markUsedOrientation(a,n,e))}return n},V=function(t,n){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&f.verticalTextBox){var r,i=m(a.writingModes);try{for(i.s();!(r=i.n()).done&&(r.value===gl.vertical?(P=n(),D=P):P=t(),!(P&&P.box&&P.box.length)););}catch(o){i.e(o)}finally{i.f()}}else P=t()};if(o.get("text-variable-anchor")){var q=o.get("text-variable-anchor");if(r.prevPlacement&&r.prevPlacement.variableOffsets[e.crossTileID]){var G=r.prevPlacement.variableOffsets[e.crossTileID];q.indexOf(G.anchor)>0&&(q=q.filter((function(e){return e!==G.anchor}))).unshift(G.anchor)}var K=function(t,n,o){var u=e.textBoxScale,c=(t.x2-t.x1)*u+2*t.padding,h=(t.y2-t.y1)*u+2*t.padding,f=E&&!w?n:null;f&&z(f);for(var m={box:[],offscreen:!1},y=b?2*q.length:q.length,g=0;g<y;++g){var _=r.attemptAnchorPlacement(q[g%q.length],t,c,h,u,x,k,l,s,v,g>=q.length,e,i,a,o,f,d,p);if(_&&(m=_.placedGlyphBoxes)&&m.box&&m.box.length){T=!0,O=_.shift;break}}return m};V((function(){return K(B,f.iconBox,gl.horizontal)}),(function(){var t=f.verticalTextBox;return t&&z(t),a.allowVerticalPlacement&&!(P&&P.box&&P.box.length)&&e.numVerticalGlyphVertices>0&&t?K(t,f.verticalIconBox,gl.vertical):{box:null,offscreen:null}})),P&&(T=P.box,A=P.offscreen);var H=U(P&&P.box);if(!T&&r.prevPlacement){var W=r.prevPlacement.variableOffsets[e.crossTileID];W&&(r.variableOffsets[e.crossTileID]=W,r.markUsedJustification(a,W.anchor,e,H))}}else{var Z=function(t,n){var o=a.getSymbolInstanceTextSize(d,e,r.transform.zoom,i),u=r.collisionIndex.placeCollisionBox(o,t,new _(0,0),b,l,s,v.predicate);return u&&u.box&&u.box.length&&(r.markUsedOrientation(a,n,e),r.placedOrientations[e.crossTileID]=n),u};V((function(){return Z(B,gl.horizontal)}),(function(){var t=f.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&t?(z(t),Z(t,gl.vertical)):{box:null,offscreen:null}})),U(P&&P.box&&P.box.length)}}if(T=(R=P)&&R.box&&R.box.length>0,A=R&&R.offscreen,e.useRuntimeCollisionCircles){var X=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),Y=Bc(a.textSizeData,d,X),Q=o.get("text-padding");M=r.collisionIndex.placeCollisionCircles(b,X,a.lineVertexArray,a.glyphOffsetArray,Y,s,u,c,n,k,v.predicate,e.collisionCircleDiameter,Q,r.retainedQueryData[a.bucketInstanceId].tileID),T=b||M.circles.length>0&&!M.collisionDetected,A=A&&M.offscreen}if(f.iconFeatureIndex&&(F=f.iconFeatureIndex),f.iconBox){var $=function(e){z(e);var t=E&&O?Zd(O.x,O.y,x,k,r.transform.angle):new _(0,0),n=a.getSymbolInstanceIconSize(p,r.transform.zoom,i);return r.collisionIndex.placeCollisionBox(n,e,t,w,l,s,v.predicate)};C=D&&D.box&&D.box.length&&f.verticalIconBox?(N=$(f.verticalIconBox)).box.length>0:(N=$(f.iconBox)).box.length>0,A=A&&N.offscreen}var J=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,ee=g||0===e.numIconVertices;if(J||ee?ee?J||(C=C&&T):T=C&&T:C=T=C&&T,T&&R&&R.box&&r.collisionIndex.insertCollisionBox(R.box,o.get("text-ignore-placement"),a.bucketInstanceId,D&&D.box&&j?j:L,v.ID),C&&N&&r.collisionIndex.insertCollisionBox(N.box,o.get("icon-ignore-placement"),a.bucketInstanceId,F,v.ID),M&&(T&&r.collisionIndex.insertCollisionCircles(M.circles,o.get("text-ignore-placement"),a.bucketInstanceId,L,v.ID),n)){var te=a.bucketInstanceId,ne=r.collisionCircleArrays[te];void 0===ne&&(ne=r.collisionCircleArrays[te]=new Gd);for(var re=0;re<M.circles.length;re+=4)ne.circles.push(M.circles[re+0]),ne.circles.push(M.circles[re+1]),ne.circles.push(M.circles[re+2]),ne.circles.push(M.collisionDetected?1:0)}r.placements[e.crossTileID]=new qd(T||S,C||I,A||a.justReloaded),t[e.crossTileID]=!0}};if(T)for(var A=a.getSortedSymbolIndexes(this.transform.angle),O=A.length-1;O>=0;--O){var P=A[O];C(a.symbolInstances.get(P),P,a.collisionArrays[P])}else for(var D=e.symbolInstanceStart;D<e.symbolInstanceEnd;D++)C(a.symbolInstances.get(D),D,a.collisionArrays[D]);if(n&&a.bucketInstanceId in this.collisionCircleArrays){var R=this.collisionCircleArrays[a.bucketInstanceId];_s(R.invProjMatrix,s),R.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}},{key:"markUsedJustification",value:function(e,t,n,r){var i;i=r===gl.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[function(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}(t)];for(var a=0,o=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];a<o.length;a++){var s=o[a];s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=i>=0&&s!==i?0:n.crossTileID)}}},{key:"markUsedOrientation",value:function(e,t,n){for(var r=t===gl.horizontal||t===gl.horizontalOnly?t:0,i=t===gl.vertical?t:0,a=0,o=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];a<o.length;a++){var s=o[a];e.text.placedSymbolArray.get(s).placedOrientation=r}n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=i)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],c=i[s];c?(this.opacities[s]=new Vd(c,r,u.text,u.icon),n=n||u.text!==c.text.placed||u.icon!==c.icon.placed):(this.opacities[s]=new Vd(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var l in i){var h=i[l];if(!this.opacities[l]){var f=new Vd(h,r,!1,!1);f.isHidden()||(this.opacities[l]=f,n=n||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,r={},i=m(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(e,t,n){var r=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var i=e.layers[0].layout,a=new Vd(null,0,!1,!1,!0),o=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),u=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),l="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),f=new Vd(null,0,o&&(s||!e.hasIconData()||i.get("icon-optional")),s&&(o||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);for(var d=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},p=function(n){var i=e.symbolInstances.get(n),o=i.numHorizontalGlyphVertices,s=i.numVerticalGlyphVertices,p=i.crossTileID,v=r.opacities[p];t[p]?v=a:v||(v=f,r.opacities[p]=v),t[p]=!0;var m=i.numIconVertices>0,y=r.placedOrientations[i.crossTileID],g=y===gl.vertical,b=y===gl.horizontal||y===gl.horizontalOnly;if(o>0||s>0){var w=ip(v.text);d(e.text,o,g?ap:w),d(e.text,s,b?ap:w);var x=v.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=x||g?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=x||b?1:0);var k=r.variableOffsets[i.crossTileID];k&&r.markUsedJustification(e,k.anchor,i,y);var E=r.placedOrientations[i.crossTileID];E&&(r.markUsedJustification(e,"left",i,E),r.markUsedOrientation(e,E,i))}if(m){var T=ip(v.icon),S=!(h&&i.verticalPlacedIconSymbolIndex&&g);i.placedIconSymbolIndex>=0&&(d(e.icon,i.numIconVertices,S?T:ap),e.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=v.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,i.numVerticalIconVertices,S?ap:T),e.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=v.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var I=e.collisionArrays[n];if(I){var C=new _(0,0);if(I.textBox||I.verticalTextBox){var A=!0;if(u){var O=r.variableOffsets[p];O?(C=Wd(O.anchor,O.width,O.height,O.textOffset,O.textBoxScale),c&&C._rotate(l?r.transform.angle:-r.transform.angle)):A=!1}I.textBox&&Yd(e.textCollisionBox.collisionVertexArray,v.text.placed,!A||g,C.x,C.y),I.verticalTextBox&&Yd(e.textCollisionBox.collisionVertexArray,v.text.placed,!A||b,C.x,C.y)}var P=Boolean(!b&&I.verticalIconBox);I.iconBox&&Yd(e.iconCollisionBox.collisionVertexArray,v.icon.placed,P,h?C.x:0,h?C.y:0),I.verticalIconBox&&Yd(e.iconCollisionBox.collisionVertexArray,v.icon.placed,!P,h?C.x:0,h?C.y:0)}}},v=0;v<e.symbolInstances.length;v++)p(v);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=m.invProjMatrix,e.placementViewportMatrix=m.viewportMatrix,e.collisionCircleArray=m.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),e}();function Yd(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}var Qd=Math.pow(2,25),$d=Math.pow(2,24),Jd=Math.pow(2,17),ep=Math.pow(2,16),tp=Math.pow(2,9),np=Math.pow(2,8),rp=Math.pow(2,1);function ip(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Qd+t*$d+n*Jd+t*ep+n*tp+t*np+n*rp+t}var ap=0,op=function(){function e(t){p(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return v(e,[{key:"continuePlacement",value:function(e,t,n,r,i){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;)if(t.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}]),e}(),sp=function(){function e(t,n,r,i,a,o,s){p(this,e),this.placement=new Xd(t,a,o,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return v(e,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(e,t,n){for(var r=this,i=se.now(),a=function(){var e=se.now()-i;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var o=t[e[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===o.type&&(!o.minzoom||o.minzoom<=s)&&(!o.maxzoom||o.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new op(o)),this._inProgressLayer.continuePlacement(n[o.source],this.placement,this._showCollisionBoxes,o,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),e}(),up=function(){function e(t,n,r){p(this,e),this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<n.length;i++){var a=n.get(i),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,t)})}}return v(e,[{key:"getScaledCoordinates",value:function(e,t){var n=.03125/Math.pow(2,t.canonical.z-this.tileID.canonical.z);return{x:Math.floor((t.canonical.x*Ko+e.anchorX)*n),y:Math.floor((t.canonical.y*Ko+e.anchorY)*n)}}},{key:"findMatches",value:function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,u=this.getScaledCoordinates(a,t),c=m(o);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Math.abs(l.coord.x-u.x)<=r&&Math.abs(l.coord.y-u.y)<=r&&!n[l.crossTileID]){n[l.crossTileID]=!0,a.crossTileID=l.crossTileID;break}}}catch(h){c.e(h)}finally{c.f()}}}}}}]),e}(),cp=function(){function e(){p(this,e),this.maxCrossTileID=0}return v(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),lp=function(){function e(){p(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return v(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[n]=i}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var u=o[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var c=o[e.scaledTo(Number(a)).key];c&&c.findMatches(t.symbolInstances,e,i)}}for(var l=0;l<t.symbolInstances.length;l++){var h=t.symbolInstances.get(l);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new up(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var r,i=m(t.indexedSymbolInstances[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){i.e(o)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}]),e}(),hp=function(){function e(){p(this,e),this.layerIndexes={},this.crossTileIDs=new cp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return v(e,[{key:"addLayer",value:function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new lp);var i=!1,a={};r.handleWrapJump(n);var o,s=m(t);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=u.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(i=!0),a[c.bucketInstanceId]=!0)}}catch(l){s.e(l)}finally{s.f()}return r.removeStaleBuckets(a)&&(i=!0),i}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),fp=function(e,t){return Oi(e,t&&t.filter((function(e){return"source.canvas"!==e.identifier})))},dp=F(vd,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),pp=F(vd,["setCenter","setZoom","setBearing","setPitch"]),vp=function(){var e={},t=mt.$version;for(var n in mt.$root){var r=mt.$root[n];if(r.required){var i=null;null!=(i="version"===n?t:"array"===r.type?[]:{})&&(e[n]=i)}}return e}(),mp={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},yp=function(e){f(n,e);var t=d(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,n),(r=t.call(this)).map=e,r.dispatcher=new hh(hd(),i(r)),r.imageManager=new th,r.imageManager.setEventedParent(i(r)),r.glyphManager=new Sl(e._requestManager,a.localFontFamily?2:a.localIdeographFontFamily?1:0,a.localFontFamily||a.localIdeographFontFamily),r.lineAtlas=new uh(256,512),r.crossTileSymbolIndex=new hp,r._layers={},r._num3DLayers=0,r._numSymbolLayers=0,r._numCircleLayers=0,r._serializedLayers={},r._sourceCaches={},r._otherSourceCaches={},r._symbolSourceCaches={},r.zoomHistory=new Vi,r._loaded=!1,r._availableImages=[],r._order=[],r._drapedFirstOrder=[],r._resetUpdates(),r.dispatcher.broadcast("setReferrer",et());var o=i(r);return r._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,t){if(ia(e),t&&t.every((function(e){return e})))for(var n in o._sourceCaches){var r=o._sourceCaches[n],i=r.getSource().type;"vector"!==i&&"geojson"!==i||r.reload()}}))})),r.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var n in r._layers){var i=r._layers[n];i.source===t.id&&r._validateLayer(i)}}})),r}return v(n,[{key:"loadURL",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new dt("dataloading",{dataType:"style"}));var r="boolean"==typeof n.validate?n.validate:!Se(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var i=this.map._requestManager.transformRequest(e,$e.Style);this._request=nt(i,(function(e,n){t._request=null,e?t.fire(new pt(e)):n&&t._load(n,r)}))}},{key:"loadJSON",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new dt("dataloading",{dataType:"style"})),this._request=se.frame((function(){t._request=null,t._load(e,!1!==n.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new dt("dataloading",{dataType:"style"})),this._load(vp,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(e,t){if(!t||!fp(this,Si(e))){for(var n in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(n,e.sources[n],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);var r=pd(this.stylesheet.layers);this._order=r.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var i,a=m(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;(o=Wl(o)).setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=o,this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}}catch(s){a.e(s)}finally{a.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ih(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this._updateDrapeFirstLayers(),this.fire(new dt("data",{dataType:"style"})),this.fire(new dt("style.load"))}}},{key:"_loadSprite",value:function(e){var t=this;this._spriteRequest=function(e,t,n){var r,i,a,o=se.devicePixelRatio>1?"@2x":"",s=nt(t.transformRequest(t.normalizeSpriteURL(e,o,".json"),$e.SpriteJSON),(function(e,t){s=null,a||(a=e,r=t,c())})),u=lt(t.transformRequest(t.normalizeSpriteURL(e,o,".png"),$e.SpriteImage),(function(e,t){u=null,a||(a=e,i=t,c())}));function c(){if(a)n(a);else if(r&&i){var e=se.getImageData(i),t={};for(var o in r){var s=r[o],u=s.width,c=s.height,l=s.x,h=s.y,f=s.sdf,d=s.pixelRatio,p=s.stretchX,v=s.stretchY,m=s.content,y=new lu({width:u,height:c});lu.copy(e,y,{x:l,y:h},{x:0,y:0},{width:u,height:c}),t[o]={data:y,pixelRatio:d,sdf:f,stretchX:p,stretchY:v,content:m}}n(null,t)}}return{cancel:function(){s&&(s.cancel(),s=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,(function(e,n){if(t._spriteRequest=null,e)t.fire(new pt(e));else if(n)for(var r in n)t.imageManager.addImage(r,n[r]);t.imageManager.setLoaded(!0),t._availableImages=t.imageManager.listImages(),t.dispatcher.broadcast("setImages",t._availableImages),t.dispatcher.broadcast("spriteLoaded",!0),t.fire(new dt("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(e){var t=this.getSource(e.source);if(t){var n=e.sourceLayer;n&&("geojson"===t.type||t.vectorLayerIds&&-1===t.vectorLayerIds.indexOf(n))&&this.fire(new pt(new Error('Source layer "'.concat(n,'" does not exist on source "').concat(t.id,'" as specified by style layer "').concat(e.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],r=m(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this._layers[i];"custom"!==a.type&&n.push(a.serialize())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&mp[e.type]}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(e){if(this._loaded){var t=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var a=this._updatedSources[i];"reload"===a?this._reloadSource(i):"clear"===a&&this._clearSource(i)}for(var o in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[o].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var s={};for(var u in this._sourceCaches){var c=this._sourceCaches[u];s[u]=c.used,c.used=!1}var l,h=m(this._order);try{for(h.s();!(l=h.n()).done;){var f=l.value,d=this._layers[f];if(d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)){var p=this._getLayerSourceCache(d);p&&(p.used=!0)}var v=this.map.painter;if(v){var y=d.getProgramIds();if(!y)continue;var g,b=d.getProgramConfiguration(e.zoom),_=m(y);try{for(_.s();!(g=_.n()).done;){var w=g.value;v.useProgram(w,b)}}catch(E){_.e(E)}finally{_.f()}}}}catch(E){h.e(E)}finally{h.f()}for(var x in s){var k=this._sourceCaches[x];s[x]!==k.used&&k.getSource().fire(new dt("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.z=e.zoom,t&&this.fire(new dt("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(e){var t=this;if(this._checkLoaded(),fp(this,Si(e)))return!1;(e=W(e)).layers=pd(e.layers);var n=function(e,t){if(!e)return[{command:vd.setStyle,args:[t]}];var n=[];try{if(!k(e.version,t.version))return[{command:vd.setStyle,args:[t]}];k(e.center,t.center)||n.push({command:vd.setCenter,args:[t.center]}),k(e.zoom,t.zoom)||n.push({command:vd.setZoom,args:[t.zoom]}),k(e.bearing,t.bearing)||n.push({command:vd.setBearing,args:[t.bearing]}),k(e.pitch,t.pitch)||n.push({command:vd.setPitch,args:[t.pitch]}),k(e.sprite,t.sprite)||n.push({command:vd.setSprite,args:[t.sprite]}),k(e.glyphs,t.glyphs)||n.push({command:vd.setGlyphs,args:[t.glyphs]}),k(e.transition,t.transition)||n.push({command:vd.setTransition,args:[t.transition]}),k(e.light,t.light)||n.push({command:vd.setLight,args:[t.light]});var r={},i=[];!function(e,t,n,r){var i;for(i in t=t||{},e=e||{})e.hasOwnProperty(i)&&(t.hasOwnProperty(i)||yd(i,n,r));for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?k(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&bd(e,t,i)?n.push({command:vd.setGeoJSONSourceData,args:[i,t[i].data]}):gd(i,t,n,r)):md(i,t,n))}(e.sources,t.sources,i,r);var a=[];e.layers&&e.layers.forEach((function(e){r[e.source]?n.push({command:vd.removeLayer,args:[e.id]}):a.push(e)}));var o=e.terrain;o&&r[o.source]&&(n.push({command:vd.setTerrain,args:[void 0]}),o=void 0),n=n.concat(i),k(o,t.terrain)||n.push({command:vd.setTerrain,args:[t.terrain]}),function(e,t,n){t=t||[];var r,i,a,o,s,u,c,l=(e=e||[]).map(wd),h=t.map(wd),f=e.reduce(xd,{}),d=t.reduce(xd,{}),p=l.slice(),v=Object.create(null);for(r=0,i=0;r<l.length;r++)a=l[r],d.hasOwnProperty(a)?i++:(n.push({command:vd.removeLayer,args:[a]}),p.splice(p.indexOf(a,i),1));for(r=0,i=0;r<h.length;r++)a=h[h.length-1-r],p[p.length-1-r]!==a&&(f.hasOwnProperty(a)?(n.push({command:vd.removeLayer,args:[a]}),p.splice(p.lastIndexOf(a,p.length-i),1)):i++,u=p[p.length-r],n.push({command:vd.addLayer,args:[d[a],u]}),p.splice(p.length-r,0,a),v[a]=!0);for(r=0;r<h.length;r++)if(o=f[a=h[r]],s=d[a],!v[a]&&!k(o,s))if(k(o.source,s.source)&&k(o["source-layer"],s["source-layer"])&&k(o.type,s.type)){for(c in _d(o.layout,s.layout,n,a,null,vd.setLayoutProperty),_d(o.paint,s.paint,n,a,null,vd.setPaintProperty),k(o.filter,s.filter)||n.push({command:vd.setFilter,args:[a,s.filter]}),k(o.minzoom,s.minzoom)&&k(o.maxzoom,s.maxzoom)||n.push({command:vd.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]}),o)o.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?_d(o[c],s[c],n,a,c.slice(6),vd.setPaintProperty):k(o[c],s[c])||n.push({command:vd.setLayerProperty,args:[a,c,s[c]]}));for(c in s)s.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?_d(o[c],s[c],n,a,c.slice(6),vd.setPaintProperty):k(o[c],s[c])||n.push({command:vd.setLayerProperty,args:[a,c,s[c]]}))}else n.push({command:vd.removeLayer,args:[a]}),u=p[p.lastIndexOf(a)+1],n.push({command:vd.addLayer,args:[s,u]})}(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:vd.setStyle,args:[t]}]}return n}(this.serialize(),e).filter((function(e){return!(e.command in pp)}));if(0===n.length)return!1;var r=n.filter((function(e){return!(e.command in dp)}));if(r.length>0)throw new Error("Unimplemented: ".concat(r.map((function(e){return e.command})).join(", "),"."));return n.forEach((function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)})),this.stylesheet=e,!0}},{key:"addImage",value:function(e,t){if(this.getImage(e))return this.fire(new pt(new Error("An image with this name already exists.")));this.imageManager.addImage(e,t),this._afterImageUpdated(e)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(e){if(!this.getImage(e))return this.fire(new pt(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}},{key:"_afterImageUpdated",value:function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new dt("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this.imageManager.listImages()}},{key:"addSource",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(t).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(t.type)>=0&&this._validate(Si.source,"sources.".concat(e),t,null,r))){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var i=nd(e,t,this.dispatcher,this);i.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:i.serialize(),sourceId:e}}));var a=function(t){var r=(t?"symbol:":"other:")+e,a=n._sourceCaches[r]=new Gf(r,i,t);(t?n._symbolSourceCaches:n._otherSourceCaches)[e]=a,a.style=n,a.onAdd(n.map)};a(!1),"vector"!==t.type&&"geojson"!==t.type||a(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(e){this._checkLoaded();var t=this.getSource(e);if(void 0===t)throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new pt(new Error('Source "'.concat(e,'" cannot be removed while layer "').concat(n,'" is using it.'))));if(this.terrain&&this.terrain.get().source===e)return this.fire(new pt(new Error('Source "'.concat(e,'" cannot be removed while terrain is using it.'))));var r,i=this._getSourceCaches(e),a=m(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;delete this._sourceCaches[o.id],delete this._updatedSources[o.id],o.fire(new dt("data",{sourceDataType:"metadata",dataType:"source",sourceId:o.getSource().id})),o.setEventedParent(null),o.clearTiles()}}catch(s){a.e(s)}finally{a.f()}delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],t.setEventedParent(null),t.onRemove&&t.onRemove(this.map),this._changed=!0}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"addLayer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new pt(new Error('Layer with id "'.concat(r,'" already exists on this map'))));else{var i;if("custom"===e.type){if(fp(this,function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t}(e)))return;i=Wl(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=j(e=W(e),{source:r})),this._validate(Si.layer,"layers.".concat(r),e,{arrayIndex:-1},n))return;i=Wl(e),this._validateLayer(i),i.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0)}var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)this.fire(new pt(new Error('Layer with id "'.concat(t,'" does not exist on this map.'))));else{this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=i;var o=this._getLayerSourceCache(i);if(this._removedLayers[r]&&i.source&&o&&"custom"!==i.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",o.pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(e,t){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==t){var n=this._order.indexOf(e);this._order.splice(n,1);var r=t?this._order.indexOf(t):this._order.length;t&&-1===r?this.fire(new pt(new Error('Layer with id "'.concat(t,'" does not exist on this map.')))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(e){this._checkLoaded();var t=this._layers[e];if(t){t.setEventedParent(null),this._updateLayerCount(t,!1);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],t.onRemove&&t.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(e,t,n){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var r=this.getLayer(e);if(r){if(!k(r.filter,t))return null==t?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(Si.filter,"layers.".concat(r.id,".filter"),t,null,n)||(r.filter=W(t),this._updateLayer(r)))}else this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(e){return W(this.getLayer(e).filter)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var i=this.getLayer(e);i?k(i.getLayoutProperty(t),n)||(i.setLayoutProperty(t,n,r),this._updateLayer(i)):this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(e,t){var n=this.getLayer(e);if(n)return n.getLayoutProperty(t);this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var i=this.getLayer(e);i?k(i.getPaintProperty(t),n)||(i.setPaintProperty(t,n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new pt(new Error("The layer '".concat(e,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){return this.getLayer(e).getPaintProperty(t)}},{key:"setFeatureState",value:function(e,t){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.getSource(n);if(void 0!==i){var a=i.type;if("geojson"===a&&r)this.fire(new pt(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==a||r){void 0===e.id&&this.fire(new pt(new Error("The feature id parameter must be provided.")));var o,s=this._getSourceCaches(n),u=m(s);try{for(u.s();!(o=u.n()).done;)o.value.setFeatureState(r,e.id,t)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new pt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new pt(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(e,t){this._checkLoaded();var n=e.source,r=this.getSource(n);if(void 0!==r){var i=r.type,a="vector"===i?e.sourceLayer:void 0;if("vector"!==i||a)if(t&&"string"!=typeof e.id&&"number"!=typeof e.id)this.fire(new pt(new Error("A feature id is required to remove its specific state property.")));else{var o,s=this._getSourceCaches(n),u=m(s);try{for(u.s();!(o=u.n()).done;)o.value.removeFeatureState(a,e.id,t)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new pt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new pt(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(e){this._checkLoaded();var t=e.source,n=e.sourceLayer,r=this.getSource(t);if(void 0!==r){if("vector"!==r.type||n)return void 0===e.id&&this.fire(new pt(new Error("The feature id parameter must be provided."))),this._getSourceCaches(t)[0].getFeatureState(n,e.id);this.fire(new pt(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new pt(new Error("The source '".concat(t,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return j({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var e={};for(var t in this._sourceCaches){var n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return H({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){r[o]=a;var s,u=m(e);try{for(u.s();!(s=u.n()).done;){var c=s.value[o];if(c){var l,h=m(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;i.push(f)}}catch(T){h.e(T)}finally{h.f()}}}}catch(T){u.e(T)}finally{u.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var d=[],p=this._order.length-1;p>=0;p--){var v=this._order[p];if(n(v))for(var y=i.length-1;y>=0;y--){var g=i[y].feature;if(r[g.layer.id]<p)break;d.push(g),i.pop()}else{var b,_=m(e);try{for(_.s();!(b=_.n()).done;){var w=b.value[v];if(w){var x,k=m(w);try{for(k.s();!(x=k.n()).done;){var E=x.value;d.push(E.feature)}}catch(T){k.e(T)}finally{k.f()}}}}catch(T){_.e(T)}finally{_.f()}}}return d}},{key:"queryRenderedFeatures",value:function(e,t,n){var r=this;t&&t.filter&&this._validate(Si.filter,"queryRenderedFeatures.filter",t.filter,null,t);var i={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire(new pt(new Error("parameters.layers must be an Array."))),[];var a,o=m(t.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=this._layers[s];if(!u)return this.fire(new pt(new Error("The layer '".concat(s,"' does not exist in the map's style and cannot be queried for features.")))),[];i[u.source]=!0}}catch(p){o.e(p)}finally{o.f()}}var c=[];t.availableImages=this._availableImages;var l=t&&t.layers?t.layers.some((function(e){var t=r.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),h=Eh.createFromScreenPoints(e,n);for(var f in this._sourceCaches){var d=this._sourceCaches[f].getSource().id;t.layers&&!i[d]||c.push(id(this._sourceCaches[f],this._layers,this._serializedLayers,h,t,n,l,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,r,i,a,o){var s,u={},c=a.queryRenderedSymbols(r),l=[],h=m(Object.keys(c).map(Number));try{for(h.s();!(s=h.n()).done;){var f=s.value;l.push(o[f])}}catch(p){h.e(p)}finally{h.f()}l.sort(od);for(var d=function(){var n=y[v],r=n.featureIndex.lookupSymbolFeatures(c[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var a in r){var o=u[a]=u[a]||[],s=r[a];s.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var l,h=m(s);try{for(h.s();!(l=h.n()).done;){var f=l.value;o.push(f)}}catch(p){h.e(p)}finally{h.f()}}},v=0,y=l;v<y.length;v++)d();var g=function(t){u[t].forEach((function(r){var i=r.feature,a=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}))};for(var b in u)g(b);return u}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),h.screenGeometry,t,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(e,t){t&&t.filter&&this._validate(Si.filter,"querySourceFeatures.filter",t.filter,null,t);var n,r=this._getSourceCaches(e),i=[],a=m(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;i=i.concat(ad(o,t))}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"addSourceType",value:function(e,t,r){return n.getSourceType(e)?r(new Error('A source type called "'.concat(e,'" already exists.'))):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!k(e[i],n[i])){r=!0;break}if(r){var a={now:se.now(),transition:j({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,t),this.light.updateTransitions(a)}}},{key:"getTerrain",value:function(){return this.terrain?this.terrain.get():null}},{key:"setTerrain",value:function(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof e.source){var t="terrain-dem-src";this.addSource(t,e.source),e=j(e=W(e),{source:t})}if(!this._validate(Si.terrain,"terrain",e)){if(this.terrain){var n=this.terrain,r=n.get();for(var i in e)if(!k(e[i],r[i])){n.set(e),this.stylesheet.terrain=e;var a={now:se.now(),transition:j({duration:0},this.stylesheet.transition)};n.updateTransitions(a);break}}else this._createTerrain(e);this._updateDrapeFirstLayers()}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var r=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),i=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(r)),(t=this._drapedFirstOrder).push.apply(t,c(i))}}},{key:"_createTerrain",value:function(e){var t=this.terrain=new sh(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();var n={now:se.now(),transition:j({duration:0},this.stylesheet.transition)};t.updateTransitions(n)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&fp(this,e.call(Si,j({key:t,style:this.serialize(),value:n,styleSpec:mt},r)))}},{key:"_remove",value:function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),oa.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),r=m(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),r=m(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(a){r.e(a)}finally{r.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(e,t,n,r){var i,a=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=!1,u=!1,c={},l=m(this._order);try{for(l.s();!(i=l.n()).done;){var h=i.value,f=this._layers[h];if("symbol"===f.type){if(!c[f.source]&&"continue"===function(){var e=a._getLayerSourceCache(f);if(!e)return"continue";c[f.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}())continue;var d=this.crossTileSymbolIndex.addLayer(f,c[f.source],e.center.lng);s=s||d}}}catch(b){l.e(b)}finally{l.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new dt("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(se.now(),e.zoom))&&(this.pauseablePlacement=new sp(e,this._order,o,t,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(se.now()),u=!0),s&&this.pauseablePlacement.placement.setStale()),u||s){var p,v=m(this._order);try{for(v.s();!(p=v.n()).done;){var y=p.value,g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,c[g.source])}}catch(b){v.e(b)}finally{v.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(se.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(e,t,n){return tt(t,n)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}}]),n}(vt);yp.getSourceType=function(e){return td[e]},yp.setSourceType=function(e,t){td[e]=t},yp.registerForPluginStateChange=function(e){return e({pluginStatus:na,pluginURL:ra}),oa.on("pluginStateChange",e),e};var gp="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",bp={};bp=xp("","\n#define ELEVATION_SCALE 7.3\n#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/ELEVATION_SCALE;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);var _p=xp("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),wp={background:xp("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xp("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xp("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:xp("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xp("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),heatmapTexture:xp("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xp("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xp("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xp("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:xp("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:xp("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:xp("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:xp("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:xp("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:xp("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:xp("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xp("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xp("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:xp("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:xp("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:xp("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:xp("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xp("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:xp("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:xp("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:xp("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),terrainDepth:xp("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:xp("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",gp),skyboxGradient:xp("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",gp),skyboxCapture:xp("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function xp(e,t,n){var r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(a):a;n||(s=bp.staticUniforms.concat(s));var u={};return{fragmentSource:e=e.replace(r,(function(e,t,n,r,i){return u[i]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),vertexSource:t=t.replace(r,(function(e,t,n,r,i){var a="float"===r?"vec2":"vec4",o=i.match(/color/)?"color":a;return u[i]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(i,";\nvarying ").concat(n," ").concat(r," ").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(i," = unpack_mix_").concat(o,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\nuniform lowp float u_").concat(i,"_t;\nattribute ").concat(n," ").concat(a," a_").concat(i,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(i,";\n#endif\n"):"vec4"===o?"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = a_").concat(i,";\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(i,"\n    ").concat(n," ").concat(r," ").concat(i," = unpack_mix_").concat(o,"(a_").concat(i,", u_").concat(i,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(i," = u_").concat(i,";\n#endif\n")})),staticAttributes:i,staticUniforms:s}}var kp=function(){function e(){p(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}return v(e,[{key:"bind",value:function(e,t,n,r,i,a,o,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(t,n,r,i,a,o,s)}},{key:"freshBind",value:function(e,t,n,r,i,a,o){var s,u=e.numAttributes,c=this.context,l=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=c.currentNumAttributes||0;for(var h=u;h<s;h++)l.disableVertexAttribArray(h)}t.enableAttributes(l,e);var f,d=m(n);try{for(d.s();!(f=d.n()).done;)f.value.enableAttributes(l,e)}catch(g){d.e(g)}finally{d.f()}a&&a.enableAttributes(l,e),o&&o.enableAttributes(l,e),t.bind(),t.setVertexAttribPointers(l,e,i);var p,v=m(n);try{for(v.s();!(p=v.n()).done;){var y=p.value;y.bind(),y.setVertexAttribPointers(l,e,i)}}catch(g){v.e(g)}finally{v.f()}a&&(a.bind(),a.setVertexAttribPointers(l,e,i)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(l,e,i)),c.currentNumAttributes=u}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Ep(e,t){var n=Math.pow(2,t.canonical.z),r=t.canonical.y;return[new kh(0,r/n).toLngLat().lat,new kh(0,(r+1)/n).toLngLat().lat]}function Tp(e,t,n,r,i,a,o){var s=e.context,u=s.gl,c=n.fbo;if(c){e.prepareDrawTile(t);var l=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var h=function(e,t,n,r){var i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u=!e.options.moving;return{u_matrix:r||e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),u),u_image:0,u_latrange:Ep(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}}(e,n,r,e.terrain?t.posMatrix:null);l.draw(s,u.TRIANGLES,i,a,o,Vf.disabled,h,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function Sp(e,t,n){if(t.needsDEMTextureUpload){var r=e.context,i=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(n.stride);var a=n.getPixels();t.demTexture?t.demTexture.update(a,{premultiply:!1}):t.demTexture=new Jl(r,a,i.RGBA,{premultiply:!1}),t.needsDEMTextureUpload=!1}}function Ip(e,t,n,r,i,a){var o=e.context,s=o.gl;if(t.dem){var u=t.dem;if(o.activeTexture.set(s.TEXTURE1),Sp(e,t,u),t.demTexture){t.demTexture.bind(s.NEAREST,s.CLAMP_TO_EDGE);var c=u.dim;o.activeTexture.set(s.TEXTURE0);var l=t.fbo;if(!l){var h=new Jl(o,{width:c,height:c,data:null},s.RGBA);h.bind(s.LINEAR,s.CLAMP_TO_EDGE),(l=t.fbo=o.createFramebuffer(c,c,!0)).colorAttachment.set(h.texture)}o.bindFramebuffer.set(l.framebuffer),o.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(o,s.TRIANGLES,r,i,a,Vf.disabled,function(e,t){var n=t.stride,r=gs();return As(r,0,Ko,-8192,0,0,1),xs(r,r,[0,-8192,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:t.unpackVector}}(t.tileID,u),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),t.needsHillshadePrepare=!1}}}var Cp=function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image0:new wo(e,t.u_image0),u_skirt_height:new xo(e,t.u_skirt_height)}},Ap=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Op=new(function(){function e(){p(this,e),this.operations={}}return v(e,[{key:"newMorphing",value:function(e,t,n,r,i){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),Pp={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Dp(e,t,n,r,i){var a,o,s=e.context,u=s.gl,c=e.options.showTerrainWireframe?2:0,h=function(t,n){if(o!==t){var r=[Pp[t]];n&&r.push(Pp[c]),a=e.useProgram("terrainRaster",null,r),o=t}},f=e.colorModeForRenderPass(),d=new Lf(u.LEQUAL,Lf.ReadWrite,e.depthRangeFor3D);Op.update(i);var p=e.transform,v=6*Math.pow(1.5,22-p.zoom)*t.exaggeration();(c?[!1,!0]:[!1]).forEach((function(e){o=-1;var c,y,g,b=e?u.LINES:u.TRIANGLES,_=e?t.getWirefameBuffer():[t.gridIndexBuffer,t.gridSegments],w=l(_,2),x=w[0],k=w[1],E=m(r);try{for(E.s();!(c=E.n()).done;){var T=c.value,S=n.getTile(T),I=Ff.disabled,A=t.prevTerrainTileForTile[T.key],O=t.terrainTileForTile[T.key];g=O,null!=(y=A)&&null!=g&&y.hasData()&&g.hasData()&&null!=y.demTexture&&null!=g.demTexture&&y.tileID.key!==g.tileID.key&&Op.newMorphing(T.key,A,O,i,250),s.activeTexture.set(u.TEXTURE0),S.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var P=Op.getMorphValuesForProxy(T.key),D=P?1:0,R=void 0;P&&(R={morphing:{srcDemTile:P.from,dstDemTile:P.to,phase:C(P.phase)}});var M=Ap(T.posMatrix,Rp(T.canonical,p.renderWorldCopies)?v/10:v);h(D,e),t.setupElevationDraw(S,a,R),a.draw(s,b,d,I,f,Vf.backCCW,M,"terrain_raster",t.gridBuffer,x,k)}}catch(N){E.e(N)}finally{E.f()}}))}function Rp(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var Mp=function(e){return{u_matrix:e}};function Np(e,t,n,r,i){if(i>0){var a=se.now(),o=(a-e.timeAdded)/i,s=t?(a-t.timeAdded)/i:-1,u=n.getSource(),c=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),l=!t||Math.abs(t.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),h=l&&e.refreshedUponExpiration?1:R(l?o:1-s,0,1);return e.refreshedUponExpiration&&o>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var Lp=function(e){f(n,e);var t=d(n);function n(e){var r;p(this,n);var a=nd("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new hh(hd(),null),e.style);return r=t.call(this,"proxy",a,!1),a.setEventedParent(i(r)),r.map=r.getSource().map=e,r.used=r._sourceLoaded=!0,r.renderCache=[],r.renderCachePool=[],r.proxyCachedFBO={},r}return v(n,[{key:"update",value:function(e,t,n){var r=this;if(!e.freezeTileCoverage){this.transform=e;var i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce((function(t,n){if(t[n.key]="",!r._tiles[n.key]){var i=new Lh(n,r._source.tileSize*n.overscaleFactor(),e.tileZoom);i.state="loaded",r._tiles[n.key]=i}return t}),{});for(var a in this._tiles)a in i||(this.freeFBO(a),this._tiles[a].state="unloaded",delete this._tiles[a])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,r=Object.values(t);(n=this.renderCachePool).push.apply(n,c(r)),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),n}(Gf),jp=function(e){f(n,e);var t=d(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=r,a.posMatrix=i,a}return n}(Ah),Fp=function(e){f(n,e);var t=d(n);function n(e,r){var i;p(this,n),(i=t.call(this)).painter=e,i.terrainTileForTile={},i.prevTerrainTileForTile={};var a=function(e){var t=new Da,n=new qa,r=131;t.reserve(17161),n.reserve(33800);for(var i=-64;i<8288;i+=64)for(var a=-64;a<8288;a+=64){var o=a<0||a>8224||i<0||i>8224?24575:0,s=R(Math.round(a),0,Ko),u=R(Math.round(i),0,Ko);t.emplaceBack(s+o,u,s,u)}for(var c=function(e,t){var i=t*r+e;n.emplaceBack(i+1,i,i+r),n.emplaceBack(i+r,i+r+1,i+1)},l=1;l<129;l++)for(var h=1;h<129;h++)c(h,l);return[0,129].forEach((function(e){for(var t=0;t<130;t++)c(t,e),c(e,t)})),[t,n,32768]}(),o=l(a,3),s=o[0],u=o[1],c=o[2],h=e.context;i.gridBuffer=h.createVertexBuffer(s,Jf.members),i.gridIndexBuffer=h.createIndexBuffer(u),i.gridSegments=Go.simpleSegment(0,0,s.length,u.length),i.gridNoSkirtSegments=Go.simpleSegment(0,0,s.length,c),i.proxyCoords=[],i.proxiedCoords={},i._visibleDemTiles=[],i._drapedRenderBatches=[],i._sourceTilesOverlap={},i.proxySourceCache=new Lp(r.map),i.orthoMatrix=gs(),As(i.orthoMatrix,0,Ko,0,Ko,0,1);var f=h.gl;return i._overlapStencilMode=new Ff({func:f.GEQUAL,mask:255},0,255,f.KEEP,f.KEEP,f.REPLACE),i._previousZoom=e.transform.zoom,i.pool=[],i._findCoveringTileCache={},i._tilesDirty={},i.style=r,i._useVertexMorphing=!0,i._exaggeration=1,i}return v(n,[{key:"style",set:function(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}},{key:"update",value:function(e,t,n){var r=this;if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;var i=e.terrain.properties;this.sourceCache=e._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");var a=function(){r.sourceCache.used&&X("Raster DEM source '".concat(r.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var e=r.sourceCache.getSource().tileSize/128,n=r.proxySourceCache.getSource().tileSize;r.sourceCache.update(t,e*n,!0),r._findCoveringTileCache[r.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),t.updateElevation(!n),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(t),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"_checkRenderCacheEfficiency",value:function(){var e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&X("Terrain render cache efficiency is not optimal (".concat(e.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(e.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(e){var t=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPoint(kh.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);var i=this.painter.options;this.renderCached=(i.zooming||i.moving||i.rotating||!!this.forceRenderCached)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;var a=this.proxyCoords=n.getIds().map((function(e){var t=n.getTileByID(e).tileID;return t.posMatrix=r.calculatePosMatrix(t.toUnwrapped()),t}));!function(e,t){var n=t.transform.pointCoordinate(t.transform.getCameraPoint()),r=new _(n.x,n.y);e.sort((function(e,t){if(t.overscaledZ-e.overscaledZ)return t.overscaledZ-e.overscaledZ;var n=new _(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),i=new _(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=r.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(n)-a.distSqr(i)}))}(a,this.painter),this._previousZoom=r.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){t.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var u in s){var c=s[u];if(c.used&&(c!==this.sourceCache&&(this._findCoveringTileCache[c.id]={}),this._setupProxiedCoordsForOrtho(c,e[u],o),!c.usedForTerrain)){var l=e[u];c.getSource().reparseOverscaled&&this._assignTerrainTiles(l)}}this.proxiedCoords[n.id]=a.map((function(e){return new jp(e,e.key,t.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._setupRenderCache(o),this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=se.now();var h={};this._visibleDemTiles=[];var f,d=m(this.proxyCoords);try{for(d.s();!(f=d.n()).done;){var p=f.value,v=this.terrainTileForTile[p.key];if(v){var y=v.tileID.key;y in h||(this._visibleDemTiles.push(v),h[y]=y)}}}catch(g){d.e(g)}finally{d.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Sp(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,r){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),o=r||"";return n["u_dem_tl".concat(o)]=[i.x*a%1,i.y*a%1],n["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var e=this.painter.context,t=e.gl;e.activeTexture.set(t.TEXTURE2);var n=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(Wh.pack(n,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;var i=this._emptyDEMTexture;return i?i.update(r,{premultiply:!1}):i=this._emptyDEMTexture=new Jl(e,r,t.RGBA,{premultiply:!1}),i}},{key:"setupElevationDraw",value:function(e,t,n){var r,i=this.painter.context,a=i.gl,o=(r=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:Wh.getUnpackVector(r),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();var s=null,u=null,c=1;if(n&&n.morphing&&this._useVertexMorphing){var l=n.morphing.srcDemTile,h=n.morphing.dstDemTile;c=n.morphing.phase,l&&h&&(this._prepareDemTileUniforms(e,l,o,"_prev")&&(u=l),this._prepareDemTileUniforms(e,h,o)&&(s=h))}if(u&&s?(i.activeTexture.set(a.TEXTURE2),s.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),i.activeTexture.set(a.TEXTURE4),u.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.u_dem_lerp=c):(s=this.terrainTileForTile[e.tileID.key],i.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(e,s,o)?s.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST)),n&&n.useDepthForOcclusion&&(i.activeTexture.set(a.TEXTURE3),this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),n&&n.useMeterToDem&&s){var f=(1<<s.tileID.canonical.z)*_h(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=f}n&&n.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=n.labelPlaneMatrixInv),t.setTerrainUniformValues(i,o)}},{key:"renderBatch",value:function(e){var t=this;if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;for(var n=this.painter,r=this.painter.context,i=this.proxySourceCache,a=this.proxiedCoords[i.id],o=function(){r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),t.renderingToTexture=!1},s=this._drapedRenderBatches.shift(),u=[],c=n.style.order,l=0,h=0;h<a.length;h++){var f=a[h],d=i.getTileByID(f.proxyTileKey),p=i.proxyCachedFBO[f.key]?i.proxyCachedFBO[f.key][e]:void 0,v=void 0,m=void 0;if(v=this.currentFBO=void 0!==p?i.renderCache[p]:this.pool[l++],d.texture=v.tex,void 0===p||v.dirty){r.bindFramebuffer.set(v.fb.framebuffer),this.renderedToTile=!1,v.dirty&&(r.clear({color:Vt.transparent}),v.dirty=!1);for(var y=s.start;y<=s.end;++y){var g=n.style._layers[c[y]];if(!g.isHidden(n.transform.zoom)){var b=n.style._getLayerSourceCache(g),_=b?this.proxyToSource[f.key][b.id]:[f];if(_){var w=_;r.viewport.set([0,0,v.fb.width,v.fb.height]),m!==(b?b.id:null)&&(this._setupStencil(_,g,b),m=b?b.id:null),n.renderLayer(n,b,g,w)}}}v.dirty=this.renderedToTile,this.renderedToTile&&u.push(d.tileID),5===l&&(l=0,u.length>0&&(o(),Dp(n,this,i,u,this._updateTimestamp),this.renderingToTexture=!0,u=[]))}else u.push(d.tileID)}return o(),u.length>0&&Dp(n,this,i,u,this._updateTimestamp),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,r=0,i=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++r,++i):a||(a=!0,n=s.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(r){var i=r.tileID,a=Math.pow(2,i.overscaledZ),o=i.canonical,s=o.x,u=o.y,c=s/a,l=(s+1)/a,h=u/a,f=(u+1)/a;return{minx:c,miny:h,maxx:l,maxy:f,t:r.dem.tree.raycastRoot(c,h,l,f,e,t,n),tile:r}}));r.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,a=m(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,n);if(null!=s)return s}}catch(u){a.e(u)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var e=this.painter.context,t=e.gl,n=this.drapeBufferSize;e.activeTexture.set(t.TEXTURE0);var r=new Jl(e,{width:n[0],height:n[1],data:null},t.RGBA);r.bind(t.LINEAR,t.CLAMP_TO_EDGE);var i=e.createFramebuffer(n[0],n[1],!1);return i.colorAttachment.set(r.texture),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&t.texParameterf(t.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:i,tex:r,dirty:!1,ref:1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;return!this.renderCached||this._style.order.some((function(t){var n=e._style._layers[t],r=!n.isHidden(e.painter.transform.zoom),i=n.getCrossfadeParameters();return"custom"!==n.type&&!r&&!!i&&1!==i.t}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof $f){e=!0;break}if(e)for(var n=0;n<this._style.order.length;++n){var r=this._style._layers[this._style.order[n]],i=r.isHidden(this.painter.transform.zoom),a=this._style._getLayerSourceCache(r);if("raster"===r.type&&!i&&a){var o,s=r.paint.get("raster-fade-duration"),u=m(this.proxyCoords);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=this.proxyToSource[c.key][a.id];if(l){var h,f=m(l);try{for(f.s();!(h=f.n()).done;){var d=h.value,p=Np(a.getTile(d),a.findLoadedParent(d,0),a,this.painter.transform,s);(1!==p.opacity||0!==p.mix)&&this._clearRenderCacheForTile(a.id,d)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){u.e(v)}finally{u.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,r=[],i=0,a=this._style._layers[e[i]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){var o=this._style._layers[e[i]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var r=0;r<n.length;++r){var i,a=Object.values(n[r]);(i=t.renderCachePool).push.apply(i,c(a))}}}else{this._clearRasterFadeFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,u=o.length-1;u>=0;u--){var l=o[u];if(t.getTileByID(l.key),void 0!==t.proxyCachedFBO[l.key]){var h=e[l.key],f=this.proxyToSource[l.key],d=0,p=function(e){var t=f[e],n=h[e];if(!n||n.length!==t.length||t.some((function(t,r){return t!==n[r]||s[e]&&s[e].hasOwnProperty(t.key)})))return d=-1,"break";++d};for(var v in f)if("break"===p(v))break;for(var m in t.proxyCachedFBO[l.key])t.renderCache[t.proxyCachedFBO[l.key][m]].dirty=d<0||d!==Object.values(h).length}else for(var y=0;y<this._drapedRenderBatches.length;++y){var g=this._drapedRenderBatches[y],b=t.renderCachePool.pop();void 0===b&&t.renderCache.length<50&&(b=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==b&&(void 0===t.proxyCachedFBO[l.key]&&(t.proxyCachedFBO[l.key]={}),t.proxyCachedFBO[l.key][g.start]=b,t.renderCache[b].dirty=!0)}}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n){if(n&&this._sourceTilesOverlap[n.id]){var r=this.painter.context,i=r.gl;if(e.length<=1)this._overlapStencilType=!1;else{var a,o=this.currentFBO,s=o.fb;if(t.isTileClipped())a=e.length,this._overlapStencilMode.test={func:i.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:i.GREATER,mask:255},this._overlapStencilType="Mask"}if(!s.depthAttachment){var u=r.createRenderbuffer(r.gl.DEPTH_STENCIL,s.width,s.height);s.depthAttachment=new Mf(r,s.framebuffer),s.depthAttachment.set(u),r.clear({stencil:0})}o.ref+a>255&&(r.clear({stencil:0}),o.ref=0),o.ref+=a,this._overlapStencilMode.ref=o.ref,t.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"stencilModeForRTTOverlap",value:function(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):Ff.disabled}},{key:"_renderTileClippingMasks",value:function(e,t){var n=this.painter,r=this.painter.context,i=r.gl;n._tileClippingMaskIDs={},r.setColorMode(zf.disabled),r.setDepthMode(Lf.disabled);var a,o=n.useProgram("clippingMask"),s=m(e);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=n._tileClippingMaskIDs[u.key]=--t;o.draw(r,i.TRIANGLES,Lf.disabled,new Ff({func:i.ALWAYS,mask:0},c,255,i.KEEP,i.KEEP,i.REPLACE),zf.disabled,Vf.disabled,Mp(u.posMatrix),"$clipping",n.tileExtentBuffer,n.quadTriangleIndexBuffer,n.tileExtentSegments)}}catch(l){s.e(l)}finally{s.f()}}},{key:"pointCoordinate",value:function(e){var t=this.painter.transform;if(e.x<0||e.x>t.width||e.y<0||e.y>t.height)return null;var n=[e.x,e.y,1,1];Zs(n,n,t.pixelMatrixInverse),Ws(n,n,1/n[3]),n[0]/=t.worldSize,n[1]/=t.worldSize;var r=t._camera.position,i=_h(1,t.center.lat),a=[r[0],r[1],r[2]/i,0],o=Ls([],n.slice(0,3),a);zs(o,o);var s=this.raycast(a,o,this._exaggeration);return null!==s&&s?(Fs(a,a,o,s),a[3]=a[2],a[2]*=i,a):null}},{key:"drawDepth",value:function(){var e=this.painter,t=e.context,n=this.proxySourceCache,r=Math.ceil(e.width),i=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===i||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){var a=t.gl,o=t.createFramebuffer(r,i,!0);t.activeTexture.set(a.TEXTURE0);var s=new Jl(t,{width:r,height:i,data:null},a.RGBA);s.bind(a.NEAREST,a.CLAMP_TO_EDGE),o.colorAttachment.set(s.texture);var u=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,r,i);o.depthAttachment.set(u),this._depthFBO=o,this._depthTexture=s}t.bindFramebuffer.set(this._depthFBO.framebuffer),t.viewport.set([0,0,r,i]),function(e,t,n,r){var i=e.context,a=i.gl;i.clear({depth:1});var o,s=e.useProgram("terrainDepth"),u=new Lf(a.LESS,Lf.ReadWrite,e.depthRangeFor3D),c=m(r);try{for(c.s();!(o=c.n()).done;){var l=o.value,h=n.getTile(l),f=Ap(l.posMatrix,0);t.setupElevationDraw(h,s),s.draw(i,a.TRIANGLES,u,Ff.disabled,zf.unblended,Vf.backCCW,f,"terrain_depth",t.gridBuffer,t.gridIndexBuffer,t.gridNoSkirtSegments)}}catch(d){c.e(d)}finally{c.f()}}(e,this,n,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof ed)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=0;a<i.length;a++){var o=i[a],s=this._findTileCoveringTileID(o,e);if(s){var u=this._createProxiedId(o,s,n[o.key]&&n[o.key][e.id]);r.push(u),this.proxyToSource[o.key][e.id]=[u]}}for(var c=!1,l=0;l<t.length;l++){var h=e.getTile(t[l]);if(h&&h.hasData()){var f=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(f&&f.tileID.canonical.z!==h.tileID.canonical.z){var d=this.proxyToSource[f.tileID.key][e.id],p=this._createProxiedId(f.tileID,h,n[f.tileID.key]&&n[f.tileID.key][e.id]);d?d.splice(d.length-1,0,p):this.proxyToSource[f.tileID.key][e.id]=[p],r.push(p),c=!0}}}this._sourceTilesOverlap[e.id]=c}},{key:"_setupProxiedCoordsForImageSource",value:function(e,t,n){if(e.getSource().loaded())for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=e.getSource(),o=new _(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),s=a.coordinates.map(kh.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-o.x),e.min.y=Math.min(e.min.y,t.y-o.y),e.max.x=Math.max(e.max.x,t.x-o.x),e.max.y=Math.max(e.max.y,t.y-o.y),e}),{min:new _(Number.MAX_VALUE,Number.MAX_VALUE),max:new _(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(e,t){var n=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),i=Ko/(1<<e.canonical.z),a=t.wrap+t.canonical.x/(1<<t.canonical.z),o=t.canonical.y/(1<<t.canonical.z);return n+i<a+s.min.x||n>a+s.max.x||r+i<o+s.min.y||r>o+s.max.y},c=0;c<i.length;c++)for(var l=i[c],h=0;h<t.length;h++){var f=e.getTile(t[h]);if(f&&f.hasData()&&!u(l,f.tileID)){var d=this._createProxiedId(l,f,n[l.key]&&n[l.key][e.id]),p=this.proxyToSource[l.key][e.id];p?p.push(d):this.proxyToSource[l.key][e.id]=[d],r.push(d)}}}},{key:"_createProxiedId",value:function(e,t,n){var r=this.orthoMatrix;if(n){var i=n.find((function(e){return e.key===t.tileID.key}));if(i)return i}if(t.tileID.key!==e.key){var a,o,s,u=e.canonical.z-t.tileID.canonical.z;r=gs();var c=t.tileID.wrap-e.wrap<<e.overscaledZ;u>0?(o=(a=Ko>>u)*((t.tileID.canonical.x<<u)-e.canonical.x+c),s=a*((t.tileID.canonical.y<<u)-e.canonical.y)):(a=Ko<<-u,o=Ko*(t.tileID.canonical.x-(e.canonical.x+c<<-u)),s=Ko*(t.tileID.canonical.y-(e.canonical.y<<-u))),As(r,0,a,0,a,0,1),xs(r,r,[o,s,0])}return new jp(t.tileID,e.key,r)}},{key:"_findTileCoveringTileID",value:function(e,t){var n=t.getTile(e);if(n&&n.hasData())return n;var r=this._findCoveringTileCache[t.id],i=r[e.key];if((n=i?t.getTileByID(i):null)&&n.hasData()||null===i)return n;var a=n?n.tileID:e,o=a.overscaledZ,s=t.getSource().minzoom,u=[];if(!i){var c=t.getSource().maxzoom;if(e.canonical.z>=c){var l=e.canonical.z-c;t.getSource().reparseOverscaled?(o=Math.max(e.canonical.z+2,t.transform.tileZoom),a=new Ah(o,e.wrap,c,e.canonical.x>>l,e.canonical.y>>l)):0!==l&&(a=new Ah(o=c,e.wrap,c,e.canonical.x>>l,e.canonical.y>>l))}a.key!==e.key&&(u.push(a.key),n=t.getTile(a))}var h=function(e){u.forEach((function(t){r[t]=e})),u.length=0};for(o-=1;o>=s&&(!n||!n.hasData());o--){n&&h(n.tileID.key);var f=a.calculateScaledKey(o);if((n=t.getTileByID(f))&&n.hasData())break;var d=r[f];if(null===d)break;void 0===d?u.push(f):n=t.getTileByID(d)}return h(n?n.tileID.key:null),n&&n.hasData()?n:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(e){this.renderedToTile||(this.renderedToTile=!0)}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var e=function(e){var t,n,r,i=new Xa,a=131;for(n=1;n<129;n++){for(t=1;t<129;t++)r=n*a+t,i.emplaceBack(r,r+1),i.emplaceBack(r,r+a),i.emplaceBack(r+1,r+a),128===n&&i.emplaceBack(r+a,r+a+1);i.emplaceBack(r+1,r+1+a)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=Go.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),n}(function(){function e(){p(this,e)}return v(e,[{key:"getAtPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._source();if(!n)return t;if(e.y<0||e.y>1)return t;var r=n.getSource().maxzoom,i=1<<r,a=Math.floor(e.x),o=e.x-a,s=new Ah(r,a,r,Math.floor(o*i),Math.floor(e.y*i)),u=this.findDEMTileFor(s);if(!u||!u.dem)return t;var c=u.dem,l=1<<u.tileID.canonical.z,h=(o*l-u.tileID.canonical.x)*c.dim,f=(e.y*l-u.tileID.canonical.y)*c.dim,d=Math.floor(h),p=Math.floor(f);return this.exaggeration()*Nn(Nn(c.get(d,p),c.get(d,p+1),f-p),Nn(c.get(d+1,p),c.get(d+1,p+1),f-p),h-d)}},{key:"getAtTileOffset",value:function(e,t,n){var r=1<<e.canonical.z;return this.getAtPoint(new kh(e.wrap+(e.canonical.x+t/Ko)/r,(e.canonical.y+n/Ko)/r))}},{key:"getForTilePoints",value:function(e,t,n,r){var i=this,a=Wf.create(this,e,r);return!!a&&(t.forEach((function(e){e[2]=i.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z,a=e.canonical.x/i-r.canonical.x,o=e.canonical.y/i-r.canonical.y,s=0,u=0;u<e.canonical.z-r.canonical.z&&!n.leaves[s];u++){a*=2,o*=2;var c=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+c,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}());function zp(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}var Bp=function(){function e(t,n,r,i,a,o){p(this,e);var s=t.gl;this.program=s.createProgram();var u,c=zp(r.staticAttributes),l=i?i.getBinderAttributes():[],h=c.concat(l),f=r.staticUniforms?zp(r.staticUniforms):[],d=i?i.getBinderUniforms():[],v=f.concat(d),y=[],g=m(v);try{for(g.s();!(u=g.n()).done;){var b=u.value;y.indexOf(b)<0&&y.push(b)}}catch(O){g.e(O)}finally{g.f()}var _=i?i.defines():[],w=(_=_.concat(o.map((function(e){return"#define ".concat(e)})))).concat(_p.fragmentSource,r.fragmentSource).join("\n"),x=_.concat(_p.vertexSource,bp.vertexSource,r.vertexSource).join("\n"),k=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(k,w),s.compileShader(k),s.attachShader(this.program,k);var E=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(E,x),s.compileShader(E),s.attachShader(this.program,E),this.attributes={};var T={};this.numAttributes=h.length;for(var S=0;S<this.numAttributes;S++)h[S]&&(s.bindAttribLocation(this.program,S,h[S]),this.attributes[h[S]]=S);s.linkProgram(this.program),s.deleteShader(E),s.deleteShader(k);for(var I=0;I<y.length;I++){var C=y[I];if(C&&!T[C]){var A=s.getUniformLocation(this.program,C);A&&(T[C]=A)}}this.fixedUniforms=a(t,T),this.binderUniforms=i?i.getUniforms(t,T):[],-1!==o.indexOf("TERRAIN")&&(this.terrainUniforms=function(e,t){return{u_dem:new wo(e,t.u_dem),u_dem_prev:new wo(e,t.u_dem_prev),u_dem_unpack:new To(e,t.u_dem_unpack),u_dem_tl:new ko(e,t.u_dem_tl),u_dem_scale:new xo(e,t.u_dem_scale),u_dem_tl_prev:new ko(e,t.u_dem_tl_prev),u_dem_scale_prev:new xo(e,t.u_dem_scale_prev),u_dem_size:new xo(e,t.u_dem_size),u_dem_lerp:new xo(e,t.u_dem_lerp),u_exaggeration:new xo(e,t.u_exaggeration),u_depth:new wo(e,t.u_depth),u_depth_size_inv:new ko(e,t.u_depth_size_inv),u_meter_to_dem:new xo(e,t.u_meter_to_dem),u_label_plane_matrix_inv:new Co(e,t.u_label_plane_matrix_inv)}}(t,T))}}}return v(e,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(t[r])}}},{key:"draw",value:function(e,t,n,i,a,o,s,u,c,l,h,f,d,p,v,y){var g,b=e.gl;if(!this.failedToCreate){for(var _ in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(o),this.fixedUniforms)this.fixedUniforms[_].set(s[_]);p&&p.setUniforms(e,this.binderUniforms,f,{zoom:d});var w,x=(g={},r(g,b.LINES,2),r(g,b.TRIANGLES,3),r(g,b.LINE_STRIP,1),g)[t],k=m(h.get());try{for(k.s();!(w=k.n()).done;){var E=w.value,T=E.vaos||(E.vaos={});(T[u]||(T[u]=new kp)).bind(e,this,c,p?p.getPaintVertexBuffers():[],l,E.vertexOffset,v,y),b.drawElements(t,E.primitiveLength*x,b.UNSIGNED_SHORT,E.primitiveOffset*x*2)}}catch(S){k.e(S)}finally{k.f()}}}}],[{key:"cacheKey",value:function(e,t,n){var r,i="".concat(e).concat(n?n.cacheKey:""),a=m(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+="/".concat(o)}}catch(s){a.e(s)}finally{a.f()}return i}}]),e}();function Up(e,t,n){var r=1/fh(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,o=a*(n.tileID.canonical.x+n.tileID.wrap*i),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var Vp=function(e,t,n,r){var i,a,o,s,u=t.style.light,c=u.properties.get("position"),l=[c.x,c.y,c.z],h=ys();"viewport"===u.properties.get("anchor")&&(i=h,a=-t.transform.angle,o=Math.sin(a),s=Math.cos(a),i[0]=s,i[1]=o,i[2]=0,i[3]=-o,i[4]=s,i[5]=0,i[6]=0,i[7]=0,i[8]=1,function(e,t,n){var r=t[0],i=t[1],a=t[2];e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8]}(l,l,h));var f=u.properties.get("color");return{u_matrix:e,u_lightpos:l,u_lightintensity:u.properties.get("intensity"),u_lightcolor:[f.r,f.g,f.b],u_vertical_gradient:+n,u_opacity:r}},qp=function(e,t,n,r,i,a,o){return j(Vp(e,t,n,r),Up(a,t,o),{u_height_factor:-Math.pow(2,i.overscaledZ)/o.tileSize/8})},Gp=function(e){return{u_matrix:e}},Kp=function(e,t,n,r){return j(Gp(e),Up(n,t,r))},Hp=function(e,t){return{u_matrix:e,u_world:t}},Wp=function(e,t,n,r,i){return j(Kp(e,t,n,r),{u_world:i})},Zp=function(e,t,n,r){var i,a=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var o=fh(n,1,a.zoom);i=[o,o]}else i=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:se.devicePixelRatio,u_extrude_scale:i}},Xp=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Yp=function(e,t,n){var r=Ko/n.tileSize;return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_extrude_scale:[t.pixelsToGLUnits[0]/r,t.pixelsToGLUnits[1]/r]}},Qp=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},$p=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:fh(t,1,n),u_intensity:r}},Jp=function(e,t,n,r){var i=e.transform;return{u_matrix:iv(e,t,n,r),u_ratio:1/fh(t,1,i.zoom),u_device_pixel_ratio:se.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},ev=function(e,t,n,r,i){return j(Jp(e,t,n,r),{u_image:0,u_image_height:i})},tv=function(e,t,n,r,i){var a=e.transform,o=rv(t,a);return{u_matrix:iv(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_ratio:1/fh(t,1,a.zoom),u_device_pixel_ratio:se.devicePixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},nv=function(e,t,n,r,i,a){var o=e.lineAtlas,s=rv(t,e.transform),u="round"===n.layout.get("line-cap"),c=o.getDash(r.from,u),l=o.getDash(r.to,u),h=c.width*i.fromScale,f=l.width*i.toScale;return j(Jp(e,t,n,a),{u_patternscale_a:[s/h,-c.height/2],u_patternscale_b:[s/f,-l.height/2],u_sdfgamma:o.width/(256*Math.min(h,f)*se.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:l.y,u_mix:i.t})};function rv(e,t){return 1/fh(e,1,t.tileZoom)}function iv(e,t,n,r){return e.translatePosMatrix(r||t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var av=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(o=i.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:ov(i.paint.get("raster-hue-rotate"))};var a,o};function ov(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var sv,uv=function(e,t,n,r,i,a,o,s,u,c){var l=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:l.width/l.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},cv=function(e,t,n,r,i,a,o,s,u,c,l){var h=i.transform,f=h.cameraToCenterDistance,d=h._pitch;return j(uv(e,t,n,r,i,a,o,s,u,c),{u_gamma_scale:r?f*Math.cos(i.terrain?0:d):1,u_device_pixel_ratio:se.devicePixelRatio,u_is_halo:+l})},lv=function(e,t,n,r,i,a,o,s,u,c){return j(cv(e,t,n,r,i,a,o,s,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},hv=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},fv=function(e,t,n,r,i,a){return j(function(e,t,n,r){var i=n.imageManager.getPattern(e.from.toString()),a=n.imageManager.getPattern(e.to.toString()),o=n.imageManager.getPixelSize(),s=o.width,u=o.height,c=Math.pow(2,r.tileID.overscaledZ),l=r.tileSize*Math.pow(2,n.transform.tileZoom)/c,h=l*(r.tileID.canonical.x+r.tileID.wrap*c),f=l*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/fh(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,f>>16],u_pixel_coord_lower:[65535&h,65535&f]}}(r,a,n,i),{u_matrix:e,u_opacity:t})},dv={fillExtrusion:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_lightpos:new Eo(e,t.u_lightpos),u_lightintensity:new xo(e,t.u_lightintensity),u_lightcolor:new Eo(e,t.u_lightcolor),u_vertical_gradient:new xo(e,t.u_vertical_gradient),u_opacity:new xo(e,t.u_opacity)}},fillExtrusionPattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_lightpos:new Eo(e,t.u_lightpos),u_lightintensity:new xo(e,t.u_lightintensity),u_lightcolor:new Eo(e,t.u_lightcolor),u_vertical_gradient:new xo(e,t.u_vertical_gradient),u_height_factor:new xo(e,t.u_height_factor),u_image:new wo(e,t.u_image),u_texsize:new ko(e,t.u_texsize),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_scale:new Eo(e,t.u_scale),u_fade:new xo(e,t.u_fade),u_opacity:new xo(e,t.u_opacity)}},fill:function(e,t){return{u_matrix:new Co(e,t.u_matrix)}},fillPattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image:new wo(e,t.u_image),u_texsize:new ko(e,t.u_texsize),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_scale:new Eo(e,t.u_scale),u_fade:new xo(e,t.u_fade)}},fillOutline:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_world:new ko(e,t.u_world)}},fillOutlinePattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_world:new ko(e,t.u_world),u_image:new wo(e,t.u_image),u_texsize:new ko(e,t.u_texsize),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_scale:new Eo(e,t.u_scale),u_fade:new xo(e,t.u_fade)}},circle:function(e,t){return{u_camera_to_center_distance:new xo(e,t.u_camera_to_center_distance),u_extrude_scale:new ko(e,t.u_extrude_scale),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_matrix:new Co(e,t.u_matrix)}},collisionBox:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_camera_to_center_distance:new xo(e,t.u_camera_to_center_distance),u_extrude_scale:new ko(e,t.u_extrude_scale)}},collisionCircle:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_inv_matrix:new Co(e,t.u_inv_matrix),u_camera_to_center_distance:new xo(e,t.u_camera_to_center_distance),u_viewport_size:new ko(e,t.u_viewport_size)}},debug:function(e,t){return{u_color:new So(e,t.u_color),u_matrix:new Co(e,t.u_matrix),u_overlay:new wo(e,t.u_overlay),u_overlay_scale:new xo(e,t.u_overlay_scale)}},clippingMask:function(e,t){return{u_matrix:new Co(e,t.u_matrix)}},heatmap:function(e,t){return{u_extrude_scale:new xo(e,t.u_extrude_scale),u_intensity:new xo(e,t.u_intensity),u_matrix:new Co(e,t.u_matrix)}},heatmapTexture:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_world:new ko(e,t.u_world),u_image:new wo(e,t.u_image),u_color_ramp:new wo(e,t.u_color_ramp),u_opacity:new xo(e,t.u_opacity)}},hillshade:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image:new wo(e,t.u_image),u_latrange:new ko(e,t.u_latrange),u_light:new ko(e,t.u_light),u_shadow:new So(e,t.u_shadow),u_highlight:new So(e,t.u_highlight),u_accent:new So(e,t.u_accent)}},hillshadePrepare:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_image:new wo(e,t.u_image),u_dimension:new ko(e,t.u_dimension),u_zoom:new xo(e,t.u_zoom),u_unpack:new To(e,t.u_unpack)}},line:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_ratio:new xo(e,t.u_ratio),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_units_to_pixels:new ko(e,t.u_units_to_pixels)}},lineGradient:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_ratio:new xo(e,t.u_ratio),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_units_to_pixels:new ko(e,t.u_units_to_pixels),u_image:new wo(e,t.u_image),u_image_height:new xo(e,t.u_image_height)}},linePattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_texsize:new ko(e,t.u_texsize),u_ratio:new xo(e,t.u_ratio),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_image:new wo(e,t.u_image),u_units_to_pixels:new ko(e,t.u_units_to_pixels),u_scale:new Eo(e,t.u_scale),u_fade:new xo(e,t.u_fade)}},lineSDF:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_ratio:new xo(e,t.u_ratio),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_units_to_pixels:new ko(e,t.u_units_to_pixels),u_patternscale_a:new ko(e,t.u_patternscale_a),u_patternscale_b:new ko(e,t.u_patternscale_b),u_sdfgamma:new xo(e,t.u_sdfgamma),u_image:new wo(e,t.u_image),u_tex_y_a:new xo(e,t.u_tex_y_a),u_tex_y_b:new xo(e,t.u_tex_y_b),u_mix:new xo(e,t.u_mix)}},raster:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_tl_parent:new ko(e,t.u_tl_parent),u_scale_parent:new xo(e,t.u_scale_parent),u_buffer_scale:new xo(e,t.u_buffer_scale),u_fade_t:new xo(e,t.u_fade_t),u_opacity:new xo(e,t.u_opacity),u_image0:new wo(e,t.u_image0),u_image1:new wo(e,t.u_image1),u_brightness_low:new xo(e,t.u_brightness_low),u_brightness_high:new xo(e,t.u_brightness_high),u_saturation_factor:new xo(e,t.u_saturation_factor),u_contrast_factor:new xo(e,t.u_contrast_factor),u_spin_weights:new Eo(e,t.u_spin_weights)}},symbolIcon:function(e,t){return{u_is_size_zoom_constant:new wo(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new wo(e,t.u_is_size_feature_constant),u_size_t:new xo(e,t.u_size_t),u_size:new xo(e,t.u_size),u_camera_to_center_distance:new xo(e,t.u_camera_to_center_distance),u_pitch:new xo(e,t.u_pitch),u_rotate_symbol:new wo(e,t.u_rotate_symbol),u_aspect_ratio:new xo(e,t.u_aspect_ratio),u_fade_change:new xo(e,t.u_fade_change),u_matrix:new Co(e,t.u_matrix),u_label_plane_matrix:new Co(e,t.u_label_plane_matrix),u_coord_matrix:new Co(e,t.u_coord_matrix),u_is_text:new wo(e,t.u_is_text),u_pitch_with_map:new wo(e,t.u_pitch_with_map),u_texsize:new ko(e,t.u_texsize),u_texture:new wo(e,t.u_texture)}},symbolSDF:function(e,t){return{u_is_size_zoom_constant:new wo(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new wo(e,t.u_is_size_feature_constant),u_size_t:new xo(e,t.u_size_t),u_size:new xo(e,t.u_size),u_camera_to_center_distance:new xo(e,t.u_camera_to_center_distance),u_pitch:new xo(e,t.u_pitch),u_rotate_symbol:new wo(e,t.u_rotate_symbol),u_aspect_ratio:new xo(e,t.u_aspect_ratio),u_fade_change:new xo(e,t.u_fade_change),u_matrix:new Co(e,t.u_matrix),u_label_plane_matrix:new Co(e,t.u_label_plane_matrix),u_coord_matrix:new Co(e,t.u_coord_matrix),u_is_text:new wo(e,t.u_is_text),u_pitch_with_map:new wo(e,t.u_pitch_with_map),u_texsize:new ko(e,t.u_texsize),u_texture:new wo(e,t.u_texture),u_gamma_scale:new xo(e,t.u_gamma_scale),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_is_halo:new wo(e,t.u_is_halo)}},symbolTextAndIcon:function(e,t){return{u_is_size_zoom_constant:new wo(e,t.u_is_size_zoom_constant),u_is_size_feature_constant:new wo(e,t.u_is_size_feature_constant),u_size_t:new xo(e,t.u_size_t),u_size:new xo(e,t.u_size),u_camera_to_center_distance:new xo(e,t.u_camera_to_center_distance),u_pitch:new xo(e,t.u_pitch),u_rotate_symbol:new wo(e,t.u_rotate_symbol),u_aspect_ratio:new xo(e,t.u_aspect_ratio),u_fade_change:new xo(e,t.u_fade_change),u_matrix:new Co(e,t.u_matrix),u_label_plane_matrix:new Co(e,t.u_label_plane_matrix),u_coord_matrix:new Co(e,t.u_coord_matrix),u_is_text:new wo(e,t.u_is_text),u_pitch_with_map:new wo(e,t.u_pitch_with_map),u_texsize:new ko(e,t.u_texsize),u_texsize_icon:new ko(e,t.u_texsize_icon),u_texture:new wo(e,t.u_texture),u_texture_icon:new wo(e,t.u_texture_icon),u_gamma_scale:new xo(e,t.u_gamma_scale),u_device_pixel_ratio:new xo(e,t.u_device_pixel_ratio),u_is_halo:new wo(e,t.u_is_halo)}},background:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_opacity:new xo(e,t.u_opacity),u_color:new So(e,t.u_color)}},backgroundPattern:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_opacity:new xo(e,t.u_opacity),u_image:new wo(e,t.u_image),u_pattern_tl_a:new ko(e,t.u_pattern_tl_a),u_pattern_br_a:new ko(e,t.u_pattern_br_a),u_pattern_tl_b:new ko(e,t.u_pattern_tl_b),u_pattern_br_b:new ko(e,t.u_pattern_br_b),u_texsize:new ko(e,t.u_texsize),u_mix:new xo(e,t.u_mix),u_pattern_size_a:new ko(e,t.u_pattern_size_a),u_pattern_size_b:new ko(e,t.u_pattern_size_b),u_scale_a:new xo(e,t.u_scale_a),u_scale_b:new xo(e,t.u_scale_b),u_pixel_coord_upper:new ko(e,t.u_pixel_coord_upper),u_pixel_coord_lower:new ko(e,t.u_pixel_coord_lower),u_tile_units_to_pixels:new xo(e,t.u_tile_units_to_pixels)}},terrainRaster:Cp,terrainDepth:Cp,skybox:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_sun_direction:new Eo(e,t.u_sun_direction),u_cubemap:new wo(e,t.u_cubemap),u_opacity:new xo(e,t.u_opacity),u_temporal_offset:new xo(e,t.u_temporal_offset)}},skyboxGradient:function(e,t){return{u_matrix:new Co(e,t.u_matrix),u_color_ramp:new wo(e,t.u_color_ramp),u_center_direction:new Eo(e,t.u_center_direction),u_radius:new xo(e,t.u_radius),u_opacity:new xo(e,t.u_opacity),u_temporal_offset:new xo(e,t.u_temporal_offset)}},skyboxCapture:function(e,t){return{u_matrix_3f:new Oo(e,t.u_matrix_3f),u_sun_direction:new Eo(e,t.u_sun_direction),u_sun_intensity:new xo(e,t.u_sun_intensity),u_color_tint_r:new To(e,t.u_color_tint_r),u_color_tint_m:new To(e,t.u_color_tint_m),u_luminance:new xo(e,t.u_luminance)}}};function pv(e,t,n,r,i,a,o){for(var s=e.context,u=s.gl,c=e.useProgram("collisionBox"),l=[],h=0,f=0,d=0;d<r.length;d++){var p=r[d],v=t.getTile(p),m=v.getBucket(n);if(m){var y=p.posMatrix;0===i[0]&&0===i[1]||(y=e.translatePosMatrix(p.posMatrix,v,i,a));var g=o?m.textCollisionBox:m.iconCollisionBox,b=m.collisionCircleArray;if(b.length>0){var _=gs(),w=y;Os(_,m.placementInvProjMatrix,e.transform.glCoordMatrix),Os(_,_,m.placementViewportMatrix),l.push({circleArray:b,circleOffset:f,transform:w,invTransform:_}),f=h+=b.length/4}g&&(e.terrain&&e.terrain.setupElevationDraw(v,c),c.draw(s,u.LINES,Lf.disabled,Ff.disabled,e.colorModeForRenderPass(),Vf.disabled,Yp(y,e.transform,v),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,e.transform.zoom,null,g.collisionVertexBuffer,g.collisionVertexBufferExt))}}if(o&&l.length){var x=e.useProgram("collisionCircle"),k=new Ua;k.resize(4*h),k._trim();for(var E=0,T=0,S=l;T<S.length;T++)for(var I=S[T],C=0;C<I.circleArray.length/4;C++){var A=4*C,O=I.circleArray[A+0],P=I.circleArray[A+1],D=I.circleArray[A+2],R=I.circleArray[A+3];k.emplace(E++,O,P,D,R,0),k.emplace(E++,O,P,D,R,1),k.emplace(E++,O,P,D,R,2),k.emplace(E++,O,P,D,R,3)}(!sv||sv.length<2*h)&&(sv=function(e){var t=2*e,n=new qa;n.resize(t),n._trim();for(var r=0;r<t;r++){var i=6*r;n.uint16[i+0]=4*r+0,n.uint16[i+1]=4*r+1,n.uint16[i+2]=4*r+2,n.uint16[i+3]=4*r+2,n.uint16[i+4]=4*r+3,n.uint16[i+5]=4*r+0}return n}(h));for(var M,N=s.createIndexBuffer(sv,!0),L=s.createVertexBuffer(k,jc.members,!0),j=0,F=l;j<F.length;j++){var z=F[j],B={u_matrix:z.transform,u_inv_matrix:z.invTransform,u_camera_to_center_distance:(M=e.transform).cameraToCenterDistance,u_viewport_size:[M.width,M.height]};x.draw(s,u.TRIANGLES,Lf.disabled,Ff.disabled,e.colorModeForRenderPass(),Vf.disabled,B,n.id,L,N,Go.simpleSegment(0,2*z.circleOffset,z.circleArray.length,z.circleArray.length/2),null,e.transform.zoom,null,null,null)}L.destroy(),N.destroy()}}var vv=bs(new Float32Array(16));function mv(e,t,n,r,i,a){var o=bl(e),s=-(o.horizontalAlign-.5)*t,u=-(o.verticalAlign-.5)*n,c=Cl(e,r);return new _((s/i+c[0])*a,(u/i+c[1])*a)}function yv(e,t,n,r,i,a,o,s,u,c,l,h){var f=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,v={};d.clear();for(var m=0;m<f.length;m++){var y=f.get(m),g=e.allowVerticalPlacement&&!y.placedOrientation,b=y.hidden||!y.crossTileID||g?null:r[y.crossTileID];if(b){var w=new _(y.anchorX,y.anchorY),x=h(w),k=Id(w,n?s:o,x),E=Cd(a.cameraToCenterDistance,k.signedDistanceFromCamera),T=i.evaluateSizeForFeature(e.textSizeData,c,y)*E/24;n&&(T*=e.tilePixelRatio/u);for(var S=b.width,I=b.height,C=mv(b.anchor,S,I,b.textOffset,b.textBoxScale,T),A=n?Id(w.add(C),o,x).point:k.point.add(t?C.rotate(-a.angle):C),O=e.allowVerticalPlacement&&y.placedOrientation===gl.vertical?Math.PI/2:0,P=0;P<y.numGlyphs;P++)Dl(d,A,O);l&&y.associatedIconIndex>=0&&(v[y.associatedIconIndex]={shiftedAnchor:A,angle:O})}else jd(y.numGlyphs,d)}if(l){p.clear();for(var D=e.icon.placedSymbolArray,R=0;R<D.length;R++){var M=D.get(R);if(M.hidden)jd(M.numGlyphs,p);else{var N=v[R];if(N)for(var L=0;L<M.numGlyphs;L++)Dl(p,N.shiftedAnchor,N.angle);else jd(M.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function gv(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function bv(e,t,n,r,i,a,o,s,u,c,l,h){var f,d=e.context,p=d.gl,v=e.transform,y="map"===s,g="map"===u,b=y&&"point"!==n.layout.get("symbol-placement"),_=y&&!g&&!b,w=void 0!==n.layout.get("symbol-sort-key").constantOr(1),x=!1,k=e.depthModeForSublayer(0,Lf.ReadOnly),E=n.layout.get("text-variable-anchor"),T=[],S=e.terrain&&g?["PITCH_WITH_MAP_TERRAIN"]:null,I=m(r);try{var C=function(){var r=f.value,s=t.getTile(r),u=s.getBucket(n);if(!u)return"continue";var l=i?u.text:u.icon;if(!l||!l.segments.get().length)return"continue";var h=l.programConfigurations.get(n.id),d=i||u.sdfIcons,k=i?u.textSizeData:u.iconSizeData,I=g||0!==v.pitch,C=e.useProgram(gv(d,i,u),h,S),A=Uc(k,v.zoom),O=void 0,P=void 0,D=void 0,R=void 0,M=[0,0],N=null;if(i){if(P=s.glyphAtlasTexture,D=p.LINEAR,O=s.glyphAtlasTexture.size,u.iconsInText){M=s.imageAtlasTexture.size,N=s.imageAtlasTexture;var L="composite"===k.kind||"camera"===k.kind;R=I||e.options.rotating||e.options.zooming||L?p.LINEAR:p.NEAREST}}else{var j=1!==n.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;P=s.imageAtlasTexture,D=d||e.options.rotating||e.options.zooming||j||I?p.LINEAR:p.NEAREST,O=s.imageAtlasTexture.size}var F=fh(s,1,e.transform.zoom),z=Td(r.posMatrix,g,y,e.transform,F),B=e.terrain&&g&&b?_s(new Float32Array(16),z):vv,U=Sd(r.posMatrix,g,y,e.transform,F),V=E&&u.hasTextData(),q="none"!==n.layout.get("icon-text-fit")&&V&&u.hasIconData();if(b){var G=v.elevation;Od(u,r.posMatrix,e,i,z,U,g,c,G?function(e){return G.getAtTileOffset(r,e.x,e.y)}:null)}var K=e.translatePosMatrix(r.posMatrix,s,a,o),H=b||i&&E||q?vv:z,W=e.translatePosMatrix(U,s,a,o,!0),Z=d&&0!==n.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1),X={program:C,buffers:l,uniformValues:d?u.iconsInText?lv(k.kind,A,_,g,e,K,H,W,O,M):cv(k.kind,A,_,g,e,K,H,W,i,O,!0):uv(k.kind,A,_,g,e,K,H,W,i,O),atlasTexture:P,atlasTextureIcon:N,atlasInterpolation:D,atlasInterpolationIcon:R,isSDF:d,hasHalo:Z,tile:s,labelPlaneMatrixInv:B};if(w&&u.canOverlap){x=!0;var Y,Q=l.segments.get(),$=m(Q);try{for($.s();!(Y=$.n()).done;){var J=Y.value;T.push({segments:new Go([J]),sortKey:J.sortKey,state:X})}}catch(ee){$.e(ee)}finally{$.f()}}else T.push({segments:l.segments,sortKey:0,state:X})};for(I.s();!(f=I.n()).done;)C()}catch(M){I.e(M)}finally{I.f()}x&&T.sort((function(e,t){return e.sortKey-t.sortKey}));for(var A=0,O=T;A<O.length;A++){var P=O[A],D=P.state;if(e.terrain&&e.terrain.setupElevationDraw(D.tile,D.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:D.labelPlaneMatrixInv}),d.activeTexture.set(p.TEXTURE0),D.atlasTexture.bind(D.atlasInterpolation,p.CLAMP_TO_EDGE),D.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),D.atlasTextureIcon&&D.atlasTextureIcon.bind(D.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),D.isSDF){var R=D.uniformValues;D.hasHalo&&(R.u_is_halo=1,_v(D.buffers,P.segments,n,e,D.program,k,l,h,R)),R.u_is_halo=0}_v(D.buffers,P.segments,n,e,D.program,k,l,h,D.uniformValues)}}function _v(e,t,n,r,i,a,o,s,u){var c=r.context;i.draw(c,c.gl.TRIANGLES,a,o,s,Vf.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function wv(e,t,n,r,i,a,o){var s,u,c,l,h,f=e.context.gl,d=n.paint.get("fill-pattern"),p=d&&d.constantOr(1),v=n.getCrossfadeParameters();o?(u=p&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=f.LINES):(u=p?"fillPattern":"fill",s=f.TRIANGLES);var y,g=m(r);try{for(g.s();!(y=g.n()).done;){var b=y.value,_=t.getTile(b);if(!p||_.patternsLoaded()){var w=_.getBucket(n);if(w){e.prepareDrawTile(b);var x=w.programConfigurations.get(n.id),k=e.useProgram(u,x);p&&(e.context.activeTexture.set(f.TEXTURE0),_.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),x.updatePaintBuffers(v));var E=d.constantOr(null);if(E&&_.imageAtlas){var T=_.imageAtlas,S=T.patternPositions[E.to.toString()],I=T.patternPositions[E.from.toString()];S&&I&&x.setConstantPatternPositions(S,I)}var C=e.translatePosMatrix(b.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){l=w.indexBuffer2,h=w.segments2;var A=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[f.drawingBufferWidth,f.drawingBufferHeight];c="fillOutlinePattern"===u&&p?Wp(C,e,v,_,A):Hp(C,A)}else l=w.indexBuffer,h=w.segments,c=p?Kp(C,e,v,_):Gp(C);k.draw(e.context,s,i,e.stencilModeForClipping(b),a,Vf.disabled,c,n.id,w.layoutVertexBuffer,l,h,n.paint,e.transform.zoom,x)}}}}catch(O){g.e(O)}finally{g.f()}}function xv(e,t,n,r,i,a,o){var s,u=e.context,c=u.gl,l=n.paint.get("fill-extrusion-pattern"),h=l.constantOr(1),f=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity"),p=m(r);try{for(p.s();!(s=p.n()).done;){var v=s.value,y=t.getTile(v),g=y.getBucket(n);if(g){var b=g.programConfigurations.get(n.id),_=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",b);if(e.terrain){var w=e.terrain;if(!g.enableTerrain)continue;if(w.setupElevationDraw(y,_,{useMeterToDem:!0}),kv(u,t,v,g,n,w),!g.centroidVertexBuffer){var x=_.attributes.a_centroid_pos;void 0!==x&&c.vertexAttrib2f(x,0,0)}}h&&(e.context.activeTexture.set(c.TEXTURE0),y.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),b.updatePaintBuffers(f));var k=l.constantOr(null);if(k&&y.imageAtlas){var E=y.imageAtlas,T=E.patternPositions[k.to.toString()],S=E.patternPositions[k.from.toString()];T&&S&&b.setConstantPatternPositions(T,S)}var I=e.translatePosMatrix(v.posMatrix,y,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),C=n.paint.get("fill-extrusion-vertical-gradient"),A=h?qp(I,e,C,d,v,f,y):Vp(I,e,C,d);_.draw(u,u.gl.TRIANGLES,i,a,o,Vf.backCCW,A,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,e.transform.zoom,b,e.terrain?g.centroidVertexBuffer:null)}}}catch(O){p.e(O)}finally{p.f()}}function kv(e,t,n,r,i,a){for(var o,s,u,c=[function(e){var t=e.canonical.x-1,n=e.wrap;return t<0&&(t=(1<<e.canonical.z)-1,n--),new Ah(e.overscaledZ,n,e.canonical.z,t,e.canonical.y)},function(e){var t=e.canonical.x+1,n=e.wrap;return t===1<<e.canonical.z&&(t=0,n++),new Ah(e.overscaledZ,n,e.canonical.z,t,e.canonical.y)},function(e){return new Ah(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1)},function(e){return new Ah(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)}],l=function(e){var n,r,a,o=t.getSource().maxzoom,s=function(e){var n=t.getTileByID(e);if(n&&n.hasData())return n.getBucket(i)};return(e.overscaledZ===e.canonical.z||e.overscaledZ>=o)&&(n=s(e.key)),e.overscaledZ>=o&&(r=s(e.calculateScaledKey(e.overscaledZ+1))),e.overscaledZ>o&&(a=s(e.calculateScaledKey(e.overscaledZ-1))),n||r||a},h=[0,0,0],f=function(e,t){return h[0]=Math.min(e.min.y,t.min.y),h[1]=Math.max(e.max.y,t.max.y),h[2]=Ko-t.min.x>e.max.x?t.min.x-Ko:e.max.x,h},d=function(e,t){return h[0]=Math.min(e.min.x,t.min.x),h[1]=Math.max(e.max.x,t.max.x),h[2]=Ko-t.min.y>e.max.y?t.min.y-Ko:e.max.y,h},p=[function(e,t){return f(e,t)},function(e,t){return f(t,e)},function(e,t){return d(e,t)},function(e,t){return d(t,e)}],v=new _(0,0),m=function(e,t,r,i,c){var l=[[i?r:e,i?e:r,0],[i?r:t,i?t:r,0]],h=c<0?Ko+c:c,f=[i?h:(e+t)/2,i?(e+t)/2:h,0];return 0===r&&c<0||0!==r&&c>0?a.getForTilePoints(u,[f],!0,s):l.push(f),a.getForTilePoints(n,l,!0,o),Math.max(l[0][2],l[1][2],f[2])/a.exaggeration()},y=0;y<4;y++){var g=r.borders[y];if(0===g.length&&(r.borderDone[y]=!0),!r.borderDone[y]){var b=u=c[y](n),w=l(b);if(w&&w.enableTerrain&&(s=a.findDEMTileFor(b))&&s.dem){if(!o){var x=a.findDEMTileFor(n);if(!x||!x.dem)return;o=x}for(var k=(y<2?1:5)-y,E=w.borders[k],T=0,S=0;S<g.length;S++){for(var I=r.featuresOnBorder[g[S]],C=I.borders[y],A=void 0;T<E.length&&!((A=w.featuresOnBorder[E[T]]).borders[k][1]>C[0]+3);)w.borderDone[k]||w.encodeCentroid(void 0,A,!1),T++;if(A&&T<E.length){for(var O=T,P=0;!(A.borders[k][0]>C[1]-3)&&(P++,++T!==E.length);)A=w.featuresOnBorder[E[T]];if(A=w.featuresOnBorder[E[O]],I.intersectsCount()>1||A.intersectsCount()>1||1!==P){1!==P&&(T=O),r.encodeCentroid(void 0,I,!1),w.borderDone[k]||w.encodeCentroid(void 0,A,!1);continue}var D=p[y](I,A),R=y%2?8191:0;v.x=m(D[0],Math.min(8191,D[1]),R,y<2,D[2]),v.y=0,r.encodeCentroid(v,I,!1),w.borderDone[k]||w.encodeCentroid(v,A,!1)}else r.encodeCentroid(void 0,I,!1)}r.borderDone[y]=r.needsCentroidUpdate=!0,w.borderDone[k]||(w.borderDone[k]=w.needsCentroidUpdate=!0)}}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}var Ev=new Vt(1,0,0,1),Tv=new Vt(0,1,0,1),Sv=new Vt(0,0,1,1),Iv=new Vt(1,0,1,1),Cv=new Vt(0,1,1,1);function Av(e,t,n,r){Pv(e,0,t+n/2,e.transform.width,n,r)}function Ov(e,t,n,r){Pv(e,t-n/2,0,n,e.transform.height,r)}function Pv(e,t,n,r,i,a){var o=e.context,s=o.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*se.devicePixelRatio,n*se.devicePixelRatio,r*se.devicePixelRatio,i*se.devicePixelRatio),o.clear({color:a}),s.disable(s.SCISSOR_TEST)}function Dv(e,t,n){var r=e.context,i=r.gl,a=n.posMatrix,o=e.useProgram("debug"),s=t.getTileByID(n.key);e.terrain&&e.terrain.setupElevationDraw(s,o);var u=Lf.disabled,c=Ff.disabled,l=e.colorModeForRenderPass(),h="$debug";r.activeTexture.set(i.TEXTURE0),e.emptyTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE),o.draw(r,i.LINE_STRIP,u,c,l,Vf.disabled,Qp(a,Vt.red),h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var f=s.latestRawTileData,d=Math.floor((f&&f.byteLength||0)/1024),p=t.getTile(n).tileSize,v=512/Math.min(p,512)*(n.overscaledZ/e.transform.zoom)*.5,m=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(m+=" => ".concat(n.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,"".concat(m," ").concat(d,"kb")),o.draw(r,i.TRIANGLES,u,c,zf.alphaBlended,Vf.disabled,Qp(a,Vt.transparent,v),h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var Rv=Aa([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Mv(e,t,n,r){e.emplaceBack(t,n,r)}var Nv=function e(t){p(this,e),this.vertexArray=new ja,this.indices=new qa,Mv(this.vertexArray,-1,-1,1),Mv(this.vertexArray,1,-1,1),Mv(this.vertexArray,-1,1,1),Mv(this.vertexArray,1,1,1),Mv(this.vertexArray,-1,-1,-1),Mv(this.vertexArray,1,-1,-1),Mv(this.vertexArray,-1,1,-1),Mv(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Rv),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=Go.simpleSegment(0,0,36,12)};function Lv(e,t,n,r,i,a){var o,s,u=e.gl,c=t.paint.get("sky-atmosphere-color"),l=t.paint.get("sky-atmosphere-halo-color"),h=t.paint.get("sky-atmosphere-sun-intensity"),f=function(e,t,n,r,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(((o=[])[0]=(s=r)[0],o[1]=s[1],o[2]=s[2],o[3]=s[4],o[4]=s[5],o[5]=s[6],o[6]=s[8],o[7]=s[9],o[8]=s[10],o),i,h,c,l);u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_CUBE_MAP_POSITIVE_X+a,t.skyboxTexture,0),n.draw(e,u.TRIANGLES,Lf.disabled,Ff.disabled,zf.unblended,Vf.frontCW,f,"skyboxCapture",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}var jv={symbol:function(e,t,n,r,i){if("translucent"===e.renderPass){var a=Ff.disabled,o=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,t,n,r,i,a,o){var s,u=t.transform,c="map"===i,l="map"===a,h=m(e);try{var f=function(){var e=s.value,i=r.getTile(e),a=i.getBucket(n);if(!a||!a.text||!a.text.segments.get().length)return"continue";var h=Uc(a.textSizeData,u.zoom),f=fh(i,1,t.transform.zoom),d=Td(e.posMatrix,l,c,t.transform,f),p="none"!==n.layout.get("icon-text-fit")&&a.hasIconData();if(h){var v=Math.pow(2,u.zoom-i.tileID.overscaledZ),m=u.elevation;yv(a,c,l,o,Vc,u,d,e.posMatrix,v,h,p,m?function(t){return m.getAtTileOffset(e,t.x,t.y)}:function(e){return 0})}};for(h.s();!(s=h.n()).done;)f()}catch(d){h.e(d)}finally{h.f()}}(r,e,n,t,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),i),0!==n.paint.get("icon-opacity").constantOr(1)&&bv(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,o),0!==n.paint.get("text-opacity").constantOr(1)&&bv(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,o),t.map.showCollisionBoxes&&(pv(e,t,n,r,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),pv(e,t,n,r,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity"),s=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==i.constantOr(1)||0!==a.constantOr(1)&&0!==o.constantOr(1)){for(var u=e.context,c=u.gl,l=e.depthModeForSublayer(0,Lf.ReadOnly),h=Ff.disabled,f=e.colorModeForRenderPass(),d=[],p=0;p<r.length;p++){var v=r[p],y=t.getTile(v),g=y.getBucket(n);if(g){var b=g.programConfigurations.get(n.id),_=Xp(n),w={programConfiguration:b,program:e.useProgram("circle",b,_),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:Zp(e,v,y,n),tile:y};if(s){var x,k=g.segments.get(),E=m(k);try{for(E.s();!(x=E.n()).done;){var T=x.value;d.push({segments:new Go([T]),sortKey:T.sortKey,state:w})}}catch(j){E.e(j)}finally{E.f()}}else d.push({segments:g.segments,sortKey:0,state:w})}}s&&d.sort((function(e,t){return e.sortKey-t.sortKey}));for(var S=0,I=d;S<I.length;S++){var C=I[S],A=C.state,O=A.programConfiguration,P=A.program,D=A.layoutVertexBuffer,R=A.indexBuffer,M=A.uniformValues,N=A.tile,L=C.segments;e.terrain&&e.terrain.setupElevationDraw(N,P,{useDepthForOcclusion:!0}),P.draw(u,c.TRIANGLES,l,h,f,Vf.disabled,M,n.id,D,R,L,n.paint,e.transform.zoom,O)}}}},heatmap:function(e,t,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var i=e.context,a=i.gl,o=Ff.disabled,s=new zf([a.ONE,a.ONE],Vt.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,t,a,i)}}(i,e,n),i.clear({color:Vt.transparent});for(var u=0;u<r.length;u++){var c=r[u];if(!t.hasRenderableParent(c)){var l=t.getTile(c),h=l.getBucket(n);if(h){var f=h.programConfigurations.get(n.id),d=e.useProgram("heatmap",f),p=e.transform.zoom;e.terrain&&e.terrain.setupElevationDraw(l,d),d.draw(i,a.TRIANGLES,Lf.disabled,o,s,Vf.disabled,$p(c.posMatrix,l,p,n.paint.get("heatmap-intensity")),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,n.paint,e.transform.zoom,f)}}}i.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,t){var n=e.context,r=n.gl,i=t.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var a=t.colorRampTexture;a||(a=t.colorRampTexture=new Jl(n,t.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,Lf.disabled,Ff.disabled,e.colorModeForRenderPass(),Vf.disabled,function(e,t,n,r){var i=gs();As(i,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:i,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(e,t),t.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,t.paint,e.transform.zoom)}}(e,n))},line:function(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0!==i.constantOr(1)&&0!==a.constantOr(1)){var o,s,u=e.depthModeForSublayer(0,Lf.ReadOnly),c=e.colorModeForRenderPass(),l=n.paint.get("line-dasharray"),h=n.paint.get("line-pattern"),f=h.constantOr(1),d=n.paint.get("line-gradient"),p=n.getCrossfadeParameters(),v=f?"linePattern":l?"lineSDF":d?"lineGradient":"line",y=e.context,g=y.gl,b=!0,_=m(r);try{for(_.s();!(o=_.n()).done;){var w=o.value,x=t.getTile(w);if(!f||x.patternsLoaded()){var k=x.getBucket(n);if(k){e.prepareDrawTile(w);var E=k.programConfigurations.get(n.id),T=e.context.program.get(),S=e.useProgram(v,E),I=b||S.program!==T,C=h.constantOr(null);if(C&&x.imageAtlas){var A=x.imageAtlas,O=A.patternPositions[C.to.toString()],P=A.patternPositions[C.from.toString()];O&&P&&E.setConstantPatternPositions(O,P)}var D=e.terrain?w.posMatrix:null,M=f?tv(e,x,n,p,D):l?nv(e,x,n,l,p,D):d?ev(e,x,n,D,k.lineClipsArray.length):Jp(e,x,n,D);if(f)y.activeTexture.set(g.TEXTURE0),x.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),E.updatePaintBuffers(p);else if(l&&(I||e.lineAtlas.dirty))y.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(y);else if(d){var N=k.gradients[n.id],L=N.texture;if(n.gradientVersion!==N.version){var j=256;if(n.stepInterpolant){var F=t.getSource().maxzoom,z=w.canonical.z===F?Math.ceil(1<<e.transform.maxZoom-w.canonical.z):1;j=R((s=k.maxLineLength/Ko*1024*z)<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2)),256,y.maxTextureSize)}N.gradient=fu({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:j,image:N.gradient||void 0,clips:k.lineClipsArray}),N.texture?N.texture.update(N.gradient):N.texture=new Jl(y,N.gradient,g.RGBA),N.version=n.gradientVersion,L=N.texture}y.activeTexture.set(g.TEXTURE0),L.bind(n.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}S.draw(y,g.TRIANGLES,u,e.stencilModeForClipping(w),c,Vf.disabled,M,n.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,n.paint,e.transform.zoom,E,k.layoutVertexBuffer2),b=!1}}}}catch(B){_.e(B)}finally{_.f()}}}},fill:function(e,t,n,r){var i=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var o=e.colorModeForRenderPass(),s=n.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!s.constantOr(1)&&1===i.constantOr(Vt.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Lf.ReadWrite:Lf.ReadOnly);wv(e,t,n,r,c,o,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var l=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Lf.ReadOnly);wv(e,t,n,r,l,o,!0)}}},"fill-extrusion":function(e,t,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===e.renderPass){var a=new Lf(e.context.gl.LEQUAL,Lf.ReadWrite,e.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))xv(e,t,n,r,a,Ff.disabled,zf.disabled),xv(e,t,n,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();xv(e,t,n,r,a,Ff.disabled,o)}}},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var i,a=e.context,o=e.depthModeForSublayer(0,Lf.ReadOnly),s=e.colorModeForRenderPass(),u=e.terrain&&e.terrain.renderingToTexture,c="translucent"!==e.renderPass||u?[{},r]:e.stencilConfigForOverlap(r),h=l(c,2),f=h[0],d=h[1],p=m(d);try{for(p.s();!(i=p.n()).done;){var v=i.value,y=t.getTile(v);if(y.needsHillshadePrepare&&"offscreen"===e.renderPass)Ip(e,y,n,o,Ff.disabled,s);else if("translucent"===e.renderPass){var g=u&&e.terrain?e.terrain.stencilModeForRTTOverlap(v):f[v.overscaledZ];Tp(e,v,y,n,o,g,s)}}}catch(b){p.e(b)}finally{p.f()}a.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r,i,a){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")&&r.length){var o,s=e.context,u=s.gl,c=t.getSource(),h=e.useProgram("raster"),f=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,p=c instanceof ed||d?[{},r]:e.stencilConfigForOverlap(r),v=l(p,2),y=v[0],g=v[1],b=g[g.length-1].overscaledZ,_=!e.options.moving,w=m(g);try{for(w.s();!(o=w.n()).done;){var x=o.value,k=d?Lf.disabled:e.depthModeForSublayer(x.overscaledZ-b,1===n.paint.get("raster-opacity")?Lf.ReadWrite:Lf.ReadOnly,u.LESS),E=t.getTile(x);if(!d||E&&E.hasData()){var T=d?x.posMatrix:e.transform.calculatePosMatrix(x.toUnwrapped(),_),S=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(x):y[x.overscaledZ],I=a?0:n.paint.get("raster-fade-duration");E.registerFadeDuration(I);var C=t.findLoadedParent(x,0),A=Np(E,C,t,e.transform,I),O=void 0,P=void 0;e.terrain&&e.terrain.prepareDrawTile(x);var D="nearest"===n.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;s.activeTexture.set(u.TEXTURE0),E.texture.bind(D,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(u.TEXTURE1),C?(C.texture.bind(D,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST),O=Math.pow(2,C.tileID.overscaledZ-E.tileID.overscaledZ),P=[E.tileID.canonical.x*O%1,E.tileID.canonical.y*O%1]):E.texture.bind(D,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var R=av(T,P||[0,0],O||1,A,n);c instanceof ed?h.draw(s,u.TRIANGLES,k,Ff.disabled,f,Vf.disabled,R,n.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments):h.draw(s,u.TRIANGLES,k,S,f,Vf.disabled,R,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}}catch(M){w.e(M)}finally{w.f()}}},background:function(e,t,n,r){var i=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0!==a){var o=e.context,s=o.gl,u=e.transform,c=u.tileSize,l=n.paint.get("background-pattern");if(!e.isPatternMissing(l)){var h=!l&&1===i.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===h){var f=Ff.disabled,d=e.depthModeForSublayer(0,"opaque"===h?Lf.ReadWrite:Lf.ReadOnly),p=e.colorModeForRenderPass(),v=e.useProgram(l?"backgroundPattern":"background"),y=r||u.coveringTiles({tileSize:c});l&&(o.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));var g,b=n.getCrossfadeParameters(),_=m(y);try{for(_.s();!(g=_.n()).done;){var w=g.value,x=r?w.posMatrix:e.transform.calculatePosMatrix(w.toUnwrapped());e.prepareDrawTile(w);var k=l?fv(x,a,e,l,{tileID:w,tileSize:c},b):hv(x,a,i);v.draw(o,s.TRIANGLES,d,f,p,Vf.disabled,k,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}catch(E){_.e(E)}finally{_.f()}}}}},sky:function(e,t,n){var r=n.paint.get("sky-opacity");if(0!==r){var i=e.context,a=n.paint.get("sky-type"),o=new Lf(i.gl.LEQUAL,Lf.ReadOnly,[0,1]),s=e.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===e.renderPass?n.needsSkyboxCapture(e)&&(function(e,t,n,r){var i=e.context,a=i.gl,o=t.skyboxFbo;if(!o){o=t.skyboxFbo=i.createFramebuffer(32,32,!1),t.skyboxGeometry=new Nv(i),t.skyboxTexture=i.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,t.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(var s=0;s<6;++s)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}i.bindFramebuffer.set(o.framebuffer),i.viewport.set([0,0,32,32]);var u=t.getCenter(e,!0),c=e.useProgram("skyboxCapture"),l=new Float64Array(16);bs(l),Ts(l,l,.5*-Math.PI),Lv(i,t,c,l,u,0),bs(l),Ts(l,l,.5*Math.PI),Lv(i,t,c,l,u,1),bs(l),Es(l,l,.5*-Math.PI),Lv(i,t,c,l,u,2),bs(l),Es(l,l,.5*Math.PI),Lv(i,t,c,l,u,3),bs(l),Lv(i,t,c,l,u,4),bs(l),Ts(l,l,Math.PI),Lv(i,t,c,l,u,5),i.viewport.set([0,0,e.width,e.height])}(e,n),n.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,t,n,r,i){var a=e.context,o=a.gl,s=e.transform,u=e.useProgram("skybox");a.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_CUBE_MAP,t.skyboxTexture);var c=function(e,t,n,r,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(s.skyboxMatrix,t.getCenter(e,!1),0,r,i);u.draw(a,o.TRIANGLES,n,Ff.disabled,e.colorModeForRenderPass(),Vf.backCW,c,"skybox",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}(e,n,o,r,s):"gradient"===a&&"sky"===e.renderPass&&function(e,t,n,r,i){var a=e.context,o=a.gl,s=e.transform,u=e.useProgram("skyboxGradient");t.skyboxGeometry||(t.skyboxGeometry=new Nv(a)),a.activeTexture.set(o.TEXTURE0);var c=t.colorRampTexture;c||(c=t.colorRampTexture=new Jl(a,t.colorRamp,o.RGBA)),c.bind(o.LINEAR,o.CLAMP_TO_EDGE);var l=function(e,t,n,r,i){return{u_matrix:e,u_color_ramp:0,u_center_direction:t,u_radius:I(n),u_opacity:r,u_temporal_offset:i}}(s.skyboxMatrix,t.getCenter(e,!1),t.paint.get("sky-gradient-radius"),r,i);u.draw(a,o.TRIANGLES,n,Ff.disabled,e.colorModeForRenderPass(),Vf.backCW,l,"skyboxGradient",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}(e,n,o,r,s)}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Dv(e,t,n[r])},custom:function(e,t,n){var r=e.context,i=n.implementation;if("offscreen"===e.renderPass){var a=i.prerender;a&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),a.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Ff.disabled);var o="3d"===i.renderingMode?new Lf(e.context.gl.LEQUAL,Lf.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Lf.ReadOnly);r.setDepthMode(o),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},Fv=function(){function e(t,n){p(this,e),this.context=new qf(t),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=Gf.maxUnderzooming+Gf.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hp,this.gpuTimers={},this.frameCounter=0}return v(e,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Fp(this,e));var r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}}},{key:"terrain",get:function(){return this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(e,t){if(this.width=e*se.devicePixelRatio,this.height=t*se.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var n,r=m(this.style.order);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.style._layers[i].resize()}}catch(a){r.e(a)}finally{r.f()}}}},{key:"setup",value:function(){var e=this.context,t=new Pa;t.emplaceBack(0,0),t.emplaceBack(Ko,0),t.emplaceBack(0,Ko),t.emplaceBack(Ko,Ko),this.tileExtentBuffer=e.createVertexBuffer(t,Nh.members),this.tileExtentSegments=Go.simpleSegment(0,0,4,2);var n=new Pa;n.emplaceBack(0,0),n.emplaceBack(Ko,0),n.emplaceBack(0,Ko),n.emplaceBack(Ko,Ko),this.debugBuffer=e.createVertexBuffer(n,Nh.members),this.debugSegments=Go.simpleSegment(0,0,4,5);var r=new Da;r.emplaceBack(0,0,0,0),r.emplaceBack(Ko,0,Ko,0),r.emplaceBack(0,Ko,0,Ko),r.emplaceBack(Ko,Ko,Ko,Ko),this.rasterBoundsBuffer=e.createVertexBuffer(r,Jf.members),this.rasterBoundsSegments=Go.simpleSegment(0,0,4,2);var i=new Pa;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,Nh.members),this.viewportSegments=Go.simpleSegment(0,0,4,2);var a=new Ya;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var o=new qa;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(o),this.emptyTexture=new Jl(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var s=this.context.gl;this.stencilClearMode=new Ff({func:s.ALWAYS,mask:0},0,255,s.ZERO,s.ZERO,s.ZERO),this.loadTimeStamps.push(x.performance.now())}},{key:"clearStencil",value:function(){var e=this.context,t=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=gs();As(n,0,this.width,this.height,0,0,1),ks(n,n,[t.drawingBufferWidth,t.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,t.TRIANGLES,Lf.disabled,this.stencilClearMode,zf.disabled,Vf.disabled,Mp(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"_renderTileClippingMasks",value:function(e,t,n){if(t&&this.currentStencilSource!==t.id&&e.isTileClipped()&&n&&n.length){this.currentStencilSource=t.id;var r=this.context,i=r.gl;this.nextStencilID+n.length>256&&this.clearStencil(),r.setColorMode(zf.disabled),r.setDepthMode(Lf.disabled);var a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var o,s=m(n);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=this._tileClippingMaskIDs[u.key]=this.nextStencilID++;a.draw(r,i.TRIANGLES,Lf.disabled,new Ff({func:i.ALWAYS,mask:0},c,255,i.KEEP,i.KEEP,i.REPLACE),zf.disabled,Vf.disabled,Mp(u.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}catch(l){s.e(l)}finally{s.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Ff({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}},{key:"stencilModeForClipping",value:function(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);var t=this.context.gl;return new Ff({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}},{key:"stencilConfigForOverlap",value:function(e){var t=this.context.gl,n=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),i=n[n.length-1].overscaledZ,a=n[0].overscaledZ-i+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var o={},s=0;s<a;s++)o[s+i]=new Ff({func:t.GEQUAL,mask:255},s+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=a,[o,n]}return[r({},i,Ff.disabled),n]}},{key:"colorModeForRenderPass",value:function(){var e=this.context.gl;if(this._showOverdrawInspector){var t=1/8;return new zf([e.CONSTANT_COLOR,e.ONE],new Vt(t,t,t,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?zf.unblended:zf.alphaBlended}},{key:"depthModeForSublayer",value:function(e,t,n){if(!this.opaquePassEnabledForLayer())return Lf.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Lf(n||this.context.gl.LEQUAL,t,[r,r])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(se.now()),this.imageManager.beginFrame();var r=this.style.order,i=this.style._sourceCaches;for(var a in i){var o=i[a];o.used&&o.prepare(this.context)}var s={},u={},c={};for(var l in i){var h=i[l];s[l]=h.getVisibleCoordinates(),u[l]=s[l].slice().reverse(),c[l]=h.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var f=0;f<r.length;f++)if(this.style._layers[r[f]].is3D()){this.opaquePassCutoff=f;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),ze.has(this.context.gl)){this.renderPass="offscreen";var d,p=m(r);try{for(p.s();!(d=p.n()).done;){var v=d.value,y=this.style._layers[v],g=e._getLayerSourceCache(y);if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var b=g?u[g.id]:void 0;("custom"===y.type||y.isSky()||b&&b.length)&&this.renderLayer(this,g,y,b)}}}catch(P){p.e(P)}finally{p.f()}if(this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:t.showOverdrawInspector?Vt.black:Vt.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=t.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var _=this.style._layers[r[this.currentLayer]],w=e._getLayerSourceCache(_);if(!_.isSky()){var k=w?u[w.id]:void 0;this._renderTileClippingMasks(_,w,k),this.renderLayer(this,w,_,k)}}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var T=this.style._layers[r[this.currentLayer]],S=e._getLayerSourceCache(T);T.isSky()&&this.renderLayer(this,S,T,S?u[S.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){var I=this.style._layers[r[this.currentLayer]],C=e._getLayerSourceCache(I);if(I.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(I)){if(I.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var A=C?("symbol"===I.type?c:u)[C.id]:void 0;this._renderTileClippingMasks(I,C,C?s[C.id]:void 0),this.renderLayer(this,C,I,A),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){var O=null;L(this.style._layers).forEach((function(t){var r=e._getLayerSourceCache(t);r&&!t.isHidden(n.transform.zoom)&&(!O||O.getSource().maxzoom<r.getSource().maxzoom)&&(O=r)})),O&&this.options.showTileBoundaries&&jv.debug(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Av(e,e.transform.height-(t.top||0),3,Ev),Av(e,t.bottom||0,3,Tv),Ov(e,t.left||0,3,Sv),Ov(e,e.transform.width-(t.right||0),3,Iv);var n=e.transform.centerPoint;!function(e,t,n,r){Pv(e,t-1,n-10,2,20,r),Pv(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Cv)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%E,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(x.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),jv[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=a}return t}},{key:"translatePosMatrix",value:function(e,t,n,r,i){if(!n[0]&&!n[1])return e;var a=i?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var o=Math.sin(a),s=Math.cos(a);n=[n[0]*s-n[1]*o,n[0]*o+n[1]*s]}var u=[i?n[0]:fh(t,n[0],this.transform.zoom),i?n[1]:fh(t,n[1],this.transform.zoom),0],c=new Float32Array(16);return xs(c,e,u),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=[];return this.terrain&&!this.terrain.renderingToTexture&&t.push("TERRAIN"),e&&t.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&t.push("OVERDRAW_INSPECTOR"),t}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),a=Bp.cacheKey(e,i,t);return this.cache[a]||(this.cache[a]=new Bp(this.context,e,wp[e],t,dv[e],i)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=x.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Jl(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}},{key:"prepareDrawTile",value:function(e){this.terrain&&this.terrain.prepareDrawTile(e)}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}]),e}(),zv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(p(this,e),isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=n,this.left=r,this.right=i}return v(e,[{key:"interpolate",value:function(e,t,n){return null!=t.top&&null!=e.top&&(this.top=Nn(e.top,t.top,n)),null!=t.bottom&&null!=e.bottom&&(this.bottom=Nn(e.bottom,t.bottom,n)),null!=t.left&&null!=e.left&&(this.left=Nn(e.left,t.left,n)),null!=t.right&&null!=e.right&&(this.right=Nn(e.right,t.right,n)),this}},{key:"getCenter",value:function(e,t){var n=R((this.left+e-this.right)/2,0,e),r=R((this.top+t-this.bottom)/2,0,t);return new _(n,r)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new e(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),e}();function Bv(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function Uv(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]}function Vv(e,t){var n=Bv(e,3);Is(e,t),Uv(e,3,n)}function qv(e,t){Uv(e,3,[t[0],t[1],t[2],1])}function Gv(e,t){var n=Ys([]);return function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s}(n,n,-t),Qs(n,n,-e),n}function Kv(e,t){var n=[e[0],e[1],0],r=[t[0],t[1],0];if(Rs(n)>=1e-15){var i=zs([],n);js(r,i,Bs(r,i)),t[0]=r[0],t[1]=r[1]}var a=Us([],t,e);if(Hs(a)<1e-15)return null;var o=Math.atan2(-a[1],a[0]);return Gv(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),o)}var Hv=function(){function e(t,n){p(this,e),this.position=t,this.orientation=n}return v(e,[{key:"position",get:function(){return this._position},set:function(e){this._position=this._renderWorldCopies?function(e){if(e){var t=Array.isArray(e)?new kh(e[0],e[1],e[2]):e;return t.x=M(t.x,0,1),t}}(e):e}},{key:"lookAtPoint",value:function(e,t){if(this.orientation=null,this.position){var n=this._elevation?this._elevation.getAtPoint(kh.fromLngLat(e)):0,r=this.position,i=kh.fromLngLat(e,n),a=[i.x-r.x,i.y-r.y,i.z-r.z];t||(t=[0,0,1]),t[2]=Math.abs(t[2]),this.orientation=Kv(a,t)}}},{key:"setPitchBearing",value:function(e,t){this.orientation=Gv(I(e),I(-t))}}]),e}(),Wv=function(){function e(t,n){p(this,e),this._transform=bs([]),this._orientation=Ys([]),n&&(this._orientation=n,Vv(this._transform,this._orientation)),t&&qv(this._transform,t)}return v(e,[{key:"mercatorPosition",get:function(){var e=this.position;return new kh(e[0],e[1],e[2])}},{key:"position",get:function(){var e=Bv(this._transform,3);return[e[0],e[1],e[2]]},set:function(e){qv(this._transform,e)}},{key:"orientation",get:function(){return this._orientation},set:function(e){this._orientation=e,Vv(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=Gv(e,t),Vv(this._transform,this._orientation)}},{key:"forward",value:function(){var e=Bv(this._transform,2);return[-e[0],-e[1],-e[2]]}},{key:"up",value:function(){var e=Bv(this._transform,1);return[-e[0],-e[1],-e[2]]}},{key:"right",value:function(){var e=Bv(this._transform,0);return[e[0],e[1],e[2]]}},{key:"getCameraToWorld",value:function(e,t){var n=new Float64Array(16);return _s(n,this.getWorldToCamera(e,t)),n}},{key:"getWorldToCamera",value:function(e,t){var n,r,i=new Float64Array(16),a=new Float64Array(4),o=this.position;return(n=a)[0]=-(r=this._orientation)[0],n[1]=-r[1],n[2]=-r[2],n[3]=r[3],js(o,o,-e),Is(i,a),xs(i,i,o),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=t,i[9]*=t,i[10]*=t,i[11]*=t,i}},{key:"getCameraToClipPerspective",value:function(e,t,n,r){var i=new Float64Array(16);return Cs(i,e,t,n,r),i}},{key:"clone",value:function(){return new e(c(this.position),c(this.orientation))}}]),e}(),Zv=function(){function e(t,n,r,i,a){p(this,e),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new vh(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new zv,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new Wv,this._centerAltitude=0,this.cameraElevationReference="ground",this._horizonShift=.1}return v(e,[{key:"clone",value:function(){var t=new e(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}},{key:"updateElevation",value:function(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new _(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(e){var t,n=-M(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(t=new ms(4),ms!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t),function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*-s+a*u,e[3]=i*-s+o*u}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(e){var t=R(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCenterElevation",value:function(){if(!this._elevation)return!1;var e=this._elevation.getAtPoint(kh.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}},{key:"_updateCameraOnTerrain",value:function(){var e=this.cameraToCenterDistance/this.worldSize,t=_h(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(t+e)}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._cameraZoom&&this._elevation){var e=this._cameraZoom,t=_h(this._elevation.getAtPoint(kh.fromLngLat(this.center)),this.center.lat),n=this._mercatorZfromZoom(e),r=this._mercatorZfromZoom(this._maxZoom),i=Math.max(n-t,r);this._setZoom(this._zoomFromMercatorZ(i))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(e){var t,n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));t=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];var r=Rs(Gs([],this._camera.position,t));return R(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(e){if(this.height&&(e.position||e.orientation)){this._updateCameraState();var t,n,r=!1;if(e.orientation&&!function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}(e.orientation,this._camera.orientation)&&(r=this._setCameraOrientation(e.orientation)),e.position){var i=[e.position.x,e.position.y,e.position.z];((t=i)[0]!==(n=this._camera.position)[0]||t[1]!==n[1]||t[2]!==n[2])&&(this._setCameraPosition(i),r=!0)}r&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var e=this._camera.position,t=new Hv;return t.position=new kh(e[0],e[1],e[2]),t.orientation=this._camera.orientation,t._elevation=this.elevation,t._renderWorldCopies=this._renderWorldCopies,t}},{key:"_setCameraOrientation",value:function(e){if(t=e,!Math.hypot(t[0],t[1],t[2],t[3]))return!1;var t;!function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o}(e,e);var n=Vs([],[0,0,-1],e),r=Vs([],[0,-1,0],e);if(r[2]<0)return!1;var i=Kv(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(e){var t=this.zoomScale(this.minZoom)*this.tileSize,n=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=R(e[2],r/n,r/t),this._camera.position=e}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(e){var t=[new Ch(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new _(0,0)),r=this.pointCoordinate(new _(this.width,0)),i=this.pointCoordinate(new _(this.width,this.height)),a=this.pointCoordinate(new _(0,this.height)),o=Math.floor(Math.min(n.x,r.x,i.x,a.x)),s=Math.floor(Math.max(n.x,r.x,i.x,a.x)),u=1,c=o-u;c<=s+u;c++)0!==c&&t.push(new Ch(c,e));return t}},{key:"coveringTiles",value:function(e){var t=this,n=this.coveringZoomLevel(e),r=n,i=!!e.useElevationData;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var a=kh.fromLngLat(this.center),o=1<<n,s=[o*a.x,o*a.y,0],u=Js.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),c=this.pointCoordinate(this.getCameraPoint()),l=o*_h(1,this.center.lat),h=this._camera.position[2]/_h(1,this.center.lat),f=[o*c.x,o*c.y,h],d=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),p=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?n:0,v=this.elevation?1e4*this.elevation.exaggeration():0,m=function(e){return{aabb:new eu([e*o,0,-v],[(e+1)*o,o,v]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},y=[],g=[],b=n,_=e.reparseOverscaled?r:n,w=function(e,n){if(t._elevation){var r=t._elevation.getMinMaxForTile(n);r&&(e.min[2]=r.min,e.max[2]=r.max,e.center[2]=(e.min[2]+e.max[2])/2)}},x=function(e){return e*e},k=x((h-this._centerAltitude)*l),E=function(e,t){if(t*x(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(var T=1;T<=3;T++)y.push(m(-T)),y.push(m(T));for(y.push(m(0));y.length>0;){var S=y.pop(),I=S.x,C=S.y,A=S.fullyVisible;if(!A){var O=S.aabb.intersects(u);if(0===O)continue;A=2===O}var P=!0;if(p<=S.zoom&&S.zoom<b){var D=S.aabb.distanceX(f),R=S.aabb.distanceY(f),M=k;i&&(M=x(S.aabb.distanceZ(f)*l));var N=D*D+R*R+M;P=N<x((1<<b-S.zoom)*d*E(Math.max(M,k),N))}if(S.zoom!==b&&P)for(var L=0;L<4;L++){var j=(I<<1)+L%2,F=(C<<1)+(L>>1),z=S.aabb.quadrant(L),B=null;i&&S.zoom>b-6&&w(z,B=new Ah(S.zoom+1===b?_:S.zoom+1,S.wrap,S.zoom+1,j,F)),y.push({aabb:z,zoom:S.zoom+1,x:j,y:F,wrap:S.wrap,fullyVisible:A,tileID:B})}else{var U=S.zoom===b?_:S.zoom;if(e.minzoom&&e.minzoom>U)continue;var V=s[0]-(.5+I+(S.wrap<<S.zoom))*(1<<n-S.zoom),q=s[1]-.5-C,G=S.tileID?S.tileID:new Ah(U,S.wrap,S.zoom,I,C);g.push({tileID:G,distanceSq:V*V+q*q})}}return g.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(e){var t=R(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new _(gh(e.lng)*this.worldSize,bh(t)*this.worldSize)}},{key:"unproject",value:function(e){return new kh(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(e,t){var n=this.pointCoordinate(t),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(e),a=new kh(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}},{key:"locationPoint3D",value:function(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(e){return kh.fromLngLat(e)}},{key:"coordinateLocation",value:function(e){return e.toLngLat()}},{key:"pointRayIntersection",value:function(e,t){var n=null!=t?t:this._centerAltitude,r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];Zs(r,r,this.pixelMatrixInverse),Zs(i,i,this.pixelMatrixInverse);var a=i[3];Ws(r,r,1/r[3]),Ws(i,i,1/a);var o=r[2],s=i[2];return{p0:r,p1:i,t:o===s?0:(n-o)/(s-o)}}},{key:"screenPointToMercatorRay",value:function(e){var t=[e.x,e.y,0,1],n=[e.x,e.y,1,1];return Zs(t,t,this.pixelMatrixInverse),Zs(n,n,this.pixelMatrixInverse),Ws(t,t,1/t[3]),Ws(n,n,1/n[3]),t[2]=_h(t[2],this._center.lat)*this.worldSize,n[2]=_h(n[2],this._center.lat)*this.worldSize,Ws(t,t,1/this.worldSize),Ws(n,n,1/this.worldSize),new $s([t[0],t[1],t[2]],zs([],Gs([],n,t)))}},{key:"rayIntersectionCoordinate",value:function(e){var t=e.p0,n=e.p1,r=e.t,i=_h(t[2],this._center.lat),a=_h(n[2],this._center.lat);return new kh(Nn(t[0],n[0],r)/this.worldSize,Nn(t[1],n[1],r)/this.worldSize,Nn(i,a,r))}},{key:"pointCoordinate",value:function(e){var t=this.horizonLineFromTop(!1),n=new _(e.x,Math.max(t,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(n))}},{key:"pointCoordinate3D",value:function(e){if(!this.elevation)return this.pointCoordinate(e);var t=this.elevation,n=this.elevation.pointCoordinate(e);if(n)return new kh(n[0],n[1],n[2]);var r=0,i=this.horizonLineFromTop();if(e.y>i)return this.pointCoordinate(e);for(var a=.02*i,o=e.clone(),s=0;s<10&&i-r>a;s++){o.y=Nn(r,i,.66);var u=t.pointCoordinate(o);u?(i=o.y,n=u):r=o.y}return n?new kh(n[0],n[1],n[2]):this.pointCoordinate(e)}},{key:"isPointAboveHorizon",value:function(e){if(this.elevation)return!this.elevation.pointCoordinate(e);var t=this.horizonLineFromTop();return e.y<t}},{key:"_coordinatePoint",value:function(e,t){var n=t&&this.elevation?this.elevation.getAtPoint(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,n+e.toAltitude(),1];return Zs(r,r,this.pixelMatrix),r[3]>0?new _(r[0]/r[3],r[1]/r[3]):new _(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():(new dh).extend(this.pointLocation(new _(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new _(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new _(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new _(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}},{key:"_getBounds3D",value:function(){var e=this,t=this.elevation,n=t.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});n.min*=t.exaggeration(),n.max*=t.exaggeration();var r=this.horizonLineFromTop();return[new _(0,r),new _(this.width,r),new _(this.width,this.height),new _(0,this.height)].reduce((function(t,r){return t.extend(e.coordinateLocation(e.rayIntersectionCoordinate(e.pointRayIntersection(r,n.min)))).extend(e.coordinateLocation(e.rayIntersectionCoordinate(e.pointRayIntersection(r,n.max))))}),new dh)}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-.97*t;return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new dh([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"calculatePosMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.key,r=t?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=e.canonical,a=this.worldSize/this.zoomScale(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,s=bs(new Float64Array(16));return xs(s,s,[o*a,i.y*a,0]),ks(s,s,[a/Ko,a/Ko,1]),ws(s,t?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation){var e=this._elevation;this._updateCameraState();var t=this._camera.position,n=this._camera.forward();if(!(t.z<=0||n[2]>=0)){var r=_h(1,this._center.lat);t[2]/=r,n[2]/=r,zs(n,n);var i=e.raycast(t,n,e.exaggeration());if(i){var a=Fs([],t,n,i),o=new kh(a[0],a[1],_h(a[2],wh(a[1]))),s=this._camera.position,u=o.z+Rs([o.x-s[0],o.y-s[1],o.z-s[2]]);this._cameraZoom=this._zoomFromMercatorZ(u),this._centerAltitude=o.toAltitude(),this._center=o.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var e=this._elevation;this._updateCameraState();var t=e.getAtPoint(this._camera.mercatorPosition),n=this._minimumHeightOverTerrain()*Math.cos(I(this._maxPitch)),r=_h(t,this._center.lat),i=this._camera.position[2]-r;if(i<n){var a=kh.fromLngLat(this._center,this._centerAltitude),o=this._camera.mercatorPosition,s=[a.x-o.x,a.y-o.y,a.z-o.z],u=Rs(s);s[2]-=n-i;var c=Rs(s);if(0===c)return;js(s,s,u/c),this._camera.position=[a.x-s[0],a.y-s[1],a.z-s[2]],this._camera.orientation=Kv(s,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,i=-90,a=90,o=-180,s=180,u=this.size,c=this._unmodified;if(this.latRange){var l=this.latRange;i=bh(l[1])*this.worldSize,e=(a=bh(l[0])*this.worldSize)-i<u.y?u.y/(a-i):0}if(this.lngRange){var h=this.lngRange;o=gh(h[0])*this.worldSize,t=(s=gh(h[1])*this.worldSize)-o<u.x?u.x/(s-o):0}var f=this.point,d=Math.max(t||0,e||0);if(d)return this.center=this.unproject(new _(t?(s+o)/2:f.x,e?(a+i)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var p=f.y,v=u.y/2;p-v<i&&(r=i+v),p+v>a&&(r=a-v)}if(this.lngRange){var m=f.x,y=u.x/2;m-y<o&&(n=o+y),m+y>s&&(n=s-y)}void 0===n&&void 0===r||(this.center=this.unproject(new _(void 0!==n?n:f.x,void 0!==r?r:f.y))),this._constrainCameraAltitude(),this._unmodified=c,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=this,t=function(t,n){return Math.log2(t/(e.tileSize*Math.abs(n[1]-n[0])))},n=0;if(this.latRange){var r=this.latRange;n=t(this.height,[bh(r[0]),bh(r[1])])}var i=0;if(this.lngRange){var a=this.lngRange;i=t(this.width,[gh(a[0]),gh(a[1])])}return Math.max(n,i)}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=_h(1,this.center.lat)*this.worldSize;this._updateCameraState();var n=Math.PI/2+this._pitch,r=this.fovAboveCenter,i=this.elevation?this.elevation.getMinElevationBelowMSL()*t:0,a=(this._camera.position[2]*this.worldSize-i)/Math.cos(this._pitch),o=Math.sin(r)*a/Math.sin(R(Math.PI-n-r,.01,Math.PI-.01)),s=this.point,u=s.x,c=s.y,l=Math.cos(Math.PI/2-this._pitch)*o+a,h=Math.min(1.01*l,a*(1/this._horizonShift)),f=this.height/50,d=this._camera.getWorldToCamera(this.worldSize,t),p=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,f,h);p[8]=2*-e.x/this.width,p[9]=2*e.y/this.height;var v=Os([],p,d);this.mercatorMatrix=ks([],v,[this.worldSize,this.worldSize,this.worldSize/t]),this.projMatrix=v,this.invProjMatrix=_s(new Float64Array(16),this.projMatrix);var m=new Float32Array(16);bs(m),ks(m,m,[1,-1,1]),Es(m,m,this._pitch),Ss(m,m,this.angle);var y=Cs(new Float32Array(16),this._fov,this.width/this.height,f,h),g=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;y[8]=2*-e.x/this.width,y[9]=2*(e.y+g)/this.height,this.skyboxMatrix=ws(m,y,m);var b=this.width%2/2,_=this.height%2/2,w=Math.cos(this.angle),x=Math.sin(this.angle),k=u-Math.round(u)+w*b+x*_,E=c-Math.round(c)+w*_+x*b,T=new Float64Array(v);if(xs(T,T,[k>.5?k-1:k,E>.5?E-1:E,0]),this.alignedProjMatrix=T,ks(v=gs(),v,[this.width/2,-this.height/2,1]),xs(v,v,[1,-1,0]),this.labelPlaneMatrix=v,ks(v=gs(),v,[1,-1,1]),xs(v,v,[-1,-1,0]),ks(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v,this.pixelMatrix=ws(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(v=_s(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}}},{key:"_updateCameraState",value:function(){if(this.height){this._camera.setPitchBearing(this._pitch,this.angle);var e=this._camera.forward(),t=this.cameraToCenterDistance,n=this.point,r=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-_h(this._centerAltitude,this.center.lat),i=this.cameraToCenterDistance/r;this._camera.position=[n.x/this.worldSize-e[0]*t/i,n.y/this.worldSize-e[1]*t/i,_h(this._centerAltitude,this._center.lat)+-e[2]*t/i]}}},{key:"_translateCameraConstrained",value:function(e){var t=this._maxCameraBoundsDistance()*Math.cos(this._pitch),n=e[2],r=1;n>0&&(r=Math.min((t-this._camera.position[2])/n,1)),this._camera.position=Fs([],this._camera.position,e,r),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var e=this._camera.position,t=this._camera.forward(),n=this._camera.getPitchBearing(),r=n.pitch,i=n.bearing,a=_h(this._centerAltitude,this.center.lat),o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(I(this._maxPitch)),s=Math.max((e[2]-a)/Math.cos(r),o),u=this._zoomFromMercatorZ(s);Fs(e,e,t,s),this._pitch=R(r,I(this.minPitch),I(this.maxPitch)),this.angle=M(i,-Math.PI,Math.PI),this._setZoom(R(u,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new kh(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"_terrainEnabled",value:function(){return!!this._elevation}},{key:"isHorizonVisibleForPoints",value:function(e,t){for(var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),a=Math.max(e.y,t.y),o=[new _(n,i),new _(r,a),new _(n,a),new _(r,i)],s=this._renderWorldCopies?-3:0,u=this._renderWorldCopies?4:1,c=0,l=o;c<l.length;c++){var h=l[c],f=this.pointRayIntersection(h);if(f.t<0)return!0;var d=this.rayIntersectionCoordinate(f);if(d.x<s||d.y<0||d.x>u||d.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+this.fovAboveCenter*S>88||this.isHorizonVisibleForPoints(new _(0,0),new _(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(e,t){var n=Rs(Gs([],this._camera.position,e)),r=this._zoomFromMercatorZ(n)+t;return n-this._mercatorZfromZoom(r)}},{key:"getCameraPoint",value:function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new _(0,e))}}]),e}(),Xv=function(){function e(t){p(this,e),this._hashName=t&&encodeURIComponent(t),q(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){var n=!1,r=null,i=function t(){r=null,n&&(e(),r=setTimeout(t,300),n=!1)};return function(){return n=!0,r||i(),r}}(this._updateHashUnthrottled.bind(this))}return v(e,[{key:"addTo",value:function(e){return this._map=e,x.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return x.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}},{key:"getHashString",value:function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),a=Math.round(t.lng*i)/i,o=Math.round(t.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=e?"/".concat(a,"/").concat(o,"/").concat(n):"".concat(n,"/").concat(o,"/").concat(a),(s||u)&&(c+="/"+Math.round(10*s)/10),u&&(c+="/".concat(Math.round(u))),this._hashName){var l=this._hashName,h=!1,f=x.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===l?(h=!0,"".concat(t,"=").concat(c)):e})).filter((function(e){return e}));return h||f.push("".concat(l,"=").concat(c)),"#".concat(f.join("&"))}return"#".concat(c)}},{key:"_getCurrentHash",value:function(){var e,t=this,n=x.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(e){return e.split("=")})).forEach((function(n){n[0]===t._hashName&&(e=n)})),(e&&e[1]||"").split("/")):n.split("/")}},{key:"_onHashChange",value:function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var e=x.location.href.replace(/(#.+)?$/,this.getHashString());x.history.replaceState(x.history.state,null,e)}}]),e}(),Yv={linearity:.3,easing:P(0,0,.3,1)},Qv=j({deceleration:2500,maxSpeed:1400},Yv),$v=j({deceleration:20,maxSpeed:1400},Yv),Jv=j({deceleration:1e3,maxSpeed:360},Yv),em=j({deceleration:1e3,maxSpeed:90},Yv),tm=function(){function e(t){p(this,e),this._map=t,this.clear()}return v(e,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:se.now(),settings:e})}},{key:"_drainInertiaBuffer",value:function(){for(var e=this._inertiaBuffer,t=se.now();e.length>0&&t-e[0].time>160;)e.shift()}},{key:"_onMoveEnd",value:function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var t,n={zoom:0,bearing:0,pitch:0,pan:new _(0,0),pinchAround:void 0,around:void 0},r=m(this._inertiaBuffer);try{for(r.s();!(t=r.n()).done;){var i=t.value.settings;n.zoom+=i.zoomDelta||0,n.bearing+=i.bearingDelta||0,n.pitch+=i.pitchDelta||0,i.panDelta&&n.pan._add(i.panDelta),i.around&&(n.around=i.around),i.pinchAround&&(n.pinchAround=i.pinchAround)}}catch(f){r.e(f)}finally{r.f()}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,o={};if(n.pan.mag()){var s=rm(n.pan.mag(),a,j({},Qv,e||{}));o.offset=n.pan.mult(s.amount/n.pan.mag()),o.center=this._map.transform.center,nm(o,s)}if(n.zoom){var u=rm(n.zoom,a,$v);o.zoom=this._map.transform.zoom+u.amount,nm(o,u)}if(n.bearing){var c=rm(n.bearing,a,Jv);o.bearing=this._map.transform.bearing+R(c.amount,-179,179),nm(o,c)}if(n.pitch){var l=rm(n.pitch,a,em);o.pitch=this._map.transform.pitch+l.amount,nm(o,l)}if(o.zoom||o.bearing){var h=void 0===n.pinchAround?n.around:n.pinchAround;o.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),j(o,{noMoveStart:!0})}}}]),e}();function nm(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function rm(e,t,n){var r=n.maxSpeed,i=n.linearity,a=n.deceleration,o=R(e*i/(t/1e3),-r,r),s=Math.abs(o)/(a*i);return{easing:n.easing,duration:1e3*s,amount:o*(s/2)}}var im=function(e){f(n,e);var t=d(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};p(this,n);var s=ue.mousePos(r.getCanvasContainer(),i);return(a=t.call(this,e,j({point:s,lngLat:r.unproject(s),originalEvent:i},o)))._defaultPrevented=!1,a.target=r,a}return v(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(dt),am=function(e){f(n,e);var t=d(n);function n(e,r,i){var a;p(this,n);var o="touchend"===e?i.changedTouches:i.touches,s=ue.touchPos(r.getCanvasContainer(),o),u=s.map((function(e){return r.unproject(e)})),c=s.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new _(0,0));return(a=t.call(this,e,{points:s,point:c,lngLats:u,lngLat:r.unproject(c),originalEvent:i}))._defaultPrevented=!1,a}return v(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(dt),om=function(e){f(n,e);var t=d(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,a}return v(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(dt),sm=function(){function e(t,n){p(this,e),this._map=t,this._clickTolerance=n.clickTolerance}return v(e,[{key:"reset",value:function(){delete this._mousedownPos}},{key:"wheel",value:function(e){return this._firePreventable(new om(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new im(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new im(e.type,this._map,e))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new im(e.type,this._map,e))}},{key:"dblclick",value:function(e){return this._firePreventable(new im(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new im(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new im(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new am(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new am(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new am(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new am(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),um=function(){function e(t){p(this,e),this._map=t}return v(e,[{key:"reset",value:function(){this._delayContextMenu=!1,delete this._contextMenuEvent}},{key:"mousemove",value:function(e){this._map.fire(new im(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new im("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new im(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),cm=function(){function e(t,n){p(this,e),this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1}return v(e,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(ue.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){if(this._active){var n=t;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=n,this._box||(this._box=ue.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),o=Math.min(r.y,n.y),s=Math.max(r.y,n.y);ue.setTransform(this._box,"translate(".concat(i,"px,").concat(o,"px)")),this._box.style.width=a-i+"px",this._box.style.height=s-o+"px"}}}},{key:"mouseupWindow",value:function(e,t){var n=this;if(this._active&&0===e.button){var r=this._startPos,i=t;if(this.reset(),ue.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new dt("boxzoomend",{originalEvent:e})),{cameraAnimation:function(e){return e.fitScreenCoordinates(r,i,n._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",e)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(ue.remove(this._box),this._box=null),ue.enableDrag(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(e,t){return this._map.fire(new dt(e,{originalEvent:t}))}}]),e}();function lm(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}var hm=function(){function e(t){p(this,e),this.reset(),this.numTouches=t.numTouches}return v(e,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(e,t,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){var t,n=new _(0,0),r=m(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n._add(i)}}catch(a){r.e(a)}finally{r.f()}return n.div(e.length)}(t),this.touches=lm(n,t)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=lm(n,t);for(var i in this.touches){var a=this.touches[i],o=r[i];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),e}(),fm=function(){function e(t){p(this,e),this.singleTap=new hm(t),this.numTaps=t.numTaps,this.reset()}return v(e,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(i&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),dm=function(){function e(){p(this,e),this._zoomIn=new fm({numTouches:1,numTaps:2}),this._zoomOut=new fm({numTouches:2,numTaps:1}),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),pm={0:1,2:2},vm=function(){function e(t){p(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return v(e,[{key:"reset",value:function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=ue.mouseButton(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),function(e,t){var n=pm[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&ue.mouseButton(e)===this._eventButton&&(this._moved&&ue.suppressClick(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),mm=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"mousedown",value:function(e,t){a(o(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(vm),ym=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(vm),gm=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(vm),bm=function(){function e(t){p(this,e),this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new _(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(e,t,n){if(this._active&&!(n.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,n)}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(e,t,n){n.length>0&&(this._active=!0);var r=lm(n,t),i=new _(0,0),a=new _(0,0),o=0;for(var s in r){var u=r[s],c=this._touches[s];c&&(i._add(u),a._add(u.sub(c)),o++,r[s]=u)}if(this._touches=r,!(o<this._minTouches)&&a.mag()){var l=a.div(o);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:i.div(o),panDelta:l}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),_m=function(){function e(){p(this,e),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,delete this._firstTwoTouches}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){if(this._firstTwoTouches){e.preventDefault();var r=l(this._firstTwoTouches,2),i=r[0],a=r[1],o=wm(n,t,i),s=wm(n,t,a);if(o&&s){var u=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],u,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var r=l(this._firstTwoTouches,2),i=r[0],a=r[1],o=wm(n,t,i),s=wm(n,t,a);o&&s||(this._active&&ue.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function wm(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function xm(e,t){return Math.log(e/t)/Math.LN2}var km=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),delete this._distance,delete this._startDistance}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(xm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xm(this._distance,n),pinchAround:t}}}]),n}(_m);function Em(e,t){return 180*e.angleWith(t)/Math.PI}var Tm=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),delete this._minDiameter,delete this._startVector,delete this._vector}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Em(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=Em(e,this._startVector);return Math.abs(n)<t}}]),n}(_m);function Sm(e){return Math.abs(e.y)>Math.abs(e.x)}var Im=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return v(n,[{key:"reset",value:function(){a(o(n.prototype),"reset",this).call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints}},{key:"_start",value:function(e){this._lastPoints=e,Sm(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,n){var r=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Sm(e)&&Sm(t)&&a}}}]),n}(_m),Cm={panStep:100,bearingStep:15,pitchStep:10},Am=function(){function e(){p(this,e);var t=Cm;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return v(e,[{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Om,zoom:n?Math.round(u)+n*(e.shiftKey?2:1):u,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Om(e){return e*(2-e)}var Pm=4.000244140625,Dm=function(){function e(t,n){p(this,e),this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,q(["_onTimeout"],this)}return v(e,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"wheel",value:function(e){if(this.isEnabled()){var t=e.deltaMode===x.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=se.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%Pm==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=ue.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var t=this._map.transform,n=function(){return t._terrainEnabled()?t.computeZoomRelativeTo(e._aroundCoord):t.zoom};if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>Pm?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var a=n(),o=Math.pow(2,a),s="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(s*i))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}var u,c="number"==typeof this._targetZoom?this._targetZoom:n(),l=this._startZoom,h=this._easing,f=!1;if("wheel"===this._type&&l&&h){var d=Math.min((se.now()-this._lastWheelEventTime)/200,1);u=Nn(l,c,h(d)),d<1?this._frameId||(this._frameId=!0):f=!0}else u=c,f=!0;return this._active=!0,f&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:u-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(e){var t=D;if(this._prevEase){var n=this._prevEase,r=(se.now()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),a=.27/Math.sqrt(i*i+1e-4)*.01;t=P(a,Math.sqrt(.0729-a*a),.25,1)}return this._prevEase={start:se.now(),duration:e,easing:t},t}},{key:"reset",value:function(){this._active=!1}}]),e}(),Rm=function(){function e(t,n){p(this,e),this._clickZoom=t,this._tapZoom=n}return v(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Mm=function(){function e(){p(this,e),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Nm=function(){function e(){p(this,e),this._tap=new fm({numTouches:1,numTaps:1}),this.reset()}return v(e,[{key:"reset",value:function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Lm=function(){function e(t,n,r){p(this,e),this._el=t,this._mousePan=n,this._touchPan=r}return v(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),jm=function(){function e(t,n,r){p(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return v(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),Fm=function(){function e(t,n,r,i){p(this,e),this._el=t,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return v(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),zm=function(e){return e.zoom||e.drag||e.pitch||e.rotate},Bm=function(e){f(n,e);var t=d(n);function n(){return p(this,n),t.apply(this,arguments)}return n}(dt),Um=function(){function e(){p(this,e),this.constants=[1,1,.01],this.radius=0}return v(e,[{key:"setup",value:function(e,t){var n=Gs([],t,e);this.radius=Rs(n[2]<0?Ks([],n,this.constants):[n[0],n[1],0])}},{key:"projectRay",value:function(e){Ks(e,e,this.constants),zs(e,e),function(e,t,n){e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2]}(e,e,this.constants);var t=js([],e,this.radius);if(t[2]>0){var n=js([],[0,0,1],Bs(t,[0,0,1])),r=js([],zs([],[t[0],t[1],0]),this.radius),i=Ns([],t,js([],Gs([],Ns([],r,n),t),2));t[0]=i[0],t[1]=i[1]}return t}}]),e}();function Vm(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var qm=function(){function e(t,n){p(this,e),this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new tm(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Um,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),q(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[x.document,"mousemove",{capture:!0}],[x.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[x,"blur",void 0]];var i,a=m(this._listeners);try{for(a.s();!(i=a.n()).done;){var o=l(i.value,3),s=o[0],u=o[1],c=o[2];ue.addEventListener(s,u,s===x.document?this.handleWindowEvent:this.handleEvent,c)}}catch(h){a.e(h)}finally{a.f()}}return v(e,[{key:"destroy",value:function(){var e,t=m(this._listeners);try{for(t.s();!(e=t.n()).done;){var n=l(e.value,3),r=n[0],i=n[1],a=n[2];ue.removeEventListener(r,i,r===x.document?this.handleWindowEvent:this.handleEvent,a)}}catch(o){t.e(o)}finally{t.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new sm(t,e));var r=t.boxZoom=new cm(t,e);this._add("boxZoom",r);var i=new dm,a=new Mm;t.doubleClickZoom=new Rm(a,i),this._add("tapZoom",i),this._add("clickZoom",a);var o=new Nm;this._add("tapDragZoom",o);var s=t.touchPitch=new Im;this._add("touchPitch",s);var u=new ym(e),c=new gm(e);t.dragRotate=new jm(e,u,c),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var l=new mm(e),h=new bm(e);t.dragPan=new Lm(n,l,h),this._add("mousePan",l),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new Tm,d=new km;t.touchZoomRotate=new Fm(n,d,f,o),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new um(t));var p=t.scrollZoom=new Dm(t,this);this._add("scrollZoom",p,["mousePan"]);var v=t.keyboard=new Am;this._add("keyboard",v);for(var m=0,y=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<y.length;m++){var g=y[m];e.interactive&&e[g]&&t[g].enable(e[g])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=m(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=m(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(zm(this._eventsInProgress))||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],r=m(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._el.contains(i.target)&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"handleEvent",value:function(e,t){if("blur"!==e.type){this._updatingCamera=!0;var n,r="renderFrame"===e.type,i=r?void 0:e,a={needsRenderFrame:!1},o={},s={},u=e.touches?this._getMapTouches(e.touches):void 0,c=u?ue.touchPos(this._el,u):r?void 0:ue.mousePos(this._el,e),l=m(this._handlers);try{for(l.s();!(n=l.n()).done;){var h=n.value,f=h.handlerName,d=h.handler,p=h.allowed;if(d.isEnabled()){var v=void 0;this._blockedByActive(s,p,f)?d.reset():d[t||e.type]&&(v=d[t||e.type](e,c,u),this.mergeHandlerResult(a,o,v,f,i),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||d.isActive())&&(s[f]=d)}}}catch(_){l.e(_)}finally{l.f()}var y={};for(var g in this._previousActiveHandlers)s[g]||(y[g]=i);this._previousActiveHandlers=s,(Object.keys(y).length||Vm(a))&&(this._changes.push([a,o,y]),this._triggerRenderFrame()),(Object.keys(s).length||Vm(a))&&this._map._stop(!0),this._updatingCamera=!1;var b=a.cameraAnimation;b&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],b(this._map))}else this.stop(!0)}},{key:"mergeHandlerResult",value:function(e,t,n,r,i){if(n){j(e,n);var a={handlerName:r,originalEvent:n.originalEvent||i};void 0!==n.zoomDelta&&(t.zoom=a),void 0!==n.panDelta&&(t.drag=a),void 0!==n.pitchDelta&&(t.pitch=a),void 0!==n.bearingDelta&&(t.rotate=a)}}},{key:"_applyChanges",value:function(){var e,t={},n={},r={},i=m(this._changes);try{for(i.s();!(e=i.n()).done;){var a=l(e.value,3),o=a[0],s=a[1],u=a[2];o.panDelta&&(t.panDelta=(t.panDelta||new _(0,0))._add(o.panDelta)),o.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+o.zoomDelta),o.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+o.bearingDelta),o.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+o.pitchDelta),void 0!==o.around&&(t.around=o.around),void 0!==o.aroundCoord&&(t.aroundCoord=o.aroundCoord),void 0!==o.pinchAround&&(t.pinchAround=o.pinchAround),o.noInertia&&(t.noInertia=o.noInertia),j(n,s),j(r,u)}}catch(c){i.e(c)}finally{i.f()}this._updateMapTransform(t,n,r),this._changes=[]}},{key:"_updateMapTransform",value:function(e,t,n){var r=this,i=this._map,a=i.transform,o=function(e){return[e.x,e.y,e.z]};if(function(e){var t=r._eventsInProgress.drag;return t&&!r._handlersById[t.handlerName].isActive()}()&&!Vm(e)){var s=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",s!==a.zoom&&this._map._update(!0)}if(!Vm(e))return this._fireEvents(t,n,!0);var u=e.panDelta,c=e.zoomDelta,l=e.bearingDelta,h=e.pitchDelta,f=e.around,d=e.aroundCoord,p=e.pinchAround;void 0!==p&&(f=p),t.drag&&!r._eventsInProgress.drag&&f&&(this._dragOrigin=o(a.pointCoordinate3D(f)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",i._stop(!0),f=f||i.transform.centerPoint,l&&(a.bearing+=l),h&&(a.pitch+=h),a._updateCameraState();var v=[0,0,0];if(u){var m=a.screenPointToMercatorRay(f),y=a.screenPointToMercatorRay(f.sub(u)),g=this._trackingEllipsoid.projectRay(m.dir),b=this._trackingEllipsoid.projectRay(y.dir);v[0]=b[0]-g[0],v[1]=b[1]-g[1]}var _=a.zoom,w=[0,0,0];if(c){var x=o(d||a.pointCoordinate3D(f)),k={dir:zs([],Gs([],x,a._camera.position))},E=a.screenPointToMercatorRay(a.centerPoint);if(k.dir[2]<0){var T=xh(x[2],x[1]),S=a.rayIntersectionCoordinate(a.pointRayIntersection(a.centerPoint,T)),I=a.zoomDeltaToMovement(o(S),c)*(E.dir[2]/k.dir[2]);js(w,k.dir,I)}else if(a._terrainEnabled()){var C=a.zoomDeltaToMovement(x,c);js(w,k.dir,C)}}var A=Ns(v,v,w);a._translateCameraConstrained(A),c&&Math.abs(a.zoom-_)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,n,!0)}},{key:"_fireEvents",value:function(e,t,n){var r=this,i=zm(this._eventsInProgress),a=zm(e),o={};for(var s in e){var u=e[s].originalEvent;this._eventsInProgress[s]||(o["".concat(s,"start")]=u),this._eventsInProgress[s]=e[s]}for(var c in!i&&a&&this._fireEvent("movestart",a.originalEvent),o)this._fireEvent(c,o[c]);for(var l in a&&this._fireEvent("move",a.originalEvent),e){var h=e[l].originalEvent;this._fireEvent(l,h)}var f,d={};for(var p in this._eventsInProgress){var v=this._eventsInProgress[p],m=v.handlerName,y=v.originalEvent;this._handlersById[m].isActive()||(delete this._eventsInProgress[p],f=t[m]||y,d["".concat(p,"end")]=f)}for(var g in d)this._fireEvent(g,d[g]);var b=zm(this._eventsInProgress);if(n&&(i||a)&&!b){this._updatingCamera=!0;var _=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-r._bearingSnap<e&&e<r._bearingSnap};_?(w(_.bearing||this._map.getBearing())&&(_.bearing=0),this._map.easeTo(_,{originalEvent:f})):(this._map.fire(new dt("moveend",{originalEvent:f})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(e,t){this._map.fire(new dt(e,t?{originalEvent:t}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new Bm("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),e}(),Gm=function(e){f(n,e);var t=d(n);function n(e,r){var a;return p(this,n),(a=t.call(this))._moving=!1,a._zooming=!1,a.transform=e,a._bearingSnap=r.bearingSnap,q(["_renderFrameCallback"],i(a)),a}return v(n,[{key:"getCenter",value:function(){return new vh(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(e,t,n){return e=_.convert(e).mult(-1),this.panTo(this.transform.center,j({offset:e},t),n)}},{key:"panTo",value:function(e,t,n){return this.easeTo(j({center:e},t),n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(e,t,n){return this.easeTo(j({zoom:e},t),n)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(e,t,n){return this.easeTo(j({bearing:e},t),n)}},{key:"resetNorth",value:function(e,t){return this.rotateTo(0,j({duration:1e3},e),t),this}},{key:"resetNorthPitch",value:function(e,t){return this.easeTo(j({bearing:0,pitch:0,duration:1e3},e),t),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(e,t){e=dh.convert(e);var n=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,t)}},{key:"_extendCameraOptions",value:function(e){var t={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=j({padding:t,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){var n=e.padding;e.padding={top:n,bottom:n,right:n,left:n}}return e.padding=j(t,e.padding),e}},{key:"_cameraForBoxAndBearing",value:function(e,t,n,r){var i=this._extendCameraOptions(r),a=this.transform,o=a.padding,s=a.project(vh.convert(e)),u=a.project(vh.convert(t)),c=s.rotate(-I(n)),l=u.rotate(-I(n)),h=new _(Math.max(c.x,l.x),Math.max(c.y,l.y)),f=new _(Math.min(c.x,l.x),Math.min(c.y,l.y)),d=h.sub(f),p=(a.width-(o.left+o.right+i.padding.left+i.padding.right))/d.x,v=(a.height-(o.top+o.bottom+i.padding.top+i.padding.bottom))/d.y;if(!(v<0||p<0)){var m=Math.min(a.scaleZoom(a.scale*Math.min(p,v)),i.maxZoom),y="number"==typeof i.offset.x?new _(i.offset.x,i.offset.y):_.convert(i.offset),g=new _((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(n*Math.PI/180),b=y.add(g).mult(a.scale/a.zoomScale(m));return{center:a.unproject(s.add(u).div(2).sub(b)),zoom:m,bearing:n}}X("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"_cameraForBox",value:function(e,t,n,r,i){var a=this._extendCameraOptions(i);n=n||0,r=r||0,e=vh.convert(e),t=vh.convert(t);var o=this.transform.clone();o.padding=a.padding;var s=this.getFreeCameraOptions(),u=new vh(.5*(e.lng+t.lng),.5*(e.lat+t.lat)),c=.5*(n+r);if(!(o._camera.position[2]<_h(c,u.lat))){s.lookAtPoint(u),o.setFreeCameraOptions(s);var l,h,f=kh.fromLngLat(e),d=kh.fromLngLat(t),p=o.pointRayIntersection(o.centerPoint,c),v=[(l=o.rayIntersectionCoordinate(p)).x,l.y,l.z],m=o.screenPointToMercatorRay(o.centerPoint),y=0;do{var g=Math.floor(o.zoom),b=1<<g,_=Math.min(b*f.x,b*d.x),w=Math.min(b*f.y,b*d.y),x=Math.max(b*f.x,b*d.x),k=Math.max(b*f.y,b*d.y),E=new eu([_,w,n],[x,k,r]),T=Js.fromInvProjectionMatrix(o.invProjMatrix,o.worldSize,g);if(2!==E.intersects(T)){h&&(o._camera.position=Fs([],o._camera.position,m.dir,-h),o._updateStateFromCamera());break}h=.5*Rs(Gs([],o._camera.position,v)),o._camera.position=Fs([],o._camera.position,m.dir,h);try{o._updateStateFromCamera()}catch(e){return void X("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++y<10);return{center:o.center,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch}}X("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)}},{key:"_raycastElevationBox",value:function(e,t){var n=this.transform.elevation;if(n){var r=new _(e.x,t.y),i=new _(t.x,e.y),a=n.pointCoordinate(e);if(a){var o=n.pointCoordinate(t);if(o){var s=n.pointCoordinate(r);if(s){var u=n.pointCoordinate(i);if(u){var c=new kh(a[0],a[1]).toLngLat(),l=new kh(o[0],o[1]).toLngLat(),h=new kh(s[0],s[1]).toLngLat(),f=new kh(u[0],u[1]).toLngLat(),d=Math.min(c.lng,Math.min(l.lng,Math.min(h.lng,f.lng))),p=Math.min(c.lat,Math.min(l.lat,Math.min(h.lat,f.lat))),v=Math.max(c.lng,Math.max(l.lng,Math.max(h.lng,f.lng))),m=Math.max(c.lat,Math.max(l.lat,Math.max(h.lat,f.lat))),y=Math.min(a[3],Math.min(o[3],Math.min(s[3],u[3]))),g=Math.max(a[3],Math.max(o[3],Math.max(s[3],u[3])));return{minLngLat:new vh(d,p),maxLngLat:new vh(v,m),minAltitude:y,maxAltitude:g}}}}}}}},{key:"fitScreenCoordinates",value:function(e,t,n,r,i){var a,o,s,u,c=_.convert(e),l=_.convert(t),h=this._raycastElevationBox(c,l);if(h)a=h.minLngLat,o=h.maxLngLat,s=h.minAltitude,u=h.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(c,l))return this;a=this.transform.pointLocation(c),o=this.transform.pointLocation(l)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(_.convert(e)),this.transform.pointLocation(_.convert(t)),n,r):this._cameraForBox(a,o,s,u,r),r,i)}},{key:"_fitInternal",value:function(e,t,n){return e?(delete(t=j(e,t)).padding,t.linear?this.easeTo(t,n):this.flyTo(t,n)):this}},{key:"jumpTo",value:function(e,t){this.stop();var n=this.transform,r=!1,i=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=vh.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new dt("movestart",t)).fire(new dt("move",t)),r&&this.fire(new dt("zoomstart",t)).fire(new dt("zoom",t)).fire(new dt("zoomend",t)),i&&this.fire(new dt("rotatestart",t)).fire(new dt("rotate",t)).fire(new dt("rotateend",t)),a&&this.fire(new dt("pitchstart",t)).fire(new dt("pitch",t)).fire(new dt("pitchend",t)),this.fire(new dt("moveend",t))}},{key:"getFreeCameraOptions",value:function(){return this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(e,t){this.stop();var n=this.transform,r=n.zoom,i=n.pitch,a=n.bearing;n.setFreeCameraOptions(e);var o=r!==n.zoom,s=i!==n.pitch,u=a!==n.bearing;return this.fire(new dt("movestart",t)).fire(new dt("move",t)),o&&this.fire(new dt("zoomstart",t)).fire(new dt("zoom",t)).fire(new dt("zoomend",t)),u&&this.fire(new dt("rotatestart",t)).fire(new dt("rotate",t)).fire(new dt("rotateend",t)),s&&this.fire(new dt("pitchstart",t)).fire(new dt("pitch",t)).fire(new dt("pitchend",t)),this.fire(new dt("moveend",t)),this}},{key:"easeTo",value:function(e,t){var n=this;this._stop(!1,e.easeId),(!1===(e=j({offset:[0,0],duration:500,easing:D},e)).animate||!e.essential&&se.prefersReducedMotion)&&(e.duration=0);var r=this.transform,i=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),u="zoom"in e?+e.zoom:i,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,l="pitch"in e?+e.pitch:o,h="padding"in e?e.padding:r.padding,f=_.convert(e.offset),d=r.centerPoint.add(f),p=r.pointLocation(d),v=vh.convert(e.center||p);this._normalizeCenter(v);var m,y,g=r.project(p),b=r.project(v).sub(g),w=r.zoomScale(u-i);e.around&&(m=vh.convert(e.around),y=r.locationPoint(m));var x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==i,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||l!==o,this._padding=!r.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(t,e.noMoveStart,x),this._ease((function(e){if(n._zooming&&(r.zoom=Nn(i,u,e)),n._rotating&&(r.bearing=Nn(a,c,e)),n._pitching&&(r.pitch=Nn(o,l,e)),n._padding&&(r.interpolatePadding(s,h,e),d=r.centerPoint.add(f)),m)r.setLocationAtPoint(m,y);else{var p=r.zoomScale(r.zoom-i),v=u>i?Math.min(2,w):Math.max(.5,w),_=Math.pow(v,1-e),x=r.unproject(g.add(b.mult(e*_)).mult(p));r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,d)}n._fireMoveEvents(t)}),(function(e){r.recenterOnTerrain(),n._afterEase(t,e)}),e),this}},{key:"_prepareEase",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",t||n.moving||this.fire(new dt("movestart",e)),this._zooming&&!n.zooming&&this.fire(new dt("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new dt("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new dt("pitchstart",e))}},{key:"_fireMoveEvents",value:function(e){this.fire(new dt("move",e)),this._zooming&&this.fire(new dt("zoom",e)),this._rotating&&this.fire(new dt("rotate",e)),this._pitching&&this.fire(new dt("pitch",e))}},{key:"_afterEase",value:function(e,t){if(!this._easeId||!t||this._easeId!==t){delete this._easeId,this.transform.cameraElevationReference="ground";var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new dt("zoomend",e)),r&&this.fire(new dt("rotateend",e)),i&&this.fire(new dt("pitchend",e)),this.fire(new dt("moveend",e))}}},{key:"flyTo",value:function(e,t){var n=this;if(!e.essential&&se.prefersReducedMotion){var r=F(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,t)}this.stop(),e=j({offset:[0,0],speed:1.2,curve:1.42,easing:D},e);var i=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),u=this.getPadding(),c="zoom"in e?R(+e.zoom,i.minZoom,i.maxZoom):a,l="bearing"in e?this._normalizeBearing(e.bearing,o):o,h="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:i.padding,d=i.zoomScale(c-a),p=_.convert(e.offset),v=i.centerPoint.add(p),m=i.pointLocation(v),y=vh.convert(e.center||m);this._normalizeCenter(y);var g=i.project(m),b=i.project(y).sub(g),w=e.curve,x=Math.max(i.width,i.height),k=x/d,E=b.mag();if("minZoom"in e){var T=R(Math.min(e.minZoom,a,c),i.minZoom,i.maxZoom),S=x/i.zoomScale(T-a);w=Math.sqrt(S/E*2)}var I=w*w;function C(e){var t=(k*k-x*x+(e?-1:1)*I*I*E*E)/(2*(e?k:x)*I*E);return Math.log(Math.sqrt(t*t+1)-t)}function A(e){return(Math.exp(e)-Math.exp(-e))/2}function O(e){return(Math.exp(e)+Math.exp(-e))/2}var P=C(0),M=function(e){return O(P)/O(P+w*e)},N=function(e){return x*((O(P)*(A(t=P+w*e)/O(t))-A(P))/I)/E;var t},L=(C(1)-P)/w;if(Math.abs(E)<1e-6||!isFinite(L)){if(Math.abs(x-k)<1e-6)return this.easeTo(e,t);var z=k<x?-1:1;L=Math.abs(Math.log(k/x))/w,N=function(){return 0},M=function(e){return Math.exp(z*w*e)}}return e.duration="duration"in e?+e.duration:1e3*L/("screenSpeed"in e?+e.screenSpeed/w:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==l,this._pitching=h!==s,this._padding=!i.isPaddingEqual(f),this._prepareEase(t,!1),this._ease((function(e){var r=e*L,d=1/M(r);i.zoom=1===e?c:a+i.scaleZoom(d),n._rotating&&(i.bearing=Nn(o,l,e)),n._pitching&&(i.pitch=Nn(s,h,e)),n._padding&&(i.interpolatePadding(u,f,e),v=i.centerPoint.add(p));var m=1===e?y:i.unproject(g.add(b.mult(N(r))).mult(d));i.setLocationAtPoint(i.renderWorldCopies?m.wrap():m,v),i._updateCenterElevation(),n._fireMoveEvents(t)}),(function(){return n._afterEase(t)}),e),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(e,t,n){!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=se.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var e=Math.min((se.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(e,t){e=M(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}}]),n}(vt),Km=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.options=t,q(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return v(e,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ue.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ue.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}},{key:"_updateEditLink",value:function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||ge.ACCESS_TOKEN}];if(e){var n=t.reduce((function(e,n,r){return n.value&&(e+="".concat(n.key,"=").concat(n.value).concat(r<t.length-1?"&":"")),e}),"?");e.href="".concat(ge.FEEDBACK_URL,"/").concat(n).concat(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length}));var o=(e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),e}(),Hm=function(){function e(){p(this,e),q(["_updateLogo"],this),q(["_updateCompact"],this)}return v(e,[{key:"onAdd",value:function(e){this._map=e,this._container=ue.create("div","mapboxgl-ctrl");var t=ue.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),e}(),Wm=function(){function e(){p(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return v(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=m(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,r=m(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(a){r.e(a)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}(),Zm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Xm=x.HTMLImageElement,Ym=x.HTMLElement,Qm=x.ImageBitmap,$m={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Jm(e){e.parentNode&&e.parentNode.removeChild(e)}var ey={showCompass:!0,showZoom:!0,visualizePitch:!1},ty=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];p(this,e),this._clickTolerance=10,this.element=n,this.mouseRotate=new ym({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new gm({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),q(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ue.addEventListener(n,"mousedown",this.mousedown),ue.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),ue.addEventListener(n,"touchmove",this.touchmove),ue.addEventListener(n,"touchend",this.touchend),ue.addEventListener(n,"touchcancel",this.reset)}return v(e,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),ue.disableDrag()}},{key:"move",value:function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(e,t);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}}},{key:"off",value:function(){var e=this.element;ue.removeEventListener(e,"mousedown",this.mousedown),ue.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),ue.removeEventListener(e,"touchmove",this.touchmove),ue.removeEventListener(e,"touchend",this.touchend),ue.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){ue.enableDrag(),ue.removeEventListener(x,"mousemove",this.mousemove),ue.removeEventListener(x,"mouseup",this.mouseup)}},{key:"mousedown",value:function(e){this.down(j({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),ue.mousePos(this.element,e)),ue.addEventListener(x,"mousemove",this.mousemove),ue.addEventListener(x,"mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,ue.mousePos(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=ue.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=ue.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),e}();function ny(e,t,n){if(e=new vh(e.lng,e.lat),t){var r=new vh(e.lng-360,e.lat),i=new vh(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-n.center.lng)/360),o=n.locationPoint(e).distSqr(t),s=t.x<0||t.y<0||t.x>n.width||t.y>n.height;n.locationPoint(r).distSqr(t)<o&&(s||Math.abs(r.lng-n.center.lng)<a)?e=r:n.locationPoint(i).distSqr(t)<o&&(s||Math.abs(i.lng-n.center.lng)<a)&&(e=i)}for(;Math.abs(e.lng-n.center.lng)>180;){var u=n.locationPoint(e);if(u.x>=0&&u.y>=0&&u.x<=n.width&&u.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}var ry={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function iy(e,t,n){var r=e.classList;for(var i in ry)r.remove("mapboxgl-".concat(n,"-anchor-").concat(i));r.add("mapboxgl-".concat(n,"-anchor-").concat(t))}var ay,oy=function(e){f(n,e);var t=d(n);function n(e,r){var a;if(p(this,n),a=t.call(this),(e instanceof x.HTMLElement||r)&&(e=j({element:e},r)),q(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],i(a)),a._anchor=e&&e.anchor||"center",a._color=e&&e.color||"#3FB1CE",a._scale=e&&e.scale||1,a._draggable=e&&e.draggable||!1,a._clickTolerance=e&&e.clickTolerance||0,a._isDragging=!1,a._state="inactive",a._rotation=e&&e.rotation||0,a._rotationAlignment=e&&e.rotationAlignment||"auto",a._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:a._rotationAlignment,e&&e.element)a._element=e.element,a._offset=_.convert(e&&e.offset||[0,0]);else{a._defaultMarker=!0,a._element=ue.create("div"),a._element.setAttribute("aria-label","Map marker");var o=ue.createNS("http://www.w3.org/2000/svg","svg"),u=41,c=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","".concat(u,"px")),o.setAttributeNS(null,"width","".concat(c,"px")),o.setAttributeNS(null,"viewBox","0 0 ".concat(c," ").concat(u));var l=ue.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"stroke","none"),l.setAttributeNS(null,"stroke-width","1"),l.setAttributeNS(null,"fill","none"),l.setAttributeNS(null,"fill-rule","evenodd");var h=ue.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill-rule","nonzero");var f=ue.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(3.0, 29.0)"),f.setAttributeNS(null,"fill","#000000");for(var d=0,v=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];d<v.length;d++){var m=v[d],y=ue.createNS("http://www.w3.org/2000/svg","ellipse");y.setAttributeNS(null,"opacity","0.04"),y.setAttributeNS(null,"cx","10.5"),y.setAttributeNS(null,"cy","5.80029008"),y.setAttributeNS(null,"rx",m.rx),y.setAttributeNS(null,"ry",m.ry),f.appendChild(y)}var g=ue.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"fill",a._color);var b=ue.createNS("http://www.w3.org/2000/svg","path");b.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),g.appendChild(b);var w=ue.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"opacity","0.25"),w.setAttributeNS(null,"fill","#000000");var k=ue.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),w.appendChild(k);var E=ue.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(6.0, 7.0)"),E.setAttributeNS(null,"fill","#FFFFFF");var T=ue.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(8.0, 8.0)");var S=ue.createNS("http://www.w3.org/2000/svg","circle");S.setAttributeNS(null,"fill","#000000"),S.setAttributeNS(null,"opacity","0.25"),S.setAttributeNS(null,"cx","5.5"),S.setAttributeNS(null,"cy","5.5"),S.setAttributeNS(null,"r","5.4999962");var I=ue.createNS("http://www.w3.org/2000/svg","circle");I.setAttributeNS(null,"fill","#FFFFFF"),I.setAttributeNS(null,"cx","5.5"),I.setAttributeNS(null,"cy","5.5"),I.setAttributeNS(null,"r","5.4999962"),T.appendChild(S),T.appendChild(I),h.appendChild(f),h.appendChild(g),h.appendChild(w),h.appendChild(E),h.appendChild(T),o.appendChild(h),o.setAttributeNS(null,"height",u*a._scale+"px"),o.setAttributeNS(null,"width",c*a._scale+"px"),a._element.appendChild(o),a._offset=_.convert(e&&e.offset||[0,-14])}return a._element.classList.add("mapboxgl-marker"),a._element.addEventListener("dragstart",(function(e){e.preventDefault()})),a._element.addEventListener("mousedown",(function(e){e.preventDefault()})),iy(a._element,a._anchor,"marker"),a._popup=null,s(a)}return v(n,[{key:"addTo",value:function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}},{key:"remove",value:function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),ue.remove(this._element),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=vh.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}},{key:"_updateOcclusion",value:function(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}},{key:"_onOcclusionTimer",value:function(){var e=this._map.transform,t=this._pos?this._pos.sub(this._transformedOffset()):null;if(t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height){var n=this._map.unproject(t),r=this._map.getFreeCameraOptions();if(r.position){var i=r.position.toLngLat(),a=i.distanceTo(n),o=i.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",a<.9*o)}}this._occlusionTimer=null}},{key:"_update",value:function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ny(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ(".concat(this._rotation,"deg)"):"map"===this._rotationAlignment&&(t="rotateZ(".concat(this._rotation-this._map.getBearing(),"deg)"));var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX(".concat(this._map.getPitch(),"deg)")),e&&"moveend"!==e.type||(this._pos=this._pos.round()),ue.setTransform(this._element,"".concat(ry[this._anchor]," translate(").concat(this._pos.x,"px, ").concat(this._pos.y,"px) ").concat(n," ").concat(t))}}},{key:"_transformedOffset",value:function(){if(!this._defaultMarker)return this._offset;var e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(e){return this._offset=_.convert(e),this._update(),this}},{key:"_onMove",value:function(e){if(!this._isDragging){var t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new dt("dragstart"))),this.fire(new dt("drag")))}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new dt("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}},{key:"getPitchAlignment",value:function(){return this._pitchAlignment}}]),n}(vt),sy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},uy=0,cy=!1,ly={maxWidth:100,unit:"metric"};function hy(e,t,n){var r=n&&n.maxWidth||100,i=e._container.clientHeight/2,a=e.unproject([0,i]),o=e.unproject([r,i]),s=a.distanceTo(o);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?fy(t,r,u/5280,e._getUIString("ScaleControl.Miles")):fy(t,r,u,e._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?fy(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?fy(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):fy(t,r,s,e._getUIString("ScaleControl.Meters"))}function fy(e,t,n,r){var i=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n))}(n);e.style.width=t*(i/n)+"px",e.innerHTML="".concat(i,"&nbsp;").concat(r)}var dy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},py=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vy(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new _(0,0),top:new _(0,e),"top-left":new _(t,t),"top-right":new _(-t,t),bottom:new _(0,-e),"bottom-left":new _(t,-t),"bottom-right":new _(-t,-t),left:new _(e,0),right:new _(-e,0)}}if(e instanceof _||Array.isArray(e)){var n=_.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:_.convert(e.center||[0,0]),top:_.convert(e.top||[0,0]),"top-left":_.convert(e["top-left"]||[0,0]),"top-right":_.convert(e["top-right"]||[0,0]),bottom:_.convert(e.bottom||[0,0]),"bottom-left":_.convert(e["bottom-left"]||[0,0]),"bottom-right":_.convert(e["bottom-right"]||[0,0]),left:_.convert(e.left||[0,0]),right:_.convert(e.right||[0,0])}}return vy(new _(0,0))}var my={version:y,supported:e,setRTLTextPlugin:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(na===$i||na===Ji||na===ea)throw new Error("setRTLTextPlugin cannot be called multiple times.");ra=se.resolveURL(e),na=$i,ta=t,aa(),n||ua()},getRTLTextPluginStatus:sa,Map:function(t){f(c,t);var u=d(c);function c(e){var t;if(p(this,c),null!=(e=j({},$m,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if((t=u.call(this,new Zv(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e))._interactive=e.interactive,t._maxTileCacheSize=e.maxTileCacheSize,t._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,t._preserveDrawingBuffer=e.preserveDrawingBuffer,t._antialias=e.antialias,t._trackResize=e.trackResize,t._bearingSnap=e.bearingSnap,t._refreshExpiredTiles=e.refreshExpiredTiles,t._fadeDuration=e.fadeDuration,t._isInitialLoad=!0,t._crossSourceCollisions=e.crossSourceCollisions,t._crossFadingFactor=1,t._collectResourceTiming=e.collectResourceTiming,t._optimizeForTerrain=e.optimizeForTerrain,t._renderTaskQueue=new Wm,t._controls=[],t._mapId=B(),t._locale=j({},Zm,e.locale),t._clickTolerance=e.clickTolerance,t._requestManager=new Te(e.transformRequest,e.accessToken,e.testMode),t._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(t._container=x.document.getElementById(e.container),!t._container)throw new Error("Container '".concat(e.container,"' not found."))}else{if(!(e.container instanceof Ym))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");t._container=e.container}if(e.maxBounds&&t.setMaxBounds(e.maxBounds),q(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],i(t)),t._setupContainer(),t._setupPainter(),void 0===t.painter)throw new Error("Failed to initialize WebGL.");return t.on("move",(function(){return t._update(!1)})),t.on("moveend",(function(){return t._update(!1)})),t.on("zoom",(function(){return t._update(!0)})),void 0!==x&&(x.addEventListener("online",t._onWindowOnline,!1),x.addEventListener("resize",t._onWindowResize,!1),x.addEventListener("orientationchange",t._onWindowResize,!1)),t.handlers=new qm(i(t),e),t._hash=e.hash&&new Xv("string"==typeof e.hash&&e.hash||void 0).addTo(i(t)),t._hash&&t._hash._onHashChange()||(t.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(t.resize(),t.fitBounds(e.bounds,j({},e.fitBoundsOptions,{duration:0})))),t.resize(),t._localFontFamily=e.localFontFamily,t._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&t.setStyle(e.style,{localFontFamily:t._localFontFamily,localIdeographFontFamily:t._localIdeographFontFamily}),e.attributionControl&&t.addControl(new Km({customAttribution:e.customAttribution})),t._logoControl=new Hm,t.addControl(t._logoControl,e.logoPosition),t.on("style.load",(function(){t.transform.unmodified&&t.jumpTo(t.style.stylesheet)})),t.on("data",(function(e){t._update("style"===e.dataType),t.fire(new dt("".concat(e.dataType,"data"),e))})),t.on("dataloading",(function(e){t.fire(new dt("".concat(e.dataType,"dataloading"),e))})),s(t)}return v(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(e,t){if(void 0===t&&(t=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new pt(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this}},{key:"removeControl",value:function(e){if(!e||!e.onRemove)return this.fire(new pt(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var t=this._controls.indexOf(e);return t>-1&&this._controls.splice(t,1),e.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"resize",value:function(e){var t=this._containerDimensions(),n=t[0],r=t[1];this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r);var i=!this._moving;return i&&(this.stop(),this.fire(new dt("movestart",e)).fire(new dt("move",e))),this.fire(new dt("resize",e)),i&&this.fire(new dt("moveend",e)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(e){return this.transform.setMaxBounds(dh.convert(e)),this._update()}},{key:"setMinZoom",value:function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"project",value:function(e){return this.transform.locationPoint3D(vh.convert(e))}},{key:"unproject",value:function(e){return this.transform.pointLocation3D(_.convert(e))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()}},{key:"_createDelegatedListener",value:function(e,t,n){var i=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(r){var o=i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[];o.length?a||(a=!0,n.call(i,new im(e,i,r.originalEvent,{features:o}))):a=!1};return{layer:t,listener:n,delegates:{mousemove:o,mouseout:function(){a=!1}}}}if("mouseleave"===e||"mouseout"===e){var s=!1,u=function(r){(i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?s=!0:s&&(s=!1,n.call(i,new im(e,i,r.originalEvent)))},c=function(t){s&&(s=!1,n.call(i,new im(e,i,t.originalEvent)))};return{layer:t,listener:n,delegates:{mousemove:u,mouseout:c}}}var l=function(e){var r=i.getLayer(t)?i.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(i,e),delete e.features)};return{layer:t,listener:n,delegates:r({},e,l)}}},{key:"on",value:function(e,t,n){if(void 0===n)return a(o(c.prototype),"on",this).call(this,e,t);var r=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return a(o(c.prototype),"once",this).call(this,e,t);var r=this._createDelegatedListener(e,t,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(e,t,n){var r=this;return void 0===n?a(o(c.prototype),"off",this).call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(i){for(var a=r._delegatedListeners[e],o=0;o<a.length;o++){var s=a[o];if(s.layer===t&&s.listener===n){for(var u in s.delegates)r.off(u,s.delegates[u]);return a.splice(o,1),r}}}(),this)}},{key:"queryRenderedFeatures",value:function(e,t){return this.style?(void 0!==t||void 0===e||e instanceof _||Array.isArray(e)||(t=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],t=t||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"setStyle",value:function(e,t){return!1!==(t=j({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},t)).diff&&t.localIdeographFontFamily===this._localIdeographFontFamily&&t.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._localFontFamily=t.localFontFamily,this._updateStyle(e,t))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new yp(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new yp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(e,t){var n=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(r,$e.Style);nt(i,(function(e,r){e?n.fire(new pt(e)):r&&n._updateDiff(r,t)}))}else"object"==typeof e&&this._updateDiff(e,t)}},{key:"_updateDiff",value:function(e,t){try{this.style.setState(e)&&this._update(!0)}catch(n){X("Unable to perform style diff: ".concat(n.message||n.error||n,".  Rebuilding the style from scratch.")),this._updateStyle(e,t)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():X("There is no style added to the map.")}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){var t=this.style&&this.style._getSourceCaches(e);if(0!==t.length)return t.every((function(e){return e.loaded()}));this.fire(new pt(new Error("There is no source with ID '".concat(e,"'"))))}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.pixelRatio,i=void 0===r?1:r,a=n.sdf,o=void 0!==a&&a,s=n.stretchX,u=n.stretchY,c=n.content;if(this._lazyInitEmptyStyle(),t instanceof Xm||Qm&&t instanceof Qm){var l=se.getImageData(t),h=l.width,f=l.height,d=l.data;this.style.addImage(e,{data:new lu({width:h,height:f},d),pixelRatio:i,stretchX:s,stretchY:u,content:c,sdf:o,version:0})}else{if(void 0===t.width||void 0===t.height)return this.fire(new pt(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var p=t.width,v=t.height,m=t.data,y=t;this.style.addImage(e,{data:new lu({width:p,height:v},new Uint8Array(m)),pixelRatio:i,stretchX:s,stretchY:u,content:c,sdf:o,version:0,userImage:y}),y.onAdd&&y.onAdd(this,e)}}},{key:"updateImage",value:function(e,t){var n=this.style.getImage(e);if(!n)return this.fire(new pt(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=t instanceof Xm||Qm&&t instanceof Qm?se.getImageData(t):t,i=r.width,a=r.height,o=r.data;return void 0===i||void 0===a?this.fire(new pt(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):i!==n.data.width||a!==n.data.height?this.fire(new pt(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(o,!(t instanceof Xm||Qm&&t instanceof Qm)),void this.style.updateImage(e,n))}},{key:"hasImage",value:function(e){return e?!!this.style.getImage(e):(this.fire(new pt(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(e,t){lt(this._requestManager.transformRequest(e,$e.Image),t)}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._update(!0)}},{key:"getTerrain",value:function(){return this.style.getTerrain()}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"_containerDimensions",value:function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==x.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&X("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=ue.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=ue.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=ue.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=ue.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){i[e]=ue.create("div","mapboxgl-ctrl-".concat(e),r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(e,t){var n=se.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width="".concat(e,"px"),this._canvas.style.height="".concat(t,"px")}},{key:"_setupPainter",value:function(){var t=this,n=j({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(Be(r,!0),this.painter=new Fv(r,this.transform),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),be.testSupport(r)):this.fire(new pt(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new dt("webglcontextlost",{originalEvent:e}))}},{key:"_contextRestored",value:function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new dt("webglcontextrestored",{originalEvent:e}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_render",value:function(e){var t,n=this,r=0,i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(t=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,t),r=se.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1,o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=se.now();this.style.zoomHistory.update(s,u);var c=new la(s,{now:u,fadeDuration:o,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=c.crossFadingFactor();1===l&&l===this._crossFadingFactor||(a=!0,this._crossFadingFactor=l),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new dt("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new dt("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var h=se.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,t),setTimeout((function(){var e=i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(t),n.fire(new dt("gpu-timing-frame",{cpuTime:h,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var f=this.painter.collectGpuTimers();setTimeout((function(){var e=n.painter.queryGpuTimers(f);n.fire(new dt("gpu-timing-layer",{layerTimes:e}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;if(d||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new dt("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var p=this._calculateSpeedIndex();this.fire(new dt("speedindexcompleted",{speedIndex:p})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,this._authenticate()),this}}},{key:"_authenticate",value:function(){var e=this;Fe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(t){if(t&&(t.message===Ee||401===t.status)){var n=e.painter.context.gl;Be(n,!1),e._logoControl instanceof Hm&&e._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),e._silenceAuthErrors||e.fire(new pt(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),Le(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var r=n[1]-n[0],i=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,u=0;u<o.length;u+=4)o[u]===e[u]&&o[u+1]===e[u+1]&&o[u+2]===e[u+2]&&o[u+3]===e[u+3]&&(s+=1);r+=(n[a+2]-n[a+1])*(1-s/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var e,t=m(this._controls);try{for(t.s();!(e=t.n()).done;)e.value.onRemove(this)}catch(r){t.e(r)}finally{t.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==x&&(x.removeEventListener("resize",this._onWindowResize,!1),x.removeEventListener("orientationchange",this._onWindowResize,!1),x.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),Jm(this._canvasContainer),Jm(this._controlContainer),Jm(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),ze.delete(this.painter.context.gl),this._removed=!0,this.fire(new dt("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(e){var t=this;this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=se.frame((function(e){var n=!!t._renderNextFrame;t._frame=null,t._renderNextFrame=null,n&&t._render(e)})))}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"_setCacheLimits",value:function(e,t){!function(e,t){Ge=e,Ke=t}(e,t)}},{key:"version",get:function(){return y}}]),c}(Gm),NavigationControl:function(){function e(t){var n=this;p(this,e),this.options=j({},ey,t),this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(q(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return n._map.zoomIn({},{originalEvent:e})})),ue.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return n._map.zoomOut({},{originalEvent:e})})),ue.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(q(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:e}):n._map.resetNorth({},{originalEvent:e})})),this._compassIcon=ue.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}return v(e,[{key:"_updateZoomButtons",value:function(){var e=this._map.getZoom(),t=e===this._map.getMaxZoom(),n=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}},{key:"_rotateCompassArrow",value:function(){var e=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(this._map.transform.pitch,"deg) rotateZ(").concat(this._map.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(this._map.transform.angle*(180/Math.PI),"deg)");this._compassIcon.style.transform=e}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ty(this._map,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}},{key:"_createButton",value:function(e,t){var n=ue.create("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){var n=this._map._getUIString("NavigationControl.".concat(t));e.title=n,e.setAttribute("aria-label",n)}}]),e}(),GeolocateControl:function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this)).options=j({},sy,e),q(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],i(r)),r}return v(n,[{key:"onAdd",value:function(e){var t;return this._map=e,this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,void 0!==ay?t(ay):void 0!==x.navigator.permissions?x.navigator.permissions.query({name:"geolocation"}).then((function(e){ay="denied"!==e.state,t(ay)})):(ay=!!x.navigator.geolocation,t(ay)),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(x.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),ue.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,uy=0,cy=!1}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new dt("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new dt("geolocate",e)),this._finish()}}},{key:"_updateCamera",value:function(e){var t=new vh(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=j({bearing:this._map.getBearing()},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(n),r,{geolocateSource:!0})}},{key:"_updateMarker",value:function(e){if(e){var t=new vh(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),n=this._map.unproject([100,e]),r=t.distanceTo(n)/100,i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width="".concat(i,"px"),this._circleElement.style.height="".concat(i,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_onError",value:function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&cy)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new dt("error",e)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(e){var t=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=ue.create("button","mapboxgl-ctrl-geolocate",this._container),ue.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){X("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ue.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new oy(this._dotElement),this._circleElement=ue.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oy({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire(new dt("trackuserlocationend")))}))}},{key:"trigger",value:function(){if(!this._setup)return X("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new dt("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":uy--,cy=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new dt("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new dt("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++uy>1?(e={maximumAge:6e5,timeout:0},cy=!0):(e=this.options.positionOptions,cy=!1),this._geolocationWatchID=x.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else x.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_clearWatch",value:function(){x.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),n}(vt),AttributionControl:Km,ScaleControl:function(){function e(t){p(this,e),this.options=j({},ly,t),q(["_onMove","setUnit"],this)}return v(e,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_onMove",value:function(){hy(this._map,this._container,this.options)}},{key:"onAdd",value:function(e){return this._map=e,this._container=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}},{key:"onRemove",value:function(){ue.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},{key:"setUnit",value:function(e){this.options.unit=e,hy(this._map,this._container,this.options)}}]),e}(),FullscreenControl:function(){function e(t){p(this,e),this._fullscreen=!1,t&&t.container&&(t.container instanceof x.HTMLElement?this._container=t.container:X("Full screen control 'container' must be a DOM element.")),q(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in x.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in x.document&&(this._fullscreenchange="webkitfullscreenchange")}return v(e,[{key:"onAdd",value:function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=ue.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",X("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){ue.remove(this._controlContainer),this._map=null,x.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!x.document.fullscreenEnabled&&!x.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var e=this._fullscreenButton=ue.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ue.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),x.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(x.document.fullscreenElement||x.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?x.document.exitFullscreen?x.document.exitFullscreen():x.document.webkitCancelFullScreen&&x.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),e}(),Popup:function(e){f(n,e);var t=d(n);function n(e){var r;return p(this,n),(r=t.call(this)).options=j(Object.create(dy),e),q(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],i(r)),r}return v(n,[{key:"addTo",value:function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new dt("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){return this._content&&ue.remove(this._content),this._container&&(ue.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new dt("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(e){return this._lngLat=vh.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(e){return this.setDOMContent(x.document.createTextNode(e))}},{key:"setHTML",value:function(e){var t,n=x.document.createDocumentFragment(),r=x.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=ue.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){this._container&&this._container.classList.add(e)}},{key:"removeClassName",value:function(e){this._container&&this._container.classList.remove(e)}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){if(this._container)return this._container.classList.toggle(e)}},{key:"_createCloseButton",value:function(){this.options.closeButton&&(this._closeButton=ue.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}},{key:"_onMouseUp",value:function(e){this._update(e.point)}},{key:"_onMouseMove",value:function(e){this._update(e.point)}},{key:"_onDrag",value:function(e){this._update(e.point)}},{key:"_update",value:function(e){var t=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=ue.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=ue.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return t._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ny(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),r=this.options.anchor,i=vy(this.options.offset);if(!r){var a,o=this._container.offsetWidth,s=this._container.offsetHeight;a=n.y+i.bottom.y<s?["top"]:n.y>this._map.transform.height-s?["bottom"]:[],n.x<o/2?a.push("left"):n.x>this._map.transform.width-o/2&&a.push("right"),r=0===a.length?"bottom":a.join("-")}var u=n.add(i[r]).round();ue.setTransform(this._container,"".concat(ry[r]," translate(").concat(u.x,"px,").concat(u.y,"px)")),iy(this._container,r,"popup")}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(py);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}}]),n}(vt),Marker:oy,Style:yp,LngLat:vh,LngLatBounds:dh,Point:_,MercatorCoordinate:kh,FreeCameraOptions:Hv,Evented:vt,config:ge,prewarm:function(){hd().acquire(cd)},clearPrewarmedResources:function(){var e=ud;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(cd),ud=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return ge.ACCESS_TOKEN},set accessToken(e){ge.ACCESS_TOKEN=e},get baseApiUrl(){return ge.API_URL},set baseApiUrl(e){ge.API_URL=e},get workerCount(){return ld.workerCount},set workerCount(e){ld.workerCount=e},get maxParallelImageRequests(){return ge.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){ge.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){!function(e){var t=x.caches.delete(qe);e&&t.catch(e).then((function(){return e()}))}(e)},workerUrl:"",workerClass:null,setNow:se.setNow,restoreNow:se.restoreNow};return my}()},function(e,t,n){"use strict";var r=n(40),i=n(33);t.a=function(e,t,n,a){return Object(r.a)(e,t,n,a),function(){Object(i.a)(e,t,n,a)}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.a=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(59);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=Promise.resolve(),a=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.uiConfig=n.uiConfig,r.firebaseAuth=n.firebaseAuth,r.className=n.className,r.uiCallback=n.uiCallback,r.unregisterAuthObserver=function(){},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;n(2);var t=n(7);return i.then((function(){e.firebaseUiWidget=t.auth.AuthUI.getInstance()||new t.auth.AuthUI(e.firebaseAuth),"popup"===e.uiConfig.signInFlow&&e.firebaseUiWidget.reset(),e.userSignedIn=!1,e.unregisterAuthObserver=e.firebaseAuth.onAuthStateChanged((function(t){!t&&e.userSignedIn&&e.firebaseUiWidget.reset(),e.userSignedIn=!!t})),e.uiCallback&&e.uiCallback(e.firebaseUiWidget),e.firebaseUiWidget.start("#firebaseui_container",e.uiConfig)}))},t.prototype.componentWillUnmount=function(){var e=this;return i=i.then((function(){return e.unregisterAuthObserver(),e.firebaseUiWidget.delete()}))},t.prototype.render=function(){return r.default.createElement("div",{className:this.className,id:"firebaseui_container"})},t}(r.default.Component);t.default=a},function(e,t){e.exports=n(2)},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);n(5)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto:400,500,700);",""]),t.push([e.i,'.mdl-button{background:0 0;border:none;border-radius:2px;color:#000;position:relative;height:36px;margin:0;min-width:64px;padding:0 16px;display:inline-block;font-family:Roboto,Helvetica,Arial,sans-serif;font-size:14px;font-weight:500;text-transform:uppercase;line-height:1;letter-spacing:0;overflow:hidden;will-change:box-shadow;transition:box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1);outline:0;cursor:pointer;text-decoration:none;text-align:center;line-height:36px;vertical-align:middle}.mdl-button::-moz-focus-inner{border:0}.mdl-button:hover{background-color:hsla(0,0%,62%,.2)}.mdl-button:focus:not(:active){background-color:rgba(0,0,0,.12)}.mdl-button:active{background-color:hsla(0,0%,62%,.4)}.mdl-button.mdl-button--colored{color:#3f51b5}.mdl-button.mdl-button--colored:focus:not(:active){background-color:rgba(0,0,0,.12)}input.mdl-button[type=submit]{-webkit-appearance:none}.mdl-button--raised{background:hsla(0,0%,62%,.2);box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-button--raised:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:hsla(0,0%,62%,.4)}.mdl-button--raised:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:hsla(0,0%,62%,.4)}.mdl-button--raised.mdl-button--colored{background:#3f51b5;color:#fff}.mdl-button--raised.mdl-button--colored:active,.mdl-button--raised.mdl-button--colored:focus:not(:active),.mdl-button--raised.mdl-button--colored:hover{background-color:#3f51b5}.mdl-button--raised.mdl-button--colored .mdl-ripple{background:#fff}.mdl-button--fab{border-radius:50%;font-size:24px;height:56px;margin:auto;min-width:56px;width:56px;padding:0;overflow:hidden;background:hsla(0,0%,62%,.2);box-shadow:0 1px 1.5px 0 rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.24);position:relative;line-height:normal}.mdl-button--fab .material-icons{position:absolute;top:50%;left:50%;transform:translate(-12px,-12px);line-height:24px;width:24px}.mdl-button--fab.mdl-button--mini-fab{height:40px;min-width:40px;width:40px}.mdl-button--fab .mdl-button__ripple-container{border-radius:50%;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.mdl-button--fab:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:hsla(0,0%,62%,.4)}.mdl-button--fab:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:hsla(0,0%,62%,.4)}.mdl-button--fab.mdl-button--colored{background:#ff4081;color:#fff}.mdl-button--fab.mdl-button--colored:active,.mdl-button--fab.mdl-button--colored:focus:not(:active),.mdl-button--fab.mdl-button--colored:hover{background-color:#ff4081}.mdl-button--fab.mdl-button--colored .mdl-ripple{background:#fff}.mdl-button--icon{border-radius:50%;font-size:24px;height:32px;margin-left:0;margin-right:0;min-width:32px;width:32px;padding:0;overflow:hidden;color:inherit;line-height:normal}.mdl-button--icon .material-icons{position:absolute;top:50%;left:50%;transform:translate(-12px,-12px);line-height:24px;width:24px}.mdl-button--icon.mdl-button--mini-icon{height:24px;min-width:24px;width:24px}.mdl-button--icon.mdl-button--mini-icon .material-icons{top:0;left:0}.mdl-button--icon .mdl-button__ripple-container{border-radius:50%;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.mdl-button__ripple-container{display:block;height:100%;left:0;position:absolute;top:0;width:100%;z-index:0;overflow:hidden}.mdl-button.mdl-button--disabled .mdl-button__ripple-container .mdl-ripple,.mdl-button[disabled] .mdl-button__ripple-container .mdl-ripple{background-color:transparent}.mdl-button--primary.mdl-button--primary{color:#3f51b5}.mdl-button--primary.mdl-button--primary .mdl-ripple{background:#fff}.mdl-button--primary.mdl-button--primary.mdl-button--fab,.mdl-button--primary.mdl-button--primary.mdl-button--raised{color:#fff;background-color:#3f51b5}.mdl-button--accent.mdl-button--accent{color:#ff4081}.mdl-button--accent.mdl-button--accent .mdl-ripple{background:#fff}.mdl-button--accent.mdl-button--accent.mdl-button--fab,.mdl-button--accent.mdl-button--accent.mdl-button--raised{color:#fff;background-color:#ff4081}.mdl-button.mdl-button--disabled.mdl-button--disabled,.mdl-button[disabled][disabled]{color:rgba(0,0,0,.26);cursor:default;background-color:transparent}.mdl-button--fab.mdl-button--disabled.mdl-button--disabled,.mdl-button--fab[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26)}.mdl-button--raised.mdl-button--disabled.mdl-button--disabled,.mdl-button--raised[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26);box-shadow:none}.mdl-button--colored.mdl-button--disabled.mdl-button--disabled,.mdl-button--colored[disabled][disabled]{color:rgba(0,0,0,.26)}.mdl-button .material-icons{vertical-align:middle}.mdl-card{display:flex;flex-direction:column;font-size:16px;font-weight:400;min-height:200px;overflow:hidden;width:330px;z-index:1;position:relative;background:#fff;border-radius:2px;box-sizing:border-box}.mdl-card__media{background-color:#ff4081;background-repeat:repeat;background-position:50% 50%;background-size:cover;background-origin:padding-box;background-attachment:scroll;box-sizing:border-box}.mdl-card__title{align-items:center;color:#000;display:block;display:flex;justify-content:stretch;line-height:normal;padding:16px;perspective-origin:165px 56px;transform-origin:165px 56px;box-sizing:border-box}.mdl-card__title.mdl-card--border{border-bottom:1px solid rgba(0,0,0,.1)}.mdl-card__title-text{align-self:flex-end;color:inherit;display:block;display:flex;font-size:24px;font-weight:300;line-height:normal;overflow:hidden;transform-origin:149px 48px;margin:0}.mdl-card__subtitle-text{font-size:14px;color:rgba(0,0,0,.54);margin:0}.mdl-card__supporting-text{color:rgba(0,0,0,.54);font-size:1rem;line-height:18px;overflow:hidden;padding:16px;width:90%}.mdl-card__supporting-text.mdl-card--border{border-bottom:1px solid rgba(0,0,0,.1)}.mdl-card__actions{font-size:16px;line-height:normal;width:100%;background-color:transparent;padding:8px;box-sizing:border-box}.mdl-card__actions.mdl-card--border{border-top:1px solid rgba(0,0,0,.1)}.mdl-card--expand{flex-grow:1}.mdl-card__menu{position:absolute;right:16px;top:16px}.mdl-dialog{border:none;box-shadow:0 9px 46px 8px rgba(0,0,0,.14),0 11px 15px -7px rgba(0,0,0,.12),0 24px 38px 3px rgba(0,0,0,.2);width:280px}.mdl-dialog__title{padding:24px 24px 0;margin:0;font-size:2.5rem}.mdl-dialog__actions{padding:8px 8px 8px 24px;display:flex;flex-direction:row-reverse;flex-wrap:wrap}.mdl-dialog__actions>*{margin-right:8px;height:36px}.mdl-dialog__actions>:first-child{margin-right:0}.mdl-dialog__actions--full-width{padding:0 0 8px}.mdl-dialog__actions--full-width>*{height:48px;flex:0 0 100%;padding-right:16px;margin-right:0;text-align:right}.mdl-dialog__content{padding:20px 24px 24px;color:rgba(0,0,0,.54)}.mdl-progress{display:block;position:relative;height:4px;width:500px;max-width:100%}.mdl-progress>.bar{display:block;position:absolute;top:0;bottom:0;width:0;transition:width .2s cubic-bezier(.4,0,.2,1)}.mdl-progress>.progressbar{background-color:#3f51b5;z-index:1;left:0}.mdl-progress>.bufferbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7)),linear-gradient(90deg,#3f51b5,#3f51b5);z-index:0;left:0}.mdl-progress>.auxbar{right:0}@supports (-webkit-appearance:none){.mdl-progress:not(.mdl-progress--indeterminate):not(.mdl-progress--indeterminate)>.auxbar,.mdl-progress:not(.mdl-progress__indeterminate):not(.mdl-progress__indeterminate)>.auxbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7)),linear-gradient(90deg,#3f51b5,#3f51b5);mask:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+Cjxzdmcgd2lkdGg9IjEyIiBoZWlnaHQ9IjQiIHZpZXdQb3J0PSIwIDAgMTIgNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxlbGxpcHNlIGN4PSIyIiBjeT0iMiIgcng9IjIiIHJ5PSIyIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBmcm9tPSIyIiB0bz0iLTEwIiBkdXI9IjAuNnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiAvPgogIDwvZWxsaXBzZT4KICA8ZWxsaXBzZSBjeD0iMTQiIGN5PSIyIiByeD0iMiIgcnk9IjIiIGNsYXNzPSJsb2FkZXIiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGZyb209IjE0IiB0bz0iMiIgZHVyPSIwLjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4KICA8L2VsbGlwc2U+Cjwvc3ZnPgo=)}}.mdl-progress:not(.mdl-progress--indeterminate)>.auxbar,.mdl-progress:not(.mdl-progress__indeterminate)>.auxbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.9),hsla(0,0%,100%,.9)),linear-gradient(90deg,#3f51b5,#3f51b5)}.mdl-progress.mdl-progress--indeterminate>.bar1,.mdl-progress.mdl-progress__indeterminate>.bar1{background-color:#3f51b5;animation-name:indeterminate1;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}.mdl-progress.mdl-progress--indeterminate>.bar3,.mdl-progress.mdl-progress__indeterminate>.bar3{background-image:none;background-color:#3f51b5;animation-name:indeterminate2;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes indeterminate1{0%{left:0;width:0}50%{left:25%;width:75%}75%{left:100%;width:0}}@keyframes indeterminate2{0%{left:0;width:0}50%{left:0;width:0}75%{left:0;width:25%}to{left:100%;width:0}}.mdl-shadow--2dp{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-shadow--3dp{box-shadow:0 3px 4px 0 rgba(0,0,0,.14),0 3px 3px -2px rgba(0,0,0,.2),0 1px 8px 0 rgba(0,0,0,.12)}.mdl-shadow--4dp{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2)}.mdl-shadow--6dp{box-shadow:0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12),0 3px 5px -1px rgba(0,0,0,.2)}.mdl-shadow--8dp{box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2)}.mdl-shadow--16dp{box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.2)}.mdl-shadow--24dp{box-shadow:0 9px 46px 8px rgba(0,0,0,.14),0 11px 15px -7px rgba(0,0,0,.12),0 24px 38px 3px rgba(0,0,0,.2)}.mdl-spinner{display:inline-block;position:relative;width:28px;height:28px}.mdl-spinner:not(.is-upgraded).is-active:after{content:"Loading..."}.mdl-spinner.is-upgraded.is-active{animation:mdl-spinner__container-rotate 1.568s linear infinite}@keyframes mdl-spinner__container-rotate{to{transform:rotate(1turn)}}.mdl-spinner__layer{position:absolute;width:100%;height:100%;opacity:0}.mdl-spinner__layer-1{border-color:#42a5f5}.mdl-spinner--single-color .mdl-spinner__layer-1{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-1{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-1-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-2{border-color:#f44336}.mdl-spinner--single-color .mdl-spinner__layer-2{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-2{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-2-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-3{border-color:#fdd835}.mdl-spinner--single-color .mdl-spinner__layer-3{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-3{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-3-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-4{border-color:#4caf50}.mdl-spinner--single-color .mdl-spinner__layer-4{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-4{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-4-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}@keyframes mdl-spinner__fill-unfill-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}to{transform:rotate(3turn)}}@keyframes mdl-spinner__layer-1-fade-in-out{0%{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdl-spinner__layer-2-fade-in-out{0%{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}}@keyframes mdl-spinner__layer-3-fade-in-out{0%{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}}@keyframes mdl-spinner__layer-4-fade-in-out{0%{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}.mdl-spinner__gap-patch{position:absolute;box-sizing:border-box;top:0;left:45%;width:10%;height:100%;overflow:hidden;border-color:inherit}.mdl-spinner__gap-patch .mdl-spinner__circle{width:1000%;left:-450%}.mdl-spinner__circle-clipper{display:inline-block;position:relative;width:50%;height:100%;overflow:hidden;border-color:inherit}.mdl-spinner__circle-clipper.mdl-spinner__left{float:left}.mdl-spinner__circle-clipper.mdl-spinner__right{float:right}.mdl-spinner__circle-clipper .mdl-spinner__circle{width:200%}.mdl-spinner__circle{box-sizing:border-box;height:100%;border-width:3px;border-style:solid;border-color:inherit;border-bottom-color:transparent!important;border-radius:50%;animation:none;position:absolute;top:0;right:0;bottom:0;left:0}.mdl-spinner__left .mdl-spinner__circle{border-right-color:transparent!important;transform:rotate(129deg)}.mdl-spinner.is-active .mdl-spinner__left .mdl-spinner__circle{animation:mdl-spinner__left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__right .mdl-spinner__circle{left:-100%;border-left-color:transparent!important;transform:rotate(-129deg)}.mdl-spinner.is-active .mdl-spinner__right .mdl-spinner__circle{animation:mdl-spinner__right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}@keyframes mdl-spinner__left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}to{transform:rotate(130deg)}}@keyframes mdl-spinner__right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}to{transform:rotate(-130deg)}}.mdl-textfield{position:relative;font-size:16px;display:inline-block;box-sizing:border-box;width:300px;max-width:100%;margin:0;padding:20px 0}.mdl-textfield .mdl-button{position:absolute;bottom:20px}.mdl-textfield--align-right{text-align:right}.mdl-textfield--full-width{width:100%}.mdl-textfield--expandable{min-width:32px;width:auto;min-height:32px}.mdl-textfield--expandable .mdl-button--icon{top:16px}.mdl-textfield__input{border:none;border-bottom:1px solid rgba(0,0,0,.12);display:block;font-size:16px;font-family:Helvetica,Arial,sans-serif;margin:0;padding:4px 0;width:100%;background:0 0;text-align:left;color:inherit}.mdl-textfield__input[type=number]{-moz-appearance:textfield}.mdl-textfield__input[type=number]::-webkit-inner-spin-button,.mdl-textfield__input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.mdl-textfield.is-focused .mdl-textfield__input{outline:0}.mdl-textfield.is-invalid .mdl-textfield__input{border-color:#d50000;box-shadow:none}.mdl-textfield.is-disabled .mdl-textfield__input,fieldset[disabled] .mdl-textfield .mdl-textfield__input{background-color:transparent;border-bottom:1px dotted rgba(0,0,0,.12);color:rgba(0,0,0,.26)}.mdl-textfield textarea.mdl-textfield__input{display:block}.mdl-textfield__label{bottom:0;color:rgba(0,0,0,.26);font-size:16px;left:0;right:0;pointer-events:none;position:absolute;display:block;top:24px;width:100%;overflow:hidden;white-space:nowrap;text-align:left}.mdl-textfield.has-placeholder .mdl-textfield__label,.mdl-textfield.is-dirty .mdl-textfield__label{visibility:hidden}.mdl-textfield--floating-label .mdl-textfield__label{transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__label{transition:none}.mdl-textfield.is-disabled.is-disabled .mdl-textfield__label,fieldset[disabled] .mdl-textfield .mdl-textfield__label{color:rgba(0,0,0,.26)}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__label,.mdl-textfield--floating-label.is-dirty .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__label{color:#3f51b5;font-size:12px;top:4px;visibility:visible}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__expandable-holder .mdl-textfield__label,.mdl-textfield--floating-label.is-dirty .mdl-textfield__expandable-holder .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__expandable-holder .mdl-textfield__label{top:-16px}.mdl-textfield--floating-label.is-invalid .mdl-textfield__label{color:#d50000;font-size:12px}.mdl-textfield__label:after{background-color:#3f51b5;bottom:20px;content:"";height:2px;left:45%;position:absolute;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);visibility:hidden;width:10px}.mdl-textfield.is-focused .mdl-textfield__label:after{left:0;visibility:visible;width:100%}.mdl-textfield.is-invalid .mdl-textfield__label:after{background-color:#d50000}.mdl-textfield__error{color:#d50000;position:absolute;font-size:12px;margin-top:3px;visibility:hidden;display:block}.mdl-textfield.is-invalid .mdl-textfield__error{visibility:visible}.mdl-textfield__expandable-holder{position:relative;margin-left:32px;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);display:inline-block;max-width:.1px}.mdl-textfield.is-dirty .mdl-textfield__expandable-holder,.mdl-textfield.is-focused .mdl-textfield__expandable-holder{max-width:600px}.mdl-textfield__expandable-holder .mdl-textfield__label:after{bottom:0}dialog{position:absolute;left:0;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border:solid;padding:1em;background:#fff;color:#000;display:block}dialog:not([open]){display:none}dialog+.backdrop{background:rgba(0,0,0,.1)}._dialog_overlay,dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0}dialog.fixed{position:fixed;top:50%;transform:translateY(-50%)}.firebaseui-container{background-color:#fff;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;color:rgba(0,0,0,.87);direction:ltr;font:16px Roboto,arial,sans-serif;margin:0 auto;max-width:360px;overflow:visible;position:relative;text-align:left;width:100%}.firebaseui-container.mdl-card{overflow:visible}.firebaseui-card-header{padding:24px 24px 0}.firebaseui-card-content,.firebaseui-card-footer{padding:0 24px}.firebaseui-card-actions{box-sizing:border-box;display:table;font-size:14px;padding:8px 24px 24px;text-align:left;width:100%}.firebaseui-form-links{display:table-cell;vertical-align:middle;width:100%}.firebaseui-form-actions{display:table-cell;text-align:right;white-space:nowrap;width:100%}.firebaseui-subtitle,.firebaseui-title{color:rgba(0,0,0,.87);direction:ltr;font-size:20px;font-weight:500;line-height:24px;margin:0;padding:0;text-align:left}.firebaseui-title{padding-bottom:16px}.firebaseui-subtitle{margin:16px 0}.firebaseui-text{color:rgba(0,0,0,.87);direction:ltr;font-size:16px;line-height:24px;text-align:left}.firebaseui-id-page-password-recovery-email-sent p.firebaseui-text{margin:16px 0}.firebaseui-text-emphasis{font-weight:700}.firebaseui-error{color:#dd2c00;direction:ltr;font-size:12px;line-height:16px;margin:0;text-align:left}.firebaseui-text-input-error{margin:-16px 0 16px}.firebaseui-error-wrapper{min-height:16px}.firebaseui-list-item{direction:ltr;margin:0;padding:0;text-align:left}.firebaseui-hidden{display:none}.firebaseui-relative-wrapper{position:relative}.firebaseui-label{color:rgba(0,0,0,.54);direction:ltr;font-size:16px;text-align:left}.mdl-textfield--floating-label.is-dirty .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__label{color:#757575}.firebaseui-input,.firebaseui-input-invalid{border-radius:0;color:rgba(0,0,0,.87);direction:ltr;font-size:16px;width:100%}input.firebaseui-input,input.firebaseui-input-invalid{direction:ltr;text-align:left}.firebaseui-input-invalid{border-color:#dd2c00}.firebaseui-textfield{width:100%}.firebaseui-textfield.mdl-textfield .firebaseui-input{border-color:rgba(0,0,0,.12)}.firebaseui-textfield.mdl-textfield .firebaseui-label:after{background-color:#3f51b5}.firebaseui-textfield-invalid.mdl-textfield .firebaseui-input{border-color:#dd2c00}.firebaseui-textfield-invalid.mdl-textfield .firebaseui-label:after{background-color:#dd2c00}.firebaseui-button{display:inline-block;height:36px;margin-left:8px;min-width:88px}.firebaseui-link{color:#4285f4;font-variant:normal;font-weight:400;text-decoration:none}.firebaseui-link:hover{text-decoration:underline}.firebaseui-indent{margin-left:1em}.firebaseui-tos{color:#757575;direction:ltr;font-size:12px;line-height:16px;margin-bottom:24px;margin-top:0;text-align:left}.firebaseui-provider-sign-in-footer>.firebaseui-tos{text-align:center}.firebaseui-tos-list{list-style:none;text-align:right}.firebaseui-inline-list-item{display:inline-block;margin-left:5px;margin-right:5px}.firebaseui-page-provider-sign-in{background:inherit}.firebaseui-idp-list{list-style:none;margin:1em 0;padding:0}.firebaseui-idp-button{direction:ltr;font-weight:500;height:auto;line-height:normal;max-width:220px;min-height:40px;padding:8px 16px;text-align:left;width:100%}.firebaseui-idp-list>.firebaseui-list-item{margin-bottom:15px;text-align:center}.firebaseui-idp-icon-wrapper{display:table-cell;vertical-align:middle}.firebaseui-idp-icon{height:18px;width:18px}.firebaseui-idp-favicon,.firebaseui-idp-icon{border:none;display:inline-block;vertical-align:middle}.firebaseui-idp-favicon{height:14px;margin-right:5px;width:14px}.firebaseui-idp-text{color:#fff;display:table-cell;font-size:14px;padding-left:16px;text-transform:none;vertical-align:middle}.firebaseui-idp-text.firebaseui-idp-text-long{display:table-cell}.firebaseui-idp-text.firebaseui-idp-text-short{display:none}@media (max-width:268px){.firebaseui-idp-text.firebaseui-idp-text-long{display:none}.firebaseui-idp-text.firebaseui-idp-text-short{display:table-cell}}@media (max-width:320px){.firebaseui-recaptcha-container>div>div{transform:scale(.9);-webkit-transform:scale(.9);transform-origin:0 0;-webkit-transform-origin:0 0}}.firebaseui-idp-password,.firebaseui-idp-password:hover,.mdl-button.firebaseui-idp-password:active,.mdl-button.firebaseui-idp-password:focus{background-color:#db4437}.firebaseui-idp-phone,.firebaseui-idp-phone:hover,.mdl-button.firebaseui-idp-phone:active,.mdl-button.firebaseui-idp-phone:focus{background-color:#02bd7e}.firebaseui-idp-google,.firebaseui-idp-google:hover,.mdl-button.firebaseui-idp-google:active,.mdl-button.firebaseui-idp-google:focus{background-color:#fff}.firebaseui-idp-google>.firebaseui-idp-text{color:#757575}.firebaseui-idp-github,.firebaseui-idp-github:hover,.mdl-button.firebaseui-idp-github:active,.mdl-button.firebaseui-idp-github:focus{background-color:#333}.firebaseui-idp-facebook,.firebaseui-idp-facebook:hover,.mdl-button.firebaseui-idp-facebook:active,.mdl-button.firebaseui-idp-facebook:focus{background-color:#3b5998}.firebaseui-idp-twitter,.firebaseui-idp-twitter:hover,.mdl-button.firebaseui-idp-twitter:active,.mdl-button.firebaseui-idp-twitter:focus{background-color:#55acee}.firebaseui-idp-anonymous,.firebaseui-idp-anonymous:hover,.mdl-button.firebaseui-idp-anonymous:active,.mdl-button.firebaseui-idp-anonymous:focus{background-color:#f4b400}.firebaseui-info-bar{background-color:#f9edbe;border:1px solid #f0c36d;box-shadow:0 2px 4px rgba(0,0,0,.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);left:10%;padding:8px 16px;position:absolute;right:10%;text-align:center;top:0}.firebaseui-info-bar-message{font-size:12px;margin:0}.firebaseui-dialog{box-sizing:border-box;color:rgba(0,0,0,.87);font:16px Roboto,arial,sans-serif;height:auto;padding:24px;text-align:left}.firebaseui-dialog-icon-wrapper{display:table-cell;vertical-align:middle}.firebaseui-dialog-icon{float:left;height:40px;margin-right:24px;width:40px}.firebaseui-progress-dialog-message{display:table-cell;font-size:16px;font-weight:400;min-height:40px;vertical-align:middle}.firebaseui-progress-dialog-loading-icon{height:28px;margin:6px 30px 6px 6px;width:28px}.firebaseui-icon-done{background-image:url(https://www.gstatic.com/images/icons/material/system/2x/done_googgreen_36dp.png);background-position:50%;background-repeat:no-repeat;background-size:36px 36px}.firebaseui-phone-number{display:flex}.firebaseui-country-selector{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/arrow_drop_down_grey600_18dp.png);background-position:100%;background-repeat:no-repeat;background-size:18px auto;border-radius:0;border-bottom:1px solid rgba(0,0,0,.12);color:rgba(0,0,0,.87);flex-shrink:0;font-size:16px;font-weight:400;height:auto;line-height:normal;margin:20px 24px 20px 0;padding:4px 20px 4px 0;width:90px}.firebaseui-country-selector-flag{display:inline-block;margin-right:1ex}.firebaseui-flag{background-image:url(https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/flags_sprite_2x.png);background-size:100% auto;filter:drop-shadow(1px 1px 1px rgba(0,0,0,.54));height:14px;width:24px}.firebaseui-list-box-dialog{max-height:90%;overflow:auto;padding:8px 0 0}.firebaseui-list-box-actions{padding-bottom:8px}.firebaseui-list-box-icon-wrapper{padding-right:24px}.firebaseui-list-box-icon-wrapper,.firebaseui-list-box-label-wrapper{display:table-cell;vertical-align:top}.firebaseui-list-box-dialog-button{color:rgba(0,0,0,.87);direction:ltr;font-size:16px;font-weight:400;height:auto;line-height:normal;min-height:48px;padding:14px 24px;text-align:left;text-transform:none;width:100%}.firebaseui-phone-number-error{margin-left:114px}.mdl-progress.firebaseui-busy-indicator{height:2px;left:0;position:absolute;top:55px;width:100%}.mdl-spinner.firebaseui-busy-indicator{height:56px;left:0;margin:auto;position:absolute;right:0;top:30%;width:56px}.firebaseui-callback-indicator-container .firebaseui-busy-indicator{top:0}.firebaseui-callback-indicator-container{height:120px}.firebaseui-new-password-component{display:inline-block;position:relative;width:100%}.firebaseui-input-floating-button{background-position:50%;background-repeat:no-repeat;display:block;height:24px;position:absolute;right:0;top:20px;width:24px}.firebaseui-input-toggle-on{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/visibility_black_24dp.png)}.firebaseui-input-toggle-off{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/visibility_off_black_24dp.png)}.firebaseui-input-toggle-focus{opacity:.87}.firebaseui-input-toggle-blur{opacity:.38}.firebaseui-recaptcha-wrapper{display:table;margin:0 auto;padding-bottom:8px}.firebaseui-recaptcha-container{display:table-cell}.firebaseui-recaptcha-error-wrapper{caption-side:bottom;display:table-caption}.firebaseui-change-phone-number-link{display:block}.firebaseui-resend-container{direction:ltr;margin:20px 0;text-align:center}.firebaseui-id-resend-countdown{color:rgba(0,0,0,.38)}.firebaseui-id-page-phone-sign-in-start .firebaseui-form-actions div{float:left}@media (max-width:480px){.firebaseui-container{box-shadow:none;max-width:none;width:100%}.firebaseui-card-header{border-bottom:1px solid #e0e0e0;margin-bottom:16px;padding:16px 24px 0}.firebaseui-title{padding-bottom:16px}.firebaseui-card-actions{padding-right:24px}.firebaseui-busy-indicator{top:0}}.mdl-textfield__label{font-weight:400;margin-bottom:0}.firebaseui-id-page-blank{background:inherit;height:64px}.firebaseui-email-sent{background-image:url(https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/success_status.png);background-position:50%;background-repeat:no-repeat;background-size:64px 64px;height:64px;margin-top:16px;text-align:center}.firebaseui-text-justify{text-align:justify}.firebaseui-flag-KY{background-position:0 0}.firebaseui-flag-AC{background-position:0 -14px}.firebaseui-flag-AE{background-position:0 -28px}.firebaseui-flag-AF{background-position:0 -42px}.firebaseui-flag-AG{background-position:0 -56px}.firebaseui-flag-AI{background-position:0 -70px}.firebaseui-flag-AL{background-position:0 -84px}.firebaseui-flag-AM{background-position:0 -98px}.firebaseui-flag-AO{background-position:0 -112px}.firebaseui-flag-AQ{background-position:0 -126px}.firebaseui-flag-AR{background-position:0 -140px}.firebaseui-flag-AS{background-position:0 -154px}.firebaseui-flag-AT{background-position:0 -168px}.firebaseui-flag-AU{background-position:0 -182px}.firebaseui-flag-AW{background-position:0 -196px}.firebaseui-flag-AX{background-position:0 -210px}.firebaseui-flag-AZ{background-position:0 -224px}.firebaseui-flag-BA{background-position:0 -238px}.firebaseui-flag-BB{background-position:0 -252px}.firebaseui-flag-BD{background-position:0 -266px}.firebaseui-flag-BE{background-position:0 -280px}.firebaseui-flag-BF{background-position:0 -294px}.firebaseui-flag-BG{background-position:0 -308px}.firebaseui-flag-BH{background-position:0 -322px}.firebaseui-flag-BI{background-position:0 -336px}.firebaseui-flag-BJ{background-position:0 -350px}.firebaseui-flag-BL{background-position:0 -364px}.firebaseui-flag-BM{background-position:0 -378px}.firebaseui-flag-BN{background-position:0 -392px}.firebaseui-flag-BO{background-position:0 -406px}.firebaseui-flag-BQ{background-position:0 -420px}.firebaseui-flag-BR{background-position:0 -434px}.firebaseui-flag-BS{background-position:0 -448px}.firebaseui-flag-BT{background-position:0 -462px}.firebaseui-flag-BV{background-position:0 -476px}.firebaseui-flag-BW{background-position:0 -490px}.firebaseui-flag-BY{background-position:0 -504px}.firebaseui-flag-BZ{background-position:0 -518px}.firebaseui-flag-CA{background-position:0 -532px}.firebaseui-flag-CC{background-position:0 -546px}.firebaseui-flag-CD{background-position:0 -560px}.firebaseui-flag-CF{background-position:0 -574px}.firebaseui-flag-CG{background-position:0 -588px}.firebaseui-flag-CH{background-position:0 -602px}.firebaseui-flag-CI{background-position:0 -616px}.firebaseui-flag-CK{background-position:0 -630px}.firebaseui-flag-CL{background-position:0 -644px}.firebaseui-flag-CM{background-position:0 -658px}.firebaseui-flag-CN{background-position:0 -672px}.firebaseui-flag-CO{background-position:0 -686px}.firebaseui-flag-CP{background-position:0 -700px}.firebaseui-flag-CR{background-position:0 -714px}.firebaseui-flag-CU{background-position:0 -728px}.firebaseui-flag-CV{background-position:0 -742px}.firebaseui-flag-CW{background-position:0 -756px}.firebaseui-flag-CX{background-position:0 -770px}.firebaseui-flag-CY{background-position:0 -784px}.firebaseui-flag-CZ{background-position:0 -798px}.firebaseui-flag-DE{background-position:0 -812px}.firebaseui-flag-DG{background-position:0 -826px}.firebaseui-flag-DJ{background-position:0 -840px}.firebaseui-flag-DK{background-position:0 -854px}.firebaseui-flag-DM{background-position:0 -868px}.firebaseui-flag-DO{background-position:0 -882px}.firebaseui-flag-DZ{background-position:0 -896px}.firebaseui-flag-EA{background-position:0 -910px}.firebaseui-flag-EC{background-position:0 -924px}.firebaseui-flag-EE{background-position:0 -938px}.firebaseui-flag-EG{background-position:0 -952px}.firebaseui-flag-EH{background-position:0 -966px}.firebaseui-flag-ER{background-position:0 -980px}.firebaseui-flag-ES{background-position:0 -994px}.firebaseui-flag-ET{background-position:0 -1008px}.firebaseui-flag-EU{background-position:0 -1022px}.firebaseui-flag-FI{background-position:0 -1036px}.firebaseui-flag-FJ{background-position:0 -1050px}.firebaseui-flag-FK{background-position:0 -1064px}.firebaseui-flag-FM{background-position:0 -1078px}.firebaseui-flag-FO{background-position:0 -1092px}.firebaseui-flag-FR{background-position:0 -1106px}.firebaseui-flag-GA{background-position:0 -1120px}.firebaseui-flag-GB{background-position:0 -1134px}.firebaseui-flag-GD{background-position:0 -1148px}.firebaseui-flag-GE{background-position:0 -1162px}.firebaseui-flag-GF{background-position:0 -1176px}.firebaseui-flag-GG{background-position:0 -1190px}.firebaseui-flag-GH{background-position:0 -1204px}.firebaseui-flag-GI{background-position:0 -1218px}.firebaseui-flag-GL{background-position:0 -1232px}.firebaseui-flag-GM{background-position:0 -1246px}.firebaseui-flag-GN{background-position:0 -1260px}.firebaseui-flag-GP{background-position:0 -1274px}.firebaseui-flag-GQ{background-position:0 -1288px}.firebaseui-flag-GR{background-position:0 -1302px}.firebaseui-flag-GS{background-position:0 -1316px}.firebaseui-flag-GT{background-position:0 -1330px}.firebaseui-flag-GU{background-position:0 -1344px}.firebaseui-flag-GW{background-position:0 -1358px}.firebaseui-flag-GY{background-position:0 -1372px}.firebaseui-flag-HK{background-position:0 -1386px}.firebaseui-flag-HM{background-position:0 -1400px}.firebaseui-flag-HN{background-position:0 -1414px}.firebaseui-flag-HR{background-position:0 -1428px}.firebaseui-flag-HT{background-position:0 -1442px}.firebaseui-flag-HU{background-position:0 -1456px}.firebaseui-flag-IC{background-position:0 -1470px}.firebaseui-flag-ID{background-position:0 -1484px}.firebaseui-flag-IE{background-position:0 -1498px}.firebaseui-flag-IL{background-position:0 -1512px}.firebaseui-flag-IM{background-position:0 -1526px}.firebaseui-flag-IN{background-position:0 -1540px}.firebaseui-flag-IO{background-position:0 -1554px}.firebaseui-flag-IQ{background-position:0 -1568px}.firebaseui-flag-IR{background-position:0 -1582px}.firebaseui-flag-IS{background-position:0 -1596px}.firebaseui-flag-IT{background-position:0 -1610px}.firebaseui-flag-JE{background-position:0 -1624px}.firebaseui-flag-JM{background-position:0 -1638px}.firebaseui-flag-JO{background-position:0 -1652px}.firebaseui-flag-JP{background-position:0 -1666px}.firebaseui-flag-KE{background-position:0 -1680px}.firebaseui-flag-KG{background-position:0 -1694px}.firebaseui-flag-KH{background-position:0 -1708px}.firebaseui-flag-KI{background-position:0 -1722px}.firebaseui-flag-KM{background-position:0 -1736px}.firebaseui-flag-KN{background-position:0 -1750px}.firebaseui-flag-KP{background-position:0 -1764px}.firebaseui-flag-KR{background-position:0 -1778px}.firebaseui-flag-KW{background-position:0 -1792px}.firebaseui-flag-AD{background-position:0 -1806px}.firebaseui-flag-KZ{background-position:0 -1820px}.firebaseui-flag-LA{background-position:0 -1834px}.firebaseui-flag-LB{background-position:0 -1848px}.firebaseui-flag-LC{background-position:0 -1862px}.firebaseui-flag-LI{background-position:0 -1876px}.firebaseui-flag-LK{background-position:0 -1890px}.firebaseui-flag-LR{background-position:0 -1904px}.firebaseui-flag-LS{background-position:0 -1918px}.firebaseui-flag-LT{background-position:0 -1932px}.firebaseui-flag-LU{background-position:0 -1946px}.firebaseui-flag-LV{background-position:0 -1960px}.firebaseui-flag-LY{background-position:0 -1974px}.firebaseui-flag-MA{background-position:0 -1988px}.firebaseui-flag-MC{background-position:0 -2002px}.firebaseui-flag-MD{background-position:0 -2016px}.firebaseui-flag-ME{background-position:0 -2030px}.firebaseui-flag-MF{background-position:0 -2044px}.firebaseui-flag-MG{background-position:0 -2058px}.firebaseui-flag-MH{background-position:0 -2072px}.firebaseui-flag-MK{background-position:0 -2086px}.firebaseui-flag-ML{background-position:0 -2100px}.firebaseui-flag-MM{background-position:0 -2114px}.firebaseui-flag-MN{background-position:0 -2128px}.firebaseui-flag-MO{background-position:0 -2142px}.firebaseui-flag-MP{background-position:0 -2156px}.firebaseui-flag-MQ{background-position:0 -2170px}.firebaseui-flag-MR{background-position:0 -2184px}.firebaseui-flag-MS{background-position:0 -2198px}.firebaseui-flag-MT{background-position:0 -2212px}.firebaseui-flag-MU{background-position:0 -2226px}.firebaseui-flag-MV{background-position:0 -2240px}.firebaseui-flag-MW{background-position:0 -2254px}.firebaseui-flag-MX{background-position:0 -2268px}.firebaseui-flag-MY{background-position:0 -2282px}.firebaseui-flag-MZ{background-position:0 -2296px}.firebaseui-flag-NA{background-position:0 -2310px}.firebaseui-flag-NC{background-position:0 -2324px}.firebaseui-flag-NE{background-position:0 -2338px}.firebaseui-flag-NF{background-position:0 -2352px}.firebaseui-flag-NG{background-position:0 -2366px}.firebaseui-flag-NI{background-position:0 -2380px}.firebaseui-flag-NL{background-position:0 -2394px}.firebaseui-flag-NO{background-position:0 -2408px}.firebaseui-flag-NP{background-position:0 -2422px}.firebaseui-flag-NR{background-position:0 -2436px}.firebaseui-flag-NU{background-position:0 -2450px}.firebaseui-flag-NZ{background-position:0 -2464px}.firebaseui-flag-OM{background-position:0 -2478px}.firebaseui-flag-PA{background-position:0 -2492px}.firebaseui-flag-PE{background-position:0 -2506px}.firebaseui-flag-PF{background-position:0 -2520px}.firebaseui-flag-PG{background-position:0 -2534px}.firebaseui-flag-PH{background-position:0 -2548px}.firebaseui-flag-PK{background-position:0 -2562px}.firebaseui-flag-PL{background-position:0 -2576px}.firebaseui-flag-PM{background-position:0 -2590px}.firebaseui-flag-PN{background-position:0 -2604px}.firebaseui-flag-PR{background-position:0 -2618px}.firebaseui-flag-PS{background-position:0 -2632px}.firebaseui-flag-PT{background-position:0 -2646px}.firebaseui-flag-PW{background-position:0 -2660px}.firebaseui-flag-PY{background-position:0 -2674px}.firebaseui-flag-QA{background-position:0 -2688px}.firebaseui-flag-RE{background-position:0 -2702px}.firebaseui-flag-RO{background-position:0 -2716px}.firebaseui-flag-RS{background-position:0 -2730px}.firebaseui-flag-RU{background-position:0 -2744px}.firebaseui-flag-RW{background-position:0 -2758px}.firebaseui-flag-SA{background-position:0 -2772px}.firebaseui-flag-SB{background-position:0 -2786px}.firebaseui-flag-SC{background-position:0 -2800px}.firebaseui-flag-SD{background-position:0 -2814px}.firebaseui-flag-SE{background-position:0 -2828px}.firebaseui-flag-SG{background-position:0 -2842px}.firebaseui-flag-SH{background-position:0 -2856px}.firebaseui-flag-SI{background-position:0 -2870px}.firebaseui-flag-SJ{background-position:0 -2884px}.firebaseui-flag-SK{background-position:0 -2898px}.firebaseui-flag-SL{background-position:0 -2912px}.firebaseui-flag-SM{background-position:0 -2926px}.firebaseui-flag-SN{background-position:0 -2940px}.firebaseui-flag-SO{background-position:0 -2954px}.firebaseui-flag-SR{background-position:0 -2968px}.firebaseui-flag-SS{background-position:0 -2982px}.firebaseui-flag-ST{background-position:0 -2996px}.firebaseui-flag-SV{background-position:0 -3010px}.firebaseui-flag-SX{background-position:0 -3024px}.firebaseui-flag-SY{background-position:0 -3038px}.firebaseui-flag-SZ{background-position:0 -3052px}.firebaseui-flag-TA{background-position:0 -3066px}.firebaseui-flag-TC{background-position:0 -3080px}.firebaseui-flag-TD{background-position:0 -3094px}.firebaseui-flag-TF{background-position:0 -3108px}.firebaseui-flag-TG{background-position:0 -3122px}.firebaseui-flag-TH{background-position:0 -3136px}.firebaseui-flag-TJ{background-position:0 -3150px}.firebaseui-flag-TK{background-position:0 -3164px}.firebaseui-flag-TL{background-position:0 -3178px}.firebaseui-flag-TM{background-position:0 -3192px}.firebaseui-flag-TN{background-position:0 -3206px}.firebaseui-flag-TO{background-position:0 -3220px}.firebaseui-flag-TR{background-position:0 -3234px}.firebaseui-flag-TT{background-position:0 -3248px}.firebaseui-flag-TV{background-position:0 -3262px}.firebaseui-flag-TW{background-position:0 -3276px}.firebaseui-flag-TZ{background-position:0 -3290px}.firebaseui-flag-UA{background-position:0 -3304px}.firebaseui-flag-UG{background-position:0 -3318px}.firebaseui-flag-UM{background-position:0 -3332px}.firebaseui-flag-UN{background-position:0 -3346px}.firebaseui-flag-US{background-position:0 -3360px}.firebaseui-flag-UY{background-position:0 -3374px}.firebaseui-flag-UZ{background-position:0 -3388px}.firebaseui-flag-VA{background-position:0 -3402px}.firebaseui-flag-VC{background-position:0 -3416px}.firebaseui-flag-VE{background-position:0 -3430px}.firebaseui-flag-VG{background-position:0 -3444px}.firebaseui-flag-VI{background-position:0 -3458px}.firebaseui-flag-VN{background-position:0 -3472px}.firebaseui-flag-VU{background-position:0 -3486px}.firebaseui-flag-WF{background-position:0 -3500px}.firebaseui-flag-WS{background-position:0 -3514px}.firebaseui-flag-XK{background-position:0 -3528px}.firebaseui-flag-YE{background-position:0 -3542px}.firebaseui-flag-YT{background-position:0 -3556px}.firebaseui-flag-ZA{background-position:0 -3570px}.firebaseui-flag-ZM{background-position:0 -3584px}.firebaseui-flag-ZW{background-position:0 -3598px}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}((function(){return window&&document&&document.all&&!window.atob})),a=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),o=null,s=0,u=[],c=n(6);function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=r[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(m(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(m(i.parts[o],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function f(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function d(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function p(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),v(t,e.attrs),f(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function m(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var u=s++;n=o||(o=p(t)),r=g.bind(null,n,u,!1),i=g.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),f(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=c(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(t),r=function(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){d(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return l(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var o=n[a];(s=r[o.id]).refs--,i.push(s)}for(e&&l(h(e,t),t),a=0;a<i.length;a++){var s;if(0===(s=i[a]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete r[s.id]}}}};var y=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function g(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t){e.exports=n(79)}])},function(e,t,n){"use strict";function r(e){e.offsetHeight}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(39);function a(e,t){var n=Object(r.a)(e,t)||"",i=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*i}function o(e,t){var n=a(e,"transitionDuration"),r=a(e,"transitionDelay"),o=Object(i.a)(e,(function(n){n.target===e&&(o(),t(n))}),n+r)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(31);function a(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e){var t=document.createEvent("HTMLEvents");t.initEvent("transitionend",!0,!0),e.dispatchEvent(t)}(e)}),t+n),o=Object(i.a)(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),o()}}function o(e,t,n,o){null==n&&(n=function(e){var t=Object(r.a)(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var s=a(e,n,o),u=Object(i.a)(e,"transitionend",t);return function(){s(),u()}}},function(e,t,n){"use strict";var r=n(25),i=!1,a=!1;try{var o={get passive(){return i=!0},get once(){return a=i=!0}};r.a&&(window.addEventListener("test",o,o),window.removeEventListener("test",o,!0))}catch(s){}t.a=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!a){var o=r.once,s=r.capture,u=n;!a&&o&&(u=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=u),e.addEventListener(t,u,i?r:s)}e.addEventListener(t,n,r)}},function(e,t,n){"use strict";var r=n(3),i=n(6),a=n(2),o=n.n(a),s=n(28);function u(e){return!e||"#"===e.trim()}var c=o.a.forwardRef((function(e,t){var n=e.as,a=void 0===n?"a":n,c=e.disabled,l=e.onKeyDown,h=Object(i.a)(e,["as","disabled","onKeyDown"]),f=function(e){var t=h.href,n=h.onClick;(c||u(t))&&e.preventDefault(),c?e.stopPropagation():n&&n(e)};return u(h.href)&&(h.role=h.role||"button",h.href=h.href||"#"),c&&(h.tabIndex=-1,h["aria-disabled"]=!0),o.a.createElement(a,Object(r.a)({ref:t},h,{onClick:f,onKeyDown:Object(s.a)((function(e){" "===e.key&&(e.preventDefault(),f(e))}),l)}))}));c.displayName="SafeAnchor",t.a=c},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n(6),a=n(2);n(47);function o(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function s(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function u(e,t){return Object.keys(t).reduce((function(n,u){var c,l=n,h=l[o(u)],f=l[u],d=Object(i.a)(l,[o(u),u].map(s)),p=t[u],v=function(e,t,n){var r=Object(a.useRef)(void 0!==e),i=Object(a.useState)(t),o=i[0],s=i[1],u=void 0!==e,c=r.current;return r.current=u,!u&&c&&o!==t&&s(t),[u?e:o,Object(a.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}(f,h,e[p]),m=v[0],y=v[1];return Object(r.a)({},d,((c={})[u]=m,c[p]=y,c))}),e)}n(15);function c(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function l(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function h(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}c.__suppressDeprecationWarning=!0,l.__suppressDeprecationWarning=!0,h.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);function i(e){var t=function(e){var t=Object(r.useRef)(e);return t.current=e,t}(e);Object(r.useEffect)((function(){return function(){return t.current()}}),[])}},,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=o(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";(function(e){var r=n(2),i=n.n(r),a=n(15),o=n(8),s=n.n(o),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var h=i.a.createContext||function(e,t){var n,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",h=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}Object(a.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((a=r)===(o=i)?0!==a||1/a===1/o:a!==a&&o!==o)?n=0:(n="function"===typeof t?t(r,i):u,0!==(n|=0)&&this.emitter.set(e.value,n))}var a,o},r.render=function(){return this.props.children},n}(r.Component);h.childContextTypes=((n={})[o]=s.a.object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(a.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return f.contextTypes=((i={})[o]=s.a.object,i),{Provider:h,Consumer:f}};t.a=h}).call(this,n(32))},function(e,t,n){var r=n(77);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],f=n[1],d=n.index;if(s+=e.slice(o,d),o=d+h.length,f)s+=f[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var w=null!=v&&null!=p&&p!==v,x="+"===b||"*"===b,k="?"===b||"*"===b,E=n[2]||l,T=y||g;r.push({name:m||a++,prefix:v||"",delimiter:E,optional:k,repeat:x,partial:w,asterisk:!!_,pattern:T?c(T):_?".*":"[^"+u(E)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var a="",s=t||{},u=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,f=s[l.name];if(null==f){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');a+=l.prefix+h}}else a+=l}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=u(c);else{var f=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+f+d+")*"),o+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(a(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";e.exports=n(78)},function(e,t,n){"use strict";t.__esModule=!0,t.LinkContainer=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(2),o=c(a),s=c(n(8)),u=n(62);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},d=t.LinkContainer=function(e){function t(){var n,r;l(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=h(this,e.call.apply(e,[this].concat(a))),r.handleClick=function(e){var t=r.props,n=t.children,i=t.onClick;if(n.props.onClick&&n.props.onClick(e),i&&i(e),!e.defaultPrevented&&0===e.button&&!f(e)){e.preventDefault();var a=r.props,o=a.replace,s=a.to,u=a.history;o?u.replace(s):u.push(s)}},h(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.history,a=(t.location,t.match,t.staticContext,t.children),s=(t.replace,t.to),c=t.exact,l=t.strict,h=t.activeClassName,f=t.className,d=t.activeStyle,p=t.style,v=t.isActive,m=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["history","location","match","staticContext","children","replace","to","exact","strict","activeClassName","className","activeStyle","style","isActive"]),y=n.createHref("string"===typeof s?{pathname:s}:s),g=o.default.Children.only(a);return o.default.createElement(u.Route,{path:"object"===("undefined"===typeof s?"undefined":i(s))?s.pathname:s,exact:c,strict:l,children:function(t){var n=t.location,i=t.match,a=!!(v?v(i,n):i);return o.default.cloneElement(g,r({},m,{className:[f,g.props.className,a?h:null].join(" ").trim(),style:a?r({},p,d):p,href:y,onClick:e.handleClick}))}})},t}(a.Component);d.propTypes={history:s.default.shape({push:s.default.func.isRequired,replace:s.default.func.isRequired,createHref:s.default.func.isRequired}).isRequired,location:s.default.object,match:s.default.object,staticContext:s.default.object,children:s.default.element.isRequired,onClick:s.default.func,replace:s.default.bool,to:s.default.oneOfType([s.default.string,s.default.object]).isRequired,exact:s.default.bool,strict:s.default.bool,className:s.default.string,activeClassName:s.default.string,style:s.default.object,activeStyle:s.default.object,isActive:s.default.func},d.defaultProps={replace:!1,exact:!1,strict:!1,activeClassName:"active"},t.default=(0,u.withRouter)(d)},function(e,t,n){"use strict";(function(e){var t=n(4);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}!function(e,t){if(t){var n=i;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];o in n||(n[o]={}),n=n[o]}(t=t(a=n[e=e[e.length-1]]))!=a&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=i.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){a(n)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.Qa(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=o(e),a=i.next();!a.done;a=i.next())r(a.value).Qa(t,n)}))},t.all=function(e){var n=o(e),i=n.next();return i.done?r([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(i.value).Qa(a(o.length-1),t),i=n.next()}while(!i.done)}))},t}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""}function f(){}function d(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function v(e){return"function"==d(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function y(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++b)}var g="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function x(e,t,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var E=Date.now;function T(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function S(e){return e}function I(e,t,n){this.code=O+e,this.message=t||P[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new I(t.substring(O.length),e.message,e.serverResponse):null}T(I,Error),I.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},I.prototype.toJSON=function(){return this.w()};var A,O="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(e){for(var t in D)if(D[t].id===e)return{firebaseEndpoint:(e=D[t]).Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function M(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function N(e){if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function L(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");N.call(this,n+e[r])}function j(e,t){throw new L("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function F(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function z(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function B(){this.b=this.a=null}A=R("__EID__")?"__EID__":void 0,T(N,Error),N.prototype.name="CustomError",T(L,N),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var U=new F((function(){return new q}),(function(e){e.reset()}));function V(){var e=_t,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function q(){this.next=this.b=this.a=null}B.prototype.add=function(e,t){var n=U.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},K=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};var H=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,a="string"===typeof e?e.split(""):e,o=0;o<n;o++)if(o in a){var s=a[o];t.call(void 0,s,o,e)&&(r[i++]=s)}return r},W=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,a=0;a<n;a++)a in i&&(r[a]=t.call(void 0,i[a],a,e));return r},Z=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function X(e,t){return 0<=G(e,t)}function Y(e,t){var n;return(n=0<=(t=G(e,t)))&&Array.prototype.splice.call(e,t,1),n}function Q(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function $(e){return Array.prototype.concat.apply([],arguments)}function J(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var ee,te=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ne=/&/g,re=/</g,ie=/>/g,ae=/"/g,oe=/'/g,se=/\x00/g,ue=/[\x00&<>"']/;function ce(e,t){return-1!=e.indexOf(t)}function le(e,t){return e<t?-1:e>t?1:0}e:{var he=u.navigator;if(he){var fe=he.userAgent;if(fe){ee=fe;break e}}ee=""}function de(e){return ce(ee,e)}function pe(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ve(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ye.length;a++)n=ye[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function be(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break e}}catch(o){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(m(e))try{var a=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(o){a="<object could not be stringified>"}else a=void 0===e?"undefined":null===e?"null":typeof e;j("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,a)}}function _e(e,t){this.a=e===Ee&&t||"",this.b=ke}function we(e){return e instanceof _e&&e.constructor===_e&&e.b===ke?e.a:(j("expected object of type Const, got '"+e+"'"),"type_error:Const")}_e.prototype.sa=!0,_e.prototype.ra=function(){return this.a},_e.prototype.toString=function(){return"Const{"+this.a+"}"};var xe,ke={},Ee={};function Te(){if(void 0===xe){var e=null,t=u.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){u.console&&u.console.error(n.message)}xe=e}else xe=e}return xe}function Se(e,t){this.a=t===Pe?e:""}function Ie(e){return e instanceof Se&&e.constructor===Se?e.a:(j("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=we(e);if(!Oe.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=Te();return new Se(e=t?t.createScriptURL(e):e,Pe)}(e=n.replace(Ae,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof _e?we(e):encodeURIComponent(String(e))})))}Se.prototype.sa=!0,Se.prototype.ra=function(){return this.a.toString()},Se.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ae=/%{(\w+)}/g,Oe=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pe={};function De(e,t){this.a=t===ze?e:""}function Re(e){return e instanceof De&&e.constructor===De?e.a:(j("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}De.prototype.sa=!0,De.prototype.ra=function(){return this.a.toString()},De.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Me=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ne=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Le=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function je(e){if(e instanceof De)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),Le.test(e))e=new De(e,ze);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Ne);e=t&&Me.test(t[1])?new De(e,ze):null}return e}function Fe(e){return e instanceof De?e:(e="object"==typeof e&&e.sa?e.ra():String(e),Le.test(e)||(e="about:invalid#zClosurez"),new De(e,ze))}var ze={},Be=new De("about:invalid#zClosurez",ze);function Ue(e,t,n){this.a=n===Ve?e:""}Ue.prototype.sa=!0,Ue.prototype.ra=function(){return this.a.toString()},Ue.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ve={};function qe(e,t,n,r){return e=e instanceof De?e:Fe(e),t=t||u,n=n instanceof _e?we(n):n||"",t.open(Re(e),n,r,void 0)}function Ge(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ke(e){return ue.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ne,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(re,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ie,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ae,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(se,"&#0;"))),e}function He(e){return He[" "](e),e}He[" "]=f;var We,Ze=de("Opera"),Xe=de("Trident")||de("MSIE"),Ye=de("Edge"),Qe=Ye||Xe,$e=de("Gecko")&&!(ce(ee.toLowerCase(),"webkit")&&!de("Edge"))&&!(de("Trident")||de("MSIE"))&&!de("Edge"),Je=ce(ee.toLowerCase(),"webkit")&&!de("Edge");function et(){var e=u.document;return e?e.documentMode:void 0}e:{var tt="",nt=function(){var e=ee;return $e?/rv:([^\);]+)(\)|;)/.exec(e):Ye?/Edge\/([\d\.]+)/.exec(e):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Je?/WebKit\/(\S+)/.exec(e):Ze?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(nt&&(tt=nt?nt[1]:""),Xe){var rt=et();if(null!=rt&&rt>parseFloat(tt)){We=String(rt);break e}}We=tt}var it,at={};function ot(e){return function(e,t){var n=at;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=te(String(We)).split("."),r=te(String(e)).split("."),i=Math.max(n.length,r.length),a=0;0==t&&a<i;a++){var o=n[a]||"",s=r[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=le(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||le(0==o[2].length,0==s[2].length)||le(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&Xe){var st=et();it=st||(parseInt(We,10)||void 0)}else it=void 0;var ut=it;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ho){}var ct=!Xe||9<=Number(ut);function lt(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function ht(e,t){pe(t,(function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:pt.hasOwnProperty(n)?e.setAttribute(pt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ft,dt,pt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function vt(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var a=n[i];if(!p(a)||m(a)&&0<a.nodeType)r(a);else{e:{if(a&&"number"==typeof a.length){if(m(a)){var o="function"==typeof a.item||"string"==typeof a.item;break e}if(v(a)){o="function"==typeof a.item;break e}}o=!1}K(o?J(a):a,r)}}}function mt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function yt(e){u.setTimeout((function(){throw e}),0)}function gt(e,t){dt||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);dt=function(){e.then(wt)}}else dt=function(){var e=wt;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!de("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ft||(ft=function(){var e=u.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!de("Presto")&&(e=function(){var e=mt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=x((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!de("Trident")&&!de("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Gb;n.Gb=null,e()}},function(e){r.next={Gb:e},r=r.next,t.port2.postMessage(0)}}return function(e){u.setTimeout(e,0)}}()),ft(e)):u.setImmediate(e)}}(),bt||(dt(),bt=!0),_t.add(e,t)}var bt=!1,_t=new B;function wt(){for(var e;e=V();){try{e.a.call(e.b)}catch(t){yt(t)}z(U,e)}bt=!1}function xt(e,t){if(this.a=kt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){Lt(n,Et,e)}),(function(e){if(!(e instanceof qt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Lt(n,Tt,e)}))}catch(r){Lt(this,Tt,r)}}var kt=0,Et=2,Tt=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var It=new F((function(){return new St}),(function(e){e.reset()}));function Ct(e,t,n){var r=It.get();return r.g=e,r.b=t,r.f=n,r}function At(e){if(e instanceof xt)return e;var t=new xt(f);return Lt(t,Et,e),t}function Ot(e){return new xt((function(t,n){n(e)}))}function Pt(e,t,n){jt(e,t,n,null)||gt(k(t,e))}function Dt(e){return new xt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,a){n--,r[e]=i?{Pb:!0,value:a}:{Pb:!1,reason:a},0==n&&t(r)},a=0;a<e.length;a++)Pt(e[a],k(i,a,!0),k(i,a,!1));else t(r)}))}function Rt(e,t){if(e.a==kt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,a=null,o=n.b;o&&(o.c||(r++,o.a==e&&(i=o),!(i&&1<r)));o=o.next)i||(a=o);i&&(n.a==kt&&1==r?Rt(n,t):(a?((r=a).next==n.f&&(n.f=r),r.next=r.next.next):zt(n),Bt(n,i,Tt,t)))}e.c=null}else Lt(e,Tt,t)}function Mt(e,t){e.b||e.a!=Et&&e.a!=Tt||Ft(e),e.f?e.f.next=t:e.b=t,e.f=t}function Nt(e,t,n,r){var i=Ct(null,null,null);return i.a=new xt((function(e,a){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(o){a(o)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof qt?a(t):e(i)}catch(o){a(o)}}:a})),i.a.c=e,Mt(e,i),i.a}function Lt(e,t,n){e.a==kt&&(e===n&&(t=Tt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,jt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Ft(e),t!=Tt||n instanceof qt||function(e,t){e.g=!0,gt((function(){e.g&&Vt.call(null,t)}))}(e,n)))}function jt(e,t,n,r){if(e instanceof xt)return Mt(e,Ct(t||f,n||null,r)),!0;if(M(e))return e.then(t,n,r),!0;if(m(e))try{var i=e.then;if(v(i))return function(e,t,n,r,i){function a(e){s||(s=!0,r.call(i,e))}function o(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,o,a)}catch(u){a(u)}}(e,i,t,n,r),!0}catch(a){return n.call(r,a),!0}return!1}function Ft(e){e.h||(e.h=!0,gt(e.gc,e))}function zt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Bt(e,t,n,r){if(n==Tt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ut(t,n,r);else try{t.c?t.g.call(t.f):Ut(t,n,r)}catch(i){Vt.call(null,i)}z(It,t)}function Ut(e,t,n){t==Et?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}xt.prototype.then=function(e,t,n){return Nt(this,v(e)?e:null,v(t)?t:null,n)},xt.prototype.$goog_Thenable=!0,(n=xt.prototype).oa=function(e,t){return(e=Ct(e,e,t)).c=!0,Mt(this,e),this},n.o=function(e,t){return Nt(this,null,e,t)},n.cancel=function(e){if(this.a==kt){var t=new qt(e);gt((function(){Rt(this,t)}),this)}},n.$c=function(e){this.a=kt,Lt(this,Et,e)},n.ad=function(e){this.a=kt,Lt(this,Tt,e)},n.gc=function(){for(var e;e=zt(this);)Bt(this,e,this.a,this.i);this.h=!1};var Vt=yt;function qt(e){N.call(this,e)}function Gt(){0!=Kt&&(Ht[y(this)]=this),this.xa=this.xa,this.pa=this.pa}T(qt,N),qt.prototype.name="cancel";var Kt=0,Ht={};function Wt(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=Kt)){var t=y(e);if(0!=Kt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ht[t]}}Gt.prototype.xa=!1,Gt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Zt=Object.freeze||function(e){return e},Xt=!Xe||9<=Number(ut),Yt=Xe&&!ot("9"),Qt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",f,t),u.removeEventListener("test",f,t)}catch(n){}return e}();function $t(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Jt(e,t){if($t.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if($e){e:{try{He(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:en[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}$t.prototype.preventDefault=function(){this.defaultPrevented=!0},T(Jt,$t);var en=Zt({2:"touch",3:"pen",4:"mouse"});Jt.prototype.preventDefault=function(){Jt.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Yt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Jt.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function an(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function on(e){this.src=e,this.a={},this.b=0}function sn(e,t){var n=t.type;n in e.a&&Y(e.a[n],t)&&(an(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function un(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.va&&a.listener==t&&a.capture==!!n&&a.Va==r)return i}return-1}on.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.b++);var o=un(e,t,r,i);return-1<o?(t=e[o],n||(t.Pa=!1)):((t=new rn(t,this.src,a,!!r,i)).Pa=n,e.push(t)),t};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(e,t,n,r,i){if(r&&r.once)dn(e,t,n,r,i);else if(Array.isArray(t))for(var a=0;a<t.length;a++)hn(e,t[a],n,r,i);else n=xn(n),e&&e[tn]?En(e,t,n,m(r)?!!r.capture:!!r,i):fn(e,t,n,!1,r,i)}function fn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i,s=_n(e);if(s||(e[cn]=s=new on(e)),!(n=s.add(t,n,r,o,a)).proxy){if(r=function(){var e=bn,t=Xt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Qt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(mn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function dn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)dn(e,t[a],n,r,i);else n=xn(n),e&&e[tn]?Tn(e,t,n,m(r)?!!r.capture:!!r,i):fn(e,t,n,!0,r,i)}function pn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)pn(e,t[a],n,r,i);else r=m(r)?!!r.capture:!!r,n=xn(n),e&&e[tn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=un(a=e.a[t],n,r,i))&&(an(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.a[t],e.b--)))):e&&(e=_n(e))&&(t=e.a[t.toString()],e=-1,t&&(e=un(t,n,r,i)),(n=-1<e?t[e]:null)&&vn(n))}function vn(e){if("number"!==typeof e&&e&&!e.va){var t=e.src;if(t&&t[tn])sn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_n(t))?(sn(n,e),0==n.b&&(n.src=null,t[cn]=null)):an(e)}}}function mn(e){return e in ln?ln[e]:ln[e]="on"+e}function yn(e,t,n,r){var i=!0;if((e=_n(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var a=t[e];a&&a.capture==n&&!a.va&&(a=gn(a,r),i=i&&!1!==a)}return i}function gn(e,t){var n=e.listener,r=e.Va||e.src;return e.Pa&&vn(e),n.call(r,t)}function bn(e,t){if(e.va)return!0;if(!Xt){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Jt(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(o){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var a=yn(r[i],e,!0,t);n=n&&a}for(i=0;i<r.length;i++)t.b=r[i],a=yn(r[i],e,!1,t),n=n&&a}return n}return gn(e,new Jt(t,this))}function _n(e){return(e=e[cn])instanceof on?e:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function xn(e){return v(e)?e:(e[wn]||(e[wn]=function(t){return e.handleEvent(t)}),e[wn])}function kn(){Gt.call(this),this.v=new on(this),this.ac=this,this.gb=null}function En(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function Tn(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Sn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.va&&o.capture==n){var s=o.listener,u=o.Va||o.src;o.Pa&&sn(e.v,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(e,t,n){if(v(e))n&&(e=x(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=x(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Cn(e){var t=null;return new xt((function(n,r){-1==(t=In((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw u.clearTimeout(t),e}))}function An(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function On(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Pn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Pn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Dn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Rn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Rn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Rn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}T(kn,Gt),kn.prototype[tn]=!0,kn.prototype.addEventListener=function(e,t,n,r){hn(this,e,t,n,r)},kn.prototype.removeEventListener=function(e,t,n,r){pn(this,e,t,n,r)},kn.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var r=e.type||e;if("string"===typeof e)e=new $t(e,n);else if(e instanceof $t)e.target=e.target||n;else{var i=e;ge(e=new $t(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var o=e.b=t[a];i=Sn(o,r,!0,e)&&i}if(i=Sn(o=e.b=n,r,!0,e)&&i,i=Sn(o,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Sn(o=e.b=t[a],r,!1,e)&&i;return i},kn.prototype.Da=function(){if(kn.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)an(n[r]);delete t.a[e],t.b--}}this.gb=null},(n=Pn.prototype).W=function(){Dn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},n.Y=function(){return Dn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(e,t){return Rn(this.b,e)?this.b[e]:t},n.set=function(e,t){Rn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},n.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Nn?(this.i=void 0!==t?t:e.i,Ln(this,e.c),this.l=e.l,this.a=e.a,jn(this,e.g),this.f=e.f,Fn(this,rr(e.b)),this.h=e.h):e&&(n=String(e).match(Mn))?(this.i=!!t,Ln(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),jn(this,n[4]),this.f=qn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!t,this.b=new Qn(null,this.i))}function Ln(e,t,n){e.c=n?qn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function jn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Fn(e,t,n){t instanceof Qn?(e.b=t,function(e,t){t&&!e.f&&($n(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(er(this,t),nr(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=Gn(t,Xn)),e.b=new Qn(t,e.i))}function zn(e,t,n){e.b.set(t,n)}function Bn(e,t){return e.b.get(t)}function Un(e){return e instanceof Nn?new Nn(e):new Nn(e,void 0)}function Vn(e,t,n,r){var i=new Nn(null,void 0);return e&&Ln(i,e),t&&(i.a=t),n&&jn(i,n),r&&(i.f=r),i}function qn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Nn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Gn(t,Hn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Gn(t,Hn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gn(n,"/"==n.charAt(0)?Zn:Wn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Gn(n,Yn)),e.join("")},Nn.prototype.resolve=function(e){var t=new Nn(this),n=!!e.c;n?Ln(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)jn(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ce(i,"./")||ce(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}r=a.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Fn(t,rr(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Hn=/[#\/\?@]/g,Wn=/[#\?:]/g,Zn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function Qn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $n(e){e.a||(e.a=new Pn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jn(e){var t=On(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Qn(null,void 0);e=An(e);for(var r=0;r<t.length;r++){var i=t[r],a=e[r];Array.isArray(a)?nr(n,i,a):n.add(i,a)}return n}function er(e,t){$n(e),t=ir(e,t),Rn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Rn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Dn(e)))}function tr(e,t){return $n(e),t=ir(e,t),Rn(e.a.b,t)}function nr(e,t,n){er(e,t),0<n.length&&(e.c=null,e.a.set(ir(e,t),J(n)),e.b+=n.length)}function rr(e){var t=new Qn;return t.c=e.c,e.a&&(t.a=new Pn(e.a),t.b=e.b),t}function ir(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ar(e){var t=[];return sr(new or,e,t),t.join("")}function or(){}function sr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",a=0;a<t;a++)n.push(i),sr(e,r[a],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(a=t[r])&&(n.push(i),lr(r,n),n.push(":"),sr(e,a,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":lr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(n=Qn.prototype).add=function(e,t){$n(this),this.c=null,e=ir(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(e,t){$n(this),this.a.forEach((function(n,r){K(n,(function(n){e.call(t,n,r,this)}),this)}),this)},n.Y=function(){$n(this);for(var e=this.a.W(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},n.W=function(e){$n(this);var t=[];if("string"===typeof e)tr(this,e)&&(t=$(t,this.a.get(ir(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=$(t,e[n])}return t},n.set=function(e,t){return $n(this),this.c=null,tr(this,e=ir(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},n.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.W(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.c=e.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(e,t){t.push('"',e.replace(cr,(function(e){var t=ur[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ur[e]=t),t})),'"')}function hr(){var e=Pr();return Xe&&!!ut&&11==ut||/Edge\/\d+/.test(e)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function dr(e,t){t=t||u.window;var n="about:blank";e&&(n=Re(je(e)||Be)),t.location.href=n}function pr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<pr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function vr(e){return!!((e=(e||Pr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function mr(e){e=e||u.window;try{e.close()}catch(t){}}function yr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,a=(window.screen.availWidth-t)/2;for(o in t={width:t,height:n,top:0<i?i:0,left:0<a?a:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(t.target=r,ce(n,"crios/")&&(t.target="_blank")),Cr(Pr())==Sr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof De?n:je("undefined"!=typeof n.href?n.href:String(n))||Be,n=e.target||n.target,i=[],e)switch(o){case"width":case"height":case"top":case"left":i.push(o+"="+e[o]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(o+"="+(e[o]?1:0))}var o=i.join(",");if((de("iPhone")&&!de("iPod")&&!de("iPad")||de("iPad")||de("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(be(o=mt(document,"A"),"HTMLAnchorElement"),t=t instanceof De?t:Fe(t),o.href=Re(t),o.setAttribute("target",n),e.noreferrer&&o.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),o.dispatchEvent(e),o={}):e.noreferrer?(o=qe("",r,n,o),e=Re(t),o&&(Qe&&ce(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),o.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ke(e)+'">',e=new Ue(e=(r=Te())?r.createHTML(e):e,null,Ve),r=o.document)&&(r.write(function(e){return e instanceof Ue&&e.constructor===Ue?e.a:(j("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}(e)),r.close())):(o=qe(t,r,n,o))&&e.noopener&&(o.opener=null),o)try{o.focus()}catch(s){}return o}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function _r(){var e=null;return new xt((function(t){"complete"==u.document.readyState?t():(e=function(){t()},dn(window,"load",e))})).o((function(t){throw pn(window,"load",e),t}))}function wr(e){return e=e||Pr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function xr(){var e=u.window;try{return!(!e||e==e.top)}catch(t){return!1}}function kr(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function Er(){return t.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.a.INTERNAL.hasOwnProperty("node")?"Node":kr()?"Worker":"Browser"}function Tr(){var e=Er();return"ReactNative"===e||"Node"===e}var Sr="Firefox",Ir="Chrome";function Cr(e){var t=e.toLowerCase();return ce(t,"opera/")||ce(t,"opr/")||ce(t,"opios/")?"Opera":ce(t,"iemobile")?"IEMobile":ce(t,"msie")||ce(t,"trident/")?"IE":ce(t,"edge/")?"Edge":ce(t,"firefox/")?Sr:ce(t,"silk/")?"Silk":ce(t,"blackberry")?"Blackberry":ce(t,"webos")?"Webos":!ce(t,"safari/")||ce(t,"chrome/")||ce(t,"crios/")||ce(t,"android")?!ce(t,"chrome/")&&!ce(t,"crios/")||ce(t,"edge/")?ce(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Ir:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(e,t){t=t||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Cr(i=Pr()):"Worker"===r&&(r=Cr(i=Pr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Pr(){return u.navigator&&u.navigator.userAgent||""}function Dr(e,t){e=e.split("."),t=t||u;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Rr(){try{var e=u.localStorage,t=Ur();if(e)return e.setItem(t,"1"),e.removeItem(t),!hr()||!!u.indexedDB}catch(n){return kr()&&!!u.indexedDB}return!1}function Mr(){return(Nr()||"chrome-extension:"===Lr()||wr())&&!Tr()&&Rr()&&!kr()}function Nr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return u.location&&u.location.protocol||null}function jr(e){return!vr(e=e||Pr())&&Cr(e)!=Sr}function Fr(e){return"undefined"===typeof e?null:ar(e)}function zr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Br(e){if(null!==e)return JSON.parse(e)}function Ur(e){return e||Math.floor(1e9*Math.random()).toString()}function Vr(e){return"Safari"!=Cr(e=e||Pr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var e=u.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Gr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Pr(),t=Er(),this.b=vr(e)||"ReactNative"===t}function Kr(){var e=u.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Hr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Wr(){return!(!Dr("fireauth.oauthhelper",u)&&!Dr("fireauth.iframe",u))}Gr.prototype.get=function(){var e=u.navigator;return!e||"boolean"!==typeof e.onLine||!Nr()&&"chrome-extension:"!==Lr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Zr,Xr={};function Yr(e){Xr[e]||(Xr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Zr=2==Qr.abcd}catch(ho){Zr=!1}function $r(e,t,n){Zr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Jr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&$r(e,n,t[n])}function ei(e){var t={};return Jr(t,e),t}function ti(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)$r(t,n,ti(e[n]));return t}function ni(e){var t=e&&(e[si]?"phone":null);if(!(t&&e&&e[oi]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",e[oi]),$r(this,"displayName",e[ii]||null);var n=null;e[ai]&&(n=new Date(e[ai]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",t)}function ri(e){try{var t=new ui(e)}catch(n){t=null}return t}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",ai="enrolledAt",oi="mfaEnrollmentId",si="phoneInfo";function ui(e){ni.call(this,e),$r(this,"phoneNumber",e[si])}function ci(e){var t={},n=e[di],r=e[vi],i=e[mi];if(e=ri(e[pi]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==li&&!e)throw Error("Invalid checkActionCode response!");i==fi?(t[gi]=n||null,t[_i]=n||null,t[yi]=r):(t[gi]=r||null,t[_i]=r||null,t[yi]=n||null),t[bi]=e||null,$r(this,xi,i),$r(this,wi,ti(t))}T(ui,ni),ui.prototype.w=function(){var e=ui.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",mi="requestType",yi="email",gi="fromEmail",bi="multiFactorInfo",_i="previousEmail",wi="data",xi="operation";function ki(e){var t=Bn(e=Un(e),Ei)||null,n=Bn(e,Ti)||null,r=Bn(e,Ci)||null;if(r=r&&Oi[r]||null,!t||!n||!r)throw new I("argument-error",Ei+", "+Ti+"and "+Ci+" are required in a valid action code URL.");Jr(this,{apiKey:t,operation:r,code:n,continueUrl:Bn(e,Si)||null,languageCode:Bn(e,Ii)||null,tenantId:Bn(e,Ai)||null})}var Ei="apiKey",Ti="oobCode",Si="continueUrl",Ii="languageCode",Ci="mode",Ai="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Pi(e){try{return new ki(e)}catch(t){return null}}function Di(e){var t=e[ji];if("undefined"===typeof t)throw new I("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new I("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Ri];if(n&&"object"===typeof n){t=n[Bi];var r=n[Fi];if(n=n[zi],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new I("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new I("argument-error",zi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new I("argument-error",Bi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new I("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new I("argument-error",Ri+" property must be a non null object when specified.");if(this.f=null,(t=e[Li])&&"object"===typeof t){if("string"===typeof(t=t[Ui])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new I("argument-error",Ui+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new I("argument-error",Li+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Ni])&&"boolean"!==typeof t)throw new I("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Mi])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new I("argument-error",Mi+" property must be a non empty string when specified.");this.i=e||null}var Ri="android",Mi="dynamicLinkDomain",Ni="handleCodeInApp",Li="iOS",ji="url",Fi="installApp",zi="minimumVersion",Bi="packageName",Ui="bundleId";function Vi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var qi=null;function Gi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!qi){qi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var a=r[i];void 0===qi[a]&&(qi[a]=i)}}}();for(var r=0;;){var i=n(-1),a=n(0),o=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|a>>4),64!=o&&(t(a<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Ki(e){var t=Wi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Hi(e){try{return new Ki(e)}catch(t){return null}}function Wi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=Gi(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var a=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&a)}else if(239<i&&365>i){a=r[t++];var o=r[t++],s=((7&i)<<18|(63&a)<<12|(63&o)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else a=r[t++],o=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}return JSON.parse(e.join(""))}catch(u){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var Zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Xi=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Xi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Xi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Xi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Qi(e){for(var t in Yi)if(Yi[t].fa==e)return Yi[t];return null}function $i(e){var t={};t["facebook.com"]=ra,t["google.com"]=aa,t["github.com"]=ia,t["twitter.com"]=oa;var n=e&&e[ea];try{if(n)return t[n]?new t[n](e):new na(e);if("undefined"!==typeof e[Ji])return new ta(e)}catch(r){}return null}var Ji="idToken",ea="providerId";function ta(e){var t=e[ea];if(!t&&e[Ji]){var n=Hi(e[Ji]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),$r(this,"providerId",t),$r(this,"isNewUser",n)}function na(e){ta.call(this,e),$r(this,"profile",ti((e=Br(e.rawUserInfo||"{}"))||{}))}function ra(e){if(na.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ia(e){if(na.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function aa(e){if(na.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oa(e){if(na.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",e.screenName||null)}function sa(e){var t=Un(e),n=Bn(t,"link"),r=Bn(Un(n),"link");return t=Bn(t,"deep_link_id"),Bn(Un(t),"link")||t||r||n||e}function ua(e,t){if(!e&&!t)throw new I("internal-error","Internal assert: no raw session string available");if(e&&t)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?ca:la}T(na,ta),T(ra,na),T(ia,na),T(aa,na),T(oa,na);var ca="enroll",la="signin";function ha(){}function fa(e,t){return e.then((function(e){if(e[ns]){var n=Hi(e[ns]);if(!n||t!=n.i)throw new I("user-mismatch");return e}throw new I("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==O+"user-not-found"?new I("user-mismatch"):e}))}function da(e,t){if(!t)throw new I("internal-error","failed to construct a credential");this.a=t,$r(this,"providerId",e),$r(this,"signInMethod",e)}function pa(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function va(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new da(e.providerId,e.pendingToken)}catch(t){}return null}function ma(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&$r(this,"idToken",t.idToken),t.accessToken&&$r(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&$r(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");$r(this,"accessToken",t.oauthToken),$r(this,"secret",t.oauthTokenSecret)}$r(this,"providerId",e),$r(this,"signInMethod",n)}function ya(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Jn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function ga(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new ma(e.providerId,t,e.signInMethod)}catch(n){}}return null}function ba(e,t){this.Qc=t||[],Jr(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(Qi(e)||{}).Ja||null,this.ob=null}function _a(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');ba.call(this,e,[])}function wa(e){ba.call(this,e,Xi),this.a=[]}function xa(){wa.call(this,"facebook.com")}function ka(e){if(!e)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new xa).credential({accessToken:t})}function Ea(){wa.call(this,"github.com")}function Ta(e){if(!e)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Ea).credential({accessToken:t})}function Sa(){wa.call(this,"google.com"),this.Ca("profile")}function Ia(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new Sa).credential({idToken:n,accessToken:t})}function Ca(){ba.call(this,"twitter.com",Zi)}function Aa(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ma("twitter.com",n,"twitter.com")}function Oa(e,t,n){this.a=e,this.f=t,$r(this,"providerId","password"),$r(this,"signInMethod",n===Da.EMAIL_LINK_SIGN_IN_METHOD?Da.EMAIL_LINK_SIGN_IN_METHOD:Da.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Pa(e){return e&&e.email&&e.password?new Oa(e.email,e.password,e.signInMethod):null}function Da(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function Ra(e,t){if(!(t=Ma(t)))throw new I("argument-error","Invalid email link!");return new Oa(e,t.code,Da.EMAIL_LINK_SIGN_IN_METHOD)}function Ma(e){return(e=Pi(e=sa(e)))&&e.operation===hi?e:null}function Na(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new I("internal-error");this.a=e,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function La(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Na(t)}return null}function ja(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function Fa(e){try{this.a=e||t.a.auth()}catch(n){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function za(e,t){if(!e)throw new I("missing-verification-id");if(!t)throw new I("missing-verification-code");return new Na({eb:e,cb:t})}function Ba(e){if(e.temporaryProof&&e.phoneNumber)return new Na({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,a=e&&e.oauthIdToken,o=e&&e.pendingToken;try{switch(t){case"google.com":return Ia(a,n);case"facebook.com":return ka(n);case"github.com":return Ta(n);case"twitter.com":return Aa(n,r);default:return n||r||a||o?o?0==t.indexOf("saml.")?new da(t,o):new ma(t,{pendingToken:o,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new wa(t).credential({idToken:a,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Ua(e){if(!e.isOAuthProvider)throw new I("invalid-oauth-provider")}function Va(e,t,n,r,i,a,o){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=a||null,this.h=o||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function qa(e){return(e=e||{}).type?new Va(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Ga(){this.b=null,this.a=[]}ua.prototype.Ha=function(){return this.a?At(this.a):At(this.b)},ua.prototype.w=function(){return this.type==ca?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ha.prototype.ka=function(){},ha.prototype.b=function(){},ha.prototype.c=function(){},ha.prototype.w=function(){},da.prototype.ka=function(e){return Es(e,pa(this))},da.prototype.b=function(e,t){var n=pa(this);return n.idToken=t,Ts(e,n)},da.prototype.c=function(e,t){return fa(Ss(e,pa(this)),t)},da.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ma.prototype.ka=function(e){return Es(e,ya(this))},ma.prototype.b=function(e,t){var n=ya(this);return n.idToken=t,Ts(e,n)},ma.prototype.c=function(e,t){return fa(Ss(e,ya(this)),t)},ma.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},ba.prototype.Ka=function(e){return this.Ib=me(e),this},T(_a,ba),T(wa,ba),wa.prototype.Ca=function(e){return X(this.a,e)||this.a.push(e),this},wa.prototype.Qb=function(){return J(this.a)},wa.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new ma(this.providerId,n,this.providerId)},T(xa,wa),$r(xa,"PROVIDER_ID","facebook.com"),$r(xa,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(Ea,wa),$r(Ea,"PROVIDER_ID","github.com"),$r(Ea,"GITHUB_SIGN_IN_METHOD","github.com"),T(Sa,wa),$r(Sa,"PROVIDER_ID","google.com"),$r(Sa,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Ca,ba),$r(Ca,"PROVIDER_ID","twitter.com"),$r(Ca,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oa.prototype.ka=function(e){return this.signInMethod==Da.EMAIL_LINK_SIGN_IN_METHOD?su(e,Ms,{email:this.a,oobCode:this.f}):su(e,nu,{email:this.a,password:this.f})},Oa.prototype.b=function(e,t){return this.signInMethod==Da.EMAIL_LINK_SIGN_IN_METHOD?su(e,Ns,{idToken:t,email:this.a,oobCode:this.f}):su(e,Zs,{idToken:t,email:this.a,password:this.f})},Oa.prototype.c=function(e,t){return fa(this.ka(e),t)},Oa.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(Da,{PROVIDER_ID:"password"}),Jr(Da,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(Da,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Na.prototype.ka=function(e){return e.fb(ja(this))},Na.prototype.b=function(e,t){var n=ja(this);return n.idToken=t,su(e,iu,n)},Na.prototype.c=function(e,t){var n=ja(this);return n.operation="REAUTH",fa(e=su(e,au,n),t)},Na.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Fa.prototype.fb=function(e,t){var n=this.a.a;return At(t.verify()).then((function(r){if("string"!==typeof r)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=m(e)?e.session:null,a=m(e)?e.phoneNumber:e;return(i&&i.type==ca?i.Ha().then((function(e){return function(e,t){return su(e,Ys,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):i&&i.type==la?i.Ha().then((function(t){return function(e,t){return su(e,Qs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return su(e,Hs,t)}(n,{phoneNumber:a,recaptchaToken:r})).then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Jr(Fa,{PROVIDER_ID:"phone"}),Jr(Fa,{PHONE_SIGN_IN_METHOD:"phone"}),Va.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Va.prototype.T=function(){return this.h},Va.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ka,Ha=null;function Wa(e){var t="unauthorized-domain",n=void 0,r=Un(e);e=r.a,"chrome-extension"==(r=r.c)?n=Ge("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Ge("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",I.call(this,t,n)}function Za(e,t,n){I.call(this,e,n),(e=t||{}).Jb&&$r(this,"email",e.Jb),e.ea&&$r(this,"phoneNumber",e.ea),e.credential&&$r(this,"credential",e.credential),e.Zb&&$r(this,"tenantId",e.Zb)}function Xa(e){if(e.code){var t=e.code||"";0==t.indexOf(O)&&(t=t.substring(O.length));var n={credential:Ba(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new I(t,e.message||void 0);return new Za(t,n,e.message)}return null}function Ya(){}function Qa(e){return e.c||(e.c=e.b())}function $a(){}function Ja(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function eo(){}function to(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=x(this.qc,this),this.a.onerror=x(this.Sb,this),this.a.onprogress=x(this.rc,this),this.a.ontimeout=x(this.vc,this)}function no(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ro(e,t,n){this.reset(e,t,n,void 0,void 0)}T(Wa,I),T(Za,I),Za.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ge(e,t),e},Za.prototype.toJSON=function(){return this.w()},Ya.prototype.c=null,T($a,Ya),$a.prototype.a=function(){var e=Ja(this);return e?new ActiveXObject(e):new XMLHttpRequest},$a.prototype.b=function(){var e={};return Ja(this)&&(e[0]=!0,e[1]=!0),e},Ka=new $a,T(eo,Ya),eo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new to;throw Error("Unsupported browser")},eo.prototype.b=function(){return{}},(n=to.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},n.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,no(this,4)},n.Sb=function(){this.status=500,this.response=this.responseText="",no(this,4)},n.vc=function(){this.Sb()},n.rc=function(){this.status=200,no(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ro.prototype.a=null;function io(e){this.f=e,this.b=this.c=this.a=null}function ao(e,t){this.name=e,this.value=t}ro.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||E(),delete this.a},ao.prototype.toString=function(){return this.name};var oo=new ao("SEVERE",1e3),so=new ao("WARNING",900),uo=new ao("CONFIG",700),co=new ao("FINE",500);function lo(e){return e.c?e.c:e.a?lo(e.a):(j("Root logger has no level set."),null)}io.prototype.log=function(e,t,n){if(e.value>=lo(this).value)for(v(t)&&(t=t()),e=new ro(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var ho,fo={},po=null;function vo(e){var t;if(po||(po=new io(""),fo[""]=po,po.c=uo),!(t=fo[e])){t=new io(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=vo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,fo[e]=t}return t}function mo(e,t){e&&e.log(co,t,void 0)}function yo(e){this.f=e}function go(e){kn.call(this),this.u=e,this.h=void 0,this.readyState=bo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=vo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}T(yo,Ya),yo.prototype.a=function(){return new go(this.f)},yo.prototype.b=(ho={},function(){return ho}),T(go,kn);var bo=0;function _o(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function wo(e){e.readyState=4,e.g=null,e.c=null,e.m=null,xo(e)}function xo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ko(e){kn.call(this),this.headers=new Pn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Eo,this.u=this.S=!1}(n=go.prototype).open=function(e,t){if(this.readyState!=bo)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,xo(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,wo(this)),this.readyState=bo},n.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,xo(this)),this.a&&(this.readyState=3,xo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,_o(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},n.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?wo(this):xo(this),3==this.readyState&&_o(this)}},n.tc=function(e){this.a&&(this.response=this.responseText=e,wo(this))},n.sc=function(e){this.a&&(this.response=e,wo(this))},n.Ua=function(e){var t=this.i;t&&t.log(so,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&wo(this)},n.setRequestHeader=function(e,t){this.l.append(e,t)},n.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(so,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(so,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(go.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),T(ko,kn);var Eo="";ko.prototype.b=vo("goog.net.XhrIo");var To=/^https?$/i,So=["POST","PUT"];function Io(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Ka.a(),e.C=e.D?Qa(e.D):Qa(Ka),e.a.onreadystatechange=x(e.Vb,e);try{mo(e.b,Lo(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(o){return mo(e.b,Lo(e,"Error opening Xhr: "+o.message)),void Ao(e,o)}t=r||"";var a=new Pn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)K(e,t,void 0);else for(var n=On(e),r=An(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(i,(function(e,t){a.set(t,e)})),i=function(e){e:{for(var t=Co,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(a.Y()),r=u.FormData&&t instanceof u.FormData,!X(So,n)||i||r||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Ro(e),0<e.g&&(e.u=function(e){return Xe&&ot(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),mo(e.b,Lo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=x(e.Ma,e)):e.s=In(e.Ma,e.g,e)),mo(e.b,Lo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(o){mo(e.b,Lo(e,"Send error: "+o.message)),Ao(e,o)}}function Co(e){return"content-type"==e.toLowerCase()}function Ao(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Oo(e),Do(e)}function Oo(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Po(e){if(e.c&&"undefined"!=typeof s)if(e.C[1]&&4==Mo(e)&&2==No(e))mo(e.b,Lo(e,"Local request error detected and ignored"));else if(e.i&&4==Mo(e))In(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==Mo(e)){mo(e.b,Lo(e,"Request complete")),e.c=!1;try{var t,n=No(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.l).match(Mn)[1]||null;if(!a&&u.self&&u.self.location){var o=u.self.location.protocol;a=o.substr(0,o.length-1)}i=!To.test(a?a.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Mo(e)?e.a.statusText:""}catch(l){mo(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+No(e)+"]",Oo(e)}}finally{Do(e)}}}function Do(e,t){if(e.a){Ro(e);var n=e.a,r=e.C[0]?f:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(oo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Ro(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(u.clearTimeout(e.s),e.s=null)}function Mo(e){return e.a?e.a.readyState:0}function No(e){try{return 2<Mo(e)?e.a.status:-1}catch(t){return-1}}function Lo(e,t){return t+" ["+e.R+" "+e.l+" "+No(e)+"]"}function jo(e){var t=Zo;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Fo(e,t,n){e.a=!0,e.c=n,e.f=!t,Vo(e)}function zo(e){if(e.a){if(!e.v)throw new qo(e);e.v=!1}}function Bo(e,t,n,r){e.g.push([t,n,r]),e.a&&Vo(e)}function Uo(e){return Z(e.g,(function(e){return v(e[1])}))}function Vo(e){if(e.h&&e.a&&Uo(e)){var t=e.h,n=Ho[t];n&&(u.clearTimeout(n.a),delete Ho[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),a=i[0],o=i[1];if(i=i[2],a=e.f?o:a)try{var s=a.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(M(t)||"function"===typeof u.Promise&&t instanceof u.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,Uo(e)||(n=!0)}}e.c=t,r&&(s=x(e.m,e,!0),r=x(e.m,e,!1),t instanceof jo?(Bo(t,s,r),t.C=!0):t.then(s,r)),n&&(t=new Ko(t),Ho[t.a]=t,e.h=t.a)}function qo(){N.call(this)}function Go(){N.call(this)}function Ko(e){this.a=u.setTimeout(x(this.c,this),0),this.b=e}(n=ko.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",mo(this.b,Lo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(mo(this.b,Lo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Do(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Do(this,!0)),ko.ab.Da.call(this)},n.Vb=function(){this.xa||(this.O||this.i||this.f?Po(this):this.Jc())},n.Jc=function(){Po(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Eo:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(oo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return mo(this.b,"Can not get response: "+t.message),null}},jo.prototype.cancel=function(e){if(this.a)this.c instanceof jo&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Go(this),zo(this),Fo(this,!1,e))}},jo.prototype.m=function(e,t){this.i=!1,Fo(this,e,t)},jo.prototype.then=function(e,t,n){var r,i,a=new xt((function(e,t){r=e,i=t}));return Bo(this,r,(function(e){e instanceof Go?a.cancel():i(e)})),a.then(e,t,n)},jo.prototype.$goog_Thenable=!0,T(qo,N),qo.prototype.message="Deferred has already fired",qo.prototype.name="AlreadyCalledError",T(Go,N),Go.prototype.message="Deferred was canceled",Go.prototype.name="CanceledError",Ko.prototype.c=function(){throw delete Ho[this.a],this.b};var Ho={};function Wo(e){var t={},n=t.document||document,r=Ie(e).toString(),i=mt(document,"SCRIPT"),a={Wb:i,Ma:void 0},o=new jo(a),s=null,c=null!=t.timeout?t.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Xo(i,!0);var e=new $o(Qo,"Timeout reached for loading script "+r);zo(o),Fo(o,!1,e)}),c),a.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Xo(i,t.xd||!1,s),zo(o),Fo(o,!0,null))},i.onerror=function(){Xo(i,!0,s);var e=new $o(Yo,"Error while loading script "+r);zo(o),Fo(o,!1,e)},ge(a=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ht(i,a),function(e,t){be(e,"HTMLScriptElement"),e.src=Ie(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=u?t=h(t.document):(null===l&&(l=h(u.document)),t=l),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),o}function Zo(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&Xo(e,!0,this.Ma)}}function Xo(e,t,n){null!=n&&u.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Yo=0,Qo=1;function $o(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),N.call(this,n),this.code=e}function Jo(e){this.f=e}function es(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||rs,this.g=me(e.secureTokenHeaders||is),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||as,this.a=me(e.firebaseHeaders||os),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Er(),!(r=u.XMLHttpRequest||r&&t.a.INTERNAL.node&&t.a.INTERNAL.node.XMLHttpRequest)&&!kr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,kr()?this.f=new yo(self):Tr()?this.f=new Jo(r):this.f=new eo,this.b=null}T($o,N),T(Jo,Ya),Jo.prototype.a=function(){return new this.f},Jo.prototype.b=function(){return{}};var ts,ns="idToken",rs=new Gr(3e4,6e4),is={"Content-Type":"application/x-www-form-urlencoded"},as=new Gr(3e4,6e4),os={"Content-Type":"application/json"};function ss(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function us(e,t){t&&(e.l=cs("https://securetoken.googleapis.com/v1/token",t),e.h=cs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=cs("https://identitytoolkit.googleapis.com/v2/",t))}function cs(e,t){return e=Un(e),t=Un(t.url),e.f=e.a+e.f,Ln(e,t.c),e.a=t.a,jn(e,t.g),e.toString()}function ls(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function hs(e,t,n,r,i,a,o){(function(){var e=Pr();return!((e=Cr(e)!=Ir?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Xe||!ut||9<ut)})()||kr()?e=x(e.u,e):(ts||(ts=new xt((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{u[ds]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Bo(e,null,t,void 0)}(Wo(Ce(fs,{onload:ds})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=x(e.s,e)),e(t,n,r,i,a,o)}es.prototype.T=function(){return this.b},es.prototype.u=function(e,t,n,r,i,a){if(kr()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var o=new ko(this.f);if(a){o.g=Math.max(0,a);var s=setTimeout((function(){o.dispatchEvent("timeout")}),a)}En(o,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return mo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),Tn(o,"ready",(function(){s&&clearTimeout(s),Wt(this)})),Tn(o,"timeout",(function(){s&&clearTimeout(s),Wt(this),t&&t(null)})),Io(o,e,n,r,i)};var fs=new _e(Ee,"https://apis.google.com/js/client.js?onload=%{onload}"),ds="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(e,t,n,r,i,a,o){var s=Un(t+n);zn(s,"key",e.c),o&&zn(s,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&zn(s,c,i[c]);return new xt((function(t,n){hs(e,s.toString(),(function(e){e?e.error?n(cu(e,a||{})):t(e):n(new I("network-request-failed"))}),r,u?void 0:ar(zr(i)),e.a,e.v.get())}))}function vs(e){if("string"!==typeof(e=e.email)||!br.test(e))throw new I("invalid-email")}function ms(e){"email"in e&&vs(e)}function ys(e){if(!e[ns]){if(e.mfaPendingCredential)throw new I("multi-factor-auth-required",null,me(e));throw new I("internal-error")}}function gs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new I("internal-error")}else{if(!e.sessionInfo)throw new I("missing-verification-id");if(!e.code)throw new I("missing-verification-code")}}es.prototype.s=function(e,t,n,r,i){var a=this;ts.then((function(){window.gapi.client.setApiKey(a.c);var o=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(o),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},es.prototype.zb=function(){return su(this,Xs,{})},es.prototype.Bb=function(e,t){return su(this,Ws,{idToken:e,email:t})},es.prototype.Cb=function(e,t){return su(this,Zs,{idToken:e,password:t})};var bs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function _s(e){if(!e.phoneVerificationInfo)throw new I("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ws(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new I("internal-error")}function xs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(tr(e=new Qn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ks(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Xa(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Xa(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Xa(e)):e.errorMessage&&(t=uu(e.errorMessage)),t)throw t;ys(e)}function Es(e,t){return t.returnIdpCredential=!0,su(e,$s,t)}function Ts(e,t){return t.returnIdpCredential=!0,su(e,eu,t)}function Ss(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,su(e,Js,t)}function Is(e){if(!e.oobCode)throw new I("invalid-action-code")}(n=es.prototype).Db=function(e,t){var n={idToken:e},r=[];return pe(bs,(function(e,i){var a=t[i];null===a?r.push(e):i in t&&(n[i]=a)})),r.length&&(n.deleteAttribute=r),su(this,Ws,n)},n.vb=function(e,t){return ge(e={requestType:"PASSWORD_RESET",email:e},t),su(this,Vs,e)},n.wb=function(e,t){return ge(e={requestType:"EMAIL_SIGNIN",email:e},t),su(this,zs,e)},n.ub=function(e,t){return ge(e={requestType:"VERIFY_EMAIL",idToken:e},t),su(this,Bs,e)},n.Eb=function(e,t,n){return ge(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),su(this,Us,e)},n.fb=function(e){return su(this,ru,e)},n.nb=function(e,t){return su(this,Ks,{oobCode:e,newPassword:t})},n.Ra=function(e){return su(this,As,{oobCode:e})},n.jb=function(e){return su(this,Cs,{oobCode:e})};var Cs={endpoint:"setAccountInfo",A:Is,Z:"email",B:!0},As={endpoint:"resetPassword",A:Is,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new I("internal-error")},B:!0},Os={endpoint:"signupNewUser",A:function(e){if(vs(e),!e.password)throw new I("weak-password")},G:ys,V:!0,B:!0},Ps={endpoint:"createAuthUri",B:!0},Ds={endpoint:"deleteAccount",N:["idToken"]},Rs={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new I("internal-error")}},Ms={endpoint:"emailLinkSignin",N:["email","oobCode"],A:vs,G:ys,V:!0,B:!0},Ns={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:vs,G:ys,V:!0},Ls={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:_s,G:ys,B:!0,Na:!0},js={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:_s,G:ys,B:!0,Na:!0},Fs={endpoint:"getAccountInfo"},zs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new I("internal-error");vs(e)},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new I("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new I("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new I("internal-error");vs(e)},Z:"email",B:!0},qs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Gs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new I("internal-error")}},Ks={endpoint:"resetPassword",A:Is,Z:"email",B:!0},Hs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ws={endpoint:"setAccountInfo",N:["idToken"],A:ms,V:!0},Zs={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(ms(e),!e.password)throw new I("weak-password")},G:ys,V:!0},Xs={endpoint:"signupNewUser",G:ys,V:!0,B:!0},Ys={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new I("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Qs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},$s={endpoint:"verifyAssertion",A:ws,Ya:xs,G:ks,V:!0,B:!0},Js={endpoint:"verifyAssertion",A:ws,Ya:xs,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new I("user-not-found");if(e.errorMessage)throw uu(e.errorMessage);ys(e)},V:!0,B:!0},eu={endpoint:"verifyAssertion",A:function(e){if(ws(e),!e.idToken)throw new I("internal-error")},Ya:xs,G:ks,V:!0},tu={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new I("invalid-custom-token")},G:ys,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(e){if(vs(e),!e.password)throw new I("wrong-password")},G:ys,V:!0,B:!0},ru={endpoint:"verifyPhoneNumber",A:gs,G:ys,B:!0},iu={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new I("internal-error");gs(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Xa(e);ys(e)}},au={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:gs,G:ys,B:!0},ou={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[ns]^!!e.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function su(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.N))return Ot(new I("internal-error"));var r,i=!!t.Na,a=t.Ub||"POST";return At(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),ps(e,i?e.i:e.h,t.endpoint,a,n,t.Hb,t.lb||!1)})).then((function(e){return r=e,t.Ya?t.Ya(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new I("internal-error");return r[t.Z]}))}function uu(e){return cu({error:{errors:[{message:e}],code:400,message:e}})}function cu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new I(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ge(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new I(r[i],t);return!t&&e&&(t=Fr(e)),new I("internal-error",t)}function lu(e){this.b=e,this.a=null,this.rb=function(e){return(pu||(pu=new xt((function(e,t){function n(){qr(),Dr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){qr(),t(Error("Network Error"))},timeout:fu.get()})}if(Dr("gapi.iframes.Iframe"))e();else if(Dr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Dr("gapi.load")?n():t(Error("Network Error"))},At(Wo(r=Ce(hu,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw pu=null,e})))).then((function(){return new xt((function(t,n){Dr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(a),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var a=setTimeout((function(){n(Error("Network Error"))}),du.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var hu=new _e(Ee,"https://apis.google.com/js/api.js?onload=%{onload}"),fu=new Gr(3e4,6e4),du=new Gr(5e3,15e3),pu=null;function vu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Vn((e=Un(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Vn("https",this.l,null,"/__/auth/iframe"),this.a=e,zn(this.a,"apiKey",this.h),zn(this.a,"appName",this.i),this.b=null,this.c=[]}function mu(e,t,n,r,i,a){this.u=e,this.s=t,this.c=n,this.m=r,this.v=a,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function yu(e){try{return t.a.app(e).auth().Ga()}catch(n){return[]}}function gu(e,t,n,r,i,a){this.s=e,this.g=t,this.b=n,this.f=a,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function bu(e){var t=fr();return function(e){return su(e,qs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Un(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var a=e[i],o=n,s=r;if(0==a.indexOf("chrome-extension://")?o=Un(a).a==o&&"chrome-extension"==s:"http"!=s&&"https"!=s?o=!1:gr.test(a)?o=o==a:(a=a.split(".").join("\\."),o=new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)),o){e=!0;break e}}e=!1}if(!e)throw new Wa(fr())}))}function _u(e){return e.m||(e.m=_r().then((function(){if(!e.u){var t=e.c,n=e.i,r=yu(e.b),i=new vu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=J(r||[]),e.u=i.toString()}e.v=new lu(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.rb.then((function(){e.a.register("authEvent",t,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=qa(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",At(n)}return n.status="ERROR",At(n)}))}(e)}))),e.m}function wu(e){return e.l||(e.C=e.c?Or(e.c,yu(e.b)):null,e.l=new es(e.g,R(e.i),e.C),e.f&&us(e.l,e.f)),e.l}function xu(e,t,n,r,i,a,o,s,u,c,l,h){return(e=new mu(e,t,n,r,i,h)).l=a,e.g=o,e.i=s,e.b=me(u||null),e.f=c,e.yb(l).toString()}function ku(e){if(this.a=e||t.a.INTERNAL.reactNative&&t.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Eu(e){this.b=e,this.a={},this.f=x(this.c,this)}vu.prototype.toString=function(){return this.f?zn(this.a,"v",this.f):er(this.a.b,"v"),this.b?zn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?zn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},mu.prototype.yb=function(e){return this.h=e,this},mu.prototype.toString=function(){if(this.v){var e=Un(this.v.url);e=Vn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Vn("https",this.u,null,"/__/auth/handler");if(zn(e,"apiKey",this.s),zn(e,"appName",this.c),zn(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=t.a.app(this.c).auth().la()}catch(u){r=null}for(var i in n.ob=r,zn(e,"providerId",this.a.providerId),n=zr((r=this.a).Ib))n[i]=n[i].toString();i=r.Qc,n=me(n);for(var a=0;a<i.length;a++){var o=i[a];o in n&&delete n[o]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),ve(n)||zn(e,"customParameters",Fr(n))}if("function"===typeof this.a.Qb&&((r=this.a.Qb()).length&&zn(e,"scopes",r.join(","))),this.l?zn(e,"redirectUrl",this.l):er(e.b,"redirectUrl"),this.g?zn(e,"eventId",this.g):er(e.b,"eventId"),this.i?zn(e,"v",this.i):er(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Bn(e,s)&&zn(e,s,this.b[s]);return this.h?zn(e,"tid",this.h):er(e.b,"tid"),this.f?zn(e,"eid",this.f):er(e.b,"eid"),(s=yu(this.c)).length&&zn(e,"fw",s.join(",")),e.toString()},(n=gu.prototype).Ob=function(e,t,n){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),a=this,o=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return _u(e).then((function(){return function(e,t){return e.rb.then((function(){return new xt((function(n){e.a.send(t.type,t,n,Dr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(a).then((function(n){n||(e&&mr(e),t(i),o=!0)}))})).o((function(){})).then((function(){if(!o)return function(e){return new xt((function(t){return function n(){Cn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!o)return Cn(n).then((function(){t(r)}))}))},n.Xb=function(){var e=Pr();return!jr(e)&&!Vr(e)},n.Tb=function(){return!1},n.Mb=function(e,t,n,r,i,a,o,s){if(!e)return Ot(new I("popup-blocked"));if(o&&!jr())return this.ma().o((function(t){mr(e),i(t)})),r(),At();this.a||(this.a=bu(wu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw mr(e),i(t),t}));return r(),t})).then((function(){(Ua(n),o)||dr(xu(u.s,u.g,u.b,t,n,null,a,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},n.Nb=function(e,t,n,r){this.a||(this.a=bu(wu(this)));var i=this;return this.a.then((function(){Ua(t),dr(xu(i.s,i.g,i.b,e,t,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},n.ma=function(){var e=this;return _u(this).then((function(){return e.v.rb})).o((function(){throw e.a=null,new I("network-request-failed")}))},n.$b=function(){return!0},n.Ea=function(e){this.h.push(e)},n.Sa=function(e){Q(this.h,(function(t){return t==e}))},(n=ku.prototype).get=function(e){return At(this.a.getItem(e)).then((function(e){return e&&Br(e)}))},n.set=function(e,t){return At(this.a.setItem(e,Fr(t)))},n.U=function(e){return At(this.a.removeItem(e))},n.ca=function(){},n.ia=function(){};var Tu,Su=[];function Iu(e,t,n){ve(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Cu(e){this.a=e}function Au(e){this.c=e,this.b=!1,this.a=[]}function Ou(e,t,n,r){var i,a,o,s,u=n||{},c=null;if(e.b)return Ot(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new xt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),o=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:a=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(o),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(o),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",a),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Pu(e,c),t})).o((function(t){throw Pu(e,c),t}))}function Pu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Q(e.a,(function(e){return e==t}))}}function Du(){if(!Lu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;kr()&&self?(this.v=function(){var e=kr()?self:null;if(K(Su,(function(n){n.b==e&&(t=n)})),!t){var t=new Eu(e);Su.push(t)}return t}(),Iu(this.v,"keyChanged",(function(t,n){return Uu(e).then((function(t){return 0<t.length&&K(e.a,(function(e){e(t)})),{keyProcessed:X(t,n.key)}}))})),Iu(this.v,"ping",(function(){return At(["keyChanged"])}))):function(){var e=u.navigator;return e&&e.serviceWorker?At().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):At(null)}().then((function(t){(e.h=t)&&(e.g=new Au(new Cu(t)),Ou(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&X(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Ru(e){return new xt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new xt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Ru(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Mu(e){return e.i||(e.i=Ru(e)),e.i}function Nu(e,t){var n=0;return new xt((function r(i,a){Mu(e).then(t).then(i).o((function(t){if(!(3<++n))return Mu(e).then((function(t){return t.close(),e.i=void 0,r(i,a)})).o((function(e){a(e)}));a(t)}))}))}function Lu(){try{return!!u.indexedDB}catch(ho){return!1}}function ju(e){return e.objectStore("firebaseLocalStorage")}function Fu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function zu(e){return new xt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Bu(e,t){return e.g&&e.h&&function(){var e=u.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Ou(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):At()}function Uu(e){return Mu(e).then((function(e){var t=ju(Fu(e,!1));return t.getAll?zu(t.getAll()):new xt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=pr(e.c,n),e.c=n}return r}))}function Vu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function qu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=At().then((function(){if(Lu()){var e=Ur(),r="__sak"+e;return Tu||(Tu=new Du),(n=Tu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){K(t.a,(function(t){t(e)}))})),e}))}function Gu(){this.a={},this.type="inMemory"}function Ku(){if(!function(){var e="Node"==Er();if(!(e=Hu()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Er())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Hu()||t.a.INTERNAL.node.localStorage,this.type="localStorage"}function Hu(){try{var e=u.localStorage,t=Ur();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Wu(){this.type="nullStorage"}function Zu(){if(!function(){var e="Node"==Er();if(!(e=Xu()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Er())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Xu()||t.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Xu(){try{var e=u.sessionStorage,t=Ur();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Yu(){var e={};e.Browser=Ju,e.Node=ec,e.ReactNative=tc,e.Worker=nc,this.a=e[Er()]}Eu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];K(r,(function(t){i.push(At().then((function(){return t(e.origin,e.data.data)})))})),Dt(i).then((function(r){var i=[];K(r,(function(e){i.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})})),K(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Cu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Au.prototype.close=function(){for(;0<this.a.length;)Pu(this,this.a[0]);this.b=!0},(n=Du.prototype).set=function(e,t){var n=this,r=!1;return Nu(this,(function(t){return zu((t=ju(Fu(t,!0))).get(e))})).then((function(i){return Nu(n,(function(a){if(a=ju(Fu(a,!0)),i)return i.value=t,zu(a.put(i));n.b++,r=!0;var o={};return o.fbase_key=e,o.value=t,zu(a.add(o))}))})).then((function(){return n.c[e]=t,Bu(n,e)})).oa((function(){r&&n.b--}))},n.get=function(e){return Nu(this,(function(t){return zu(ju(Fu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},n.U=function(e){var t=this,n=!1;return Nu(this,(function(r){return n=!0,t.b++,zu(ju(Fu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Bu(t,e)})).oa((function(){n&&t.b--}))},n.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Uu(e).then((function(t){0<t.length&&K(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Vu(e),t()}(this),this.a.push(e)},n.ia=function(e){Q(this.a,(function(t){return t==e})),0==this.a.length&&Vu(this)},(n=qu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},n.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},n.U=function(e){return this.b.then((function(t){return t.U(e)}))},n.ca=function(e){this.a.push(e)},n.ia=function(e){Q(this.a,(function(t){return t==e}))},(n=Gu.prototype).get=function(e){return At(this.a[e])},n.set=function(e,t){return this.a[e]=t,At()},n.U=function(e){return delete this.a[e],At()},n.ca=function(){},n.ia=function(){},(n=Ku.prototype).get=function(e){var t=this;return At().then((function(){return Br(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return At().then((function(){var r=Fr(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return At().then((function(){t.a.removeItem(e)}))},n.ca=function(e){u.window&&hn(u.window,"storage",e)},n.ia=function(e){u.window&&pn(u.window,"storage",e)},(n=Wu.prototype).get=function(){return At(null)},n.set=function(){return At()},n.U=function(){return At()},n.ca=function(){},n.ia=function(){},(n=Zu.prototype).get=function(e){var t=this;return At().then((function(){return Br(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return At().then((function(){var r=Fr(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return At().then((function(){t.a.removeItem(e)}))},n.ca=function(){},n.ia=function(){};var Qu,$u,Ju={F:Ku,bb:Zu},ec={F:Ku,bb:Zu},tc={F:ku,bb:Wu},nc={F:Ku,bb:Wu},rc={rd:"local",NONE:"none",td:"session"};function ic(){var e=!(Vr(Pr())||!xr()),t=jr(),n=Rr();this.m=e,this.h=t,this.l=n,this.a={},Qu||(Qu=new Yu),e=Qu;try{this.g=!hr()&&Wr()||!u.indexedDB?new e.a.F:new qu(kr()?new Gu:new e.a.F)}catch(r){this.g=new Gu,this.h=!0}try{this.i=new e.a.bb}catch(r){this.i=new Gu}this.v=new Gu,this.f=x(this.Yb,this),this.b={}}function ac(){return $u||($u=new ic),$u}function oc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function uc(e,t,n){return n=sc(t,n),"local"==t.F&&(e.b[n]=null),oc(e,t.F).U(n)}function cc(e){e.c&&(clearInterval(e.c),e.c=null)}function lc(e){this.a=e,this.b=ac()}(n=ic.prototype).get=function(e,t){return oc(this,e.F).get(sc(e,t))},n.set=function(e,t,n){var r=sc(e,n),i=this,a=oc(this,e.F);return a.set(r,t).then((function(){return a.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},n.addListener=function(e,t,n){e=sc(e,t),this.l&&(this.b[e]=u.localStorage.getItem(e)),ve(this.a)&&(oc(this,"local").ca(this.f),this.h||(hr()||!Wr())&&u.indexedDB||!this.l||function(e){cc(e),e.c=setInterval((function(){for(var t in e.a){var n=u.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Jt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Yb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},n.removeListener=function(e,t,n){e=sc(e,t),this.a[e]&&(Q(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),ve(this.a)&&(oc(this,"local").ia(this.f),cc(this))},n.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?oc(this,"local").ia(this.f):cc(this),this.m)if(n=u.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?u.localStorage.setItem(t,r):u.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var a=this;n=function(){"undefined"===typeof e.a.a&&a.b[t]===u.localStorage.getItem(t)||(a.b[t]=u.localStorage.getItem(t),a.mb(t))},Xe&&ut&&10==ut&&u.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else K(e,x(this.mb,this))},n.mb=function(e){this.a[e]&&K(this.a[e],(function(e){e()}))};var hc,fc={name:"authEvent",F:"local"};function dc(){this.a=ac()}function pc(e,t){this.b=vc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===hc&&(hc=u.Int32Array?new Int32Array(xc):xc),this.reset()}T(pc,(function(){this.b=-1}));for(var vc=64,mc=vc-1,yc=[],gc=0;gc<mc;gc++)yc[gc]=0;var bc=$(128,yc);function _c(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var a=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,o=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=a+o|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(a=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;o=(a=a+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((o=(o=c&l^~c&h)+(0|hc[t])|0)+(0|n[t])|0)|0,a=h,h=l,l=c,c=u+o|0,u=s,s=i,i=r,r=o+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+a|0}function wc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(_c(e),i=0);else{if(!p(t))throw Error("message must be string or array");for(;r<n;){var a=t[r++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[i++]=a,i==e.b&&(_c(e),i=0)}}e.c=i,e.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):J(this.h)};var xc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function kc(){pc.call(this,8,Ec)}T(kc,pc);var Ec=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Tc(e,t,n,r,i,a){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=a,this.h=t+":"+n,this.C=new dc,this.g=new lc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Sc(e){return new I("invalid-cordova-configuration",e)}function Ic(e){var t=new kc;wc(t,e),e=[];var n=8*t.g;56>t.c?wc(t,bc,56-t.c):wc(t,bc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(_c(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return W(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Cc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Ac(e){return e.f||(e.f=e.ma().then((function(){return new xt((function(t){e.Ea((function n(r){return t(r),e.Sa(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Oc(e).then((function(r){var i=n;if(r&&t&&t.url){var a=null;-1!=(i=sa(t.url)).indexOf("/__/auth/callback")&&(a=(a="object"===typeof(a=Br(Bn(a=Un(i),"firebaseError")||null))?C(a):null)?new Va(r.c,r.b,null,null,a,null,r.T()):new Va(r.c,r.b,i,r.f,null,null,r.T())),i=a||n}Cc(e,i)}))}var n=new Va("unknown",null,null,null,new I("no-auth-event")),r=!1,i=Cn(500).then((function(){return Oc(e).then((function(){r||Cc(e,n)}))})),a=u.handleOpenURL;u.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Dr("BuildInfo.packageName",u).toLowerCase()+"://")&&t({url:e}),"function"===typeof a)try{a(e)}catch(n){console.error(n)}},Ha||(Ha=new Ga),function(e){var t=Ha;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=Dr("universalLinks.subscribe",u))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Oc(e){var t=null;return function(e){return e.b.get(fc,e.a).then((function(e){return qa(e)}))}(e.g).then((function(n){return t=n,uc((n=e.g).b,fc,n.a)})).then((function(){return t}))}function Pc(e){this.a=e,this.b=ac()}(n=Tc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?_r().then((function(){return new xt((function(e,t){var n=u.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Ot(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Dr("universalLinks.subscribe",u))throw Sc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Dr("BuildInfo.packageName",u))throw Sc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Dr("cordova.plugins.browsertab.openUrl",u))throw Sc("cordova-plugin-browsertab is not installed");if("function"!==typeof Dr("cordova.InAppBrowser.open",u))throw Sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new I("cordova-not-ready")}))},n.Ob=function(e,t){return t(new I("operation-not-supported-in-this-environment")),At()},n.Mb=function(){return Ot(new I("operation-not-supported-in-this-environment"))},n.$b=function(){return!1},n.Xb=function(){return!0},n.Tb=function(){return!0},n.Nb=function(e,t,n,r){if(this.c)return Ot(new I("redirect-operation-pending"));var i=this,a=u.document,o=null,s=null,c=null,l=null;return this.c=At().then((function(){return Ua(t),Ac(i)})).then((function(){return function(e,t,n,r,i){var a=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),o=new Va(t,r,null,a,new I("no-auth-event"),null,i),s=Dr("BuildInfo.packageName",u);if("string"!==typeof s)throw new I("invalid-cordova-configuration");var c=Dr("BuildInfo.displayName",u),l={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Pr().toLowerCase().match(/android/))return Ot(new I("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),a=Ic(a),l.sessionId=a;var h=xu(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(fc,o.w(),t)})).then((function(){var t=Dr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof t)throw new I("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=Dr("cordova.plugins.browsertab.openUrl",u)))throw new I("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Dr("cordova.InAppBrowser.open",u)))throw new I("invalid-cordova-configuration");t=Pr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new xt((function(e,t){s=function(){var t=Dr("cordova.plugins.browsertab.close",u);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){o||(o=Cn(2e3).then((function(){t(new I("redirect-cancelled-by-user"))})))},l=function(){Kr()&&c()},a.addEventListener("resume",c,!1),Pr().toLowerCase().match(/android/)||a.addEventListener("visibilitychange",l,!1)})).o((function(e){return Oc(i).then((function(){throw e}))}))})).oa((function(){c&&a.removeEventListener("resume",c,!1),l&&a.removeEventListener("visibilitychange",l,!1),o&&o.cancel(),s&&i.Sa(s),i.c=null}))},n.Ea=function(e){this.b.push(e),Ac(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Va("unknown",null,null,null,new I("no-auth-event")),e(t))}))},n.Sa=function(e){Q(this.b,(function(t){return t==e}))};var Dc={name:"pendingRedirect",F:"session"};function Rc(e){return uc(e.b,Dc,e.a)}function Mc(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=x(this.s,this),this.b=new Xc,this.C=new el,this.g=new Pc(Wc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Nc(this.D,this.v,this.m,A,this.J)}function Nc(e,n,r,i,a){var o=t.a.SDK_VERSION||null;return wr()?new Tc(e,n,r,o,i,a):new gu(e,n,r,o,i,a)}function Lc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function jc(e){e.a.Xb()&&Lc(e).o((function(t){var n=new Va("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));qc(t)&&e.s(n)})),e.a.Tb()||Yc(e.b)}function Fc(e,t){X(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Dc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Rc(e.g).then((function(){Lc(e).o((function(t){var n=new Va("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));qc(t)&&e.s(n)}))})):jc(e)})).o((function(){jc(e)}))}function zc(e,t){Q(e.h,(function(e){return e==t}))}Mc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Nc(this.D,this.v,this.m,null,this.J),this.i={}},Mc.prototype.s=function(e){if(!e)throw new I("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=E())),t=!0;break}}return Yc(this.b),t};var Bc=new Gr(2e3,1e4),Uc=new Gr(3e4,6e4);function Vc(e,t,n,r,i,a,o){return e.a.Mb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,a,o)}function qc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Gc(e,t,n,r,i){var a;return function(e){return e.b.set(Dc,"pending",e.a)}(e.g).then((function(){return e.a.Nb(t,n,r,i).o((function(t){if(qc(t))throw new I("operation-not-supported-in-this-environment");return a=t,Rc(e.g).then((function(){throw a}))})).then((function(){return e.a.$b()?new xt((function(){})):Rc(e.g).then((function(){return e.qa()})).then((function(){})).o((function(){}))}))}))}function Kc(e,t,n,r,i){return e.a.Ob(r,(function(e){t.na(n,null,e,i)}),Bc.get())}Mc.prototype.qa=function(){return this.b.qa()};var Hc={};function Wc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Zc(e,t,n,r){var i=Wc(t,n,r);return Hc[i]||(Hc[i]=new Mc(e,t,n,r)),Hc[i]}function Xc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Yc(e){e.g||(e.g=!0,Jc(e,!1,null,null))}function Qc(e){e.g&&!e.i&&Jc(e,!1,null,null)}function $c(e,t){if(e.b=function(){return At(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Jc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Ot(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):$c(e,n):$c(e,{user:null}),e.f=[],e.c=[]}function el(){}function tl(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function nl(e,t){this.a=t,$r(this,"verificationId",e)}function rl(e,t,n,r){return new Fa(e).fb(t,n).then((function(e){return new nl(e,r)}))}function il(e){var t=Wi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:e,expirationTime:Hr(1e3*t.exp),authTime:Hr(1e3*t.auth_time),issuedAtTime:Hr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function al(e,t,n){var r=t&&t[sl];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new ua(null,r),this.b=[];var i=this;K(t[ol]||[],(function(e){(e=ri(e))&&i.b.push(e)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Xc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Xc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,a=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!a),"unknown"!=n||i||a?e.a?(Jc(this,!0,null,e.a),At()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,a=t.i,o=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,o,a).then((function(t){Jc(e,s,t,null)})).o((function(t){Jc(e,s,null,t)}))}(this,e,t):Ot(new I("invalid-auth-event")):(Jc(this,!1,null,null),At())}else Ot(new I("invalid-auth-event"))},Xc.prototype.qa=function(){var e=this;return new xt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new I("timeout");e.a&&e.a.cancel(),e.a=Cn(Uc.get()).then((function(){e.b||(e.g=!0,Jc(e,!0,null,t))}))}(e))}))},el.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),At()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):Ot(new I("invalid-auth-event"))}else Ot(new I("invalid-auth-event"))},nl.prototype.confirm=function(e){return e=za(this.verificationId,e),this.a(e)};var ol="mfaInfo",sl="mfaPendingCredential";function ul(e,t,n,r){I.call(this,"multi-factor-auth-required",r,t),this.b=new al(e,t,n),$r(this,"resolver",this.b)}function cl(e,t,n){if(e&&m(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new ul(t,e.serverResponse,n,e.message)}catch(r){}return null}function ll(){}function hl(e){$r(this,"factorId",e.fa),this.a=e}function fl(e){if(hl.call(this,e),this.a.fa!=Fa.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function dl(e,t){for(var n in $t.call(this,e),t)this[n]=t[n]}function pl(e,t){this.a=e,this.b=[],this.c=x(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&K(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[oi]=e.uid),e.displayName&&(r[ii]=e.displayName),e.enrollmentTime&&(r[ai]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[si]=e.phoneNumber);try{t=new ui(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),vl(this,n)}function vl(e,t){e.b=t,$r(e,"enrolledFactors",t)}function ml(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function yl(e,t){e.stop(),e.b=Cn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=u.document,t=null;return Kr()||!e?At():new xt((function(n){t=function(){Kr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){yl(e,!0)})).o((function(t){e.i(t)&&yl(e,!1)}))}function gl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function bl(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function _l(e,t){e.b=Hi(t[ns]||""),e.a=t.refreshToken,bl(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function wl(e,t){return function(e,t){return new xt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?hs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(cu(e)):e.access_token&&e.refresh_token?n(e):r(new I("internal-error")):r(new I("network-request-failed"))}),"POST",Jn(t).toString(),e.g,e.m.get()):r(new I("internal-error"))}))}(e.f,t).then((function(t){return e.b=Hi(t.access_token),e.a=t.refresh_token,bl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function xl(e,t){this.a=e||null,this.b=t||null,Jr(this,{lastSignInTime:Hr(t||null),creationTime:Hr(e||null)})}function kl(e,t,n,r,i,a){Jr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:a||null,providerId:t})}function El(e,n,r){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i=t.a.SDK_VERSION?Or(t.a.SDK_VERSION):null;this.a=new es(this.l,R(A),i),e.emulatorConfig&&us(this.a,e.emulatorConfig),this.b=new gl(this.a),Dl(this,n[ns]),_l(this.b,n),$r(this,"refreshToken",this.b.a),Nl(this,r||{}),kn.call(this),this.R=!1,this.s&&Mr()&&(this.i=Zc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(e){return new ml((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.aa=x(this.hb,this);var a=this;this.ya=null,this.Oa=function(e){a.wa(e.h)},this.ja=null,this.Aa=function(e){us(a.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){Il(a,e.f)},this.ba=null,this.O=new pl(this,r),$r(this,"multiFactor",this.O)}function Tl(e,t){e.ja&&pn(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&hn(t,"languageCodeChanged",e.Oa)}function Sl(e,t){e.X&&pn(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&hn(t,"emulatorConfigChanged",e.Aa)}function Il(e,n){e.$=n,ls(e.a,t.a.SDK_VERSION?Or(t.a.SDK_VERSION,e.$):null)}function Cl(e,t){e.ba&&pn(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&hn(t,"frameworkChanged",e.Ba)}function Al(e){try{return t.a.app(e.m).auth()}catch(n){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Ol(e){e.D||e.u.b||(e.u.start(),pn(e,"tokenChanged",e.aa),hn(e,"tokenChanged",e.aa))}function Pl(e){pn(e,"tokenChanged",e.aa),e.u.stop()}function Dl(e,t){e.za=t,$r(e,"_lat",t)}function Rl(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return Dt(t).then((function(){return e}))}function Ml(e){e.i&&!e.R&&(e.R=!0,Fc(e.i,e))}function Nl(e,t){Jr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new xl(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Ll(){}function jl(e){return At().then((function(){if(e.D)throw new I("app-deleted")}))}function Fl(e){return W(e.providerData,(function(e){return e.providerId}))}function zl(e,t){t&&(Bl(e,t.providerId),e.providerData.push(t))}function Bl(e,t){Q(e.providerData,(function(e){return e.providerId==t}))}function Ul(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&$r(e,t,n)}function Vl(e,t){e!=t&&(Jr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?$r(e,"metadata",function(e){return new xl(e.a,e.b)}(t.metadata)):$r(e,"metadata",new xl),K(t.providerData,(function(t){zl(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),$r(e,"refreshToken",e.b.a),vl(e.O,t.O.b))}function ql(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return su(e.a,Fs,{idToken:t}).then(x(e.Kc,e))}(e,t).then((function(){return n||Ul(e,"isAnonymous",!1),t}))}))}function Gl(e,t){t[ns]&&e.za!=t[ns]&&(_l(e.b,t),e.dispatchEvent(new dl("tokenChanged")),Dl(e,t[ns]),Ul(e,"refreshToken",e.b.a))}function Kl(e,t){return ql(e).then((function(){if(X(Fl(e),t))return Rl(e).then((function(){throw new I("provider-already-linked")}))}))}function Hl(e,t,n){return ei({user:e,credential:Ba(t),additionalUserInfo:t=$i(t),operationType:n})}function Wl(e,t){return Gl(e,t),e.reload().then((function(){return e}))}function Zl(e,n,r,i,a){if(!Mr())return Ot(new I("operation-not-supported-in-this-environment"));if(e.h&&!a)return Ot(e.h);var o=Qi(r.providerId),s=Ur(e.uid+":::"),u=null;(!jr()||xr())&&e.s&&r.isOAuthProvider&&(u=xu(e.s,e.l,e.m,n,r,null,s,t.a.SDK_VERSION||null,null,null,e.tenantId));var c=yr(u,o&&o.ua,o&&o.ta);return i=i().then((function(){if(Yl(e),!a)return e.I().then((function(){}))})).then((function(){return Vc(e.i,c,n,r,s,!!u,e.tenantId)})).then((function(){return new xt((function(t,r){e.na(n,null,new I("cancelled-popup-request"),e.g||null),e.f=t,e.C=r,e.g=s,e.c=Kc(e.i,e,n,c,s)}))})).then((function(e){return c&&mr(c),e?ei(e):null})).o((function(e){throw c&&mr(c),e})),Ql(e,i,a)}function Xl(e,t,n,r,i){if(!Mr())return Ot(new I("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ot(e.h);var a=null,o=Ur(e.uid+":::");return r=r().then((function(){if(Yl(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=o,Rl(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(eh,e.w(),t.a)),t})).then((function(){return Gc(e.i,t,n,o,e.tenantId)})).o((function(t){if(a=t,e.ha)return th(e.ha);throw a})).then((function(){if(a)throw a})),Ql(e,r,i)}function Yl(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Ql(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Ot(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new dl("userInvalidated")),e.h=t),t}))}(e,t,n);return e.J.push(r),r.oa((function(){Y(e.J,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cl(t.w(),Al(e),x(e.jc,e))),n||t}))}function $l(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[ns]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new El(t,n,e);return e.providerData&&K(e.providerData,(function(e){e&&zl(i,ei(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Jl(e){this.a=e,this.b=ac()}al.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then((function(e){var n=me(t.f);return delete n[ol],delete n[sl],ge(n,e),t.g(n)}))},T(ul,I),ll.prototype.sb=function(e,t,n){return t.type==ca?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),ge(n,{phoneVerificationInfo:ja(e.a)}),su(t,Ls,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return ge(n={mfaPendingCredential:n},{phoneVerificationInfo:ja(e.a)}),su(t,js,n)}))}(this,e,t)},T(hl,ll),T(fl,hl),T(dl,$t),(n=pl.prototype).yc=function(e){vl(this,function(e){var t=[];return K(e.mfaInfo||[],(function(e){(e=ri(e))&&t.push(e)})),t}(e.hd))},n.Rb=function(){return this.a.I().then((function(e){return new ua(e,null)}))},n.fc=function(e,t){var n=this,r=this.a.a;return this.Rb().then((function(n){return e.sb(r,n,t)})).then((function(e){return Gl(n.a,e),n.a.reload()}))},n.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return su(r,ou,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=H(t.b,(function(e){return e.uid!=n}));return vl(t,r),Gl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},n.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(e){return e.w()}))}}},ml.prototype.start=function(){this.a=this.c,yl(this,!0)},ml.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},gl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},gl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Ot(new I("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?wl(this,{grant_type:"refresh_token",refresh_token:this.a}):At(null):At({accessToken:this.b.toString(),refreshToken:this.a})},xl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(El,kn),El.prototype.wa=function(e){this.ya=e,ss(this.a,e)},El.prototype.la=function(){return this.ya},El.prototype.Ga=function(){return J(this.$)},El.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(El.prototype,"providerId","firebase"),(n=El.prototype).reload=function(){var e=this;return Ql(this,jl(this).then((function(){return ql(e).then((function(){return Rl(e)})).then(Ll)})))},n.oc=function(e){return this.I(e).then((function(e){return new il(e)}))},n.I=function(e){var t=this;return Ql(this,jl(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new I("internal-error");return e.accessToken!=t.za&&(Dl(t,e.accessToken),t.dispatchEvent(new dl("tokenChanged"))),Ul(t,"refreshToken",e.refreshToken),e.accessToken})))},n.Kc=function(e){if(!(e=e.users)||!e.length)throw new I("internal-error");Nl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?W(e,(function(e){return new kl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)zl(this,t[n]);Ul(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new dl("userReloaded",{hd:e}))},n.Lc=function(e){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},n.tb=function(e){var t=this,n=null;return Ql(this,e.c(this.a,this.uid).then((function(e){return Gl(t,e),n=Hl(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},n.Cc=function(e){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},n.qb=function(e){var t=this,n=null;return Ql(this,Kl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Hl(t,e,"link"),Wl(t,e)})).then((function(){return n})))},n.Dc=function(e,t){var n=this;return Ql(this,Kl(this,"phone").then((function(){return rl(Al(n),e,t,x(n.qb,n))})))},n.Mc=function(e,t){var n=this;return Ql(this,At().then((function(){return rl(Al(n),e,t,x(n.tb,n))})),!0)},n.Bb=function(e){var t=this;return Ql(this,this.I().then((function(n){return t.a.Bb(n,e)})).then((function(e){return Gl(t,e),t.reload()})))},n.ed=function(e){var t=this;return Ql(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Gl(t,e),t.reload()})))},n.Cb=function(e){var t=this;return Ql(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Gl(t,e),t.reload()})))},n.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return jl(this);var t=this;return Ql(this,this.I().then((function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Gl(t,e),Ul(t,"displayName",e.displayName||null),Ul(t,"photoURL",e.photoUrl||null),K(t.providerData,(function(e){"password"===e.providerId&&($r(e,"displayName",t.displayName),$r(e,"photoURL",t.photoURL))})),Rl(t)})).then(Ll))},n.cd=function(e){var t=this;return Ql(this,ql(this).then((function(n){return X(Fl(t),e)?function(e,t,n){return su(e,Rs,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return K(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),K(Fl(t),(function(e){n[e]||Bl(t,e)})),n[Fa.PROVIDER_ID]||$r(t,"phoneNumber",null),Rl(t)})):Rl(t).then((function(){throw new I("no-such-provider")}))})))},n.delete=function(){var e=this;return Ql(this,this.I().then((function(t){return su(e.a,Ds,{idToken:t})})).then((function(){e.dispatchEvent(new dl("userDeleted"))}))).then((function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");Tl(e,null),Sl(e,null),Cl(e,null),e.J=[],e.D=!0,Pl(e),$r(e,"refreshToken",null),e.i&&zc(e.i,e)}))},n.Fb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},n.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?x(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?x(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?x(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?x(this.Lb,this):null},n.Ec=function(e){var t=this;return Zl(this,"linkViaPopup",e,(function(){return Kl(t,e.providerId).then((function(){return Rl(t)}))}),!1)},n.Nc=function(e){return Zl(this,"reauthViaPopup",e,(function(){return At()}),!0)},n.Fc=function(e){var t=this;return Xl(this,"linkViaRedirect",e,(function(){return Kl(t,e.providerId)}),!1)},n.Oc=function(e){return Xl(this,"reauthViaRedirect",e,(function(){return At()}),!0)},n.Kb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var a=null;return Ql(this,this.I().then((function(n){return Ts(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return a=Hl(i,e,"link"),Wl(i,e)})).then((function(){return a})))},n.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var a=null;return Ql(this,At().then((function(){return fa(Ss(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return a=Hl(i,e,"reauthenticate"),Gl(i,e),i.h=null,i.reload()})).then((function(){return a})),!0)},n.ub=function(e){var t=this,n=null;return Ql(this,this.I().then((function(t){return n=t,"undefined"===typeof e||ve(e)?{}:Vi(new Di(e))})).then((function(e){return t.a.ub(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.Eb=function(e,t){var n=this,r=null;return Ql(this,this.I().then((function(e){return r=e,"undefined"===typeof t||ve(t)?{}:Vi(new Di(t))})).then((function(t){return n.a.Eb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},n.jc=function(e){var t=null,n=this;return Ql(this,e=fa(At(e),n.uid).then((function(e){return t=Hl(n,e,"reauthenticate"),Gl(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ge(e,this.metadata.w()),K(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),ge(e,this.O.w()),e};var eh={name:"redirectUser",F:"session"};function th(e){return uc(e.b,eh,e.a)}function nh(e){this.a=e,this.b=ac(),this.c=null,this.f=function(e){var t=ah("local"),n=ah("session"),r=ah("none");return function(e,t,n){var r=sc(t,n),i=oc(e,t.F);return e.get(t,n).then((function(a){var o=null;try{o=Br(u.localStorage.getItem(r))}catch(s){}if(o&&!a)return u.localStorage.removeItem(r),e.set(t,o,n);o&&a&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ih,e.a).then((function(e){return e?ah(e):t}))}))}))})).then((function(t){return e.c=t,rh(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(ah("local"),this.a,x(this.g,this))}function rh(e,t){var n,r=[];for(n in rc)rc[n]!==t&&r.push(uc(e.b,ah(rc[n]),e.a));return r.push(uc(e.b,ih,e.a)),function(e){return new xt((function(t,n){var r=e.length,i=[];if(r)for(var a=function(e,n){r--,i[e]=n,0==r&&t(i)},o=function(e){n(e)},s=0;s<e.length;s++)Pt(e[s],k(a,s),o);else t(i)}))}(r)}nh.prototype.g=function(){var e=this,t=ah("local");ch(this,(function(){return At().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return rh(e,"local").then((function(){e.c=t}))}))}))};var ih={name:"persistence",F:"session"};function ah(e){return{name:"authUser",F:e}}function oh(e,t){return ch(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function sh(e){return ch(e,(function(){return uc(e.b,e.c,e.a)}))}function uh(e,t,n){return ch(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),$l(e||{})}))}))}function ch(e,t){return e.f=e.f.then(t,t),e.f}function lh(e){if(this.l=!1,$r(this,"settings",new tl),$r(this,"app",e),!bh(this).options||!bh(this).options.apiKey)throw new I("invalid-api-key");e=t.a.SDK_VERSION?Or(t.a.SDK_VERSION):null,this.a=new es(bh(this).options&&bh(this).options.apiKey,R(A),e),this.R=[],this.s=[],this.O=[],this.hb=t.a.INTERNAL.createSubscribe(x(this.zc,this)),this.X=void 0,this.bc=t.a.INTERNAL.createSubscribe(x(this.Ac,this)),yh(this,null),this.i=new nh(bh(this).options.apiKey+":"+bh(this).name),this.D=new Jl(bh(this).options.apiKey+":"+bh(this).name),this.$=kh(this,function(e){var t=bh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(eh,e.a).then((function(e){return e&&t&&(e.authDomain=t),$l(e||{})}))}(e.D,bh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),th(e.D)}));return kh(e,t)}(e).then((function(){return uh(e.i,t,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return oh(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:sh(e.i)}))):null})).then((function(t){yh(e,t||null)}));return kh(e,n)}(this)),this.h=kh(this,function(e){return e.$.then((function(){return vh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(ah("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=x(this.Zc,this),this.Ba=x(this.da,this),this.ya=x(this.mc,this),this.za=x(this.wc,this),this.Aa=x(this.xc,this),this.b=null,function(e){var t=bh(e).options.authDomain,n=bh(e).options.apiKey;t&&Mr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Zc(t,n,bh(e).name,e.P),Fc(e.b,e),_h(e)&&Ml(_h(e)),e.m){Ml(e.m);var r=e.m;r.wa(e.la()),Tl(r,e),Il(r=e.m,e.J),Cl(r,e),us((r=e.m).a,e.P),Sl(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=x(this.delete,this),this.INTERNAL.logFramework=x(this.Gc,this),this.u=0,kn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.P){var e=Un(this.P.url);e=ei({protocol:e.c,host:e.a,port:e.g,options:ei({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.P=null}function hh(e){$t.call(this,"languageCodeChanged"),this.h=e}function fh(e){$t.call(this,"emulatorConfigChanged"),this.c=e}function dh(e){$t.call(this,"frameworkChanged"),this.f=e}function ph(e){return e.Oa||Ot(new I("auth-domain-config-required"))}function vh(e){if(!Mr())return Ot(new I("operation-not-supported-in-this-environment"));var t=ph(e).then((function(){return e.b.qa()})).then((function(e){return e?ei(e):null}));return kh(e,t)}function mh(e,t){var n={};return n.apiKey=bh(e).options.apiKey,n.authDomain=bh(e).options.authDomain,n.appName=bh(e).name,e.P&&(n.emulatorConfig=e.P),e.$.then((function(){return function(e,t,n,r){var i=new El(e,t);return n&&(i.ha=n),r&&Il(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return _h(e)&&t.uid==_h(e).uid?(Vl(_h(e),t),e.da(t)):(yh(e,t),Ml(t),e.da(t))})).then((function(){xh(e)}))}function yh(e,t){_h(e)&&(function(e,t){Q(e.S,(function(e){return e==t}))}(_h(e),e.Ba),pn(_h(e),"tokenChanged",e.ya),pn(_h(e),"userDeleted",e.za),pn(_h(e),"userInvalidated",e.Aa),Pl(_h(e))),t&&(t.S.push(e.Ba),hn(t,"tokenChanged",e.ya),hn(t,"userDeleted",e.za),hn(t,"userInvalidated",e.Aa),0<e.u&&Ol(t)),$r(e,"currentUser",t),t&&(t.wa(e.la()),Tl(t,e),Il(t,e.J),Cl(t,e),us(t.a,e.P),Sl(t,e))}function gh(e,t){var n=null,r=null;return kh(e,t.then((function(t){return n=Ba(t),r=$i(t),mh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cl(t.w(),e,x(e.kc,e))),n||t})).then((function(){return ei({user:_h(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bh(e){return e.app}function _h(e){return e.currentUser}function wh(e){return _h(e)&&_h(e)._lat||null}function xh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](wh(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](wh(e))}}function kh(e,t){return e.R.push(t),t.oa((function(){Y(e.R,t)})),t}function Eh(){}function Th(){this.a={},this.b=1e12}nh.prototype.xb=function(e){var t=null,n=this;return function(e){var t=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");e:{for(r in rc)if(rc[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Er()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Lu()&&"none"!==e)throw n;break;default:if(!Rr()&&"none"!==e)throw n}}(e),ch(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,rh(n,e)})).then((function(){if(n.c=ah(e),t)return n.b.set(n.c,t,n.a)})):At()}))},T(lh,kn),T(hh,$t),T(fh,$t),T(dh,$t),(n=lh.prototype).xb=function(e){return kh(this,e=this.i.xb(e))},n.wa=function(e){this.aa===e||this.l||(this.aa=e,ss(this.a,this.aa),this.dispatchEvent(new hh(this.la())))},n.la=function(){return this.aa},n.fd=function(){var e=u.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},n.gd=function(e,t){if(!this.P){if(!/^https?:\/\//.test(e))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!e&&_r().then((function(){var e=u.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#ff0000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),u.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.P={url:e,ec:t},this.settings.ib=!0,us(this.a,this.P),this.dispatchEvent(new fh(this.P))}},n.Gc=function(e){this.J.push(e),ls(this.a,t.a.SDK_VERSION?Or(t.a.SDK_VERSION,this.J):null),this.dispatchEvent(new dh(this.J))},n.Ga=function(){return J(this.J)},n.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:bh(this).options.apiKey,authDomain:bh(this).options.authDomain,appName:bh(this).name,currentUser:_h(this)&&_h(this).w()}},n.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},n.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?x(this.ic,this):null},n.ic=function(e,t,n,r){var i=this,a={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return gh(i,Es(i.a,a))}))},n.Xc=function(e){if(!Mr())return Ot(new I("operation-not-supported-in-this-environment"));var n=this,r=Qi(e.providerId),i=Ur(),a=null;(!jr()||xr())&&bh(this).options.authDomain&&e.isOAuthProvider&&(a=xu(bh(this).options.authDomain,bh(this).options.apiKey,bh(this).name,"signInViaPopup",e,null,i,t.a.SDK_VERSION||null,null,null,this.T(),this.P));var o=yr(a,r&&r.ua,r&&r.ta);return kh(this,r=ph(this).then((function(t){return Vc(t,o,"signInViaPopup",e,i,!!a,n.T())})).then((function(){return new xt((function(e,t){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=e,n.C=t,n.g=i,n.c=Kc(n.b,n,"signInViaPopup",o,i)}))})).then((function(e){return o&&mr(o),e?ei(e):null})).o((function(e){throw o&&mr(o),e})))},n.Yc=function(e){if(!Mr())return Ot(new I("operation-not-supported-in-this-environment"));var t=this;return kh(this,ph(this).then((function(){return function(e){return ch(e,(function(){return e.b.set(ih,e.c.F,e.a)}))}(t.i)})).then((function(){return Gc(t.b,"signInViaRedirect",e,void 0,t.T())})))},n.qa=function(){var e=this;return vh(this).then((function(t){return e.b&&Qc(e.b.b),t})).o((function(t){throw e.b&&Qc(e.b.b),t}))},n.dd=function(e){if(!e)return Ot(new I("null-user"));if(this.S!=e.tenantId)return Ot(new I("tenant-id-mismatch"));var t=this,n={};n.apiKey=bh(this).options.apiKey,n.authDomain=bh(this).options.authDomain,n.appName=bh(this).name;var r=function(e,t,n,r){var i=e.b,a={};return a[ns]=i.b&&i.b.toString(),a.refreshToken=i.a,t=new El(t||{apiKey:e.l,authDomain:e.s,appName:e.m},a),n&&(t.ha=n),r&&Il(t,r),Vl(t,e),t}(e,n,t.D,t.Ga());return kh(this,this.h.then((function(){if(bh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return _h(t)&&e.uid==_h(t).uid?(Vl(_h(t),e),t.da(e)):(yh(t,r),Ml(r),t.da(r))})).then((function(){xh(t)})))},n.Ab=function(){var e=this;return kh(this,this.h.then((function(){return e.b&&Qc(e.b.b),_h(e)?(yh(e,null),sh(e.i).then((function(){xh(e)}))):At()})))},n.Zc=function(){var e=this;return uh(this.i,bh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=_h(e)&&t){n=_h(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Vl(_h(e),t),_h(e).I();(_h(e)||t)&&(yh(e,t),t&&(Ml(t),t.ha=e.D),e.b&&Fc(e.b,e),xh(e))}}))},n.da=function(e){return oh(this.i,e)},n.mc=function(){xh(this),this.da(_h(this))},n.wc=function(){this.Ab()},n.xc=function(){this.Ab()},n.kc=function(e){var t=this;return this.h.then((function(){return gh(t,At(e))}))},n.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(_h(t))}))},n.Ac=function(e){var t=this;!function(e,t){e.O.push(t),kh(e,e.h.then((function(){!e.l&&X(e.O,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(wh(e)))})))}(this,(function(){e.next(_h(t))}))},n.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(_h(r)):"function"===typeof e.next&&e.next(_h(r))})),this.hb(e,t,n)},n.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof e?e(_h(r)):"function"===typeof e.next&&e.next(_h(r))})),this.bc(e,t,n)},n.nc=function(e){var t=this;return kh(this,this.h.then((function(){return _h(t)?_h(t).I(e).then((function(e){return{accessToken:e}})):null})))},n.Tc=function(e){var t=this;return this.h.then((function(){return gh(t,su(t.a,tu,{token:e}))})).then((function(e){var n=e.user;return Ul(n,"isAnonymous",!1),t.da(n),e}))},n.Uc=function(e,t){var n=this;return this.h.then((function(){return gh(n,su(n.a,nu,{email:e,password:t}))}))},n.dc=function(e,t){var n=this;return this.h.then((function(){return gh(n,su(n.a,Os,{email:e,password:t}))}))},n.$a=function(e){var t=this;return this.h.then((function(){return gh(t,e.ka(t.a))}))},n.Sc=function(e){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},n.zb=function(){var e=this;return this.h.then((function(){var t=_h(e);if(t&&t.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return gh(e,e.a.zb()).then((function(t){var n=t.user;return Ul(n,"isAnonymous",!0),e.da(n),t}))}))},n.getUid=function(){return _h(this)&&_h(this).uid||null},n.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&_h(this)&&Ol(_h(this))},n.Pc=function(e){var t=this;K(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&_h(this)&&Pl(_h(this)),this.removeAuthTokenListener(e)},n.addAuthTokenListener=function(e){var t=this;this.s.push(e),kh(this,this.h.then((function(){t.l||X(t.s,e)&&e(wh(t))})))},n.removeAuthTokenListener=function(e){Q(this.s,(function(t){return t==e}))},n.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i).b.removeListener(ah("local"),e.a,this.ja),this.b&&(zc(this.b,this),Qc(this.b.b)),Promise.resolve()},n.hc=function(e){return kh(this,function(e,t){return su(e,Ps,{identifier:t,continueUri:Nr()?fr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},n.Bc=function(e){return!!Ma(e)},n.wb=function(e,t){var n=this;return kh(this,At().then((function(){var e=new Di(t);if(!e.c)throw new I("argument-error",Ni+" must be true when sending sign in link to email");return Vi(e)})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},n.jd=function(e){return this.Ra(e).then((function(e){return e.data.email}))},n.nb=function(e,t){return kh(this,this.a.nb(e,t).then((function(){})))},n.Ra=function(e){return kh(this,this.a.Ra(e).then((function(e){return new ci(e)})))},n.jb=function(e){return kh(this,this.a.jb(e).then((function(){})))},n.vb=function(e,t){var n=this;return kh(this,At().then((function(){return"undefined"===typeof t||ve(t)?{}:Vi(new Di(t))})).then((function(t){return n.a.vb(e,t)})).then((function(){})))},n.Wc=function(e,t){return kh(this,rl(this,e,t,x(this.$a,this)))},n.Vc=function(e,t){var n=this;return kh(this,At().then((function(){var r=t||fr(),i=Ra(e,r);if(!(r=Ma(r)))throw new I("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new I("tenant-id-mismatch");return n.$a(i)})))},Eh.prototype.render=function(){},Eh.prototype.reset=function(){},Eh.prototype.getResponse=function(){},Eh.prototype.execute=function(){};var Sh=null;function Ih(e,t){return(t=Ch(t))&&e.a[t]||null}function Ch(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Ah(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=lt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Oh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ph(){}function Dh(){}Th.prototype.render=function(e,t){return this.a[this.b.toString()]=new Ah(e,t),this.b++},Th.prototype.reset=function(e){var t=Ih(this,e);e=Ch(e),t&&e&&(t.delete(),delete this.a[e])},Th.prototype.getResponse=function(e){return(e=Ih(this,e))?e.getResponse():null},Th.prototype.execute=function(e){(e=Ih(this,e))&&e.execute()},Ah.prototype.getResponse=function(){return Oh(this),this.b},Ah.prototype.execute=function(){Oh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Ah.prototype.delete=function(){Oh(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},$r(Ph,"FACTOR_ID","phone"),Dh.prototype.g=function(){return Sh||(Sh=new Th),At(Sh)},Dh.prototype.c=function(){};var Rh=null;function Mh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nh=new _e(Ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Lh=new Gr(3e4,6e4);Mh.prototype.g=function(e){var t=this;return new xt((function(n,r){var i=setTimeout((function(){r(new I("network-request-failed"))}),Lh.get());!u.grecaptcha||e!==t.f&&!t.b?(u[t.a]=function(){if(u.grecaptcha){t.f=e;var a=u.grecaptcha.render;u.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new I("internal-error"));delete u[t.a]},At(Wo(Ce(Nh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Mh.prototype.c=function(){this.b--};var jh=null;function Fh(e,t,n,r,i,a,o){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,o?(Rh||(Rh=new Dh),o=Rh):(jh||(jh=new Mh),o=jh),this.m=o,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uh])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vh],!u.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!lt(t)||!this.i&&lt(t).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new es(e,a||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[zh];this.a[zh]=function(e){if(qh(s,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=Dr(c,u);"function"===typeof t&&t(e)}};var l=this.a[Bh];this.a[Bh]=function(){if(qh(s,null),"function"===typeof l)l();else if("string"===typeof l){var e=Dr(l,u);"function"===typeof e&&e()}}}var zh="callback",Bh="expired-callback",Uh="sitekey",Vh="size";function qh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Gh(e,t){return e.h.push(t),t.oa((function(){Y(e.h,t)})),t}function Kh(e){if(e.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Hh(e,n,r){var i=!1;try{this.b=r||t.a.app()}catch(s){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");r=this.b.options.apiKey;var a=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=t.a.SDK_VERSION?Or(t.a.SDK_VERSION,o):null,Fh.call(this,r,e,n,(function(){try{var e=a.b.auth().la()}catch(t){e=null}return e}),o,R(A),i)}function Wh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,a=!1,o=0;o<t.length;o++)if(t[o].optional)a=!0;else{if(a)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(a=t.length,n.length<i||a<n.length)r="Expected "+(i==a?1==i?"1 argument":i+" arguments":i+"-"+a+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(a=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!a){if(t=t[i],0>i||i>=Zh.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Zh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new I("argument-error",e+" failed: "+r)}(n=Fh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Gh(this,At().then((function(){if(Nr()&&!kr())return _r();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,su(e.s,Gs,{})})).then((function(t){e.a[Uh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},n.render=function(){Kh(this);var e=this;return Gh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=lt(t);t=function(e,t,n){var r=arguments,i=document,a=String(r[0]),o=r[1];if(!ct&&o&&(o.name||o.type)){if(a=["<",a],o.name&&a.push(' name="',Ke(o.name),'"'),o.type){a.push(' type="',Ke(o.type),'"');var s={};ge(s,o),delete s.type,o=s}a.push(">"),a=a.join("")}return a=mt(i,a),o&&("string"===typeof o?a.className=o:Array.isArray(o)?a.className=o.join(" "):ht(a,o)),2<r.length&&vt(i,a,r),a}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},n.verify=function(){Kh(this);var e=this;return Gh(this,this.render().then((function(t){return new xt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){Q(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},n.reset=function(){Kh(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Kh(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=lt(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},T(Hh,Fh);var Zh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Xh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Yh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Qh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function $h(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function Jh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function ef(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function tf(e,t){return m(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function nf(e){return m(e)&&"string"===typeof e.uid}function rf(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function af(e,t){for(var n in t){var r=t[n].name;e[r]=uf(r,e[n],t[n].j)}}function of(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:k((function(e){return this[e]}),n),set:k((function(e,t,n,r){Wh(e,[n],[r],!0),this[t]=r}),r,n,t[n].kb),enumerable:!0})}}function sf(e,t,n,r){e[t]=uf(t,n,r)}function uf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Wh(a,n,e),t.apply(this,e)}if(!n)return t;var i,a=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}af(lh.prototype,{jb:{name:"applyActionCode",j:[Xh("code")]},Ra:{name:"checkActionCode",j:[Xh("code")]},nb:{name:"confirmPasswordReset",j:[Xh("code"),Xh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Xh("email"),Xh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Xh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Xh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rf(Qh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rf(Qh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Xh("email"),rf(Qh("opt_actionCodeSettings",!0),Jh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Xh("email"),Qh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Xh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ef()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[ef()]},Tc:{name:"signInWithCustomToken",j:[Xh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Xh("email"),Xh("password")]},Vc:{name:"signInWithEmailLink",j:[Xh("email"),Xh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[rf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof El)}},Jh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Xh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Xh("url"),Qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Xh("code")]}}),of(lh.prototype,{lc:{name:"languageCode",kb:rf(Xh(),Jh(),"languageCode")},ti:{name:"tenantId",kb:rf(Xh(),Jh(),"tenantId")}}),lh.Persistence=rc,lh.Persistence.LOCAL="local",lh.Persistence.SESSION="session",lh.Persistence.NONE="none",af(El.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Yh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Yh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ef()]},qb:{name:"linkWithCredential",j:[ef()]},Dc:{name:"linkWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ef()]},tb:{name:"reauthenticateWithCredential",j:[ef()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Xh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[rf(Qh("opt_actionCodeSettings",!0),Jh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Xh(null,!0)]},cd:{name:"unlink",j:[Xh("provider")]},Bb:{name:"updateEmail",j:[Xh("email")]},Cb:{name:"updatePassword",j:[Xh("password")]},ed:{name:"updatePhoneNumber",j:[ef("phone")]},Db:{name:"updateProfile",j:[Qh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Xh("email"),rf(Qh("opt_actionCodeSettings",!0),Jh(null,!0),"opt_actionCodeSettings",!0)]}}),af(Th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),af(Eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),af(xt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),of(tl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Yh("appVerificationDisabledForTesting")}}),af(nl.prototype,{confirm:{name:"confirm",j:[Xh("verificationCode")]}}),sf(ha,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[ga,Pa,La,va],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[rf(Xh(),Qh(),"json")]),sf(Da,"credential",(function(e,t){return new Oa(e,t)}),[Xh("email"),Xh("password")]),af(Oa.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),af(xa.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),sf(xa,"credential",ka,[rf(Xh(),Qh(),"token")]),sf(Da,"credentialWithLink",Ra,[Xh("email"),Xh("emailLink")]),af(Ea.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),sf(Ea,"credential",Ta,[rf(Xh(),Qh(),"token")]),af(Sa.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),sf(Sa,"credential",Ia,[rf(Xh(),rf(Qh(),Jh()),"idToken"),rf(Xh(),Jh(),"accessToken",!0)]),af(Ca.prototype,{Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),sf(Ca,"credential",Aa,[rf(Xh(),Qh(),"token"),Xh("secret",!0)]),af(wa.prototype,{Ca:{name:"addScope",j:[Xh("scope")]},credential:{name:"credential",j:[rf(Xh(),rf(Qh(),Jh()),"optionsOrIdToken"),rf(Xh(),Jh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),af(ma.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),af(da.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),sf(Fa,"credential",za,[Xh("verificationId"),Xh("verificationCode")]),af(Fa.prototype,{fb:{name:"verifyPhoneNumber",j:[rf(Xh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?tf(e.session,ca)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?tf(e.session,la)&&nf(e.multiFactorHint):e.session&&e.multiFactorUid?tf(e.session,la)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),af(Na.prototype,{w:{name:"toJSON",j:[Xh(null,!0)]}}),af(I.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(Za.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(Wa.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(ul.prototype,{toJSON:{name:"toJSON",j:[Xh(null,!0)]}}),af(al.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}]}}),af(pl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}},Xh("displayName",!0)]},bd:{name:"unenroll",j:[rf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:nf},Xh(),"multiFactorInfoIdentifier")]}}),af(Hh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sf(ki,"parseLink",Pi,[Xh("link")]),sf(Ph,"assertion",(function(e){return new fl(e)}),[ef("phone")]),function(){if("undefined"===typeof t.a||!t.a.INTERNAL||!t.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:lh,AuthCredential:ha,Error:I};sf(e,"EmailAuthProvider",Da,[]),sf(e,"FacebookAuthProvider",xa,[]),sf(e,"GithubAuthProvider",Ea,[]),sf(e,"GoogleAuthProvider",Sa,[]),sf(e,"TwitterAuthProvider",Ca,[]),sf(e,"OAuthProvider",wa,[Xh("providerId")]),sf(e,"SAMLAuthProvider",_a,[Xh("providerId")]),sf(e,"PhoneAuthProvider",Fa,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof lh)}}]),sf(e,"RecaptchaVerifier",Hh,[rf(Xh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t.a.app.App)}}]),sf(e,"ActionCodeURL",ki,[]),sf(e,"PhoneMultiFactorGenerator",Ph,[]),t.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new lh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:x((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:x(e.nc,e),addAuthTokenListener:x(e.cc,e),removeAuthTokenListener:x(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.a.registerVersion("@firebase/auth","0.16.4"),t.a.INTERNAL.extendNamespace({User:El})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(32))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){var r=n(95),i=n(55);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){"use strict";n.r(t),n.d(t,"MemoryRouter",(function(){return G})),n.d(t,"Prompt",(function(){return H})),n.d(t,"Redirect",(function(){return Y})),n.d(t,"Route",(function(){return ee})),n.d(t,"Router",(function(){return q})),n.d(t,"StaticRouter",(function(){return oe})),n.d(t,"Switch",(function(){return se})),n.d(t,"generatePath",(function(){return X})),n.d(t,"matchPath",(function(){return J})),n.d(t,"useHistory",(function(){return le})),n.d(t,"useLocation",(function(){return he})),n.d(t,"useParams",(function(){return fe})),n.d(t,"useRouteMatch",(function(){return de})),n.d(t,"withRouter",(function(){return ue})),n.d(t,"BrowserRouter",(function(){return pe})),n.d(t,"HashRouter",(function(){return ve})),n.d(t,"Link",(function(){return we})),n.d(t,"NavLink",(function(){return Ee}));var r=n(15),i=n(2),a=n.n(i),o=(n(8),n(3));function s(e){return"/"===e.charAt(0)}function u(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var c=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&s(e),o=t&&s(t),c=a||o;if(e&&s(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var h=0,f=i.length;f>=0;f--){var d=i[f];"."===d?u(i,f):".."===d?(u(i,f),h++):h&&(u(i,f),h--)}if(!c)for(;h--;h)i.unshift("..");!c||""===i[0]||i[0]&&s(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function l(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var h=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=l(t),i=l(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},f="Invariant failed";var d=function(e,t){if(!e)throw new Error(f)};function p(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function m(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=Object(o.a)({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=c(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function _(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var w=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var k="popstate",E="hashchange";function T(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),w||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,s=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?x:u,l=i.keyLength,h=void 0===l?6:l,f=e.basename?y(p(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&(a=m(a,f)),b(a,r,n)}function S(){return Math.random().toString(36).substr(2,h)}var I=_();function C(e){Object(o.a)(B,e),B.length=t.length,I.notifyListeners(B.location,B.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(v(e.state))}function O(){D(v(T()))}var P=!1;function D(e){if(P)P=!1,C();else{I.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=B.location,n=M.indexOf(t.key);-1===n&&(n=0);var r=M.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,L(i))}(e)}))}}var R=v(T()),M=[R.key];function N(e){return f+g(e)}function L(e){t.go(e)}var j=0;function F(e){1===(j+=e)&&1===e?(window.addEventListener(k,A),r&&window.addEventListener(E,O)):0===j&&(window.removeEventListener(k,A),r&&window.removeEventListener(E,O))}var z=!1;var B={length:t.length,action:"POP",location:R,createHref:N,push:function(e,r){var i="PUSH",a=b(e,r,S(),B.location);I.confirmTransitionTo(a,i,c,(function(e){if(e){var r=N(a),o=a.key,u=a.state;if(n)if(t.pushState({key:o,state:u},null,r),s)window.location.href=r;else{var c=M.indexOf(B.location.key),l=M.slice(0,c+1);l.push(a.key),M=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=b(e,r,S(),B.location);I.confirmTransitionTo(a,i,c,(function(e){if(e){var r=N(a),o=a.key,u=a.state;if(n)if(t.replaceState({key:o,state:u},null,r),s)window.location.replace(r);else{var c=M.indexOf(B.location.key);-1!==c&&(M[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=I.setPrompt(e);return z||(F(1),z=!0),function(){return z&&(z=!1,F(-1)),t()}},listen:function(e){var t=I.appendListener(e);return F(1),function(){F(-1),t()}}};return B}var I="hashchange",C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:p},slash:{encodePath:p,decodePath:p}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(A(window.location.href)+"#"+e)}function D(e){void 0===e&&(e={}),w||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?x:r,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?y(p(e.basename)):"",c=C[s],l=c.encodePath,h=c.decodePath;function f(){var e=h(O());return u&&(e=m(e,u)),b(e)}var v=_();function k(e){Object(o.a)(B,e),B.length=t.length,v.notifyListeners(B.location,B.action)}var E=!1,T=null;function S(){var e,t,n=O(),r=l(n);if(n!==r)P(r);else{var a=f(),o=B.location;if(!E&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(T===g(a))return;T=null,function(e){if(E)E=!1,k();else{var t="POP";v.confirmTransitionTo(e,t,i,(function(n){n?k({action:t,location:e}):function(e){var t=B.location,n=N.lastIndexOf(g(t));-1===n&&(n=0);var r=N.lastIndexOf(g(e));-1===r&&(r=0);var i=n-r;i&&(E=!0,L(i))}(e)}))}}(a)}}var D=O(),R=l(D);D!==R&&P(R);var M=f(),N=[g(M)];function L(e){t.go(e)}var j=0;function F(e){1===(j+=e)&&1===e?window.addEventListener(I,S):0===j&&window.removeEventListener(I,S)}var z=!1;var B={length:t.length,action:"POP",location:M,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=A(window.location.href)),n+"#"+l(u+g(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,B.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);if(O()!==i){T=t,function(e){window.location.hash=e}(i);var a=N.lastIndexOf(g(B.location)),o=N.slice(0,a+1);o.push(t),N=o,k({action:n,location:r})}else k()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,B.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);O()!==i&&(T=t,P(i));var a=N.indexOf(g(B.location));-1!==a&&(N[a]=t),k({action:n,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=v.setPrompt(e);return z||(F(1),z=!0),function(){return z&&(z=!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return B}function R(e,t,n){return Math.min(Math.max(e,t),n)}function M(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,s=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=_();function h(e){Object(o.a)(y,e),y.length=y.entries.length,l.notifyListeners(y.location,y.action)}function f(){return Math.random().toString(36).substr(2,c)}var d=R(s,0,i.length-1),p=i.map((function(e){return b(e,void 0,"string"===typeof e?f():e.key||f())})),v=g;function m(e){var t=R(y.index+e,0,y.entries.length-1),r=y.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?h({action:"POP",location:r,index:t}):h()}))}var y={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=b(e,t,f(),y.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),h({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=b(e,t,f(),y.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(y.entries[y.index]=i,h({action:r,location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return y}var N=n(48),L=n(49),j=n.n(L),F=(n(50),n(6)),z=n(63),B=n.n(z),U=function(e){var t=Object(N.a)();return t.displayName=e,t}("Router-History"),V=function(e){var t=Object(N.a)();return t.displayName=e,t}("Router"),q=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.a.createElement(V.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(U.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);var G=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=M(t.props),t}return Object(r.a)(t,e),t.prototype.render=function(){return a.a.createElement(q,{history:this.history,children:this.props.children})},t}(a.a.Component);var K=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(a.a.Component);function H(e){var t=e.message,n=e.when,r=void 0===n||n;return a.a.createElement(V.Consumer,null,(function(e){if(e||d(!1),!r||e.staticContext)return null;var n=e.history.block;return a.a.createElement(K,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var W={},Z=0;function X(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(W[e])return W[e];var t=j.a.compile(e);return Z<1e4&&(W[e]=t,Z++),t}(e)(t,{pretty:!0})}function Y(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return a.a.createElement(V.Consumer,null,(function(e){e||d(!1);var r=e.history,s=e.staticContext,u=i?r.push:r.replace,c=b(t?"string"===typeof n?X(n,t.params):Object(o.a)({},n,{pathname:X(n.pathname,t.params)}):n);return s?(u(c),null):a.a.createElement(K,{onMount:function(){u(c)},onUpdate:function(e,t){var n,r,i=b(t.to);n=i,r=Object(o.a)({},c,{key:i.key}),n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&h(n.state,r.state)||u(c)},to:n})}))}var Q={},$=0;function J(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Q[n]||(Q[n]={});if(r[e])return r[e];var i=[],a={regexp:j()(e,i,t),keys:i};return $<1e4&&(r[e]=a,$++),a}(n,{end:a,strict:s,sensitive:c}),i=r.regexp,o=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],h=u.slice(1),f=e===l;return a&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var ee=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(V.Consumer,null,(function(t){t||d(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?J(n.pathname,e.props):t.match,i=Object(o.a)({},t,{location:n,match:r}),s=e.props,u=s.children,c=s.component,l=s.render;return Array.isArray(u)&&0===u.length&&(u=null),a.a.createElement(V.Provider,{value:i},i.match?u?"function"===typeof u?u(i):u:c?a.a.createElement(c,i):l?l(i):null:"function"===typeof u?u(i):null)}))},t}(a.a.Component);function te(e){return"/"===e.charAt(0)?e:"/"+e}function ne(e,t){if(!e)return t;var n=te(e);return 0!==t.pathname.indexOf(n)?t:Object(o.a)({},t,{pathname:t.pathname.substr(n.length)})}function re(e){return"string"===typeof e?e:g(e)}function ie(e){return function(){d(!1)}}function ae(){}var oe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return ae},t.handleBlock=function(){return ae},t}Object(r.a)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,a=n.context,s=void 0===a?{}:a;s.action=t,s.location=function(e,t){return e?Object(o.a)({},t,{pathname:te(e)+t.pathname}):t}(i,b(e)),s.url=re(s.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,i=void 0===r?{}:r,s=e.location,u=void 0===s?"/":s,c=Object(F.a)(e,["basename","context","location"]),l={createHref:function(e){return te(n+re(e))},action:"POP",location:ne(n,b(u)),push:this.handlePush,replace:this.handleReplace,go:ie(),goBack:ie(),goForward:ie(),listen:this.handleListen,block:this.handleBlock};return a.a.createElement(q,Object(o.a)({},c,{history:l,staticContext:i}))},t}(a.a.Component);var se=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(V.Consumer,null,(function(t){t||d(!1);var n,r,i=e.props.location||t.location;return a.a.Children.forEach(e.props.children,(function(e){if(null==r&&a.a.isValidElement(e)){n=e;var s=e.props.path||e.props.from;r=s?J(i.pathname,Object(o.a)({},e.props,{path:s})):t.match}})),r?a.a.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(a.a.Component);function ue(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=Object(F.a)(t,["wrappedComponentRef"]);return a.a.createElement(V.Consumer,null,(function(t){return t||d(!1),a.a.createElement(e,Object(o.a)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,B()(n,e)}var ce=a.a.useContext;function le(){return ce(U)}function he(){return ce(V).location}function fe(){var e=ce(V).match;return e?e.params:{}}function de(e){var t=he(),n=ce(V).match;return e?J(t.pathname,e):n}var pe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=S(t.props),t}return Object(r.a)(t,e),t.prototype.render=function(){return a.a.createElement(q,{history:this.history,children:this.props.children})},t}(a.a.Component);var ve=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=D(t.props),t}return Object(r.a)(t,e),t.prototype.render=function(){return a.a.createElement(q,{history:this.history,children:this.props.children})},t}(a.a.Component);var me=function(e,t){return"function"===typeof e?e(t):e},ye=function(e,t){return"string"===typeof e?b(e,null,null,t):e},ge=function(e){return e},be=a.a.forwardRef;"undefined"===typeof be&&(be=ge);var _e=be((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,s=Object(F.a)(e,["innerRef","navigate","onClick"]),u=s.target,c=Object(o.a)({},s,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return c.ref=ge!==be&&t||n,a.a.createElement("a",c)}));var we=be((function(e,t){var n=e.component,r=void 0===n?_e:n,i=e.replace,s=e.to,u=e.innerRef,c=Object(F.a)(e,["component","replace","to","innerRef"]);return a.a.createElement(V.Consumer,null,(function(e){e||d(!1);var n=e.history,l=ye(me(s,e.location),e.location),h=l?n.createHref(l):"",f=Object(o.a)({},c,{href:h,navigate:function(){var t=me(s,e.location);(i?n.replace:n.push)(t)}});return ge!==be?f.ref=t||u:f.innerRef=u,a.a.createElement(r,f)}))})),xe=function(e){return e},ke=a.a.forwardRef;"undefined"===typeof ke&&(ke=xe);var Ee=ke((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,s=void 0===i?"active":i,u=e.activeStyle,c=e.className,l=e.exact,h=e.isActive,f=e.location,p=e.sensitive,v=e.strict,m=e.style,y=e.to,g=e.innerRef,b=Object(F.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(V.Consumer,null,(function(e){e||d(!1);var n=f||e.location,i=ye(me(y,n),n),_=i.pathname,w=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=w?J(n.pathname,{path:w,exact:l,sensitive:p,strict:v}):null,k=!!(h?h(x,n):x),E=k?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,s):c,T=k?Object(o.a)({},m,{},u):m,S=Object(o.a)({"aria-current":k&&r||null,className:E,style:T,to:i},b);return xe!==ke?S.ref=t||g:S.innerRef=g,a.a.createElement(we,S)}))}))},function(e,t,n){"use strict";var r=n(50),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=f(n,y);try{c(t,y,g)}catch(b){}}}}return t}},function(e,t,n){var r;!function(){var i=window.CustomEvent;function a(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function o(e){e&&e.blur&&e!==document.body&&e.blur()}function s(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function u(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function c(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===e){var a="DOMNodeRemoved";n|=i.type.substr(0,a.length)===a,window.clearTimeout(t),t=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(t){e.addEventListener(t,i)}))}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}i&&"object"!==typeof i||((i=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),l.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}o(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!l.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,l.needsCentering(this.dialog_)?(l.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var t=new i("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(t)}};var l={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(l){}if(r)for(var i=0;i<r.length;++i){var a=r[i],o=null;try{o=document.querySelectorAll(a.selectorText)}catch(l){}if(o&&s(o,e)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!l.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(e)},registerDialog:function(e){e.showModal||l.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(t){var n=[];t.forEach((function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))})),n.length&&e(n)})))}};if(l.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},l.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},l.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},l.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=a(e);){for(var t,n=0;t=this.pendingDialogStack[n];++n)if(t.dialog===e)return 0===n;e=e.parentElement}return!1},l.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),o(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},l.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var t=new i("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(t)&&n.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},l.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach((function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()}))},l.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},l.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},l.dm=new l.DialogManager,l.formSubmitter=null,l.useValue=null,void 0===window.HTMLDialogElement){var h=document.createElement("form");if(h.setAttribute("method","dialog"),"dialog"!==h.method){var f=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(f){var d=f.get;f.get=function(){return u(this)?"dialog":d.call(this)};var p=f.set;f.set=function(e){return"string"===typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):p.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",f)}}document.addEventListener("click",(function(e){if(l.formSubmitter=null,l.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&u(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;l.useValue=e.offsetX+","+e.offsetY}a(t)&&(l.formSubmitter=t)}}}),!1);var v=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!u(this))return v.call(this);var e=a(this);e&&e.close()},document.addEventListener("submit",(function(e){var t=e.target;if(u(t)){e.preventDefault();var n=a(t);if(n){var r=l.formSubmitter;r&&r.form===t?n.close(l.useValue||r.value):n.close(),l.formSubmitter=null}}}),!0)}l.forceRegisterDialog=l.forceRegisterDialog,l.registerDialog=l.registerDialog,"amd"in n(81)?void 0===(r=function(){return l}.call(t,n,t,e))||(e.exports=r):"object"===typeof e.exports?e.exports=l:window.dialogPolyfill=l}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2);function i(){var e=Object(r.useRef)(!0),t=Object(r.useRef)((function(){return e.current}));return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),t.current}},function(e,t,n){"use strict";function r(){return new Worker(n.p+"static/js/mapbox-gl-csp-worker.7bb02f7b.worker.js")}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";var r=n(2),i=n(45),a=n(70);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,k=60106,E=60107,T=60108,S=60114,I=60109,C=60110,A=60112,O=60113,P=60120,D=60115,R=60116,M=60121,N=60128,L=60129,j=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;x=z("react.element"),k=z("react.portal"),E=z("react.fragment"),T=z("react.strict_mode"),S=z("react.profiler"),I=z("react.provider"),C=z("react.context"),A=z("react.forward_ref"),O=z("react.suspense"),P=z("react.suspense_list"),D=z("react.memo"),R=z("react.lazy"),M=z("react.block"),z("react.scope"),N=z("react.opaque.id"),L=z("react.debug_trace_mode"),j=z("react.offscreen"),F=z("react.legacy_hidden")}var B,U="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=U&&e[U]||e["@@iterator"])?e:null}function q(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var G=!1;function K(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?q(e):""}function H(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case k:return"Portal";case S:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return W(e.type);case M:return W(e._render);case R:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ce(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var ke=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Ae=null;function Oe(e){if(e=ei(e)){if("function"!==typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=ni(t),Ie(e.stateNode,e.type,t))}}function Pe(e){Ce?Ae?Ae.push(e):Ae=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ae;if(Ae=Ce=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function Re(e,t){return e(t)}function Me(e,t,n,r,i){return e(t,n,r,i)}function Ne(){}var Le=Re,je=!1,Fe=!1;function ze(){null===Ce&&null===Ae||(Ne(),De())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(h)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(me){Ue=!1}function qe(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ge=!1,Ke=null,He=!1,We=null,Ze={onError:function(e){Ge=!0,Ke=e}};function Xe(e,t,n,r,i,a,o,s,u){Ge=!1,Ke=null,qe.apply(Ze,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(o(188))}function Je(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ht=new Map,ft=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ei(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=Jr(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ei(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){gt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ei(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(bt),ht.forEach(bt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function xt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ht.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function kt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},Tt={},St={};function It(e){if(Tt[e])return Tt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Tt[e]=n[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=It("animationend"),At=It("animationiteration"),Ot=It("animationstart"),Pt=It("transitionend"),Dt=new Map,Rt=new Map,Mt=["abort","abort",Ct,"animationEnd",At,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Nt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Rt.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function jt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=jt(u),i=Lt):0!==(s&=a)&&(r=jt(s),i=Lt)}else 0!==(a=n&~o)?(r=jt(a),i=Lt):0!==s&&(r=jt(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Gt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(jt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gt(t)),r|=e[n],t&=~i;return r}function zt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Bt(10,t):e;case 10:return 0===(e=Ut(192&~t))?Bt(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gt(t)]=n}var Gt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Ht|0)|0},Kt=Math.log,Ht=Math.LN2;var Wt=a.unstable_UserBlockingPriority,Zt=a.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){je||Ne();var i=$t,a=je;je=!0;try{Me(i,e,t,n,r)}finally{(je=a)||ze()}}function Qt(e,t,n,r){Zt(Wt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Xt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Jt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ht.set(a,mt(ht.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Dr(e,t,r,null,n)}}}function Jt(e,t,n,r){var i=Se(r);if(null!==(i=Jr(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Qe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,hn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,ln=e.screenY-hn.screenY):ln=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),_n=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=un(i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),xn=un(i({},fn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function In(){return Sn}var Cn=un(i({},pn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),An=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=un(i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Nn=null;h&&"documentMode"in document&&(Nn=document.documentMode);var Ln=h&&"TextEvent"in window&&!Nn,jn=h&&(!Mn||Nn&&8<Nn&&11>=Nn),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Pe(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Zn(e){Sr(e,0)}function Xn(e){if(Q(ti(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(h){var $n;if(h){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];if(Kn(t,Wn,e,Se(e)),e=Zn,je)e(t);else{je=!0;try{Re(e,t)}finally{je=!1,ze()}}}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=h&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==$(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&cr(gr,r)||(gr=r,0<(r=Mr(yr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}Nt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Nt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Nt(Mt,2);for(var wr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xr=0;xr<wr.length;xr++)Rt.set(wr[xr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Er=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Xe.apply(this,arguments),Ge){if(!Ge)throw Error(o(198));var l=Ke;Ge=!1,Ke=null,He||(He=!0,We=l)}}(r,t,void 0,e),e.currentTarget=null}function Sr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Tr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Tr(i,s,c),a=u}}}if(He)throw e=We,He=!1,We=null,e}function Ir(e,t){var n=ri(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Cr="_reactListening"+Math.random().toString(36).slice(2);function Ar(e){e[Cr]||(e[Cr]=!0,s.forEach((function(t){Er.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Er.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ri(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Pr(a,e,i,t),o.add(s))}function Pr(e,t,n,r){var i=Rt.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Qt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=Jr(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{Le(e,t,n)}finally{Fe=!1,ze()}}((function(){var r=a,i=Se(n),o=[];e:{var s=Dt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=On;break;case Ct:case At:case Ot:u=_n;break;case Pt:u=Pn;break;case"scroll":u=vn;break;case"wheel":u=Dn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Be(p,f))&&l.push(Rr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Jr(c)&&!c[Qr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Jr(c):null)&&(c!==(h=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:ti(u),d=null==c?s:ti(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,Jr(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Nr(d))p++;for(d=0,v=f;v;v=Nr(v))d++;for(;0<p-d;)l=Nr(l),p--;for(;0<d-p;)f=Nr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Nr(l),f=Nr(f)}l=null}else l=null;null!==u&&Lr(o,s,u,l,!1),null!==c&&null!==h&&Lr(o,h,c,l,!0)}if("select"===(u=(s=r?ti(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Yn;else if(Gn(s))if(Qn)m=or;else{m=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ti(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Vn=!0)),0<(y=Mr(r,b)).length&&(b=new xn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Un(n))&&(b.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=rn(),nn=tn=en=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Sr(o,t)}))}function Rr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(Rr(e,a,i)),null!=(a=Be(e,t))&&r.push(Rr(e,a,i))),e=e.return}return r}function Nr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Lr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Be(n,a))&&o.unshift(Rr(n,u,s)):i||null!=(u=Be(n,a))&&o.push(Rr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Fr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ur(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Vr="function"===typeof setTimeout?setTimeout:void 0,qr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Wr=0;var Zr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Zr,Yr="__reactProps$"+Zr,Qr="__reactContainer$"+Zr,$r="__reactEvents$"+Zr;function Jr(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hr(e);null!==e;){if(n=e[Xr])return n;e=Hr(e)}return t}n=(e=n).parentNode}return null}function ei(e){return!(e=e[Xr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ti(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ni(e){return e[Yr]||null}function ri(e){var t=e[$r];return void 0===t&&(t=e[$r]=new Set),t}var ii=[],ai=-1;function oi(e){return{current:e}}function si(e){0>ai||(e.current=ii[ai],ii[ai]=null,ai--)}function ui(e,t){ai++,ii[ai]=e.current,e.current=t}var ci={},li=oi(ci),hi=oi(!1),fi=ci;function di(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){si(hi),si(li)}function mi(e,t,n){if(li.current!==ci)throw Error(o(168));ui(li,t),ui(hi,n)}function yi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,W(t)||"Unknown",a));return i({},n,r)}function gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,fi=li.current,ui(li,e),ui(hi,hi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=yi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,si(hi),si(li),ui(li,e)):si(hi),ui(hi,n)}var _i=null,wi=null,xi=a.unstable_runWithPriority,ki=a.unstable_scheduleCallback,Ei=a.unstable_cancelCallback,Ti=a.unstable_shouldYield,Si=a.unstable_requestPaint,Ii=a.unstable_now,Ci=a.unstable_getCurrentPriorityLevel,Ai=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Pi=a.unstable_NormalPriority,Di=a.unstable_LowPriority,Ri=a.unstable_IdlePriority,Mi={},Ni=void 0!==Si?Si:function(){},Li=null,ji=null,Fi=!1,zi=Ii(),Bi=1e4>zi?Ii:function(){return Ii()-zi};function Ui(){switch(Ci()){case Ai:return 99;case Oi:return 98;case Pi:return 97;case Di:return 96;case Ri:return 95;default:throw Error(o(332))}}function Vi(e){switch(e){case 99:return Ai;case 98:return Oi;case 97:return Pi;case 96:return Di;case 95:return Ri;default:throw Error(o(332))}}function qi(e,t){return e=Vi(e),xi(e,t)}function Gi(e,t,n){return e=Vi(e),ki(e,t,n)}function Ki(){if(null!==ji){var e=ji;ji=null,Ei(e)}Hi()}function Hi(){if(!Fi&&null!==Li){Fi=!0;var e=0;try{var t=Li;qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(n){throw null!==Li&&(Li=Li.slice(e+1)),ki(Ai,Ki),n}finally{Fi=!1}}}var Wi=w.ReactCurrentBatchConfig;function Zi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=oi(null),Yi=null,Qi=null,$i=null;function Ji(){$i=Qi=Yi=null}function ea(e){var t=Xi.current;si(Xi),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function na(e,t){Yi=e,$i=Qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ra(e,t){if($i!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($i=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qi){if(null===Yi)throw Error(o(308));Qi=t,Yi.dependencies={lanes:0,firstContext:t,responders:null}}else Qi=Qi.next=t;return e._currentValue}var ia=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function sa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ua(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ca(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function la(e,t,n,r){var a=e.updateQueue;ia=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==o){for(f=a.baseState,s=0,h=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break e;f=i({},f,u);break e;case 2:ia=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===h&&(c=f),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=h,Fs|=s,e.lanes=s,e.memoizedState=f}}function ha(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var fa=(new r.Component).refs;function da(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cu(),i=lu(e),a=sa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ua(e,a),hu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cu(),i=lu(e),a=sa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),ua(e,a),hu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cu(),r=lu(e),i=sa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),ua(e,i),hu(e,r,n)}};function va(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,a))}function ma(e,t,n){var r=!1,i=ci,a=t.contextType;return"object"===typeof a&&null!==a?a=ra(a):(i=pi(t)?fi:li.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?di(e,i):ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ya(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fa,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ra(a):(a=pi(t)?fi:li.current,i.context=di(e,a)),la(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(da(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&pa.enqueueReplaceState(i,i.state,null),la(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===fa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function wa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function xa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=qu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Wu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ku(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Wu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case k:return(t=Zu(t,e.mode,n)).return=e,t}if(ba(t)||V(t))return(t=Ku(t,e.mode,n,null)).return=e,t;wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===E?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case k:return n.key===i?l(e,t,n,r):null}if(ba(n)||V(n))return null!==i?null:h(e,t,n,r,null);wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===E?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||V(r))return h(t,e=e.get(n)||null,r,i,null);wa(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,h=m}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&h.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=V(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),s=a(b,s,m),null===h?l=b:h.sibling=b,h=b,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(i,g.value,c))&&(s=a(g,s,m),null===h?l=g:h.sibling=g,h=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}break;default:if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Ku(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=_a(e,r,a),u.return=e,e=u)}return s(e);case k:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Zu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Wu(a,e.mode,u)).return=e,e=r),s(e);if(ba(a))return v(e,r,a,u);if(V(a))return m(e,r,a,u);if(l&&wa(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var ka=xa(!0),Ea=xa(!1),Ta={},Sa=oi(Ta),Ia=oi(Ta),Ca=oi(Ta);function Aa(e){if(e===Ta)throw Error(o(174));return e}function Oa(e,t){switch(ui(Ca,t),ui(Ia,e),ui(Sa,Ta),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}si(Sa),ui(Sa,t)}function Pa(){si(Sa),si(Ia),si(Ca)}function Da(e){Aa(Ca.current);var t=Aa(Sa.current),n=pe(t,e.type);t!==n&&(ui(Ia,e),ui(Sa,n))}function Ra(e){Ia.current===e&&(si(Sa),si(Ia))}var Ma=oi(0);function Na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var La=null,ja=null,Fa=!1;function za(e,t){var n=Uu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ua(e){if(Fa){var t=ja;if(t){var n=t;if(!Ba(e,t)){if(!(t=Kr(n.nextSibling))||!Ba(e,t))return e.flags=-1025&e.flags|2,Fa=!1,void(La=e);za(La,n)}La=e,ja=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Fa=!1,La=e}}function Va(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;La=e}function qa(e){if(e!==La)return!1;if(!Fa)return Va(e),Fa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ur(t,e.memoizedProps))for(t=ja;t;)za(e,t),t=Kr(t.nextSibling);if(Va(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=La?Kr(e.stateNode.nextSibling):null;return!0}function Ga(){ja=La=null,Fa=!1}var Ka=[];function Ha(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var Wa=w.ReactCurrentDispatcher,Za=w.ReactCurrentBatchConfig,Xa=0,Ya=null,Qa=null,$a=null,Ja=!1,eo=!1;function to(){throw Error(o(321))}function no(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ro(e,t,n,r,i,a){if(Xa=a,Ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wa.current=null===e||null===e.memoizedState?Oo:Po,e=n(r,i),eo){a=0;do{if(eo=!1,!(25>a))throw Error(o(301));a+=1,$a=Qa=null,t.updateQueue=null,Wa.current=Do,e=n(r,i)}while(eo)}if(Wa.current=Ao,t=null!==Qa&&null!==Qa.next,Xa=0,$a=Qa=Ya=null,Ja=!1,t)throw Error(o(300));return e}function io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$a?Ya.memoizedState=$a=e:$a=$a.next=e,$a}function ao(){if(null===Qa){var e=Ya.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===$a?Ya.memoizedState:$a.next;if(null!==t)$a=t,Qa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===$a?Ya.memoizedState=$a=e:$a=$a.next=e}return $a}function oo(e,t){return"function"===typeof t?t(e):t}function so(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,a=r):u=u.next=h,Ya.lanes|=l,Fs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,sr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function co(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Ka.push(t))),e)return n(t._source);throw Ka.push(t),Error(o(350))}function lo(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Wa.current,c=u.useState((function(){return co(i,t,n)})),l=c[1],h=c[0];c=$a;var f=e.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var m=Ya;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!sr(s,e)){e=n(t._source),sr(h,e)||(l(e),e=lu(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Gt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=lu(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),sr(p,n)&&sr(v,t)&&sr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:h}).dispatch=l=Co.bind(null,Ya,e),c.queue=e,c.baseQueue=null,h=co(i,t,n),c.memoizedState=c.baseState=h),h}function ho(e,t,n){return lo(ao(),e,t,n)}function fo(e){var t=io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:e}).dispatch=Co.bind(null,Ya,e),[t.memoizedState,e]}function po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ya.updateQueue)?(t={lastEffect:null},Ya.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function vo(e){return e={current:e},io().memoizedState=e}function mo(){return ao().memoizedState}function yo(e,t,n,r){var i=io();Ya.flags|=e,i.memoizedState=po(1|t,n,void 0,void 0===r?null:r)}function go(e,t,n,r){var i=ao();r=void 0===r?null:r;var a=void 0;if(null!==Qa){var o=Qa.memoizedState;if(a=o.destroy,null!==r&&no(r,o.deps))return void po(t,n,a,r)}Ya.flags|=e,i.memoizedState=po(1|t,n,a,r)}function bo(e,t){return yo(516,4,e,t)}function _o(e,t){return go(516,4,e,t)}function wo(e,t){return go(4,2,e,t)}function xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,go(4,2,xo.bind(null,t,e),n)}function Eo(){}function To(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function So(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&no(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Io(e,t){var n=Ui();qi(98>n?98:n,(function(){e(!0)})),qi(97<n?97:n,(function(){var n=Za.transition;Za.transition=1;try{e(!1),t()}finally{Za.transition=n}}))}function Co(e,t,n){var r=cu(),i=lu(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Ya||null!==o&&o===Ya)eo=Ja=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,sr(u,s))return}catch(c){}hu(e,i,r)}}var Ao={readContext:ra,useCallback:to,useContext:to,useEffect:to,useImperativeHandle:to,useLayoutEffect:to,useMemo:to,useReducer:to,useRef:to,useState:to,useDebugValue:to,useDeferredValue:to,useTransition:to,useMutableSource:to,useOpaqueIdentifier:to,unstable_isNewReconciler:!1},Oo={readContext:ra,useCallback:function(e,t){return io().memoizedState=[e,void 0===t?null:t],e},useContext:ra,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,2,xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4,2,e,t)},useMemo:function(e,t){var n=io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Co.bind(null,Ya,e),[r.memoizedState,e]},useRef:vo,useState:fo,useDebugValue:Eo,useDeferredValue:function(e){var t=fo(e),n=t[0],r=t[1];return bo((function(){var t=Za.transition;Za.transition=1;try{r(e)}finally{Za.transition=t}}),[e]),n},useTransition:function(){var e=fo(!1),t=e[0];return vo(e=Io.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=io();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},lo(r,e,t,n)},useOpaqueIdentifier:function(){if(Fa){var e=!1,t=function(e){return{$$typeof:N,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Wr++).toString(36))),Error(o(355))})),n=fo(t)[1];return 0===(2&Ya.mode)&&(Ya.flags|=516,po(5,(function(){n("r:"+(Wr++).toString(36))}),void 0,null)),t}return fo(t="r:"+(Wr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:ra,useCallback:To,useContext:ra,useEffect:_o,useImperativeHandle:ko,useLayoutEffect:wo,useMemo:So,useReducer:so,useRef:mo,useState:function(){return so(oo)},useDebugValue:Eo,useDeferredValue:function(e){var t=so(oo),n=t[0],r=t[1];return _o((function(){var t=Za.transition;Za.transition=1;try{r(e)}finally{Za.transition=t}}),[e]),n},useTransition:function(){var e=so(oo)[0];return[mo().current,e]},useMutableSource:ho,useOpaqueIdentifier:function(){return so(oo)[0]},unstable_isNewReconciler:!1},Do={readContext:ra,useCallback:To,useContext:ra,useEffect:_o,useImperativeHandle:ko,useLayoutEffect:wo,useMemo:So,useReducer:uo,useRef:mo,useState:function(){return uo(oo)},useDebugValue:Eo,useDeferredValue:function(e){var t=uo(oo),n=t[0],r=t[1];return _o((function(){var t=Za.transition;Za.transition=1;try{r(e)}finally{Za.transition=t}}),[e]),n},useTransition:function(){var e=uo(oo)[0];return[mo().current,e]},useMutableSource:ho,useOpaqueIdentifier:function(){return uo(oo)[0]},unstable_isNewReconciler:!1},Ro=w.ReactCurrentOwner,Mo=!1;function No(e,t,n,r){t.child=null===e?Ea(t,null,n,r):ka(t,e.child,n,r)}function Lo(e,t,n,r,i){n=n.render;var a=t.ref;return na(t,i),r=ro(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,No(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Vu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Fo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)?ns(e,t,a):(t.flags|=1,(e=qu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Fo(e,t,n,r,i,a){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,ns(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Uo(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bu(t,r);return No(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Uo(e,t,n,r,i){var a=pi(n)?fi:li.current;return a=di(t,a),na(t,i),n=ro(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,No(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function Vo(e,t,n,r,i){if(pi(n)){var a=!0;gi(t)}else a=!1;if(na(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ma(t,n,r),ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ra(c):c=di(t,c=pi(n)?fi:li.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ya(t,o,r,c),ia=!1;var f=t.memoizedState;o.state=f,la(t,r,o,i),u=t.memoizedState,s!==r||f!==u||hi.current||ia?("function"===typeof l&&(da(t,n,l,r),u=t.memoizedState),(s=ia||va(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,oa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Zi(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=ra(u):u=di(t,u=pi(n)?fi:li.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&ya(t,o,r,u),ia=!1,f=t.memoizedState,o.state=f,la(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||hi.current||ia?("function"===typeof d&&(da(t,n,d,r),p=t.memoizedState),(c=ia||va(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return qo(e,t,n,r,a,i)}function qo(e,t,n,r,i,a){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),ns(e,t,a);r=t.stateNode,Ro.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ka(t,e.child,null,a),t.child=ka(t,null,s,a)):No(e,t,s,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(0,t.context,!1),Oa(e,t.containerInfo)}var Ko,Ho,Wo,Zo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),ui(Ma,1&a),null===e?(void 0!==i.fallback&&Ua(t),e=i.children,a=i.fallback,o?(e=Yo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Zo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Yo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Zo,t.lanes=33554432,e):((n=Hu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=$o(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Zo,i):(n=Qo(e,t,i.children,n),t.memoizedState=null,n))}function Yo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Hu(t,i,0,null),n=Ku(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Qo(e,t,n,r){var i=e.child;return e=i.sibling,n=qu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function $o(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=qu(o,s),null!==e?r=qu(e,r):(r=Ku(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Jo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ta(e.return,t)}function es(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function ts(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(No(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,n);else if(19===e.tag)Jo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Na(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),es(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Na(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}es(t,!0,n,null,a,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=qu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Fa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pi(t.type)&&vi(),null;case 3:return Pa(),si(hi),si(li),Ha(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(qa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ra(t);var a=Aa(Ca.current);if(n=t.type,null!==e&&null!=t.stateNode)Ho(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Aa(Sa.current),qa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xr]=t,r[Yr]=s,n){case"dialog":Ir("cancel",r),Ir("close",r);break;case"iframe":case"object":case"embed":Ir("load",r);break;case"video":case"audio":for(e=0;e<kr.length;e++)Ir(kr[e],r);break;case"source":Ir("error",r);break;case"img":case"image":case"link":Ir("error",r),Ir("load",r);break;case"details":Ir("toggle",r);break;case"input":ee(r,s),Ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ir("invalid",r);break;case"textarea":ue(r,s),Ir("invalid",r)}for(var c in Ee(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ir("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Yr]=r,Ko(e,t),t.stateNode=e,c=Te(n,r),n){case"dialog":Ir("cancel",e),Ir("close",e),a=r;break;case"iframe":case"object":case"embed":Ir("load",e),a=r;break;case"video":case"audio":for(a=0;a<kr.length;a++)Ir(kr[a],e);a=r;break;case"source":Ir("error",e),a=r;break;case"img":case"image":case"link":Ir("error",e),Ir("load",e),a=r;break;case"details":Ir("toggle",e),a=r;break;case"input":ee(e,r),a=J(e,r),Ir("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ir("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Ir("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?xe(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ye(e,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ir("scroll",e):null!=h&&_(e,s,h,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Wo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Aa(Ca.current),Aa(Sa.current),qa(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return si(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&qa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Ns&&(Ns=3):(0!==Ns&&3!==Ns||(Ns=4),null===Os||0===(134217727&Fs)&&0===(134217727&zs)||vu(Os,Ds))),(r||n)&&(t.flags|=4),null);case 4:return Pa(),null===e&&Ar(t.stateNode.containerInfo),null;case 10:return ea(t),null;case 17:return pi(t.type)&&vi(),null;case 19:if(si(Ma),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)rs(r,!1);else{if(0!==Ns||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Na(e))){for(t.flags|=64,rs(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>qs&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Na(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Fa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>qs&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ma.current,ui(Ma,s?1&t|2:1&t),n):null;case 23:case 24:return _u(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function as(e){switch(e.tag){case 1:pi(e.type)&&vi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pa(),si(hi),si(li),Ha(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ra(e),null;case 13:return si(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return si(Ma),null;case 4:return Pa(),null;case 10:return ea(e),null;case 23:case 24:return _u(),null;default:return null}}function os(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Aa(Sa.current);var o,s=null;switch(n){case"input":a=J(e,a),r=J(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(h in Ee(n,r),n=null,a)if(!r.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=a?a[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Ir("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===N?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Wo=function(e,t,n,r){n!==r&&(t.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,n){(n=sa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Zs=r),ss(0,t)},n}function ls(e,t,n){(n=sa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ss(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xs?Xs=new Set([this]):Xs.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){ju(e,n)}else t.current=null}function ds(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Zi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function ps(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Mu(n,e),Ru(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Zi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ha(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ha(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ms(e,t){if(wi&&"function"===typeof wi.onCommitFiberUnmount)try{wi.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Mu(t,n);else{r=t;try{i()}catch(a){ju(r,a)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){ju(t,a)}break;case 5:fs(t);break;case 4:xs(e,t)}}function ys(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(gs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_s(e,n,t):ws(e,n,t)}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function ws(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function xs(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ms(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ms(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Yr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Te(e,i),t=Te(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Vs=Bi(),vs(t.child,!0)),void Es(t);case 19:return void Es(t);case 17:return;case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(o(163))}function Es(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ts(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ss=Math.ceil,Is=w.ReactCurrentDispatcher,Cs=w.ReactCurrentOwner,As=0,Os=null,Ps=null,Ds=0,Rs=0,Ms=oi(0),Ns=0,Ls=null,js=0,Fs=0,zs=0,Bs=0,Us=null,Vs=0,qs=1/0;function Gs(){qs=Bi()+500}var Ks,Hs=null,Ws=!1,Zs=null,Xs=null,Ys=!1,Qs=null,$s=90,Js=[],eu=[],tu=null,nu=0,ru=null,iu=-1,au=0,ou=0,su=null,uu=!1;function cu(){return 0!==(48&As)?Bi():-1!==iu?iu:iu=Bi()}function lu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ui()?1:2;if(0===au&&(au=js),0!==Wi.transition){0!==ou&&(ou=null!==Us?Us.pendingLanes:0),e=au;var t=4186112&~ou;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ui(),0!==(4&As)&&98===e?e=Bt(12,au):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),au),e}function hu(e,t,n){if(50<nu)throw nu=0,ru=null,Error(o(185));if(null===(e=fu(e,t)))return null;qt(e,t,n),e===Os&&(zs|=t,4===Ns&&vu(e,Ds));var r=Ui();1===t?0!==(8&As)&&0===(48&As)?mu(e):(du(e,n),0===As&&(Gs(),Ki())):(0===(4&As)||98!==r&&99!==r||(null===tu?tu=new Set([e]):tu.add(e)),du(e,n)),Us=e}function fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function du(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Gt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,jt(c);var h=Lt;a[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ft(e,e===Os?Ds:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ei(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ei(n)}15===t?(n=mu.bind(null,e),null===Li?(Li=[n],ji=ki(Ai,Hi)):Li.push(n),n=Mi):14===t?n=Gi(99,mu.bind(null,e)):n=Gi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),pu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function pu(e){if(iu=-1,ou=au=0,0!==(48&As))throw Error(o(327));var t=e.callbackNode;if(Du()&&e.callbackNode!==t)return null;var n=Ft(e,e===Os?Ds:0);if(0===n)return null;var r=n,i=As;As|=16;var a=ku();for(Os===e&&Ds===r||(Gs(),wu(e,r));;)try{Su();break}catch(u){xu(e,u)}if(Ji(),Is.current=a,As=i,null!==Ps?r=0:(Os=null,Ds=0,r=Ns),0!==(js&zs))wu(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=zt(e))&&(r=Eu(e,n))),1===r)throw t=Ls,wu(e,0),vu(e,n),du(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:Au(e);break;case 3:if(vu(e,n),(62914560&n)===n&&10<(r=Vs+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){cu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Vr(Au.bind(null,e),r);break}Au(e);break;case 4:if(vu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Gt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ss(n/1960))-n)){e.timeoutHandle=Vr(Au.bind(null,e),n);break}Au(e);break;case 5:Au(e);break;default:throw Error(o(329))}}return du(e,Bi()),e.callbackNode===t?pu.bind(null,e):null}function vu(e,t){for(t&=~Bs,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gt(t),r=1<<n;e[n]=-1,t&=~r}}function mu(e){if(0!==(48&As))throw Error(o(327));if(Du(),e===Os&&0!==(e.expiredLanes&Ds)){var t=Ds,n=Eu(e,t);0!==(js&zs)&&(n=Eu(e,t=Ft(e,t)))}else n=Eu(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=zt(e))&&(n=Eu(e,t))),1===n)throw n=Ls,wu(e,0),vu(e,t),du(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),du(e,Bi()),null}function yu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Gs(),Ki())}}function gu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Gs(),Ki())}}function bu(e,t){ui(Ms,Rs),Rs|=t,js|=t}function _u(){Rs=Ms.current,si(Ms)}function wu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,qr(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:Pa(),si(hi),si(li),Ha();break;case 5:Ra(r);break;case 4:Pa();break;case 13:case 19:si(Ma);break;case 10:ea(r);break;case 23:case 24:_u()}n=n.return}Os=e,Ps=qu(e.current,null),Ds=Rs=js=t,Ns=0,Ls=null,Bs=zs=Fs=0}function xu(e,t){for(;;){var n=Ps;try{if(Ji(),Wa.current=Ao,Ja){for(var r=Ya.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Ja=!1}if(Xa=0,$a=Qa=Ya=null,eo=!1,Cs.current=null,null===n||null===n.return){Ns=1,Ls=t,Ps=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ds,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Ma.current),f=o;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var m=f.updateQueue;if(null===m){var y=new Set;y.add(c),f.updateQueue=y}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=sa(-1,1);g.tag=2,ua(s,g)}s.lanes|=1;break e}u=void 0,s=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new us,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var _=Fu.bind(null,a,c,s);c.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((W(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ns&&(Ns=2),u=os(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,ca(f,cs(0,a,t));break e;case 1:a=u;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xs||!Xs.has(x)))){f.flags|=4096,t&=-t,f.lanes|=t,ca(f,ls(f,a,t));break e}}f=f.return}while(null!==f)}Cu(n)}catch(k){t=k,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function ku(){var e=Is.current;return Is.current=Ao,null===e?Ao:e}function Eu(e,t){var n=As;As|=16;var r=ku();for(Os===e&&Ds===t||wu(e,t);;)try{Tu();break}catch(i){xu(e,i)}if(Ji(),As=n,Is.current=r,null!==Ps)throw Error(o(261));return Os=null,Ds=0,Ns}function Tu(){for(;null!==Ps;)Iu(Ps)}function Su(){for(;null!==Ps&&!Ti();)Iu(Ps)}function Iu(e){var t=Ks(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?Cu(e):Ps=t,Cs.current=null}function Cu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=is(n,t,Rs)))return void(Ps=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Rs)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=as(t)))return n.flags&=2047,void(Ps=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ns&&(Ns=5)}function Au(e){var t=Ui();return qi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Du()}while(null!==Qs);if(0!==(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Gt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==tu&&0===(24&r)&&tu.has(e)&&tu.delete(e),e===Os&&(Ps=Os=null,Ds=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,Cs.current=null,Fr=Xt,pr(s=dr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(S){u=null;break e}var h=0,f=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(f=h+a),m!==c||0!==l&&3!==m.nodeType||(d=h+l),3===m.nodeType&&(h+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(f=h),y===c&&++v===l&&(d=h),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},Xt=!1,su=null,uu=!1,Hs=r;do{try{Pu()}catch(S){if(null===Hs)throw Error(o(330));ju(Hs,S),Hs=Hs.nextEffect}}while(null!==Hs);su=null,Hs=r;do{try{for(s=e;null!==Hs;){var b=Hs.flags;if(16&b&&ge(Hs.stateNode,""),128&b){var _=Hs.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:bs(Hs),Hs.flags&=-3;break;case 6:bs(Hs),Hs.flags&=-3,ks(Hs.alternate,Hs);break;case 1024:Hs.flags&=-1025;break;case 1028:Hs.flags&=-1025,ks(Hs.alternate,Hs);break;case 4:ks(Hs.alternate,Hs);break;case 8:xs(s,u=Hs);var x=u.alternate;ys(u),null!==x&&ys(x)}Hs=Hs.nextEffect}}catch(S){if(null===Hs)throw Error(o(330));ju(Hs,S),Hs=Hs.nextEffect}}while(null!==Hs);if(w=zr,_=dr(),b=w.focusedElem,s=w.selectionRange,_!==b&&b&&b.ownerDocument&&fr(b.ownerDocument.documentElement,b)){null!==s&&pr(b)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!w.extend&&x>s&&(u=s,s=x,x=u),u=hr(b,x),a=hr(b,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),x>s?(w.addRange(_),w.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Xt=!!Fr,zr=Fr=null,e.current=n,Hs=r;do{try{for(b=e;null!==Hs;){var k=Hs.flags;if(36&k&&ps(b,Hs.alternate,Hs),128&k){_=void 0;var E=Hs.ref;if(null!==E){var T=Hs.stateNode;switch(Hs.tag){case 5:_=T;break;default:_=T}"function"===typeof E?E(_):E.current=_}}Hs=Hs.nextEffect}}catch(S){if(null===Hs)throw Error(o(330));ju(Hs,S),Hs=Hs.nextEffect}}while(null!==Hs);Hs=null,Ni(),As=i}else e.current=n;if(Ys)Ys=!1,Qs=e,$s=t;else for(Hs=r;null!==Hs;)t=Hs.nextEffect,Hs.nextEffect=null,8&Hs.flags&&((k=Hs).sibling=null,k.stateNode=null),Hs=t;if(0===(r=e.pendingLanes)&&(Xs=null),1===r?e===ru?nu++:(nu=0,ru=e):nu=0,n=n.stateNode,wi&&"function"===typeof wi.onCommitFiberRoot)try{wi.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(S){}if(du(e,Bi()),Ws)throw Ws=!1,e=Zs,Zs=null,e;return 0!==(8&As)||Ki(),null}function Pu(){for(;null!==Hs;){var e=Hs.alternate;uu||null===su||(0!==(8&Hs.flags)?et(Hs,su)&&(uu=!0):13===Hs.tag&&Ts(e,Hs)&&et(Hs,su)&&(uu=!0));var t=Hs.flags;0!==(256&t)&&ds(e,Hs),0===(512&t)||Ys||(Ys=!0,Gi(97,(function(){return Du(),null}))),Hs=Hs.nextEffect}}function Du(){if(90!==$s){var e=97<$s?97:$s;return $s=90,qi(e,Nu)}return!1}function Ru(e,t){Js.push(t,e),Ys||(Ys=!0,Gi(97,(function(){return Du(),null})))}function Mu(e,t){eu.push(t,e),Ys||(Ys=!0,Gi(97,(function(){return Du(),null})))}function Nu(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!==(48&As))throw Error(o(331));var t=As;As|=32;var n=eu;eu=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));ju(a,c)}}for(n=Js,Js=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));ju(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Ki(),!0}function Lu(e,t,n){ua(e,t=cs(0,t=os(n,t),1)),t=cu(),null!==(e=fu(e,1))&&(qt(e,1,t),du(e,t))}function ju(e,t){if(3===e.tag)Lu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Lu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r))){var i=ls(n,e=os(t,e),1);if(ua(n,i),i=cu(),null!==(n=fu(n,1)))qt(n,1,i),du(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ds&n)===n&&(4===Ns||3===Ns&&(62914560&Ds)===Ds&&500>Bi()-Vs?wu(e,0):Bs|=n),du(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ui()?1:2:(0===au&&(au=js),0===(t=Ut(62914560&~au))&&(t=4194304))),n=cu(),null!==(e=fu(e,t))&&(qt(e,t,n),du(e,n))}function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Uu(e,t,n,r){return new Bu(e,t,n,r)}function Vu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qu(e,t){var n=e.alternate;return null===n?((n=Uu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Vu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Ku(n.children,i,a,t);case L:s=8,i|=16;break;case T:s=8,i|=1;break;case S:return(e=Uu(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case O:return(e=Uu(13,n,t,i)).type=O,e.elementType=O,e.lanes=a,e;case P:return(e=Uu(19,n,t,i)).elementType=P,e.lanes=a,e;case j:return Hu(n,i,a,t);case F:return(e=Uu(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case C:s=9;break e;case A:s=11;break e;case D:s=14;break e;case R:s=16,r=null;break e;case M:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Uu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ku(e,t,n,r){return(e=Uu(7,e,r,t)).lanes=n,e}function Hu(e,t,n,r){return(e=Uu(23,e,r,t)).elementType=j,e.lanes=n,e}function Wu(e,t,n){return(e=Uu(6,e,null,t)).lanes=n,e}function Zu(e,t,n){return(t=Uu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function Yu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Qu(e,t,n,r){var i=t.current,a=cu(),s=lu(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(pi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(pi(c)){n=yi(n,c,u);break e}}n=u}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,(t=sa(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ua(i,t),hu(i,s,a),s}function $u(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ju(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ec(e,t){Ju(e,t),(e=e.alternate)&&Ju(e,t)}function tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(e,t,null!=n&&!0===n.hydrate),t=Uu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,aa(t),e[Qr]=n.current,Ar(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=$u(o);s.call(e)}}Qu(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=$u(o);u.call(e)}}gu((function(){Qu(t,o,e,i)}))}return $u(o)}function ic(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(o(200));return Yu(e,t,null,n)}Ks=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Ga();break;case 5:Da(t);break;case 1:pi(t.type)&&gi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(ui(Ma,1&Ma.current),null!==(t=ns(e,t,n))?t.sibling:null);ui(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return ns(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=di(t,li.current),na(t,n),i=ro(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pi(r)){var a=!0;gi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,aa(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&da(t,r,s,e),i.updater=pa,t.stateNode=i,i._reactInternals=t,ga(t,r,e,n),t=qo(null,t,r,!0,a,n)}else t.tag=0,No(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Vu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===D)return 14}return 2}(i),e=Zi(i,e),a){case 0:t=Uo(null,t,i,e,n);break e;case 1:t=Vo(null,t,i,e,n);break e;case 11:t=Lo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Zi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Zi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Zi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,oa(e,t),la(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=ns(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Kr(t.stateNode.containerInfo.firstChild),La=t,a=Fa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ka.push(a);for(n=Ea(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else No(e,t,r,n),Ga();t=t.child}return t;case 5:return Da(t),null===e&&Ua(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Ur(r,i)?s=null:null!==a&&Ur(r,a)&&(t.flags|=16),Bo(e,t),No(e,t,s,n),t.child;case 6:return null===e&&Ua(t),null;case 13:return Xo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ka(t,null,r,n):No(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Lo(e,t,r,i=t.elementType===r?i:Zi(r,i),n);case 7:return No(e,t,t.pendingProps,n),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(ui(Xi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=sr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!hi.current){t=ns(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=sa(-1,n&-n)).tag=2,ua(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ta(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}No(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,na(t,n),r=r(i=ra(i,a.unstable_observedBits)),t.flags|=1,No(e,t,r,n),t.child;case 14:return a=Zi(i=t.type,t.pendingProps),jo(e,t,i,a=Zi(i.type,a),r,n);case 15:return Fo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Zi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pi(r)?(e=!0,gi(t)):e=!1,na(t,n),ma(t,r,i),ga(t,r,i,n),qo(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},tc.prototype.render=function(e){Qu(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qu(null,e,null,(function(){t[Qr]=null}))},tt=function(e){13===e.tag&&(hu(e,4,cu()),ec(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,cu()),ec(e,67108864))},rt=function(e){if(13===e.tag){var t=cu(),n=lu(e);hu(e,n,t),ec(e,n)}},it=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ni(r);if(!i)throw Error(o(90));Q(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=yu,Me=function(e,t,n,r,i){var a=As;As|=4;try{return qi(98,e.bind(null,t,n,r,i))}finally{0===(As=a)&&(Gs(),Ki())}},Ne=function(){0===(49&As)&&(function(){if(null!==tu){var e=tu;tu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,du(e,Bi())}))}Ki()}(),Du())},Le=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Gs(),Ki())}};var ac={Events:[ei,ti,ni,Pe,De,Du,{current:!1}]},oc={findFiberByHostInstance:Jr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sc={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{_i=uc.inject(sc),wi=uc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ac,t.createPortal=ic,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!==(48&n))return e(t);As|=1;try{if(e)return qi(99,e.bind(null,t))}finally{As=n,Ki()}},t.hydrate=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!0,n)},t.render=function(e,t,n){if(!nc(t))throw Error(o(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(o(40));return!!e._reactRootContainer&&(gu((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=yu,t.unstable_createPortal=function(e,t){return ic(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return rc(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";var r=n(45),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=g.prototype=new y;b.constructor=g,r(b,m.prototype),b.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+S(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),I(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(s=e[c],c);u+=I(s,t,n,l,o)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(s=e.next()).done;)u+=I(s=s.value,t,n,l=r+S(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var O={current:null};function P(){var e=O.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(71)},function(e,t,n){"use strict";var r,i,a,o;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,h=null,f=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(f,0))},i=function(e,t){h=setTimeout(e,t)},a=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,g=-1,b=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();_=e+b;try{y(!0,e)?x.postMessage(null):(m=!1,y=null)}catch(n){throw x.postMessage(null),n}}else m=!1},r=function(e){y=e,m||(m=!0,x.postMessage(null))},i=function(e,n){g=d((function(){e(t.unstable_now())}),n)},a=function(){p(g),g=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>S(o,n))void 0!==u&&0>S(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var I=[],C=[],A=1,O=null,P=3,D=!1,R=!1,M=!1;function N(e){for(var t=E(C);null!==t;){if(null===t.callback)T(C);else{if(!(t.startTime<=e))break;T(C),t.sortIndex=t.expirationTime,k(I,t)}t=E(C)}}function L(e){if(M=!1,N(e),!R)if(null!==E(I))R=!0,r(j);else{var t=E(C);null!==t&&i(L,t.startTime-e)}}function j(e,n){R=!1,M&&(M=!1,a()),D=!0;var r=P;try{for(N(n),O=E(I);null!==O&&(!(O.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=O.callback;if("function"===typeof o){O.callback=null,P=O.priorityLevel;var s=o(O.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?O.callback=s:O===E(I)&&T(I),N(n)}else T(I);O=E(I)}if(null!==O)var u=!0;else{var c=E(C);null!==c&&i(L,c.startTime-n),u=!1}return u}finally{O=null,P=r,D=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||D||(R=!0,r(j))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return E(I)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:A++,callback:n,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,k(C,e),null===E(I)&&e===E(C)&&(M?a():M=!0,i(L,o-s))):(e.sortIndex=u,k(I,e),R||D||(R=!0,r(j))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},function(e,t,n){},function(e,t,n){"use strict";t.__esModule=!0,t.LinkContainer=t.IndexLinkContainer=void 0;var r=a(n(74)),i=a(n(51));function a(e){return e&&e.__esModule?e:{default:e}}t.IndexLinkContainer=r.default,t.LinkContainer=i.default},function(e,t,n){"use strict";t.__esModule=!0,t.IndexLinkContainer=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=s(n(2)),a=n(62),o=s(n(51));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.IndexLinkContainer=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.default.createElement(o.default,r({},this.props,{exact:!0}))},t}(i.default.Component);t.default=(0,a.withRouter)(l)},function(e,t,n){"use strict";var r=n(76);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case o:case u:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case y:case m:case c:return e;default:return t}}case a:return t}}}function k(e){return x(e)===f}t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Lazy=y,t.Memo=m,t.Portal=a,t.Profiler=u,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return k(e)||x(e)===h},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===y},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===a},t.isProfiler=function(e){return x(e)===u},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===u||e===s||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===_||e.$$typeof===w||e.$$typeof===g)},t.typeOf=x},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"auth",(function(){return o}));var r=n(7),i=(n(80),n(64)),a=n.n(i);n(82),n(83),n(84),n(85),n(86);(function(){(function(){var t,n,i="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)n=Object.setPrototypeOf;else{var a;e:{var o={};try{o.__proto__={xb:!0},a=o.xb;break e}catch($h){}a=!1}n=a?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var s=n;function u(e,t){if(e.prototype=i(t.prototype),e.prototype.constructor=e,s)s(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.K=t.prototype}var c="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},l="undefined"!=typeof window&&window===this?this:"undefined"!=typeof e&&null!=e?e:this;function h(e,t){if(t){var n=l;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&c(n,e,{configurable:!0,writable:!0,value:t})}}h("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),h("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}));var f=this;function d(e){return void 0!==e}function p(e){return"string"==typeof e}var v=/^[\w+/_-]+[=]{0,2}$/,m=null;function y(){}function g(e){e.W=void 0,e.Xa=function(){return e.W?e.W:e.W=new e}}function b(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function _(e){return"array"==b(e)}function w(e){var t=b(e);return"array"==t||"object"==t&&"number"==typeof e.length}function x(e){return"function"==b(e)}function k(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var E="closure_uid_"+(1e9*Math.random()>>>0),T=0;function S(e,t,n){return e.call.apply(e.bind,arguments)}function I(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function C(e,t,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:I).apply(null,arguments)}function A(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function O(e,t){for(var n in t)e[n]=t[n]}var P,D=Date.now||function(){return+new Date};function R(e,t){e=e.split(".");var n,r=f;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)!e.length&&d(t)?r[n]=t:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}}function M(e,t){function n(){}n.prototype=t.prototype,e.K=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.vc=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function N(e){if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function L(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");N.call(this,n+e[r])}function j(e,t){throw new L("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}M(N,Error),N.prototype.name="CustomError",M(L,N),L.prototype.name="AssertionError";var F=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(p(e))return p(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},z=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=p(e)?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};var B=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,a=p(e)?e.split(""):e,o=0;o<n;o++)if(o in a){var s=a[o];t.call(void 0,s,o,e)&&(r[i++]=s)}return r},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=p(e)?e.split(""):e,a=0;a<n;a++)a in i&&(r[a]=t.call(void 0,i[a],a,e));return r},V=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=p(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function q(e,t){return 0<=F(e,t)}function G(e,t){var n;return(n=0<=(t=F(e,t)))&&K(e,t),n}function K(e,t){return 1==Array.prototype.splice.call(e,t,1).length}function H(e,t){!function(e,t){for(var n=p(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&K(e,r)&&0}))}function W(e){return Array.prototype.concat.apply([],arguments)}function Z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function X(e,t,n,r){return Array.prototype.splice.apply(e,Y(arguments,1))}function Y(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}var Q=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},$=/&/g,J=/</g,ee=/>/g,te=/"/g,ne=/'/g,re=/\x00/g,ie=/[\x00&<>"']/;function ae(e,t){return e<t?-1:e>t?1:0}function oe(e){return ie.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace($,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(J,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ee,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(te,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ne,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(re,"&#0;"))),e}function se(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ue(e){var t,n={};for(t in e)n[t]=e[t];return n}var ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ce.length;a++)n=ce[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var he="StopIteration"in f?f.StopIteration:{message:"StopIteration",stack:""};function fe(){}function de(e){if(e instanceof fe)return e;if("function"==typeof e.ha)return e.ha(!1);if(w(e)){var t=0,n=new fe;return n.next=function(){for(;;){if(t>=e.length)throw he;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")}function pe(e){if(w(e))return Z(e);e=de(e);var t=[];return function(e,t){if(w(e))try{z(e,t,void 0)}catch(n){if(n!==he)throw n}else{e=de(e);try{for(;;)t.call(void 0,e.next(),void 0,e)}catch(r){if(r!==he)throw r}}}(e,(function(e){t.push(e)})),t}function ve(e,t){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ve)for(n=e.ja(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function me(e){if(e.h!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];ye(e.g,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.h!=e.a.length){var i={};for(n=t=0;t<e.a.length;)ye(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}fe.prototype.next=function(){throw he},fe.prototype.ha=function(){return this},(t=ve.prototype).la=function(){me(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.g[this.a[t]]);return e},t.ja=function(){return me(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0},t.get=function(e,t){return ye(this.g,e)?this.g[e]:t},t.set=function(e,t){ye(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=t},t.forEach=function(e,t){for(var n=this.ja(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}},t.ha=function(e){me(this);var t=0,n=this.j,r=this,i=new fe;return i.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(t>=r.a.length)throw he;var i=r.a[t++];return e?i:r.g[i]},i};var ge=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function be(e,t,n,r){for(var i=n.length;0<=(t=e.indexOf(n,t))&&t<r;){var a=e.charCodeAt(t-1);if((38==a||63==a)&&(!(a=e.charCodeAt(t+i))||61==a||38==a||35==a))return t;t+=i+1}return-1}var _e=/#|$/;function we(e,t){var n=e.search(_e),r=be(e,0,t,n);if(0>r)return null;var i=e.indexOf("&",r);return(0>i||i>n)&&(i=n),r+=t.length+1,decodeURIComponent(e.substr(r,i-r).replace(/\+/g," "))}var xe=/[?&]($|#)/;function ke(e,t){var n;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,e instanceof ke?(this.i=d(t)?t:e.i,Ee(this,e.j),this.A=e.A,this.h=e.h,Te(this,e.C),this.g=e.g,Se(this,Be(e.a)),this.s=e.s):e&&(n=String(e).match(ge))?(this.i=!!t,Ee(this,n[1]||"",!0),this.A=Ce(n[2]||""),this.h=Ce(n[3]||"",!0),Te(this,n[4]),this.g=Ce(n[5]||"",!0),Se(this,n[6]||"",!0),this.s=Ce(n[7]||"")):(this.i=!!t,this.a=new Le(null,this.i))}function Ee(e,t,n){e.j=n?Ce(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Te(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.C=t}else e.C=null}function Se(e,t,n){t instanceof Le?(e.a=t,function(e,t){t&&!e.j&&(je(e),e.h=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fe(this,t),Fe(this,n),0<e.length&&(this.h=null,this.a.set(Ue(this,n),Z(e)),this.g+=e.length))}),e)),e.j=t}(e.a,e.i)):(n||(t=Ae(t,Me)),e.a=new Le(t,e.i))}function Ie(e){return e instanceof ke?new ke(e):new ke(e,void 0)}function Ce(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ae(e,t,n){return p(e)?(e=encodeURI(e).replace(t,Oe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ke.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ae(t,Pe,!0),":");var n=this.h;return(n||"file"==t)&&(e.push("//"),(t=this.A)&&e.push(Ae(t,Pe,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ae(n,"/"==n.charAt(0)?Re:De,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.s)&&e.push("#",Ae(n,Ne)),e.join("")};var Pe=/[#\/\?@]/g,De=/[#\?:]/g,Re=/[#\?]/g,Me=/[#\?@]/g,Ne=/#/g;function Le(e,t){this.g=this.a=null,this.h=e||null,this.j=!!t}function je(e){e.a||(e.a=new ve,e.g=0,e.h&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.h,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fe(e,t){je(e),t=Ue(e,t),ye(e.a.g,t)&&(e.h=null,e.g-=e.a.get(t).length,ye((e=e.a).g,t)&&(delete e.g[t],e.h--,e.j++,e.a.length>2*e.h&&me(e)))}function ze(e,t){return je(e),t=Ue(e,t),ye(e.a.g,t)}function Be(e){var t=new Le;return t.h=e.h,e.a&&(t.a=new ve(e.a),t.g=e.g),t}function Ue(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ve(e){this.a=Ie(e)}function qe(e){return e.a.a.get(He.Pa)||null}function Ge(e,t){t?e.a.a.set(He.PROVIDER_ID,t):Fe(e.a.a,He.PROVIDER_ID)}(t=Le.prototype).add=function(e,t){je(this),this.h=null,e=Ue(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.g+=1,this},t.clear=function(){this.a=this.h=null,this.g=0},t.forEach=function(e,t){je(this),this.a.forEach((function(n,r){z(n,(function(n){e.call(t,n,r,this)}),this)}),this)},t.ja=function(){je(this);for(var e=this.a.la(),t=this.a.ja(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},t.la=function(e){je(this);var t=[];if(p(e))ze(this,e)&&(t=W(t,this.a.get(Ue(this,e))));else{e=this.a.la();for(var n=0;n<e.length;n++)t=W(t,e[n])}return t},t.set=function(e,t){return je(this),this.h=null,ze(this,e=Ue(this,e))&&(this.g-=this.a.get(e).length),this.a.set(e,[t]),this.g+=1,this},t.get=function(e,t){return e&&0<(e=this.la(e)).length?String(e[0]):t},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],t=this.a.ja(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.la(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.h=e.join("&")},Ve.prototype.toString=function(){return this.a.toString()};var Ke,He={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var We=f.navigator;if(We){var Ze=We.userAgent;if(Ze){Ke=Ze;break e}}Ke=""}function Xe(e){return-1!=Ke.indexOf(e)}function Ye(){return(Xe("Chrome")||Xe("CriOS"))&&!Xe("Edge")}function Qe(e){return Qe[" "](e),e}Qe[" "]=y;var $e,Je=Xe("Opera"),et=Xe("Trident")||Xe("MSIE"),tt=Xe("Edge"),nt=tt||et,rt=Xe("Gecko")&&!(-1!=Ke.toLowerCase().indexOf("webkit")&&!Xe("Edge"))&&!(Xe("Trident")||Xe("MSIE"))&&!Xe("Edge"),it=-1!=Ke.toLowerCase().indexOf("webkit")&&!Xe("Edge"),at=it&&Xe("Mobile"),ot=Xe("Macintosh");function st(){var e=f.document;return e?e.documentMode:void 0}e:{var ut="",ct=function(){var e=Ke;return rt?/rv:([^\);]+)(\)|;)/.exec(e):tt?/Edge\/([\d\.]+)/.exec(e):et?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):it?/WebKit\/(\S+)/.exec(e):Je?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ct&&(ut=ct?ct[1]:""),et){var lt=st();if(null!=lt&&lt>parseFloat(ut)){$e=String(lt);break e}}$e=ut}var ht,ft={};function dt(e){return function(e,t){var n=ft;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=Q(String($e)).split("."),r=Q(String(e)).split("."),i=Math.max(n.length,r.length),a=0;0==t&&a<i;a++){var o=n[a]||"",s=r[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ae(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ae(0==o[2].length,0==s[2].length)||ae(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}var pt=f.document;function vt(e,t){this.a=e===yt&&t||"",this.g=mt}ht=pt&&et?st()||("CSS1Compat"==pt.compatMode?parseInt($e,10):5):void 0,vt.prototype.ma=!0,vt.prototype.ka=function(){return this.a},vt.prototype.toString=function(){return"Const{"+this.a+"}"};var mt={},yt={};function gt(){this.a="",this.h=_t}function bt(e){return e instanceof gt&&e.constructor===gt&&e.h===_t?e.a:(j("expected object of type TrustedResourceUrl, got '"+e+"' of type "+b(e)),"type_error:TrustedResourceUrl")}gt.prototype.ma=!0,gt.prototype.ka=function(){return this.a.toString()},gt.prototype.g=function(){return 1},gt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t={};function wt(){this.a="",this.h=St}function xt(e){return e instanceof wt&&e.constructor===wt&&e.h===St?e.a:(j("expected object of type SafeUrl, got '"+e+"' of type "+b(e)),"type_error:SafeUrl")}wt.prototype.ma=!0,wt.prototype.ka=function(){return this.a.toString()},wt.prototype.g=function(){return 1},wt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var kt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Et(e){return e instanceof wt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),kt.test(e)||(e="about:invalid#zClosurez"),It(e))}function Tt(e){return e instanceof wt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),kt.test(e)||(e="about:invalid#zClosurez"),It(e))}var St={};function It(e){var t=new wt;return t.a=e,t}function Ct(){this.a="",this.g=At}It("about:blank"),Ct.prototype.ma=!0;var At={};function Ot(){this.a="",this.j=Dt,this.h=null}function Pt(e){return e instanceof Ot&&e.constructor===Ot&&e.j===Dt?e.a:(j("expected object of type SafeHtml, got '"+e+"' of type "+b(e)),"type_error:SafeHtml")}Ct.prototype.ka=function(){return this.a},Ct.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},Ot.prototype.g=function(){return this.h},Ot.prototype.ma=!0,Ot.prototype.ka=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function Rt(e,t){var n=new Ot;return n.a=e,n.h=t,n}Rt("<!DOCTYPE html>",0);var Mt=Rt("",0);Rt("<br>",0);var Nt=function(e){var t,n=!1;return function(){return n||(t=function(){if("undefined"===typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!!e.firstChild&&(t=e.firstChild.firstChild,e.innerHTML=Pt(Mt),!t.parentElement)}(),n=!0),t}}();function Lt(e,t){t=t instanceof wt?t:Tt(t),e.assign(xt(t))}function jt(e,t){this.a=d(e)?e:0,this.g=d(t)?t:0}function Ft(e,t){this.width=e,this.height=t}function zt(e){return e?new Xt(Ht(e)):P||(P=new Xt)}function Bt(e,t){var n=t||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):Vt(document,e,t)}function Ut(e,t){var n=t||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var r=t||n;e=r.querySelectorAll&&r.querySelector&&e?r.querySelector(e?"."+e:""):Vt(n,e,t)[0]||null}return e||null}function Vt(e,t,n){var r;if((e=n||e).querySelectorAll&&e.querySelector&&t)return e.querySelectorAll(t?"."+t:"");if(t&&e.getElementsByClassName){var i=e.getElementsByClassName(t);return i}if(i=e.getElementsByTagName("*"),t){var a={};for(n=r=0;e=i[n];n++){var o=e.className;"function"==typeof o.split&&q(o.split(/\s+/),t)&&(a[r++]=e)}return a.length=r,a}return i}jt.prototype.toString=function(){return"("+this.a+", "+this.g+")"},jt.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},jt.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},jt.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(t=Ft.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var qt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Gt(e){return e.scrollingElement?e.scrollingElement:(it||"CSS1Compat"!=e.compatMode)&&e.body||e.documentElement}function Kt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ht(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function Wt(e,t){if("textContent"in e)e.textContent=t;else if(3==e.nodeType)e.data=String(t);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(Ht(e).createTextNode(String(t)))}}function Zt(e,t){return t?function(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}(e,(function(e){return!t||p(e.className)&&q(e.className.split(/\s+/),t)})):null}function Xt(e){this.a=e||f.document||document}Xt.prototype.N=function(){return p(void 0)?this.a.getElementById(void 0):void 0};var Yt={Fc:!0},Qt={Hc:!0},$t={Ec:!0},Jt={Gc:!0};function en(){throw Error("Do not instantiate directly")}function tn(e,t,n,r){if(e=e(t||rn,void 0,n),r=(r||zt()).a.createElement("DIV"),(e=function(e){if(!k(e))return oe(String(e));if(e instanceof en){if(e.fa===Yt)return e.content;if(e.fa===Jt)return oe(e.content)}return j("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}(e)).match(nn),e=Rt(e,null),Nt())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=Pt(e),1==r.childNodes.length&&(1==(e=r.firstChild).nodeType&&(r=e)),r}en.prototype.va=null,en.prototype.toString=function(){return this.content};var nn=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,rn={};function an(){en.call(this)}function on(e){return null!=e&&e.fa===Yt?e:e instanceof Ot?ln(Pt(e).toString(),e.g()):ln(oe(String(String(e))),function(e){if(null!=e)switch(e.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(e))}function sn(){en.call(this)}function un(e,t){this.content=String(e),this.va=null!=t?t:null}function cn(e){return new un(e,void 0)}M(an,en),an.prototype.fa=Yt,M(sn,en),sn.prototype.fa=Qt,sn.prototype.va=1,M(un,en),un.prototype.fa=Jt;var ln=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return e=new t(String(e)),void 0!==n&&(e.va=n),e}}(an),hn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e){return new t(String(e))}}(sn);function fn(e){return(e=String(e))?new un(e,void 0):""}var dn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new t(e),void 0!==n&&(e.va=n),e):""}}(an);function pn(e){return null!=e&&e.fa===Yt?String(String(e.content).replace(Tn,"").replace(Sn,"&lt;")).replace(wn,gn):oe(String(e))}function vn(e){return null!=e&&e.fa===Qt?e=String(e).replace(xn,_n):e instanceof wt?e=String(xt(e).toString()).replace(xn,_n):(e=String(e),En.test(e)?e=e.replace(xn,_n):(j("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz")),e}function mn(e){return null!=e&&e.fa===$t?e=e.content:null==e?e="":e instanceof Ct?e instanceof Ct&&e.constructor===Ct&&e.g===At?e=e.a:(j("expected object of type SafeStyle, got '"+e+"' of type "+b(e)),e="type_error:SafeStyle"):(e=String(e),kn.test(e)||(j("Bad value `%s` for |filterCssValue",[e]),e="zSoyz")),e}var yn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","\x85":"&#133;","\xa0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function gn(e){return yn[e]}var bn={"\0":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};function _n(e){return bn[e]}var wn=/[\x00\x22\x27\x3c\x3e]/g,xn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,kn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,En=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Tn=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Sn=/</g;function In(){return cn("Enter a valid phone number")}function Cn(){return cn("Unable to send password reset code to specified email")}function An(){return cn("Something went wrong. Please try again.")}function On(){return cn("This email already exists without any means of sign-in. Please reset the password to recover.")}function Pn(e){var t="";switch((e=e||{}).code){case"invalid-argument":t+="Client specified an invalid argument.";break;case"invalid-configuration":t+="Client specified an invalid project configuration.";break;case"failed-precondition":t+="Request can not be executed in the current system state.";break;case"out-of-range":t+="Client specified an invalid range.";break;case"unauthenticated":t+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":t+="Client does not have sufficient permission.";break;case"not-found":t+="Specified resource is not found.";break;case"aborted":t+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":t+="The resource that a client tried to create already exists.";break;case"resource-exhausted":t+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":t+="Request cancelled by the client.";break;case"data-loss":t+="Unrecoverable data loss or data corruption.";break;case"unknown":t+="Unknown server error.";break;case"internal":t+="Internal server error.";break;case"not-implemented":t+="API method not implemented by the server.";break;case"unavailable":t+="Service unavailable.";break;case"deadline-exceeded":t+="Request deadline exceeded.";break;case"auth/user-disabled":t+="The user account has been disabled by an administrator.";break;case"auth/timeout":t+="The operation has timed out.";break;case"auth/too-many-requests":t+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":t+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":t+="A network error has occurred. Try again later.";break;case"restart-process":t+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":t+="No sign-in provider is available for the given email, please try with a different email."}return cn(t)}function Dn(){return cn("Please login again to perform this operation")}function Rn(e,t,n){var r=Error.call(this);if(this.message=r.message,"stack"in r&&(this.stack=r.stack),this.code=Mn+e,!(e=t)){switch(e="",this.code){case"firebaseui/merge-conflict":e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:e+=An()}e=cn(e).toString()}this.message=e||"",this.credential=n||null}u(Rn,Error),Rn.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Mn="firebaseui/";function Nn(){0!=Ln&&(jn[this[E]||(this[E]=++T)]=this),this.T=this.T,this.C=this.C}var Ln=0,jn={};function Fn(e,t){e.T?d(void 0)?t.call(void 0):t():(e.C||(e.C=[]),e.C.push(d(void 0)?C(t,void 0):t))}function zn(e){e&&"function"==typeof e.o&&e.o()}Nn.prototype.T=!1,Nn.prototype.o=function(){if(!this.T&&(this.T=!0,this.m(),0!=Ln)){var e=this[E]||(this[E]=++T);if(0!=Ln&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete jn[e]}},Nn.prototype.m=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Bn=Object.freeze||function(e){return e},Un=!et||9<=Number(ht),Vn=et&&!dt("9"),qn=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{f.addEventListener("test",y,t),f.removeEventListener("test",y,t)}catch(n){}return e}();function Gn(e,t){this.type=e,this.g=this.target=t,this.h=!1,this.qb=!0}function Kn(e,t){if(Gn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(rt){e:{try{Qe(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=p(e.pointerType)?e.pointerType:Hn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Gn.prototype.stopPropagation=function(){this.h=!0},Gn.prototype.preventDefault=function(){this.qb=!1},M(Kn,Gn);var Hn=Bn({2:"touch",3:"pen",4:"mouse"});Kn.prototype.stopPropagation=function(){Kn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Kn.prototype.preventDefault=function(){Kn.K.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Vn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var Wn="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Xn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++Zn,this.sa=this.Ia=!1}function Yn(e){e.sa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function Qn(e){this.src=e,this.a={},this.g=0}function $n(e,t){var n=t.type;n in e.a&&G(e.a[n],t)&&(Yn(t),0==e.a[n].length&&(delete e.a[n],e.g--))}function Jn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.sa&&a.listener==t&&a.capture==!!n&&a.La==r)return i}return-1}Qn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.a[a])||(e=this.a[a]=[],this.g++);var o=Jn(e,t,r,i);return-1<o?(t=e[o],n||(t.Ia=!1)):((t=new Xn(t,this.src,a,!!r,i)).Ia=n,e.push(t)),t};var er="closure_lm_"+(1e6*Math.random()|0),tr={};function nr(e,t,n,r,i){if(r&&r.once)return ir(e,t,n,r,i);if(_(t)){for(var a=0;a<t.length;a++)nr(e,t[a],n,r,i);return null}return n=dr(n),e&&e[Wn]?e.J.add(String(t),n,!1,k(r)?!!r.capture:!!r,i):rr(e,t,n,!1,r,i)}function rr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=k(i)?!!i.capture:!!i,s=hr(e);if(s||(e[er]=s=new Qn(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){var e=lr,t=Un?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)qn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ir(e,t,n,r,i){if(_(t)){for(var a=0;a<t.length;a++)ir(e,t[a],n,r,i);return null}return n=dr(n),e&&e[Wn]?e.J.add(String(t),n,!0,k(r)?!!r.capture:!!r,i):rr(e,t,n,!0,r,i)}function ar(e,t,n,r,i){if(_(t))for(var a=0;a<t.length;a++)ar(e,t[a],n,r,i);else r=k(r)?!!r.capture:!!r,n=dr(n),e&&e[Wn]?(e=e.J,(t=String(t).toString())in e.a&&(-1<(n=Jn(a=e.a[t],n,r,i))&&(Yn(a[n]),K(a,n),0==a.length&&(delete e.a[t],e.g--)))):e&&(e=hr(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Jn(t,n,r,i)),(n=-1<e?t[e]:null)&&or(n))}function or(e){if("number"!=typeof e&&e&&!e.sa){var t=e.src;if(t&&t[Wn])$n(t.J,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hr(t))?($n(n,e),0==n.g&&(n.src=null,t[er]=null)):Yn(e)}}}function sr(e){return e in tr?tr[e]:tr[e]="on"+e}function ur(e,t,n,r){var i=!0;if((e=hr(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var a=t[e];a&&a.capture==n&&!a.sa&&(a=cr(a,r),i=i&&!1!==a)}return i}function cr(e,t){var n=e.listener,r=e.La||e.src;return e.Ia&&or(e),n.call(r,t)}function lr(e,t){if(e.sa)return!0;if(!Un){if(!t)e:{t=["window","event"];for(var n=f,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Kn(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(o){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.g;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;!t.h&&0<=i;i--){t.g=r[i];var a=ur(r[i],e,!0,t);n=n&&a}for(i=0;!t.h&&i<r.length;i++)t.g=r[i],a=ur(r[i],e,!1,t),n=n&&a}return n}return cr(e,new Kn(t,this))}function hr(e){return(e=e[er])instanceof Qn?e:null}var fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function dr(e){return x(e)?e:(e[fr]||(e[fr]=function(t){return e.handleEvent(t)}),e[fr])}function pr(){Nn.call(this),this.J=new Qn(this),this.wb=this,this.Ha=null}function vr(e,t){var n,r=e.Ha;if(r)for(n=[];r;r=r.Ha)n.push(r);if(e=e.wb,r=t.type||t,p(t))t=new Gn(t,e);else if(t instanceof Gn)t.target=t.target||e;else{var i=t;le(t=new Gn(r,e),i)}if(i=!0,n)for(var a=n.length-1;!t.h&&0<=a;a--){var o=t.g=n[a];i=mr(o,r,!0,t)&&i}if(t.h||(i=mr(o=t.g=e,r,!0,t)&&i,t.h||(i=mr(o,r,!1,t)&&i)),n)for(a=0;!t.h&&a<n.length;a++)i=mr(o=t.g=n[a],r,!1,t)&&i;return i}function mr(e,t,n,r){if(!(t=e.J.a[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.sa&&o.capture==n){var s=o.listener,u=o.La||o.src;o.Ia&&$n(e.J,o),i=!1!==s.call(u,r)&&i}}return i&&0!=r.qb}M(pr,Nn),pr.prototype[Wn]=!0,pr.prototype.Za=function(e){this.Ha=e},pr.prototype.removeEventListener=function(e,t,n,r){ar(this,e,t,n,r)},pr.prototype.m=function(){if(pr.K.m.call(this),this.J){var e,t=this.J;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Yn(n[r]);delete t.a[e],t.g--}}this.Ha=null};var yr={},gr=0;function br(e,t){if(!e)throw Error("Event target element must be provided!");if(e=wr(e),yr[e]&&yr[e].length)for(var n=0;n<yr[e].length;n++)vr(yr[e][n],t)}function _r(e){var t=wr(e.N());yr[t]&&yr[t].length&&(function(e,t){e:{for(var n=e.length,r=p(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}0<=t&&K(e,t)}(yr[t],(function(t){return t==e})),yr[t].length||delete yr[t])}function wr(e){return"undefined"===typeof e.a&&(e.a=gr,gr++),e.a}function xr(e){if(!e)throw Error("Event target element must be provided!");pr.call(this),this.a=e}function kr(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function Er(e,t){this.h=e,this.j=t,this.g=0,this.a=null}function Tr(e,t){e.j(t),100>e.g&&(e.g++,t.next=e.a,e.a=t)}function Sr(){this.g=this.a=null}u(xr,pr),xr.prototype.N=function(){return this.a},xr.prototype.register=function(){var e=wr(this.N());yr[e]?q(yr[e],this)||yr[e].push(this):yr[e]=[this]},Er.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var Ir,Cr,Ar=new Er((function(){return new Pr}),(function(e){e.reset()}));function Or(){var e=Nr,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.g=null),t.next=null),t}function Pr(){this.next=this.g=this.a=null}function Dr(e){f.setTimeout((function(){throw e}),0)}function Rr(e,t){Cr||function(){if(f.Promise&&f.Promise.resolve){var e=f.Promise.resolve(void 0);Cr=function(){e.then(Lr)}}else Cr=function(){var e=Lr;!x(f.setImmediate)||f.Window&&f.Window.prototype&&!Xe("Edge")&&f.Window.prototype.setImmediate==f.setImmediate?(Ir||(Ir=function(){var e=f.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Xe("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=C((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!Xe("Trident")&&!Xe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(d(n.next)){var e=(n=n.next).gb;n.gb=null,e()}},function(e){r.next={gb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){f.setTimeout(e,0)}}()),Ir(e)):f.setImmediate(e)}}(),Mr||(Cr(),Mr=!0),Nr.add(e,t)}Sr.prototype.add=function(e,t){var n=Ar.get();n.set(e,t),this.g?this.g.next=n:this.a=n,this.g=n},Pr.prototype.set=function(e,t){this.a=e,this.g=t,this.next=null},Pr.prototype.reset=function(){this.next=this.g=this.a=null};var Mr=!1,Nr=new Sr;function Lr(){for(var e;e=Or();){try{e.a.call(e.g)}catch(t){Dr(t)}Tr(Ar,e)}Mr=!1}function jr(e){if(this.a=Fr,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,e!=y)try{var t=this;e.call(void 0,(function(e){Xr(t,zr,e)}),(function(e){if(!(e instanceof ti))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(n){}Xr(t,Br,e)}))}catch(n){Xr(this,Br,n)}}var Fr=0,zr=2,Br=3;function Ur(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}Ur.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Vr=new Er((function(){return new Ur}),(function(e){e.reset()}));function qr(e,t,n){var r=Vr.get();return r.s=e,r.g=t,r.j=n,r}function Gr(e){if(e instanceof jr)return e;var t=new jr(y);return Xr(t,zr,e),t}function Kr(e){return new jr((function(t,n){n(e)}))}function Hr(e,t){if(e.a==Fr)if(e.h){var n=e.h;if(n.g){for(var r=0,i=null,a=null,o=n.g;o&&(o.h||(r++,o.a==e&&(i=o),!(i&&1<r)));o=o.next)i||(a=o);i&&(n.a==Fr&&1==r?Hr(n,t):(a?((r=a).next==n.j&&(n.j=r),r.next=r.next.next):Qr(n),$r(n,i,Br,t)))}e.h=null}else Xr(e,Br,t)}function Wr(e,t){e.g||e.a!=zr&&e.a!=Br||Yr(e),e.j?e.j.next=t:e.g=t,e.j=t}function Zr(e,t,n,r){var i=qr(null,null,null);return i.a=new jr((function(e,a){i.s=t?function(n){try{var i=t.call(r,n);e(i)}catch(o){a(o)}}:e,i.g=n?function(t){try{var i=n.call(r,t);!d(i)&&t instanceof ti?a(t):e(i)}catch(o){a(o)}}:a})),i.a.h=e,Wr(e,i),i.a}function Xr(e,t,n){if(e.a==Fr){e===n&&(t=Br,n=new TypeError("Promise cannot resolve to itself")),e.a=1;e:{var r=n,i=e.hc,a=e.ic;if(r instanceof jr){Wr(r,qr(i||y,a||null,e));var o=!0}else if(kr(r))r.then(i,a,e),o=!0;else{if(k(r))try{var s=r.then;if(x(s)){!function(e,t,n,r,i){function a(e){s||(s=!0,r.call(i,e))}function o(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,o,a)}catch(u){a(u)}}(r,s,i,a,e),o=!0;break e}}catch(u){a.call(e,u),o=!0;break e}o=!1}}o||(e.A=n,e.a=t,e.h=null,Yr(e),t!=Br||n instanceof ti||function(e,t){e.s=!0,Rr((function(){e.s&&ei.call(null,t)}))}(e,n))}}function Yr(e){e.i||(e.i=!0,Rr(e.Hb,e))}function Qr(e){var t=null;return e.g&&(t=e.g,e.g=t.next,t.next=null),e.g||(e.j=null),t}function $r(e,t,n,r){if(n==Br&&t.g&&!t.h)for(;e&&e.s;e=e.h)e.s=!1;if(t.a)t.a.h=null,Jr(t,n,r);else try{t.h?t.s.call(t.j):Jr(t,n,r)}catch(i){ei.call(null,i)}Tr(Vr,t)}function Jr(e,t,n){t==zr?e.s.call(e.j,n):e.g&&e.g.call(e.j,n)}jr.prototype.then=function(e,t,n){return Zr(this,x(e)?e:null,x(t)?t:null,n)},jr.prototype.$goog_Thenable=!0,(t=jr.prototype).fc=function(e,t){return(e=qr(e,e,t)).h=!0,Wr(this,e),this},t.Ca=function(e,t){return Zr(this,null,e,t)},t.cancel=function(e){this.a==Fr&&Rr((function(){Hr(this,new ti(e))}),this)},t.hc=function(e){this.a=Fr,Xr(this,zr,e)},t.ic=function(e){this.a=Fr,Xr(this,Br,e)},t.Hb=function(){for(var e;e=Qr(this);)$r(this,e,this.a,this.A);this.i=!1};var ei=Dr;function ti(e){N.call(this,e)}function ni(e,t,n){t||(t={}),n=n||window;var r=e instanceof wt?e:Et("undefined"!=typeof e.href?e.href:String(e));e=t.target||e.target;var i=[];for(a in t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");return(Xe("iPhone")&&!Xe("iPod")&&!Xe("iPad")||Xe("iPad")||Xe("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(a=n.document.createElement("A"),r=r instanceof wt?r:Tt(r),a.href=xt(r),a.setAttribute("target",e),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),a.dispatchEvent(t),n={}):t.noreferrer?(n=n.open("",e,a),t=xt(r).toString(),n&&(nt&&-1!=t.indexOf(";")&&(t="'"+t.replace(/'/g,"%27")+"'"),n.opener=null,t=Rt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+oe(t)+'">',null),n.document.write(Pt(t)),n.document.close())):(n=n.open(xt(r).toString(),e,a))&&t.noopener&&(n.opener=null),n}function ri(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch(e){}return!1}function ii(e){ni(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function ai(e,t){if(null==(e=k(e)&&1==e.nodeType?e:document.querySelector(String(e))))throw Error(t||"Cannot find element.");return e}function oi(){return window.location.href}function si(e){var t=gi;this.s=[],this.T=t,this.O=e||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function ui(e,t,n){e.a=!0,e.h=n,e.j=!t,fi(e)}function ci(e){if(e.a){if(!e.J)throw new di(e);e.J=!1}}function li(e,t,n){e.s.push([t,n,void 0]),e.a&&fi(e)}function hi(e){return V(e.s,(function(e){return x(e[1])}))}function fi(e){if(e.i&&e.a&&hi(e)){var t=e.i,n=mi[t];n&&(f.clearTimeout(n.a),delete mi[t]),e.i=0}e.g&&(e.g.C--,delete e.g),t=e.h;for(var r=n=!1;e.s.length&&!e.A;){var i=e.s.shift(),a=i[0],o=i[1];if(i=i[2],a=e.j?o:a)try{var s=a.call(i||e.O,t);d(s)&&(e.j=e.j&&(s==t||s instanceof Error),e.h=t=s),(kr(t)||"function"===typeof f.Promise&&t instanceof f.Promise)&&(r=!0,e.A=!0)}catch(u){t=u,e.j=!0,hi(e)||(n=!0)}}e.h=t,r&&(s=C(e.L,e,!0),r=C(e.L,e,!1),t instanceof si?(li(t,s,r),t.l=!0):t.then(s,r)),n&&(t=new vi(t),mi[t.a]=t,e.i=t.a)}function di(){N.call(this)}function pi(){N.call(this)}function vi(e){this.a=f.setTimeout(C(this.h,this),0),this.g=e}M(ti,N),ti.prototype.name="cancel",si.prototype.cancel=function(e){if(this.a)this.h instanceof si&&this.h.cancel();else{if(this.g){var t=this.g;delete this.g,e?t.cancel(e):(t.C--,0>=t.C&&t.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(e=new pi(this),ci(this),ui(this,!1,e))}},si.prototype.L=function(e,t){this.A=!1,ui(this,e,t)},si.prototype.callback=function(e){ci(this),ui(this,!0,e)},si.prototype.then=function(e,t,n){var r,i,a=new jr((function(e,t){r=e,i=t}));return li(this,r,(function(e){e instanceof pi?a.cancel():i(e)})),a.then(e,t,n)},si.prototype.$goog_Thenable=!0,M(di,N),di.prototype.message="Deferred has already fired",di.prototype.name="AlreadyCalledError",M(pi,N),pi.prototype.message="Deferred was canceled",pi.prototype.name="CanceledError",vi.prototype.h=function(){throw delete mi[this.a],this.g};var mi={};function yi(e){var t={},n=t.document||document,r=bt(e).toString(),i=document.createElement("SCRIPT"),a={rb:i,sb:void 0},o=new si(a),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){bi(i,!0);var e=new xi(wi,"Timeout reached for loading script "+r);ci(o),ui(o,!1,e)}),u),a.sb=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(bi(i,t.xc||!1,s),o.callback(null))},i.onerror=function(){bi(i,!0,s);var e=new xi(_i,"Error while loading script "+r);ci(o),ui(o,!1,e)},le(a=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function(e,t){se(t,(function(t,n){t&&"object"==typeof t&&t.ma&&(t=t.ka()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:qt.hasOwnProperty(n)?e.setAttribute(qt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}(i,a),function(e,t){e.src=bt(t),null===m&&(m=(t=(t=f.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&v.test(t)?t:""),(t=m)&&e.setAttribute("nonce",t)}(i,e),function(e){var t=(e||document).getElementsByTagName("HEAD");return t&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),o}function gi(){if(this&&this.rb){var e=this.rb;e&&"SCRIPT"==e.tagName&&bi(e,!0,this.sb)}}function bi(e,t,n){null!=n&&f.clearTimeout(n),e.onload=y,e.onerror=y,e.onreadystatechange=y,t&&window.setTimeout((function(){Kt(e)}),0)}var _i=0,wi=1;function xi(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),N.call(this,n),this.code=e}function ki(){return f.google&&f.google.accounts&&f.google.accounts.id||null}function Ei(e){this.a=e||ki(),this.h=!1,this.g=null}function Ti(e,t,n){return e.a&&t?(e.h=!0,new jr((function(r){e.g=r,e.a.initialize({client_id:t,callback:r,auto_select:!n}),e.a.prompt()}))):Gr(t?Ii.Xa().load().then((function(){return e.a=ki(),Ti(e,t,n)})).Ca((function(){return null})):null)}M(xi,N),Ei.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},g(Ei);var Si=new vt(yt,"https://accounts.google.com/gsi/client");function Ii(){this.a=null}function Ci(e,t){this.a=e,this.g=t||function(e){throw e}}function Ai(e,t,n){this.reset(e,t,n,void 0,void 0)}Ii.prototype.load=function(){var e=this;if(this.a)return this.a;var t=function(){var e=Si;e instanceof vt&&e.constructor===vt&&e.g===mt?e=e.a:(j("expected object of type Const, got '"+e+"'"),e="type_error:Const");var t=new gt;return t.a=e,t}();return ki()?Gr():this.a=function(){var e=null;return new jr((function(t){"complete"==f.document.readyState?t():(e=function(){t()},ir(window,"load",e))})).Ca((function(t){throw ar(window,"load",e),t}))}().then((function(){if(!ki())return new jr((function(n,r){var i=setTimeout((function(){e.a=null,r(Error("Network error!"))}),1e4);f.onGoogleLibraryLoad=function(){clearTimeout(i),n()},Gr(yi(t)).then((function(){ki()&&n()})).Ca((function(t){clearTimeout(i),e.a=null,r(t)}))}))}))},g(Ii),Ci.prototype.confirm=function(e){return Gr(this.a.confirm(e)).Ca(this.g)},Ai.prototype.a=null;function Oi(e){this.s=e,this.a=this.h=this.j=this.g=null}function Pi(e,t){this.name=e,this.value=t}Ai.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,this.h=r||D(),this.j=e,this.s=t,this.g=n,delete this.a},Pi.prototype.toString=function(){return this.name};var Di=new Pi("SEVERE",1e3),Ri=new Pi("WARNING",900),Mi=new Pi("CONFIG",700);function Ni(e){return e.j?e.j:e.g?Ni(e.g):(j("Root logger has no level set."),null)}Oi.prototype.log=function(e,t,n){if(e.value>=Ni(this).value)for(x(t)&&(t=t()),e=new Ai(e,String(t),this.s),n&&(e.a=n),n=this;n;){var r=n,i=e;if(r.a)for(var a=0;t=r.a[a];a++)t(i);n=n.g}};var Li={},ji=null;function Fi(){ji||(ji=new Oi(""),Li[""]=ji,ji.j=Mi)}function zi(){this.a=D()}var Bi=null;function Ui(e){this.j=e||"",Bi||(Bi=new zi),this.s=Bi}function Vi(e){return 10>e?"0"+e:String(e)}function qi(e){Ui.call(this,e)}function Gi(){this.s=C(this.h,this),this.a=new qi,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}zi.prototype.set=function(e){this.a=e},zi.prototype.reset=function(){this.set(D())},zi.prototype.get=function(){return this.a},Ui.prototype.a=!0,Ui.prototype.g=!0,Ui.prototype.h=!1,M(qi,Ui),Gi.prototype.h=function(e){if(!this.j[e.g]){var t=function(e,t){var n=[];if(n.push(e.j," "),e.g){var r=new Date(t.h);n.push("[",Vi(r.getFullYear()-2e3)+Vi(r.getMonth()+1)+Vi(r.getDate())+" "+Vi(r.getHours())+":"+Vi(r.getMinutes())+":"+Vi(r.getSeconds())+"."+Vi(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",function(e,t){t=(e=(e.h-t)/1e3).toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)t=" "+t;return t}(t,e.s.get()),"s] "),n.push("[",t.g,"] "),n.push(t.s),e.h&&(t=t.a)&&n.push("\n",t instanceof Error?t.message:t.toString()),e.a&&n.push("\n"),n.join("")}(this.a,e);if(Hi)!function(e,t,n,r){e[t]?e[t](n,r||""):e.log(n,r||"")}(Hi,function(e){if(e){if(e.value>=Di.value)return"error";if(e.value>=Ri.value)return"warn";if(e.value>=Mi.value)return"log"}return"debug"}(e.j),t,e.a)}};var Ki,Hi=f.console;function Wi(e,t){Ki&&Ki.log(Di,e,t)}Ki=function e(t){var n;if(Fi(),!(n=Li[t])){n=new Oi(t);var r=t.lastIndexOf("."),i=t.substr(r+1);(r=e(t.substr(0,r))).h||(r.h={}),r.h[i]=n,n.g=r,Li[t]=n}return n}("firebaseui");var Zi=new Gi;if(1!=Zi.g){var Xi;Fi(),Xi=ji;var Yi=Zi.s;Xi.a||(Xi.a=[]),Xi.a.push(Yi),Zi.g=!0}function Qi(e){Ki&&Ki.log(Ri,e,void 0)}function $i(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function Ji(e){e=(e.a.cookie||"").split(";");for(var t,n,r=[],i=[],a=0;a<e.length;a++)-1==(t=(n=Q(e[a])).indexOf("="))?(r.push(""),i.push(n)):(r.push(n.substring(0,t)),i.push(n.substring(t+1)));return{keys:r,values:i}}(t=$i.prototype).set=function(e,t,n,r,i,a){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(t))throw Error('Invalid cookie value "'+t+'"');d(n)||(n=-1),i=i?";domain="+i:"",r=r?";path="+r:"",a=a?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(D()+1e3*n).toUTCString(),this.a.cookie=e+"="+t+i+r+n+a},t.get=function(e,t){for(var n,r=e+"=",i=(this.a.cookie||"").split(";"),a=0;a<i.length;a++){if(0==(n=Q(i[a])).lastIndexOf(r,0))return n.substr(r.length);if(n==e)return""}return t},t.ja=function(){return Ji(this).keys},t.la=function(){return Ji(this).values},t.clear=function(){for(var e=Ji(this).keys,t=e.length-1;0<=t;t--){var n=e[t];this.get(n),this.set(n,"",0,void 0,void 0)}};var ea=new $i;function ta(){}function na(e,t,n,r){this.h="undefined"!==typeof e&&null!==e?e:-1,this.g=t||null,this.a=n||null,this.j=!!r}function ra(e,t){this.g=e,this.a=t||null}function ia(e){return{email:e.g,credential:e.a&&e.a.toJSON()}}function aa(e){if(e&&e.email){var t=e.credential&&r.a.auth.AuthCredential.fromJSON(e.credential);return new ra(e.email,t)}return null}function oa(e){this.a=e||null}function sa(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t}function ua(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}function ca(e){for(this.i=e,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(la*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.i[4*e],this.i[4*e+1],this.i[4*e+2],this.i[4*e+3]];var t=Array(4);for(e=this.g;e<la*(this.j+1);e++){if(t[0]=this.a[e-1][0],t[1]=this.a[e-1][1],t[2]=this.a[e-1][2],t[3]=this.a[e-1][3],0==e%this.g){var n=t,r=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=r,ya(t),t[0]^=_a[e/this.g][0],t[1]^=_a[e/this.g][1],t[2]^=_a[e/this.g][2],t[3]^=_a[e/this.g][3]}else 6<this.g&&4==e%this.g&&ya(t);this.a[e]=Array(4),this.a[e][0]=this.a[e-this.g][0]^t[0],this.a[e][1]=this.a[e-this.g][1]^t[1],this.a[e][2]=this.a[e-this.g][2]^t[2],this.a[e][3]=this.a[e-this.g][3]^t[3]}}u(na,ta),na.prototype.set=function(e,t){ea.set(e,t,this.h,this.g,this.a,this.j)},na.prototype.get=function(e){return ea.get(e)||null},na.prototype.ra=function(e){var t=this.g,n=this.a;ea.get(e),ea.set(e,"",0,t,n)},ca.prototype.A=16;var la=ca.prototype.A/4;function ha(e,t){for(var n,r=0;r<la;r++)for(var i=0;4>i;i++)n=t[n=4*i+r],e.h[r][i]=n}function fa(e){for(var t=[],n=0;n<la;n++)for(var r=0;4>r;r++)t[4*r+n]=e.h[n][r];return t}function da(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]^=e.a[4*t+r][n]}function pa(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]=t[e.h[n][r]]}function va(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][n]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][(n+t)%la]}function ma(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][(n+t)%la]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][n]}function ya(e){e[0]=ga[e[0]],e[1]=ga[e[1]],e[2]=ga[e[2]],e[3]=ga[e[3]]}var ga=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ba=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],_a=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],wa=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],xa=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],ka=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],Ea=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Ta=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Sa=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Ia(e,t){e=new ca(Aa(e));for(var n,r=X(t=sa(t),0,16),i="";r.length;){n=16-r.length;for(var a=0;a<n;a++)r.push(0);for(ha(n=e,r),da(n,0),r=1;r<n.j;++r){pa(n,ga),va(n),a=n.h;for(var o=n.s[0],s=0;4>s;s++)o[0]=a[0][s],o[1]=a[1][s],o[2]=a[2][s],o[3]=a[3][s],a[0][s]=wa[o[0]]^xa[o[1]]^o[2]^o[3],a[1][s]=o[0]^wa[o[1]]^xa[o[2]]^o[3],a[2][s]=o[0]^o[1]^wa[o[2]]^xa[o[3]],a[3][s]=xa[o[0]]^o[1]^o[2]^wa[o[3]];da(n,r)}pa(n,ga),va(n),da(n,n.j),i+=ua(fa(n)),r=X(t,0,16)}return i}function Ca(e,t){e=new ca(Aa(e));for(var n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substring(r,r+2),16));var i=X(n,0,16);for(t="";i.length;){for(ha(r=e,i),da(r,r.j),i=1;i<r.j;++i){ma(r),pa(r,ba),da(r,r.j-i);for(var a=r.h,o=r.s[0],s=0;4>s;s++)o[0]=a[0][s],o[1]=a[1][s],o[2]=a[2][s],o[3]=a[3][s],a[0][s]=Sa[o[0]]^Ea[o[1]]^Ta[o[2]]^ka[o[3]],a[1][s]=ka[o[0]]^Sa[o[1]]^Ea[o[2]]^Ta[o[3]],a[2][s]=Ta[o[0]]^ka[o[1]]^Sa[o[2]]^Ea[o[3]],a[3][s]=Ea[o[0]]^Ta[o[1]]^ka[o[2]]^Sa[o[3]]}if(ma(r),pa(r,ba),da(r,0),8192>=(r=fa(r)).length)r=String.fromCharCode.apply(null,r);else{for(i="",a=0;a<r.length;a+=8192)i+=String.fromCharCode.apply(null,Y(r,a,a+8192));r=i}t+=r,i=X(n,0,16)}return t.replace(/(\x00)+$/,"")}function Aa(e){for(var t=32-(e=sa(e.substring(0,32))).length,n=0;n<t;n++)e.push(0);return e}function Oa(e){var t=[];return Da(new Pa,e,t),t.join("")}function Pa(){}function Da(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(_(t)){var r=t;t=r.length,n.push("[");for(var i="",a=0;a<t;a++)n.push(i),Da(e,r[a],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(a=t[r])&&(n.push(i),Na(r,n),n.push(":"),Da(e,a,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":Na(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}var Ra={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ma=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Na(e,t){t.push('"',e.replace(Ma,(function(e){var t=Ra[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Ra[e]=t),t})),'"')}function La(e){this.a=e}function ja(){}function Fa(e){this.a=e}function za(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(t){return!1}}function Ba(){var e=null;try{e=window.localStorage||null}catch(t){}this.a=e}function Ua(){var e=null;try{e=window.sessionStorage||null}catch(t){}this.a=e}function Va(e,t){this.g=e,this.a=t+"::"}La.prototype.set=function(e,t){d(t)?this.a.set(e,Oa(t)):this.a.ra(e)},La.prototype.get=function(e){try{var t=this.a.get(e)}catch(n){return}if(null!==t)try{return JSON.parse(t)}catch(r){throw"Storage: Invalid value was encountered"}},M(ja,ta),ja.prototype.clear=function(){var e=pe(this.ha(!0)),t=this;z(e,(function(e){t.ra(e)}))},M(Fa,ja),(t=Fa.prototype).set=function(e,t){try{this.a.setItem(e,t)}catch(n){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},t.get=function(e){if(!p(e=this.a.getItem(e))&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},t.ra=function(e){this.a.removeItem(e)},t.ha=function(e){var t=0,n=this.a,r=new fe;return r.next=function(){if(t>=n.length)throw he;var r=n.key(t++);if(e)return r;if(!p(r=n.getItem(r)))throw"Storage mechanism: Invalid value was encountered";return r},r},t.clear=function(){this.a.clear()},t.key=function(e){return this.a.key(e)},M(Ba,Fa),M(Ua,Fa),M(Va,ja),Va.prototype.set=function(e,t){this.g.set(this.a+e,t)},Va.prototype.get=function(e){return this.g.get(this.a+e)},Va.prototype.ra=function(e){this.g.ra(this.a+e)},Va.prototype.ha=function(e){var t=this.g.ha(!0),n=this,r=new fe;return r.next=function(){for(var r=t.next();r.substr(0,n.a.length)!=n.a;)r=t.next();return e?r.substr(n.a.length):n.g.get(r)},r},za(new Ba);var qa=new Ua,Ga=new La(za(qa)?new Va(qa,"firebaseui"):null),Ka={name:"pendingEmailCredential",storage:Ga},Ha={name:"redirectStatus",storage:Ga},Wa={name:"redirectUrl",storage:Ga},Za={name:"emailForSignIn",storage:new La(new na(3600,"/"))},Xa={name:"pendingEncryptedCredential",storage:new La(new na(3600,"/"))};function Ya(e,t){return e.storage.get(t?e.name+":"+t:e.name)}function Qa(e,t){e.storage.a.ra(t?e.name+":"+t:e.name)}function $a(e,t,n){e.storage.set(n?e.name+":"+n:e.name,t)}function Ja(e){return Ya(Wa,e)||null}function eo(e){return aa(e=Ya(Ka,e)||null)}function to(e){Qa(Ka,e)}function no(e,t){$a(Ka,ia(e),t)}function ro(e){return(e=Ya(Ha,e)||null)&&"undefined"!==typeof e.tenantId?new oa(e.tenantId):null}function io(){this.W={}}function ao(e,t,n){if(t.toLowerCase()in e.W)throw Error("Configuration "+t+" has already been defined.");e.W[t.toLowerCase()]=n}function oo(e,t,n){if(!(t.toLowerCase()in e.W))throw Error("Configuration "+t+" is not defined.");e.W[t.toLowerCase()]=n}function so(e,t){if(!(e=e.get(t)))throw Error("Configuration "+t+" is required.");return e}function uo(){this.g=void 0,this.a={}}function co(e,t,n,r){for(var i=0;i<t.length;i++){var a=t.charAt(i);e.a[a]||(e.a[a]=new uo),e=e.a[a]}if(r&&void 0!==e.g)throw Error('The collection already contains the key "'+t+'"');e.g=n}function lo(e,t){for(var n in void 0!==e.g&&t.push(e.g),e.a)lo(e.a[n],t)}function ho(e,t,n){for(var r in void 0!==e.g&&n.push(t),e.a)ho(e.a[r],t+r,n)}function fo(e){for(this.a=e,this.g=new uo,e=0;e<this.a.length;e++){var t=this.g.get("+"+this.a[e].b);t?t.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function po(e,t){var n={},r=0;for(void 0!==(e=e.g).g&&(n[r]=e.g);r<t.length;r++){var i=t.charAt(r);if(!(i in e.a))break;void 0!==(e=e.a[i]).g&&(n[r]=e.g)}for(var a in n)if(n.hasOwnProperty(a))return n[a];return[]}function vo(e){for(var t=0;t<bo.length;t++)if(bo[t].c===e)return bo[t];return null}function mo(e){e=e.toUpperCase();for(var t=[],n=0;n<bo.length;n++)bo[n].f===e&&t.push(bo[n]);return t}function yo(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var t=[],n=0;n<bo.length;n++)bo[n].b==e&&t.push(bo[n]);e=t}else e=mo(e);return e}function go(e){e.sort((function(e,t){return e.name.localeCompare(t.name,"en")}))}io.prototype.get=function(e){if(!(e.toLowerCase()in this.W))throw Error("Configuration "+e+" is not defined.");return this.W[e.toLowerCase()]},(t=uo.prototype).set=function(e,t){co(this,e,t,!1)},t.add=function(e,t){co(this,e,t,!0)},t.get=function(e){e:{for(var t=this,n=0;n<e.length;n++)if(!(t=t.a[e.charAt(n)])){e=void 0;break e}e=t}return e?e.g:void 0},t.la=function(){var e=[];return lo(this,e),e},t.ja=function(){var e=[];return ho(this,"",e),e},t.clear=function(){this.a={},this.g=void 0};var bo=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"\xc5land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"C\xf4te d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Cura\xe7ao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"R\xe9union",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barth\xe9lemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"S\xe3o Tom\xe9 and Pr\xedncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];go(bo);var _o=new fo(bo);function wo(e,t){this.a=e,this.Aa=t}function xo(e){e=Q(e);var t=po(_o,e);return 0<t.length?new wo("1"==t[0].b?"1-US-0":t[0].c,Q(e.substr(t[0].b.length+1))):null}function ko(e){var t=vo(e.a);if(!t)throw Error("Country ID "+e.a+" not found.");return"+"+t.b+e.Aa}function Eo(e,t){for(var n=0;n<e.length;n++)if(!q(To,e[n])&&(null!==So&&e[n]in So||q(t,e[n])))return e[n];return null}var To=["emailLink","password","phone"],So={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function Io(){this.a=new io,ao(this.a,"acUiConfig"),ao(this.a,"autoUpgradeAnonymousUsers"),ao(this.a,"callbacks"),ao(this.a,"credentialHelper",ts),ao(this.a,"immediateFederatedRedirect",!1),ao(this.a,"popupMode",!1),ao(this.a,"privacyPolicyUrl"),ao(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),ao(this.a,"queryParameterForWidgetMode","mode"),ao(this.a,"signInFlow"),ao(this.a,"signInOptions"),ao(this.a,"signInSuccessUrl"),ao(this.a,"siteName"),ao(this.a,"tosUrl"),ao(this.a,"widgetUrl")}function Co(e){var t=!!e.a.get("autoUpgradeAnonymousUsers");return t&&!Wo(e)&&Wi('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),t}function Ao(e){e=e.a.get("signInOptions")||[];for(var t=[],n=0;n<e.length;n++){var r=e[n];(r=k(r)?r:{provider:r}).provider&&t.push(r)}return t}function Oo(e,t){e=Ao(e);for(var n=0;n<e.length;n++)if(e[n].provider===t)return e[n];return null}function Po(e){return U(Ao(e),(function(e){return e.provider}))}function Do(e,t){e=Ro(e);for(var n=0;n<e.length;n++)if(e[n].providerId===t)return e[n];return null}function Ro(e){return U(Ao(e),(function(e){if(So[e.provider]||q(os,e.provider)){for(var t in e={providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?xt(Et(e.iconUrl)).toString():null})null===e[t]&&delete e[t];return e}return{providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?xt(Et(e.iconUrl)).toString():null,Ob:e.loginHintKey||null}}))}function Mo(e){var t=Oo(e,r.a.auth.GoogleAuthProvider.PROVIDER_ID);return t&&t.clientId&&function(e){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return ts;if((e=e.a.get("credentialHelper"))===Jo)return ts;for(var t in ns)if(ns[t]===e)return ns[t];return ts}(e)===es&&t.clientId||null}function No(e,t){return e=(e=Oo(e,t))&&e.scopes,Array.isArray(e)?e:[]}function Lo(e,t){return k(e=(e=Oo(e,t))&&e.customParameters)?(e=ue(e),t===r.a.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,t===r.a.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function jo(e){if(!(e=Oo(e,r.a.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var t=e.whitelistedCountries,n=e.blacklistedCountries;if("undefined"!==typeof t&&(!Array.isArray(t)||0==t.length))throw Error("WhitelistedCountries must be a non-empty array.");if("undefined"!==typeof n&&!Array.isArray(n))throw Error("BlacklistedCountries must be an array.");if(t&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!t&&!n)return bo;if(e=[],t){n={};for(var i=0;i<t.length;i++)for(var a=yo(t[i]),o=0;o<a.length;o++)n[a[o].c]=a[o];for(var s in n)n.hasOwnProperty(s)&&e.push(n[s])}else{for(s={},t=0;t<n.length;t++)for(a=yo(n[t]),i=0;i<a.length;i++)s[a[i].c]=a[i];for(a=0;a<bo.length;a++)null!==s&&bo[a].c in s||e.push(bo[a])}return e}function Fo(e){return so(e.a,"queryParameterForWidgetMode")}function zo(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&Qi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"===typeof t)return t;if("string"===typeof t)return function(){ii(t)}}return null}function Bo(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&Qi("Term of Service URL is missing, the link will not be displayed."),t&&n){if("function"===typeof n)return n;if("string"===typeof n)return function(){ii(n)}}return null}function Uo(e){return!(e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))||"undefined"===typeof e.requireDisplayName||!!e.requireDisplayName}function Vo(e){return!(!(e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))||e.signInMethod!==r.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function qo(e){var t=!!e.a.get("immediateFederatedRedirect"),n=Po(e);return e=Go(e),t&&1==n.length&&!q(To,n[0])&&e==rs}function Go(e){for(var t in e=e.a.get("signInFlow"),is)if(is[t]==e)return is[t];return rs}function Ko(e){return Zo(e).signInSuccess||null}function Ho(e){return Zo(e).signInSuccessWithAuthResult||null}function Wo(e){return Zo(e).signInFailure||null}function Zo(e){return e.a.get("callbacks")||{}}var Xo,Yo,Qo,$o,Jo="accountchooser.com",es="googleyolo",ts="none",ns={kc:Jo,nc:es,NONE:ts},rs="redirect",is={qc:"popup",rc:rs},as={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},os=["anonymous"],ss=["sitekey","tabindex","callback","expired-callback"],us={};function cs(e,t,n,r){us[e].apply(null,Array.prototype.slice.call(arguments,1))}function ls(e){return e.classList?e.classList:p(e=e.className)&&e.match(/\S+/g)||[]}function hs(e,t){return e.classList?e.classList.contains(t):q(ls(e),t)}function fs(e,t){e.classList?e.classList.add(t):hs(e,t)||(e.className+=0<e.className.length?" "+t:t)}function ds(e,t){e.classList?e.classList.remove(t):hs(e,t)&&(e.className=B(ls(e),(function(e){return e!=t})).join(" "))}function ps(e){var t=e.type;switch(p(t)&&t.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return 0<=(t=e.selectedIndex)?e.options[t].value:null;case"select-multiple":t=[];for(var n,r=0;n=e.options[r];r++)n.selected&&t.push(n.value);return t.length?t:null;default:return null!=e.value?e.value:null}}function vs(e,t){var n=e.type;switch(p(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=t;break;case"select-one":if(e.selectedIndex=-1,p(t))for(var r=0;n=e.options[r];r++)if(n.value==t){n.selected=!0;break}break;case"select-multiple":for(p(t)&&(t=[t]),r=0;n=e.options[r];r++)if(n.selected=!1,t)for(var i,a=0;i=t[a];a++)n.value==i&&(n.selected=!0);break;default:e.value=null!=t?t:""}}function ms(e,t,n,r,i,a){if(it&&!dt("525"))return!0;if(ot&&i)return ys(e);if(i&&!r)return!1;if(!rt&&("number"==typeof t&&(t=gs(t)),(!n||ot)&&(17==t||18==t||ot&&91==t)||ot&&16==t&&(r||a)))return!1;if((it||tt)&&r&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(et&&r&&t==e)return!1;switch(e){case 13:return!rt||!a&&!i&&!(n&&r);case 27:return!(it||tt||rt)}return(!rt||!(r||i||a))&&ys(e)}function ys(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(it||tt)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return rt;default:return!1}}function gs(e){if(rt)e=function(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}(e);else if(ot&&it)switch(e){case 93:e=91}return e}function bs(e){pr.call(this),this.a=e,nr(e,"keydown",this.g,!1,this),nr(e,"click",this.h,!1,this)}function _s(e,t){var n=new xs(t);if(vr(e,n)){n=new ws(t);try{vr(e,n)}finally{t.stopPropagation()}}}function ws(e){Kn.call(this,e.a),this.type="action"}function xs(e){Kn.call(this,e.a),this.type="beforeaction"}function ks(e){pr.call(this),this.a=e,e=et?"focusout":"blur",this.g=nr(this.a,et?"focusin":"focus",this,!et),this.h=nr(this.a,e,this,!et)}function Es(e,t){pr.call(this),this.g=e||1,this.a=t||f,this.h=C(this.gc,this),this.j=D()}function Ts(e){e.Ka=!1,e.aa&&(e.a.clearTimeout(e.aa),e.aa=null)}function Ss(e){Nn.call(this),this.g=e,this.a={}}M(bs,pr),bs.prototype.g=function(e){(13==e.keyCode||it&&3==e.keyCode)&&_s(this,e)},bs.prototype.h=function(e){_s(this,e)},bs.prototype.m=function(){bs.K.m.call(this),ar(this.a,"keydown",this.g,!1,this),ar(this.a,"click",this.h,!1,this),delete this.a},M(ws,Kn),M(xs,Kn),M(ks,pr),ks.prototype.handleEvent=function(e){var t=new Kn(e.a);t.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",vr(this,t)},ks.prototype.m=function(){ks.K.m.call(this),or(this.g),or(this.h),delete this.a},M(Es,pr),(t=Es.prototype).Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var e=D()-this.j;0<e&&e<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-e):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),vr(this,"tick"),this.Ka&&(Ts(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=D())},t.m=function(){Es.K.m.call(this),Ts(this),delete this.a},M(Ss,Nn);var Is=[];function Cs(e,t,n,r){_(n)||(n&&(Is[0]=n.toString()),n=Is);for(var i=0;i<n.length;i++){var a=nr(t,n[i],r||e.handleEvent,!1,e.g||e);if(!a)break;e.a[a.key]=a}}function As(e){se(e.a,(function(e,t){this.a.hasOwnProperty(t)&&or(e)}),e),e.a={}}function Os(e){pr.call(this),this.a=null,this.g=e,e=et||tt||it&&!dt("531")&&"TEXTAREA"==e.tagName,this.h=new Ss(this),Cs(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function Ps(e){null!=e.a&&(f.clearTimeout(e.a),e.a=null)}function Ds(e){return(e=new Kn(e.a)).type="input",e}function Rs(e,t){pr.call(this),e&&(this.Oa&&Fs(this),this.qa=e,this.Na=nr(this.qa,"keypress",this,t),this.Ya=nr(this.qa,"keydown",this.Jb,t,this),this.Oa=nr(this.qa,"keyup",this.Kb,t,this))}Ss.prototype.m=function(){Ss.K.m.call(this),As(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},M(Os,pr),Os.prototype.handleEvent=function(e){if("input"==e.type)et&&dt(10)&&0==e.keyCode&&0==e.j||(Ps(this),vr(this,Ds(e)));else if("keydown"!=e.type||function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(ys(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!rt;default:return 166>e.keyCode||183<e.keyCode}}(e)){var t="keydown"==e.type?this.g.value:null;et&&229==e.keyCode&&(t=null);var n=Ds(e);Ps(this),this.a=function(e,t){if(x(e))t&&(e=C(e,t));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=C(e.handleEvent,e)}return 2147483647<Number(0)?-1:f.setTimeout(e,0)}((function(){this.a=null,this.g.value!=t&&vr(this,n)}),this)}},Os.prototype.m=function(){Os.K.m.call(this),this.h.o(),Ps(this),delete this.g},M(Rs,pr),(t=Rs.prototype).qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var Ms={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ns={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Ls=!it||dt("525"),js=ot&&rt;function Fs(e){e.Na&&(or(e.Na),or(e.Ya),or(e.Oa),e.Na=null,e.Ya=null,e.Oa=null),e.qa=null,e.R=-1,e.X=-1}function zs(e,t,n,r){Kn.call(this,r),this.type="key",this.keyCode=e,this.j=t,this.repeat=n}function Bs(e,t,n,r){this.top=e,this.right=t,this.bottom=n,this.left=r}function Us(e,t){var n=Ht(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""}function Vs(e){try{var t=e.getBoundingClientRect()}catch(n){return{left:0,top:0,right:0,bottom:0}}return et&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function qs(e){var t=Ht(e),n=new jt(0,0),r=t?Ht(t):document;return e==(r=!et||9<=Number(ht)||"CSS1Compat"==zt(r).a.compatMode?r.documentElement:r.body)||(e=Vs(e),t=Gt(r=zt(t).a),r=r.parentWindow||r.defaultView,t=et&&dt("10")&&r.pageYOffset!=t.scrollTop?new jt(t.scrollLeft,t.scrollTop):new jt(r.pageXOffset||t.scrollLeft,r.pageYOffset||t.scrollTop),n.a=e.left+t.a,n.g=e.top+t.g),n}(t=Rs.prototype).Jb=function(e){(it||tt)&&(17==this.R&&!e.ctrlKey||18==this.R&&!e.altKey||ot&&91==this.R&&!e.metaKey)&&(this.X=this.R=-1),-1==this.R&&(e.ctrlKey&&17!=e.keyCode?this.R=17:e.altKey&&18!=e.keyCode?this.R=18:e.metaKey&&91!=e.keyCode&&(this.R=91)),Ls&&!ms(e.keyCode,this.R,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.X=gs(e.keyCode),js&&(this.Ua=e.altKey))},t.Kb=function(e){this.X=this.R=-1,this.Ua=e.altKey},t.handleEvent=function(e){var t=e.a,n=t.altKey;if(et&&"keypress"==e.type)var r=this.X,i=13!=r&&27!=r?t.keyCode:0;else(it||tt)&&"keypress"==e.type?(r=this.X,i=0<=t.charCode&&63232>t.charCode&&ys(r)?t.charCode:0):Je&&!it?i=ys(r=this.X)?t.keyCode:0:("keypress"==e.type?(js&&(n=this.Ua),t.keyCode==t.charCode?32>t.keyCode?(r=t.keyCode,i=0):(r=this.X,i=t.charCode):(r=t.keyCode||this.X,i=t.charCode||0)):(r=t.keyCode||this.X,i=t.charCode||0),ot&&63==i&&224==r&&(r=191));var a=r=gs(r);r?63232<=r&&r in Ms?a=Ms[r]:25==r&&e.shiftKey&&(a=9):t.keyIdentifier&&t.keyIdentifier in Ns&&(a=Ns[t.keyIdentifier]),rt&&Ls&&"keypress"==e.type&&!ms(a,this.R,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=a==this.R,this.R=a,(t=new zs(a,i,e,t)).altKey=n,vr(this,t))},t.N=function(){return this.qa},t.m=function(){Rs.K.m.call(this),Fs(this)},M(zs,Kn),Bs.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Bs.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Bs.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Bs.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Gs={thin:2,medium:4,thick:6};function Ks(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:null;if(n in Gs)e=Gs[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{t=e.style.left;var r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=t,e.runtimeStyle.left=r,e=+n}return e}function Hs(){}function Ws(e){pr.call(this),this.s=e||zt(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function Zs(e,t){return e.g?Ut(t,e.g||e.s.a):null}function Xs(e){return e.L||(e.L=new Ss(e)),e.L}function Ys(e,t){e.Ea&&z(e.Ea,t,void 0)}function Qs(e,t){var n=Zt(e,"firebaseui-textfield");t?(ds(e,"firebaseui-input-invalid"),fs(e,"firebaseui-input"),n&&ds(n,"firebaseui-textfield-invalid")):(ds(e,"firebaseui-input"),fs(e,"firebaseui-input-invalid"),n&&fs(n,"firebaseui-textfield-invalid"))}function $s(e,t,n){Fn(e,A(zn,t=new Os(t))),Cs(Xs(e),t,"input",n)}function Js(e,t,n){Fn(e,A(zn,t=new Rs(t))),Cs(Xs(e),t,"key",(function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))}))}function eu(e,t,n){Fn(e,A(zn,t=new bs(t))),Cs(Xs(e),t,"action",(function(e){e.stopPropagation(),e.preventDefault(),n(e)}))}function tu(e){fs(e,"firebaseui-hidden")}function nu(e,t){t&&Wt(e,t),ds(e,"firebaseui-hidden")}function ru(e){return!hs(e,"firebaseui-hidden")&&"none"!=e.style.display}function iu(e){var t=(e=e||{}).email,n=e.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return r=e.wc?r+"Enter new email address":r+"Email",r+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+pn(null!=t?t:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ln(r)}function au(e){var t='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return t=(e=(e=e||{}).label)?t+on(e):t+"Next",ln(t+"</button>")}function ou(){var e=""+au({label:fn("Sign In")});return ln(e)}function su(){var e=""+au({label:fn("Save")});return ln(e)}function uu(){var e=""+au({label:fn("Continue")});return ln(e)}function cu(e){var t='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return t=(e=(e=e||{}).label)?t+on(e):t+"Choose password",ln(t+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function lu(){var e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return ln((e={}.current?e+"Current password":e+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function hu(){return ln('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function fu(e){var t='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return t=(e=(e=e||{}).label)?t+on(e):t+"Cancel",ln(t+"</button>")}function du(e){var t="";return e.F&&e.D&&(t+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ln(t)}function pu(e){var t="";return e.F&&e.D&&(t+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ln(t)}function vu(e){return e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+on(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ln(e)}function mu(e){var t=e.content;return e=e.Ab,ln('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(e?" "+pn(e):"")+'">'+on(t)+"</dialog>")}function yu(e){var t=e.message;return ln(mu({content:dn('<div class="firebaseui-dialog-icon-wrapper"><div class="'+pn(e.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+on(t)+"</div>")}))}function gu(e){for(var t='<div class="firebaseui-list-box-actions">',n=(e=e.items).length,r=0;r<n;r++){var i=e[r];t+='<button type="button" data-listboxid="'+pn(i.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(i.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+pn(i.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+on(i.label)+"</div></button>"}return t=""+mu({Ab:fn("firebaseui-list-box-dialog"),content:dn(t+"</div>")}),ln(t)}function bu(e){return ln((e=e||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function _u(e,t){return cn((e=(e=e||{}).ga).S?e.S:t.hb[e.providerId]?""+t.hb[e.providerId]:e.providerId&&0==e.providerId.indexOf("saml.")||e.providerId&&0==e.providerId.indexOf("oidc.")?e.providerId.substring(5):""+e.providerId)}function wu(e){Eu(e,"upgradeElement")}function xu(e){Eu(e,"downgradeElements")}g(Hs),Hs.prototype.a=0,M(Ws,pr),(t=Ws.prototype).Lb=Hs.Xa(),t.N=function(){return this.g},t.Za=function(e){if(this.Y&&this.Y!=e)throw Error("Method not supported");Ws.K.Za.call(this,e)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(e){if(this.na)throw Error("Component already rendered");this.g||this.kb(),e?e.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,Ys(this,(function(e){!e.na&&e.N()&&e.v()}))},t.ya=function(){Ys(this,(function(e){e.na&&e.ya()})),this.L&&As(this.L),this.na=!1},t.m=function(){this.na&&this.ya(),this.L&&(this.L.o(),delete this.L),Ys(this,(function(e){e.o()})),this.g&&Kt(this.g),this.Y=this.g=this.oa=this.Ea=null,Ws.K.m.call(this)},t.removeChild=function(e,t){if(e){var n=p(e)?e:e.cb||(e.cb=":"+(e.Lb.a++).toString(36));if(this.oa&&n?e=(null!==(e=this.oa)&&n in e?e[n]:void 0)||null:e=null,n&&e){var r=this.oa;if(n in r&&delete r[n],G(this.Ea,e),t&&(e.ya(),e.g&&Kt(e.g)),null==(t=e))throw Error("Unable to set parent component");t.Y=null,Ws.K.Za.call(t,null)}}if(!e)throw Error("Child is not in parent component");return e},vu.a="firebaseui.auth.soy2.element.infoBar",yu.a="firebaseui.auth.soy2.element.progressDialog",gu.a="firebaseui.auth.soy2.element.listBoxDialog",bu.a="firebaseui.auth.soy2.element.busyIndicator";var ku=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function Eu(e,t){e&&window.componentHandler&&window.componentHandler[t]&&z(ku,(function(n){hs(e,n)&&window.componentHandler[t](e),z(Bt(n,e),(function(e){window.componentHandler[t](e)}))}))}function Tu(e,t,n){if(Su.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),wu(e),t&&eu(this,e,(function(t){var n=e.getBoundingClientRect();(t.clientX<n.left||n.left+n.width<t.clientX||t.clientY<n.top||n.top+n.height<t.clientY)&&Su.call(this)})),!n){var r=this.N().parentElement||this.N().parentNode;if(r){var i=this;this.da=function(){if(e.open){var t=e.getBoundingClientRect().height,n=r.getBoundingClientRect().height,a=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,o=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=e.getBoundingClientRect().width,u=r.getBoundingClientRect().width;e.style.top=(a+(n-t)/2).toString()+"px",t=o+(u-s)/2,e.style.left=t.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-t-s).toString()+"px"}else window.removeEventListener("resize",i.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Su(){var e=Iu.call(this);e&&(xu(e),e.open&&e.close(),Kt(e),this.da&&window.removeEventListener("resize",this.da))}function Iu(){return Ut("firebaseui-id-dialog")}function Cu(){Kt(Au.call(this))}function Au(){return Zs(this,"firebaseui-id-info-bar")}function Ou(){return Zs(this,"firebaseui-id-dismiss-info-bar")}var Pu={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Du(e,t,n){for(var r in Gn.call(this,e,t),n)this[r]=n[r]}function Ru(e,t,n,r,i){Ws.call(this,n),this.fb=e,this.eb=t,this.Fa=!1,this.Ga=r||null,this.A=this.ca=null,this.Z=ue(Pu),le(this.Z,i||{})}function Mu(e){return e.N().parentElement||e.N().parentNode}function Nu(e,t,n){Js(e,t,(function(){n.focus()}))}function Lu(e,t,n){Js(e,t,(function(){n()}))}function ju(e,t,n){t=(e=e||{}).Va;var r=e.ia;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+iu(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?fu(null):"")+au(null)+'</div></div><div class="firebaseui-card-footer">'+(r?pu(n):du(n))+"</div></form></div>",ln(e)}function Fu(e,t,n){return t=(e=e||{}).ia,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+iu(e)+lu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+hu()+'</div><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+(t?pu(n):du(n))+"</div></form></div>",ln(e)}function zu(e,t,n){var r=(e=e||{}).Tb;t=e.Ta;var i=e.ia,a='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+iu(e);return r?(e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+pn(null!=(e=(e=e||{}).name)?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',e=ln(e)):e="",n=a+e+cu(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?fu(null):"")+su()+'</div></div><div class="firebaseui-card-footer">'+(i?pu(n):du(n))+"</div></form></div>",ln(n)}function Bu(e,t,n){return t=(e=e||{}).Ta,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+iu(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?fu(null):"")+au({label:fn("Send")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(e)}function Uu(e,t,n){t=e.G;var r="";return r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Follow the instructions sent to <strong>"+on(e.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',t&&(r+='<div class="firebaseui-form-actions">'+au({label:fn("Done")})+"</div>"),r+='</div><div class="firebaseui-card-footer">'+du(n)+"</div></div>",ln(r)}function Vu(e,t,n){return ln('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+bu(null)+"</div></div>")}function qu(e,t,n){return ln('<div class="firebaseui-container firebaseui-id-page-spinner">'+bu({tb:!0})+"</div>")}function Gu(){return ln('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Ku(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(e="A sign-in email with additional instructions was sent to <strong>"+on(e.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ln('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+fu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function Hu(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ln('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+fu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(e)}function Wu(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+iu(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au(null)+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(e)}function Zu(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu({label:fn("Dismiss")})+"</div></div></div>";return ln(e)}function Xu(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu({label:fn("Dismiss")})+"</div></div></div>";return ln(e)}function Yu(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(e="You\u2019ve already used <strong>"+on(e.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+lu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+hu()+'</div><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function Qu(e,t,n){var r=e.email;return t="",e=fn(e=""+_u(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(r="You\u2019ve already used <strong>"+on(r)+"</strong>. You can connect your <strong>"+on(e)+"</strong> account with <strong>"+on(r)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(e="For this flow to successfully connect your "+on(e)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function $u(e,t,n){t="";var r=""+_u(e,n);return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(e="You originally intended to connect <strong>"+on(r=fn(r))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(r="If you still want to connect your <strong>"+on(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+uu()+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function Ju(e,t,n){var r=e.email;return t="",e=fn(e=""+_u(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(r="You\u2019ve already used <strong>"+on(r)+"</strong>. Sign in with "+on(e)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+au({label:fn("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function ec(e,t,n){var r=(e=e||{}).email;t=e.yb,e=e.Eb;var i='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return r?i+=r="<strong>"+on(r)+"</strong> is not authorized to view the requested page.":i+="User is not authorized to view the requested page.",i+="</p>",t&&(i+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(t="Please contact <strong>"+on(t)+"</strong> for authorization.")+"</p>"),i+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',e&&(i+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),i+='</div><div class="firebaseui-form-actions">'+fu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(i)}function tc(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="To continue sign in with <strong>"+on(e.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au({label:fn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function nc(e){var t="";return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+on(e.email)+"</strong></p>")+cu(function(e){function t(){}var n={label:fn("New password")};for(var r in t.prototype=e,e=new t,n)e[r]=n[r];return e}(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+su()+"</div></div></form></div>",ln(t)}function rc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function ic(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function ac(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Your sign-in email address has been changed back to <strong>"+on(e.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn\u2019t ask to change your sign-in email, it\u2019s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></form></div>",ln(n)}function oc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can\u2019t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function sc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function uc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function cc(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="You can now sign in with your new email <strong>"+on(e.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(n)}function lc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function hc(e){var t=e.factorId,n=e.phoneNumber;e=e.G;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(t){case"phone":r+=t="The <strong>"+on(t)+" "+on(n)+"</strong> was removed as a second authentication step.";break;default:r+="The device or app was removed as a second authentication step."}return r+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></form></div>",ln(r)}function fc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+uu()+"</div>":"")+"</div></div>",ln(e)}function dc(e){var t=e.zb;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+on(e.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',t&&(e+=au({label:fn("Retry")})),ln(e+"</div></div></div>")}function pc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+on(e.errorMessage)+"</p></div></div>",ln(e)}function vc(e,t,n){var r=e.Qb;return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(e="Continue with "+on(e.jc)+"?")+'</h2><p class="firebaseui-text">'+(r="You originally wanted to sign in with "+on(r))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au({label:fn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function mc(e,t,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';t=(e=e.Sb).length;for(var i=0;i<t;i++){var a={ga:e[i]},o=n,s=(a=a||{}).ga,u=a,c="";switch((u=u||{}).ga.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}u=(u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+pn(cn(c))+' firebaseui-id-idp-button" data-provider-id="'+pn(s.providerId)+'" style="background-color:')+pn(mn(cn((c=(c=(c=a)||{}).ga).ta?c.ta:o.wa[c.providerId]?""+o.wa[c.providerId]:0==c.providerId.indexOf("saml.")?""+o.wa.saml:0==c.providerId.indexOf("oidc.")?""+o.wa.oidc:""+o.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var l=a;c=o,l=(l=l||{}).ga,c=hn(l.za?vn(l.za):c.xa[l.providerId]?vn(c.xa[l.providerId]):0==l.providerId.indexOf("saml.")?vn(c.xa.saml):0==l.providerId.indexOf("oidc.")?vn(c.xa.oidc):vn(c.xa.password)),u=u+pn(vn(c))+'"></span>',"password"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):s.S?u+=a="Sign in with "+on(_u(a,o)):u+="Sign in with email",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+on(s.S):u+"Email",u+="</span>"):"phone"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):s.S?u+=a="Sign in with "+on(_u(a,o)):u+="Sign in with phone",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+on(s.S):u+"Phone",u+="</span>"):"anonymous"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):s.S?u+=a="Sign in with "+on(_u(a,o)):u+="Continue as guest",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+on(s.S):u+"Guest",u+="</span>"):(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=on(s.V):u+=c="Sign in with "+on(_u(a,o)),u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(s.S?on(s.S):on(_u(a,o)))+"</span>"),r+='<li class="firebaseui-list-item">'+(s=ln(u+"</button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+pu(n)+"</div></div>",ln(r)}function yc(e,t,n){var r,i=(e=e||{}).Gb,a=e.Va;return t=e.ia,e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+pn(null!=(e=(e=e||{}).Aa)?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r=(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ln(e))+(r=i?ln('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(a?fu(null):"")+au({label:fn("Verify")})+'</div></div><div class="firebaseui-card-footer">',t?(t='<p class="firebaseui-tos firebaseui-phone-tos">',t=n.F&&n.D?t+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':t+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=ln(t+"</p>")):n=ln('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+du(n),ln(r+n+"</div></form></div>")}function gc(e,t,n){var r="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+on(t=(e=e||{}).phoneNumber)+"</a>",on(t),t=r,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+(r=ln('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+fu(null)+au({label:fn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form>",e=ln('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ln(t+(n+e+"</div>"))}function bc(){return ln('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function _c(e,t,n){var r='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';t=(e=e.ec).length;for(var i=0;i<t;i++){var a=e[i],o="",s=on(a.displayName),u=a.tenantId?a.tenantId:"top-level-project";o+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+pn(u=fn(u))+' firebaseui-id-tenant-selection-button"'+(a.tenantId?'data-tenant-id="'+pn(a.tenantId)+'"':"")+'style="background-color:'+pn(mn(a.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+pn(vn(a.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?o+=on(a.V):o+=a="Sign in to "+on(a.displayName),r+='<li class="firebaseui-list-item">'+(o=ln(o+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+s+"</span></button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+pu(n)+"</div></div>",ln(r)}function wc(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+iu(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+au(null)+'</div></div><div class="firebaseui-card-footer">'+pu(n)+"</div></form></div>",ln(e)}function xc(){return Zs(this,"firebaseui-id-submit")}function kc(){return Zs(this,"firebaseui-id-secondary-link")}function Ec(e,t){eu(this,xc.call(this),(function(t){e(t)}));var n=kc.call(this);n&&t&&eu(this,n,(function(e){t(e)}))}function Tc(){return Zs(this,"firebaseui-id-password")}function Sc(){return Zs(this,"firebaseui-id-password-error")}function Ic(){var e=Tc.call(this),t=Sc.call(this);$s(this,e,(function(){ru(t)&&(Qs(e,!0),tu(t))}))}function Cc(){var e=Tc.call(this),t=Sc.call(this);return ps(e)?(Qs(e,!0),tu(t),t=!0):(Qs(e,!1),nu(t,cn("Enter your password").toString()),t=!1),t?ps(e):null}function Ac(e,t,n,r,i,a){Ru.call(this,Yu,{email:e},a,"passwordLinking",{F:r,D:i}),this.w=t,this.H=n}M(Du,Gn),M(Ru,Ws),(t=Ru.prototype).kb=function(){var e=tn(this.fb,this.eb,this.Z,this.s);wu(e),this.g=e},t.v=function(){if(Ru.K.v.call(this),br(Mu(this),new Du("pageEnter",Mu(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var e=this.Z.F;eu(this,this.bb(),(function(){e()}))}if(this.ab()&&this.Z.D){var t=this.Z.D;eu(this,this.ab(),(function(){t()}))}},t.ya=function(){br(Mu(this),new Du("pageExit",Mu(this),{pageId:this.Ga})),Ru.K.ya.call(this)},t.m=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,xu(this.N()),Ru.K.m.call(this)},t.I=function(e,t,n,r){function i(){if(a.T)return null;a.Fa=!1,window.clearTimeout(a.ca),a.ca=null,a.A&&(xu(a.A),Kt(a.A),a.A=null)}var a=this;return a.Fa?null:(function(e){e.Fa=!0;var t=hs(e.N(),"firebaseui-use-spinner");e.ca=window.setTimeout((function(){e.N()&&null===e.A&&(e.A=tn(bu,{tb:t},null,e.s),e.N().appendChild(e.A),wu(e.A))}),500)}(a),e.apply(null,t).then(n,r).then(i,i))},O(Ru.prototype,{a:function(e){Cu.call(this);var t=tn(vu,{message:e},null,this.s);this.N().appendChild(t),eu(this,Ou.call(this),(function(){Kt(t)}))},yc:Cu,Ac:Au,zc:Ou,$:function(e,t){e=tn(yu,{Ma:e,message:t},null,this.s),Tu.call(this,e)},h:Su,Cb:Iu,Cc:function(){return Zs(this,"firebaseui-tos")},bb:function(){return Zs(this,"firebaseui-tos-link")},ab:function(){return Zs(this,"firebaseui-pp-link")},Dc:function(){return Zs(this,"firebaseui-tos-list")}}),ju.a="firebaseui.auth.soy2.page.signIn",Fu.a="firebaseui.auth.soy2.page.passwordSignIn",zu.a="firebaseui.auth.soy2.page.passwordSignUp",Bu.a="firebaseui.auth.soy2.page.passwordRecovery",Uu.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",Vu.a="firebaseui.auth.soy2.page.callback",qu.a="firebaseui.auth.soy2.page.spinner",Gu.a="firebaseui.auth.soy2.page.blank",Ku.a="firebaseui.auth.soy2.page.emailLinkSignInSent",Hu.a="firebaseui.auth.soy2.page.emailNotReceived",Wu.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Zu.a="firebaseui.auth.soy2.page.differentDeviceError",Xu.a="firebaseui.auth.soy2.page.anonymousUserMismatch",Yu.a="firebaseui.auth.soy2.page.passwordLinking",Qu.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",$u.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Ju.a="firebaseui.auth.soy2.page.federatedLinking",ec.a="firebaseui.auth.soy2.page.unauthorizedUser",tc.a="firebaseui.auth.soy2.page.unsupportedProvider",nc.a="firebaseui.auth.soy2.page.passwordReset",rc.a="firebaseui.auth.soy2.page.passwordResetSuccess",ic.a="firebaseui.auth.soy2.page.passwordResetFailure",ac.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",oc.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",sc.a="firebaseui.auth.soy2.page.emailVerificationSuccess",uc.a="firebaseui.auth.soy2.page.emailVerificationFailure",cc.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",lc.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",hc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",fc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",dc.a="firebaseui.auth.soy2.page.recoverableError",pc.a="firebaseui.auth.soy2.page.unrecoverableError",vc.a="firebaseui.auth.soy2.page.emailMismatch",mc.a="firebaseui.auth.soy2.page.providerSignIn",yc.a="firebaseui.auth.soy2.page.phoneSignInStart",gc.a="firebaseui.auth.soy2.page.phoneSignInFinish",bc.a="firebaseui.auth.soy2.page.signOut",_c.a="firebaseui.auth.soy2.page.selectTenant",wc.a="firebaseui.auth.soy2.page.providerMatchByEmail",u(Ac,Ru),Ac.prototype.v=function(){this.P(),this.M(this.w,this.H),Lu(this,this.i(),this.w),this.i().focus(),Ru.prototype.v.call(this)},Ac.prototype.m=function(){this.w=null,Ru.prototype.m.call(this)},Ac.prototype.j=function(){return ps(Zs(this,"firebaseui-id-email"))},O(Ac.prototype,{i:Tc,B:Sc,P:Ic,u:Cc,ea:xc,ba:kc,M:Ec});var Oc=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Pc(){return Zs(this,"firebaseui-id-email")}function Dc(){return Zs(this,"firebaseui-id-email-error")}function Rc(e){var t=Pc.call(this),n=Dc.call(this);$s(this,t,(function(){ru(n)&&(Qs(t,!0),tu(n))})),e&&Js(this,t,(function(){e()}))}function Mc(){return Q(ps(Pc.call(this))||"")}function Nc(){var e=Pc.call(this),t=Dc.call(this),n=ps(e)||"";return n?Oc.test(n)?(Qs(e,!0),tu(t),t=!0):(Qs(e,!1),nu(t,cn("That email address isn't correct").toString()),t=!1):(Qs(e,!1),nu(t,cn("Enter your email address to continue").toString()),t=!1),t?Q(ps(e)):null}function Lc(e,t,n,r,i,a,o){Ru.call(this,Fu,{email:n,ia:!!a},o,"passwordSignIn",{F:r,D:i}),this.w=e,this.H=t}function jc(e,t,n,r,i,a){Ru.call(this,e,t,r,i||"notice",a),this.i=n||null}function Fc(e,t,n,r,i){jc.call(this,Uu,{email:e,G:!!t},t,i,"passwordRecoveryEmailSent",{F:n,D:r})}function zc(e,t){jc.call(this,sc,{G:!!e},e,t,"emailVerificationSuccess")}function Bc(e,t){jc.call(this,uc,{G:!!e},e,t,"emailVerificationFailure")}function Uc(e,t,n){jc.call(this,cc,{email:e,G:!!t},t,n,"verifyAndChangeEmailSuccess")}function Vc(e,t){jc.call(this,lc,{G:!!e},e,t,"verifyAndChangeEmailFailure")}function qc(e,t){jc.call(this,fc,{G:!!e},e,t,"revertSecondFactorAdditionFailure")}function Gc(e){jc.call(this,bc,void 0,void 0,e,"signOut")}function Kc(e,t){jc.call(this,rc,{G:!!e},e,t,"passwordResetSuccess")}function Hc(e,t){jc.call(this,ic,{G:!!e},e,t,"passwordResetFailure")}function Wc(e,t){jc.call(this,oc,{G:!!e},e,t,"emailChangeRevokeFailure")}function Zc(e,t,n){jc.call(this,dc,{errorMessage:e,zb:!!t},t,n,"recoverableError")}function Xc(e,t){jc.call(this,pc,{errorMessage:e},void 0,t,"unrecoverableError")}function Yc(e){if("auth/invalid-credential"===e.code&&e.message&&-1!==e.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(e.message&&-1!==e.message.indexOf("HTTP Cloud Function returned an error:")){var t=JSON.parse(e.message.substring(e.message.indexOf("{"),e.message.lastIndexOf("}")+1));return{code:e.code,message:t&&t.error&&t.error.message||e.message}}return e}function Qc(e,t,n,r){function i(n){if(!n.name||"cancel"!=n.name){e:{var r=n.message;try{var i=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(i&&i.length){var a=!0;break e}}catch(o){}a=!1}if(a)n=Mu(t),t.o(),il(e,n,void 0,cn("Your sign-in session has expired. Please try again.").toString());else{if(a=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;a=el(n)}t.a(a)}}}if(Ah(e),r)return $c(e,n),Gr();if(!n.credential)throw Error("No credential found!");if(!bh(e).currentUser&&!n.user)throw Error("User not logged in.");try{var a=function(e,t){return Dh(e),Sh(e,(function(n){if(e.j&&!e.j.isAnonymous&&Co(Ph(e))&&!bh(e).currentUser)return Mh(e).then((function(){return"password"==t.credential.providerId&&(t.credential=null),t}));if(n)return Mh(e).then((function(){return n.linkWithCredential(t.credential)})).then((function(e){return t.user=e.user,t.credential=e.credential,t.operationType=e.operationType,t.additionalUserInfo=e.additionalUserInfo,t}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Nh(e,n,t.credential)}));if(!t.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Mh(e).then((function(){return _h(e).updateCurrentUser(t.user)})).then((function(){return t.user=_h(e).currentUser,t.operationType="signIn",t.credential&&t.credential.providerId&&"password"==t.credential.providerId&&(t.credential=null),t}))}))}(e,n)}catch(o){return Wi(o.code||o.message,o),t.a(o.code||o.message),Gr()}return n=a.then((function(t){$c(e,t)}),i).then(void 0,i),Ch(e,a),Gr(n)}function $c(e,t){if(!t.user)throw Error("No user found");var n=Ho(Ph(e));if(Ko(Ph(e))&&n&&Qi("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=Ho(Ph(e));var r=Ja(wh(e))||void 0;Qa(Wa,wh(e));var i=!1;ri()?(n&&!n(t,r)||(i=!0,Lt(window.opener.location,Jc(e,r))),n||window.close()):n&&!n(t,r)||(i=!0,Lt(window.location,Jc(e,r))),i||e.reset()}else{n=t.user,t=t.credential,r=Ko(Ph(e)),i=Ja(wh(e))||void 0,Qa(Wa,wh(e));var a=!1;ri()?(r&&!r(n,t,i)||(a=!0,Lt(window.opener.location,Jc(e,i))),r||window.close()):r&&!r(n,t,i)||(a=!0,Lt(window.location,Jc(e,i))),a||e.reset()}}function Jc(e,t){if(!(e=t||Ph(e).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function el(e){var t={code:e.code},n="";switch((t=t||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":n+=Dn();break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/user-token-expired":n+=Dn();break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=In();break;case"auth/invalid-verification-code":n+=cn("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(t=cn(n).toString())return t;try{return JSON.parse(e.message),Wi("Internal error: "+e.message,void 0),An().toString()}catch(r){return e.message}}function tl(e,t,n,i){function a(){!function(e,t){$a(Ha,{tenantId:e.a},t)}(new oa(e.h.tenantId||null),wh(e)),Ch(e,t.I(C(e.dc,e),[c],(function(){if("file:"===(window.location&&window.location.protocol))return Ch(e,mh(e).then((function(n){t.o(),Qa(Ha,wh(e)),cs("callback",e,u,Gr(n))}),o))}),s))}function o(n){if(Qa(Ha,wh(e)),!n.name||"cancel"!=n.name)switch(n=Yc(n),n.code){case"auth/popup-blocked":a();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":t.a(el(n));break;default:t.o(),cs("callback",e,u,Kr(n))}}function s(n){Qa(Ha,wh(e)),n.name&&"cancel"==n.name||(Wi("signInWithRedirect: "+n.code,void 0),n=el(n),"blank"==t.Ga&&qo(Ph(e))?(t.o(),cs("providerSignIn",e,u,n)):t.a(n))}var u=Mu(t),c=function(e,t,n){var i=So[t]&&r.a.auth[So[t]]?new r.a.auth[So[t]]:0==t.indexOf("saml.")?new r.a.auth.SAMLAuthProvider(t):new r.a.auth.OAuthProvider(t);if(!i)throw Error("Invalid Firebase Auth provider!");var a=No(Ph(e),t);if(i.addScope)for(var o=0;o<a.length;o++)i.addScope(a[o]);return a=Lo(Ph(e),t)||{},n&&(e=t==r.a.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":t==r.a.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=Do(Ph(e),t))&&e.Ob)&&(a[e]=n),i.setCustomParameters&&i.setCustomParameters(a),i}(e,n,i);Go(Ph(e))==rs?a():Ch(e,function(e,t){return Dh(e),Sh(e,(function(n){return n&&!eo(wh(e))?n.linkWithPopup(t).then((function(e){return e}),(function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Nh(e,t)})):bh(e).signInWithPopup(t)}))}(e,c).then((function(n){t.o(),cs("callback",e,u,Gr(n))}),o))}function nl(e){return 1==(e=Po(Ph(e))).length&&e[0]==r.a.auth.EmailAuthProvider.PROVIDER_ID}function rl(e){return 1==(e=Po(Ph(e))).length&&e[0]==r.a.auth.PhoneAuthProvider.PROVIDER_ID}function il(e,t,n,r){nl(e)?r?cs("signIn",e,t,n,r):ul(e,t,n):e&&rl(e)&&!r?cs("phoneSignInStart",e,t):e&&qo(Ph(e))&&!r?cs("federatedRedirect",e,t,n):cs("providerSignIn",e,t,r,n)}function al(e,t,n,r){var i=Mu(t);Ch(e,t.I(C(bh(e).fetchSignInMethodsForEmail,bh(e)),[n],(function(a){t.o(),ol(e,i,a,n,r)}),(function(e){e=el(e),t.a(e)})))}function ol(e,t,n,i,a,o){n.length||Vo(Ph(e))&&!Vo(Ph(e))?q(n,r.a.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?cs("passwordSignIn",e,t,i,o):1==n.length&&n[0]===r.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Vo(Ph(e))?cs("sendEmailLinkForSignIn",e,t,i,(function(){cs("signIn",e,t)})):cs("unsupportedProvider",e,t,i):(n=Eo(n,Po(Ph(e))))?(no(new ra(i),wh(e)),cs("federatedSignIn",e,t,i,n,a)):cs("unsupportedProvider",e,t,i):function(e){return!!((e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.status)}(Ph(e))?cs("handleUnauthorizedUser",e,t,i,r.a.auth.EmailAuthProvider.PROVIDER_ID):Vo(Ph(e))?cs("sendEmailLinkForSignIn",e,t,i,(function(){cs("signIn",e,t)})):cs("passwordSignUp",e,t,i,void 0,void 0,o)}function sl(e,t,n,r,i,a){var o=Mu(t);Ch(e,t.I(C(e.Ib,e),[n,a],(function(){t.o(),cs("emailLinkSignInSent",e,o,n,r,a)}),i))}function ul(e,t,n){n?cs("prefilledEmailSignIn",e,t,n):cs("signIn",e,t)}function cl(){return we(oi(),"oobCode")}function ll(){var e=we(oi(),"continueUrl");return e?function(){Lt(window.location,e)}:null}function hl(e,t){Ru.call(this,Xu,void 0,t,"anonymousUserMismatch"),this.i=e}function fl(e){Ru.call(this,Vu,void 0,e,"callback")}function dl(e,t,n){if(n.user){var r={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},i=eo(wh(e)),a=i&&i.g;if(a&&!function(e,t){if(t==e.email)return!0;if(e.providerData)for(var n=0;n<e.providerData.length;n++)if(t==e.providerData[n].email)return!0;return!1}(n.user,a))!function(e,t,n){var r=Mu(t);Ch(e,Mh(e).then((function(){t.o(),cs("emailMismatch",e,r,n)}),(function(e){e.name&&"cancel"==e.name||(e=el(e.code),t.a(e))})))}(e,t,r);else{var o=i&&i.a;o?Ch(e,n.user.linkWithCredential(o).then((function(n){r={user:n.user,credential:o,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},pl(e,t,r)}),(function(n){vl(e,t,n)}))):pl(e,t,r)}}else n=Mu(t),t.o(),to(wh(e)),il(e,n)}function pl(e,t,n){to(wh(e)),Qc(e,t,n)}function vl(e,t,n){var r=Mu(t);to(wh(e)),n=el(n),t.o(),il(e,r,void 0,n)}function ml(e,t,n,i){var a=Mu(t);Ch(e,bh(e).fetchSignInMethodsForEmail(n).then((function(o){t.o(),o.length?q(o,r.a.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?cs("passwordLinking",e,a,n):1==o.length&&o[0]===r.a.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?cs("emailLinkSignInLinking",e,a,n):(o=Eo(o,Po(Ph(e))))?cs("federatedLinking",e,a,n,o,i):(to(wh(e)),cs("unsupportedProvider",e,a,n)):(to(wh(e)),cs("passwordRecovery",e,a,n,!1,On().toString()))}),(function(n){vl(e,t,n)})))}function yl(e,t){Ru.call(this,Zu,void 0,t,"differentDeviceError"),this.i=e}function gl(e,t,n,r){Ru.call(this,ac,{email:e,G:!!n},r,"emailChangeRevoke"),this.l=t,this.i=n||null}function bl(){return Zs(this,"firebaseui-id-new-password")}function _l(){return Zs(this,"firebaseui-id-password-toggle")}function wl(){this.Ra=!this.Ra;var e=_l.call(this),t=bl.call(this);this.Ra?(t.type="text",fs(e,"firebaseui-input-toggle-off"),ds(e,"firebaseui-input-toggle-on")):(t.type="password",fs(e,"firebaseui-input-toggle-on"),ds(e,"firebaseui-input-toggle-off")),t.focus()}function xl(){return Zs(this,"firebaseui-id-new-password-error")}function kl(){this.Ra=!1;var e=bl.call(this);e.type="password";var t=xl.call(this);$s(this,e,(function(){ru(t)&&(Qs(e,!0),tu(t))}));var n=_l.call(this);fs(n,"firebaseui-input-toggle-on"),ds(n,"firebaseui-input-toggle-off"),function(e,t,n){Fn(e,A(zn,t=new ks(t))),Cs(Xs(e),t,"focusin",n)}(this,e,(function(){fs(n,"firebaseui-input-toggle-focus"),ds(n,"firebaseui-input-toggle-blur")})),function(e,t,n){Fn(e,A(zn,t=new ks(t))),Cs(Xs(e),t,"focusout",n)}(this,e,(function(){fs(n,"firebaseui-input-toggle-blur"),ds(n,"firebaseui-input-toggle-focus")})),eu(this,n,C(wl,this))}function El(){var e=bl.call(this),t=xl.call(this);return ps(e)?(Qs(e,!0),tu(t),t=!0):(Qs(e,!1),nu(t,cn("Enter your password").toString()),t=!1),t?ps(e):null}function Tl(e,t,n){Ru.call(this,nc,{email:e},n,"passwordReset"),this.l=t}function Sl(e,t,n,r,i){Ru.call(this,hc,{factorId:e,phoneNumber:n||null,G:!!r},i,"revertSecondFactorAdditionSuccess"),this.l=t,this.i=r||null}function Il(e,t,n,r){"auth/weak-password"==(r&&r.code)?(e=el(r),Qs(n.i(),!1),nu(n.w(),e),n.i().focus()):(n&&n.o(),(n=new Hc).render(t),yh(e,n))}function Cl(e,t){try{var n="number"==typeof e.selectionStart}catch(r){n=!1}n?(e.selectionStart=t,e.selectionEnd=t):et&&!dt("9")&&("textarea"==e.type&&(t=e.value.substring(0,t).replace(/(\r\n|\r|\n)/g,"\n").length),(e=e.createTextRange()).collapse(!0),e.move("character",t),e.select())}function Al(e,t,n,r,i,a){Ru.call(this,Wu,{email:n},a,"emailLinkSignInConfirmation",{F:r,D:i}),this.l=e,this.u=t}function Ol(e,t,n,r,i){Ru.call(this,$u,{ga:e},i,"emailLinkSignInLinkingDifferentDevice",{F:n,D:r}),this.i=t}function Pl(e){Ru.call(this,Gu,void 0,e,"blank")}function Dl(e,t,n,i,a){var o=new Pl,s=new Ve(n),u=s.a.a.get(He.$a)||"",c=s.a.a.get(He.Sa)||"",l="1"===s.a.a.get(He.Qa),h=qe(s),f=s.a.a.get(He.PROVIDER_ID)||null;s=s.a.a.get(He.vb)||null,Oh(e,s);var d=!Ya(Za,wh(e)),p=i||function(e,t){var n=null;if(t=Ya(Za,t))try{var r=Ca(e,t),i=JSON.parse(r);n=i&&i.email||null}catch(o){}return n}(c,wh(e)),v=(i=function(e,t){var n=null;if(t=Ya(Xa,t))try{var r=Ca(e,t);n=JSON.parse(r)}catch(a){}return aa(n||null)}(c,wh(e)))&&i.a;f&&v&&v.providerId!==f&&(v=null),o.render(t),yh(e,o),Ch(e,o.I((function(){var t=Gr(null);t=h&&d||d&&l?Kr(Error("anonymous-user-not-found")):function(e,t){var n=qe(new Ve(t));return n?(t=new jr((function(t,r){var i=_h(e).onAuthStateChanged((function(e){i(),e&&e.isAnonymous&&e.uid===n?t(e):e&&e.isAnonymous&&e.uid!==n?r(Error("anonymous-user-mismatch")):r(Error("anonymous-user-not-found"))}));Ch(e,i)})),Ch(e,t),t):Gr(null)}(e,n).then((function(e){if(f&&!v)throw Error("pending-credential-not-found");return e}));var r=null;return t.then((function(t){return r=t,a?null:bh(e).checkActionCode(u)})).then((function(){return r}))}),[],(function(i){p?function(e,t,n,i,a,o){var s=Mu(t);t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Signing in...").toString());var u=null;a=(o?function(e,t,n,i,a){Dh(e);var o=a||null,s=r.a.auth.EmailAuthProvider.credentialWithLink(n,i);return n=o?bh(e).signInWithEmailLink(n,i).then((function(e){return e.user.linkWithCredential(o)})).then((function(){return Mh(e)})).then((function(){return Nh(e,{code:"auth/email-already-in-use"},o)})):bh(e).fetchSignInMethodsForEmail(n).then((function(n){return n.length?Nh(e,{code:"auth/email-already-in-use"},s):t.linkWithCredential(s)})),Ch(e,n),n}(e,o,n,i,a):function(e,t,n,r){Dh(e);var i,a=r||null;return t=bh(e).signInWithEmailLink(t,n).then((function(e){if(i={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},a)return e.user.linkWithCredential(a).then((function(e){i={user:e.user,credential:a,operationType:i.operationType,additionalUserInfo:e.additionalUserInfo}}))})).then((function(){Mh(e)})).then((function(){return _h(e).updateCurrentUser(i.user)})).then((function(){return i.user=_h(e).currentUser,i})),Ch(e,t),t}(e,n,i,a)).then((function(n){Qa(Xa,wh(e)),Qa(Za,wh(e)),t.h(),t.$("firebaseui-icon-done",cn("Signed in!").toString()),u=setTimeout((function(){t.h(),Qc(e,t,n,!0)}),1e3),Ch(e,(function(){t&&(t.h(),t.o()),clearTimeout(u)}))}),(function(r){if(t.h(),t.o(),!r.name||"cancel"!=r.name){var a=el(r=Yc(r));"auth/email-already-in-use"==r.code||"auth/credential-already-in-use"==r.code?(Qa(Xa,wh(e)),Qa(Za,wh(e))):"auth/invalid-email"==r.code?(a=cn("The email provided does not match the current sign-in session.").toString(),cs("emailLinkConfirmation",e,s,i,Rl,null,a)):il(e,s,n,a)}})),Ch(e,a)}(e,o,p,n,v,i):l?(o.o(),cs("differentDeviceError",e,t)):(o.o(),cs("emailLinkConfirmation",e,t,n,Rl))}),(function(r){var i=void 0;if(!r||!r.name||"cancel"!=r.name)switch(o.o(),r&&r.message){case"anonymous-user-not-found":cs("differentDeviceError",e,t);break;case"anonymous-user-mismatch":cs("anonymousUserMismatch",e,t);break;case"pending-credential-not-found":cs("emailLinkNewDeviceLinking",e,t,n,Ml);break;default:r&&(i=el(r)),il(e,t,void 0,i)}})))}function Rl(e,t,n,r){Dl(e,t,r,n,!0)}function Ml(e,t,n){Dl(e,t,n)}function Nl(e,t,n,r,i,a){Ru.call(this,Qu,{email:e,ga:t},a,"emailLinkSignInLinking",{F:r,D:i}),this.i=n}function Ll(e,t,n,r,i,a){Ru.call(this,Ku,{email:e},a,"emailLinkSignInSent",{F:r,D:i}),this.u=t,this.i=n}function jl(e,t,n,r,i,a,o){Ru.call(this,vc,{jc:e,Qb:t},o,"emailMismatch",{F:i,D:a}),this.l=n,this.i=r}function Fl(e,t,n,r,i){Ru.call(this,Hu,void 0,i,"emailNotReceived",{F:n,D:r}),this.l=e,this.i=t}function zl(e,t,n,r,i,a){Ru.call(this,Ju,{email:e,ga:t},a,"federatedLinking",{F:r,D:i}),this.i=n}function Bl(e,t,n,r,i,a){Ru.call(this,Bu,{email:n,Ta:!!t},a,"passwordRecovery",{F:r,D:i}),this.l=e,this.u=t}function Ul(){return Zs(this,"firebaseui-id-name")}function Vl(){return Zs(this,"firebaseui-id-name-error")}function ql(e,t,n,r,i,a,o,s,u){Ru.call(this,zu,{email:r,Tb:e,name:i,Ta:!!n,ia:!!s},u,"passwordSignUp",{F:a,D:o}),this.w=t,this.H=n,this.B=e}function Gl(e,t){var n=Uo(Ph(e)),i=t.j(),a=null;n&&(a=t.M());var o=t.P();if(i){if(n){if(!a)return void t.u().focus();a=oe(a)}if(o){var s=r.a.auth.EmailAuthProvider.credential(i,o);Ch(e,t.I(C(e.Yb,e),[i,o],(function(r){var i={user:r.user,credential:s,operationType:r.operationType,additionalUserInfo:r.additionalUserInfo};return n?(r=r.user.updateProfile({displayName:a}).then((function(){return Qc(e,t,i)})),Ch(e,r),r):Qc(e,t,i)}),(function(n){if(!n.name||"cancel"!=n.name){var r=Yc(n);switch(n=el(r),r.code){case"auth/email-already-in-use":return function(e,t,n,r){function i(){var e=el(r);Qs(t.i(),!1),nu(t.U(),e),t.i().focus()}var a=bh(e).fetchSignInMethodsForEmail(n).then((function(r){r.length?i():(r=Mu(t),t.o(),cs("passwordRecovery",e,r,n,!1,On().toString()))}),(function(){i()}));return Ch(e,a),a}(e,t,i,r);case"auth/too-many-requests":n=cn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Qs(t.l(),!1),nu(t.ba(),n);break;default:Wi(r="setAccountInfo: "+Oa(r),void 0),t.a(n)}}})))}else t.l().focus()}else t.i().focus()}function Kl(){return Zs(this,"firebaseui-id-phone-confirmation-code")}function Hl(){return Zs(this,"firebaseui-id-phone-confirmation-code-error")}function Wl(){return Zs(this,"firebaseui-id-resend-countdown")}function Zl(e,t,n,r,i,a,o,s,u){Ru.call(this,gc,{phoneNumber:i},u,"phoneSignInFinish",{F:o,D:s}),this.jb=a,this.i=new Es(1e3),this.B=a,this.P=e,this.l=t,this.H=n,this.M=r}u(Lc,Ru),Lc.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Nu(this,this.l(),this.i()),Lu(this,this.i(),this.w),ps(this.l())?this.i().focus():this.l().focus(),Ru.prototype.v.call(this)},Lc.prototype.m=function(){this.H=this.w=null,Ru.prototype.m.call(this)},O(Lc.prototype,{l:Pc,U:Dc,P:Rc,M:Mc,j:Nc,i:Tc,B:Sc,ea:Ic,u:Cc,ua:xc,pa:kc,ba:Ec}),M(jc,Ru),jc.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),jc.K.v.call(this)},jc.prototype.m=function(){this.i=null,jc.K.m.call(this)},O(jc.prototype,{l:xc,w:kc,u:Ec}),M(Fc,jc),M(zc,jc),M(Bc,jc),M(Uc,jc),M(Vc,jc),M(qc,jc),M(Gc,jc),M(Kc,jc),M(Hc,jc),M(Wc,jc),M(Zc,jc),M(Xc,jc),u(hl,Ru),hl.prototype.v=function(){var e=this;eu(this,this.l(),(function(){e.i()})),this.l().focus(),Ru.prototype.v.call(this)},hl.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(hl.prototype,{l:kc}),us.anonymousUserMismatch=function(e,t){var n=new hl((function(){n.o(),il(e,t)}));n.render(t),yh(e,n)},u(fl,Ru),fl.prototype.I=function(e,t,n,r){return e.apply(null,t).then(n,r)},us.callback=function(e,t,n){var r=new fl;r.render(t),yh(e,r),t=n||mh(e),Ch(e,t.then((function(t){dl(e,r,t)}),(function(t){if((t=Yc(t))&&("auth/account-exists-with-different-credential"==t.code||"auth/email-already-in-use"==t.code)&&t.email&&t.credential)no(new ra(t.email,t.credential),wh(e)),ml(e,r,t.email);else if(t&&"auth/user-cancelled"==t.code){var n=eo(wh(e)),i=el(t);n&&n.a?ml(e,r,n.g,i):n?al(e,r,n.g,i):vl(e,r,t)}else t&&"auth/credential-already-in-use"==t.code||(t&&"auth/operation-not-supported-in-this-environment"==t.code&&nl(e)?dl(e,r,{user:null,credential:null}):vl(e,r,t))})))},u(yl,Ru),yl.prototype.v=function(){var e=this;eu(this,this.l(),(function(){e.i()})),this.l().focus(),Ru.prototype.v.call(this)},yl.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(yl.prototype,{l:kc}),us.differentDeviceError=function(e,t){var n=new yl((function(){n.o(),il(e,t)}));n.render(t),yh(e,n)},u(gl,Ru),gl.prototype.v=function(){var e=this;eu(this,Zs(this,"firebaseui-id-reset-password-link"),(function(){e.l()})),this.i&&(this.w(this.i),this.u().focus()),Ru.prototype.v.call(this)},gl.prototype.m=function(){this.l=this.i=null,Ru.prototype.m.call(this)},O(gl.prototype,{u:xc,B:kc,w:Ec}),u(Tl,Ru),Tl.prototype.v=function(){this.H(),this.B(this.l),Lu(this,this.i(),this.l),this.i().focus(),Ru.prototype.v.call(this)},Tl.prototype.m=function(){this.l=null,Ru.prototype.m.call(this)},O(Tl.prototype,{i:bl,w:xl,M:_l,H:kl,u:El,U:xc,P:kc,B:Ec}),u(Sl,Ru),Sl.prototype.v=function(){var e=this;eu(this,Zs(this,"firebaseui-id-reset-password-link"),(function(){e.l()})),this.i&&(this.w(this.i),this.u().focus()),Ru.prototype.v.call(this)},Sl.prototype.m=function(){this.l=this.i=null,Ru.prototype.m.call(this)},O(Sl.prototype,{u:xc,B:kc,w:Ec}),us.passwordReset=function(e,t,n,r){Ch(e,bh(e).verifyPasswordResetCode(n).then((function(i){var a=new Tl(i,(function(){!function(e,t,n,r,i){var a=n.u();a&&Ch(e,n.I(C(bh(e).confirmPasswordReset,bh(e)),[r,a],(function(){n.o();var r=new Kc(i);r.render(t),yh(e,r)}),(function(r){Il(e,t,n,r)})))}(e,t,a,n,r)}));a.render(t),yh(e,a)}),(function(){Il(e,t)})))},us.emailChangeRevocation=function(e,t,n){var r=null;Ch(e,bh(e).checkActionCode(n).then((function(t){return r=t.data.email,bh(e).applyActionCode(n)})).then((function(){!function(e,t,n){var r=new gl(n,(function(){Ch(e,r.I(C(bh(e).sendPasswordResetEmail,bh(e)),[n],(function(){r.o(),(r=new Fc(n,void 0,zo(Ph(e)),Bo(Ph(e)))).render(t),yh(e,r)}),(function(){r.a(Cn().toString())})))}));r.render(t),yh(e,r)}(e,t,r)}),(function(){var n=new Wc;n.render(t),yh(e,n)})))},us.emailVerification=function(e,t,n,r){Ch(e,bh(e).applyActionCode(n).then((function(){var n=new zc(r);n.render(t),yh(e,n)}),(function(){var n=new Bc;n.render(t),yh(e,n)})))},us.revertSecondFactorAddition=function(e,t,n){var r=null,i=null;Ch(e,bh(e).checkActionCode(n).then((function(t){return r=t.data.email,i=t.data.multiFactorInfo,bh(e).applyActionCode(n)})).then((function(){!function(e,t,n,r){var i=new Sl(r.factorId,(function(){i.I(C(bh(e).sendPasswordResetEmail,bh(e)),[n],(function(){i.o(),(i=new Fc(n,void 0,zo(Ph(e)),Bo(Ph(e)))).render(t),yh(e,i)}),(function(){i.a(Cn().toString())}))}),r.phoneNumber);i.render(t),yh(e,i)}(e,t,r,i)}),(function(){var n=new qc;n.render(t),yh(e,n)})))},us.verifyAndChangeEmail=function(e,t,n,r){var i=null;Ch(e,bh(e).checkActionCode(n).then((function(t){return i=t.data.email,bh(e).applyActionCode(n)})).then((function(){var n=new Uc(i,r);n.render(t),yh(e,n)}),(function(){var n=new Vc;n.render(t),yh(e,n)})))},u(Al,Ru),Al.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Cl(this.i(),(this.i().value||"").length),Ru.prototype.v.call(this)},Al.prototype.m=function(){this.u=this.l=null,Ru.prototype.m.call(this)},O(Al.prototype,{i:Pc,M:Dc,w:Rc,H:Mc,j:Nc,U:xc,P:kc,B:Ec}),us.emailLinkConfirmation=function(e,t,n,r,i,a){var o=new Al((function(){var i=o.j();i?(o.o(),r(e,t,i,n)):o.i().focus()}),(function(){o.o(),il(e,t,i||void 0)}),i||void 0,zo(Ph(e)),Bo(Ph(e)));o.render(t),yh(e,o),a&&o.a(a)},u(Ol,Ru),Ol.prototype.v=function(){this.u(this.i),this.l().focus(),Ru.prototype.v.call(this)},Ol.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(Ol.prototype,{l:xc,u:Ec}),us.emailLinkNewDeviceLinking=function(e,t,n,r){var i=new Ve(n);if(n=i.a.a.get(He.PROVIDER_ID)||null,Ge(i,null),n){var a=new Ol(Do(Ph(e),n),(function(){a.o(),r(e,t,i.toString())}),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a)}else il(e,t)},u(Pl,Ru),us.emailLinkSignInCallback=Dl,u(Nl,Ru),Nl.prototype.v=function(){this.u(this.i),this.l().focus(),Ru.prototype.v.call(this)},Nl.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(Nl.prototype,{l:xc,u:Ec}),us.emailLinkSignInLinking=function(e,t,n){var r=eo(wh(e));if(to(wh(e)),r){var i=r.a.providerId,a=new Nl(n,Do(Ph(e),i),(function(){!function(e,t,n,r){var i=Mu(t);sl(e,t,n,(function(){il(e,i,n)}),(function(r){if(!r.name||"cancel"!=r.name){var a=el(r);r&&"auth/network-request-failed"==r.code?t.a(a):(t.o(),il(e,i,n,a))}}),r)}(e,a,n,r)}),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a)}else il(e,t)},u(Ll,Ru),Ll.prototype.v=function(){var e=this;eu(this,this.l(),(function(){e.i()})),eu(this,Zs(this,"firebaseui-id-trouble-getting-email-link"),(function(){e.u()})),this.l().focus(),Ru.prototype.v.call(this)},Ll.prototype.m=function(){this.i=this.u=null,Ru.prototype.m.call(this)},O(Ll.prototype,{l:kc}),us.emailLinkSignInSent=function(e,t,n,r,i){var a=new Ll(n,(function(){a.o(),cs("emailNotReceived",e,t,n,r,i)}),(function(){a.o(),r()}),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a)},u(jl,Ru),jl.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ru.prototype.v.call(this)},jl.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(jl.prototype,{u:xc,B:kc,w:Ec}),us.emailMismatch=function(e,t,n){var r=eo(wh(e));if(r){var i=new jl(n.user.email,r.g,(function(){var t=i;to(wh(e)),Qc(e,t,n)}),(function(){var t=n.credential.providerId,a=Mu(i);i.o(),r.a?cs("federatedLinking",e,a,r.g,t):cs("federatedSignIn",e,a,r.g,t)}),zo(Ph(e)),Bo(Ph(e)));i.render(t),yh(e,i)}else il(e,t)},u(Fl,Ru),Fl.prototype.v=function(){var e=this;eu(this,this.u(),(function(){e.i()})),eu(this,this.Da(),(function(){e.l()})),this.u().focus(),Ru.prototype.v.call(this)},Fl.prototype.Da=function(){return Zs(this,"firebaseui-id-resend-email-link")},Fl.prototype.m=function(){this.i=this.l=null,Ru.prototype.m.call(this)},O(Fl.prototype,{u:kc}),us.emailNotReceived=function(e,t,n,r,i){var a=new Fl((function(){sl(e,a,n,r,(function(e){e=el(e),a.a(e)}),i)}),(function(){a.o(),il(e,t,n)}),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a)},u(zl,Ru),zl.prototype.v=function(){this.u(this.i),this.l().focus(),Ru.prototype.v.call(this)},zl.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(zl.prototype,{l:xc,u:Ec}),us.federatedLinking=function(e,t,n,r,i){var a=eo(wh(e));if(a&&a.a){var o=new zl(n,Do(Ph(e),r),(function(){tl(e,o,r,n)}),zo(Ph(e)),Bo(Ph(e)));o.render(t),yh(e,o),i&&o.a(i)}else il(e,t)},us.federatedRedirect=function(e,t,n){var r=new Pl;r.render(t),yh(e,r),tl(e,r,t=Po(Ph(e))[0],n)},us.federatedSignIn=function(e,t,n,r,i){var a=new zl(n,Do(Ph(e),r),(function(){tl(e,a,r,n)}),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a),i&&a.a(i)},us.passwordLinking=function(e,t,n){var r=eo(wh(e));to(wh(e));var i=r&&r.a;if(i){var a=new Ac(n,(function(){!function(e,t,n,r){var i=t.u();i?Ch(e,t.I(C(e.Xb,e),[n,i],(function(n){return n=n.user.linkWithCredential(r).then((function(n){return Qc(e,t,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})})),Ch(e,n),n}),(function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":Qs(t.i(),!1),nu(t.B(),el(e));break;case"auth/too-many-requests":t.a(el(e));break;default:Wi("signInWithEmailAndPassword: "+e.message,void 0),t.a(el(e))}}))):t.i().focus()}(e,a,n,i)}),(function(){a.o(),cs("passwordRecovery",e,t,n)}),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a)}else il(e,t)},u(Bl,Ru),Bl.prototype.v=function(){this.B(),this.H(this.l,this.u),ps(this.i())||this.i().focus(),Lu(this,this.i(),this.l),Ru.prototype.v.call(this)},Bl.prototype.m=function(){this.u=this.l=null,Ru.prototype.m.call(this)},O(Bl.prototype,{i:Pc,w:Dc,B:Rc,M:Mc,j:Nc,U:xc,P:kc,H:Ec}),us.passwordRecovery=function(e,t,n,r,i){var a=new Bl((function(){!function(e,t){var n=t.j();if(n){var r=Mu(t);Ch(e,t.I(C(bh(e).sendPasswordResetEmail,bh(e)),[n],(function(){t.o();var i=new Fc(n,(function(){i.o(),il(e,r)}),zo(Ph(e)),Bo(Ph(e)));i.render(r),yh(e,i)}),(function(e){Qs(t.i(),!1),nu(t.w(),el(e))})))}else t.i().focus()}(e,a)}),r?void 0:function(){a.o(),il(e,t)},n,zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a),i&&a.a(i)},us.passwordSignIn=function(e,t,n,i){var a=new Lc((function(){!function(e,t){var n=t.j(),i=t.u();if(n)if(i){var a=r.a.auth.EmailAuthProvider.credential(n,i);Ch(e,t.I(C(e.bc,e),[n,i],(function(n){return Qc(e,t,{user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})}),(function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":Qs(t.l(),!1),nu(t.U(),el(e));break;case"auth/too-many-requests":case"auth/wrong-password":Qs(t.i(),!1),nu(t.B(),el(e));break;default:Wi("verifyPassword: "+e.message,void 0),t.a(el(e))}})))}else t.i().focus();else t.l().focus()}(e,a)}),(function(){var n=a.M();a.o(),cs("passwordRecovery",e,t,n)}),n,zo(Ph(e)),Bo(Ph(e)),i);a.render(t),yh(e,a)},u(ql,Ru),ql.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Nu(this,this.i(),this.u()),Nu(this,this.u(),this.l())):Nu(this,this.i(),this.l()),this.w&&Lu(this,this.l(),this.w),ps(this.i())?this.B&&!ps(this.u())?this.u().focus():this.l().focus():this.i().focus(),Ru.prototype.v.call(this)},ql.prototype.m=function(){this.H=this.w=null,Ru.prototype.m.call(this)},O(ql.prototype,{i:Pc,U:Dc,ea:Rc,jb:Mc,j:Nc,u:Ul,Bc:Vl,Ja:function(){var e=Ul.call(this),t=Vl.call(this);$s(this,e,(function(){ru(t)&&(Qs(e,!0),tu(t))}))},M:function(){var e=Ul.call(this),t=Vl.call(this),n=ps(e);return Qs(e,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(tu(t),t=!0):(nu(t,cn("Enter your account name").toString()),t=!1),t?Q(ps(e)):null},l:bl,ba:xl,lb:_l,ua:kl,P:El,Nb:xc,Mb:kc,pa:Ec}),us.passwordSignUp=function(e,t,n,r,i,a){var o=new ql(Uo(Ph(e)),(function(){Gl(e,o)}),i?void 0:function(){o.o(),il(e,t)},n,r,zo(Ph(e)),Bo(Ph(e)),a);o.render(t),yh(e,o)},u(Zl,Ru),Zl.prototype.v=function(){var e=this;this.U(this.jb),nr(this.i,"tick",this.w,!1,this),this.i.start(),eu(this,Zs(this,"firebaseui-id-change-phone-number-link"),(function(){e.P()})),eu(this,this.Da(),(function(){e.M()})),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Ru.prototype.v.call(this)},Zl.prototype.m=function(){this.M=this.H=this.l=this.P=null,Ts(this.i),ar(this.i,"tick",this.w),this.i=null,Ru.prototype.m.call(this)},Zl.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Ts(this.i),ar(this.i,"tick",this.w),this.ua(),this.lb())},O(Zl.prototype,{u:Kl,pa:Hl,Ja:function(e){var t=Kl.call(this),n=Hl.call(this);$s(this,t,(function(){ru(n)&&(Qs(t,!0),tu(n))})),e&&Js(this,t,(function(){e()}))},ba:function(){var e=Q(ps(Kl.call(this))||"");return/^\d{6}$/.test(e)?e:null},Fb:Wl,U:function(e){Wt(Wl.call(this),cn("Resend code in "+(9<e?"0:":"0:0")+e).toString())},ua:function(){tu(this.Fb())},Da:function(){return Zs(this,"firebaseui-id-resend-link")},lb:function(){nu(this.Da())},Nb:xc,Mb:kc,ea:Ec}),us.phoneSignInFinish=function(e,t,n,r,i,a){var o=new Zl((function(){o.o(),cs("phoneSignInStart",e,t,n)}),(function(){!function(e,t,n,r){function i(e){t.u().focus(),Qs(t.u(),!1),nu(t.pa(),e)}var a=t.ba();a?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Verifying...").toString()),Ch(e,t.I(C(r.confirm,r),[a],(function(n){t.h(),t.$("firebaseui-icon-done",cn("Verified!").toString());var r=setTimeout((function(){t.h(),t.o();var r={user:_h(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};Qc(e,t,r,!0)}),1e3);Ch(e,(function(){t&&t.h(),clearTimeout(r)}))}),(function(r){if(r.name&&"cancel"==r.name)t.h();else{var a=Yc(r);switch(r=el(a),a.code){case"auth/credential-already-in-use":t.h();break;case"auth/code-expired":a=Mu(t),t.h(),t.o(),cs("phoneSignInStart",e,a,n,r);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":t.h(),i(r);break;default:t.h(),t.a(r)}}})))):i(cn("Wrong code. Try again.").toString())}(e,o,n,i)}),(function(){o.o(),il(e,t)}),(function(){o.o(),cs("phoneSignInStart",e,t,n)}),ko(n),r,zo(Ph(e)),Bo(Ph(e)));o.render(t),yh(e,o),a&&o.a(a)};var Xl=!et&&!(Xe("Safari")&&!(Ye()||Xe("Coast")||Xe("Opera")||Xe("Edge")||Xe("Firefox")||Xe("FxiOS")||Xe("Silk")||Xe("Android")));function Yl(e,t){return/-[a-z]/.test(t)?null:Xl&&e.dataset?!Xe("Android")||Ye()||Xe("Firefox")||Xe("FxiOS")||Xe("Opera")||Xe("Silk")||t in e.dataset?void 0===(e=e.dataset[t])?null:e:null:e.getAttribute("data-"+String(t).replace(/([A-Z])/g,"-$1").toLowerCase())}function Ql(e,t,n){var r=this;e=tn(gu,{items:e},null,this.s),Tu.call(this,e,!0,!0),n&&(n=function(e,t){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if(Yl(e[n],"listboxid")===t)return e[n];return null}(e,n))&&(n.focus(),function(e,t){var n=(t=t||Gt(document))||Gt(document),r=qs(e),i=qs(n);if(!et||9<=Number(ht)){o=Us(n,"borderLeftWidth");var a=Us(n,"borderRightWidth");s=Us(n,"borderTopWidth"),u=Us(n,"borderBottomWidth"),a=new Bs(parseFloat(s),parseFloat(a),parseFloat(u),parseFloat(o))}else{var o=Ks(n,"borderLeft");a=Ks(n,"borderRight");var s=Ks(n,"borderTop"),u=Ks(n,"borderBottom");a=new Bs(s,a,u,o)}n==Gt(document)?(o=r.a-n.scrollLeft,r=r.g-n.scrollTop,!et||10<=Number(ht)||(o+=a.left,r+=a.top)):(o=r.a-i.a-a.left,r=r.g-i.g-a.top),i=e.offsetWidth,a=e.offsetHeight,s=it&&!i&&!a,e=d(i)&&!s||!e.getBoundingClientRect?new Ft(i,a):new Ft((e=Vs(e)).right-e.left,e.bottom-e.top),i=n.clientHeight-e.height,a=n.scrollLeft,s=n.scrollTop,n=new jt(a+=Math.min(o,Math.max(o-(n.clientWidth-e.width),0)),s+=Math.min(r,Math.max(r-i,0))),t.scrollLeft=n.a,t.scrollTop=n.g}(n,e)),eu(this,e,(function(e){(e=(e=Zt(e.target,"firebaseui-id-list-box-dialog-button"))&&Yl(e,"listboxid"))&&(Su.call(r),t(e))}))}function $l(){return Zs(this,"firebaseui-id-phone-number")}function Jl(){return Zs(this,"firebaseui-id-country-selector")}function eh(){return Zs(this,"firebaseui-id-phone-number-error")}function th(e,t){var n=e.a,r=nh("1-US-0",n),i=null;if(!(i=t&&nh(t,n)?t:r?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");ah.call(this,i,e)}function nh(e,t){return!(!(e=vo(e))||!q(t,e))}function rh(e){return"firebaseui-flag-"+e.f}function ih(e){var t=this;Ql.call(this,function(e){return U(e,(function(e){return{id:e.c,Ma:"firebaseui-flag "+rh(e),label:e.name+" \u200e+"+e.b}}))}(e.a),(function(n){ah.call(t,n,e,!0),t.O().focus()}),this.Ba)}function ah(e,t,n){var r=vo(e);r&&(n&&((t=po(t,n=Q(ps($l.call(this))||""))).length&&t[0].b!=r.b&&(n="+"+r.b+n.substr(t[0].b.length+1),vs($l.call(this),n))),t=vo(this.Ba),this.Ba=e,e=Zs(this,"firebaseui-id-country-selector-flag"),t&&ds(e,rh(t)),fs(e,rh(r)),Wt(Zs(this,"firebaseui-id-country-selector-code"),"\u200e+"+r.b))}function oh(e,t,n,r,i,a,o,s,u,c){Ru.call(this,yc,{Gb:t,Aa:u||null,Va:!!n,ia:!!a},c,"phoneSignInStart",{F:r,D:i}),this.H=s||null,this.M=t,this.l=e,this.w=n||null,this.pa=o||null}function sh(e,t,n,r){try{var i=t.U(Qo)}catch(a){return}i?Xo?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Verifying...").toString()),Ch(e,t.I(C(e.cc,e),[ko(i),n],(function(n){var r=Mu(t);t.$("firebaseui-icon-done",cn("Code sent!").toString());var a=setTimeout((function(){t.h(),t.o(),cs("phoneSignInFinish",e,r,i,15,n)}),1e3);Ch(e,(function(){t&&t.h(),clearTimeout(a)}))}),(function(e){if(t.h(),!e.name||"cancel"!=e.name){grecaptcha.reset($o),Xo=null;var n=e&&e.message||"";if(e.code)switch(e.code){case"auth/too-many-requests":n=cn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return t.O().focus(),void nu(t.B(),In().toString());default:n=el(e)}t.a(n)}})))):Yo?nu(t.u(),cn("Solve the reCAPTCHA").toString()):!Yo&&r&&t.i().click():(t.O().focus(),nu(t.B(),In().toString()))}function uh(e,t,n,r,i){Ru.call(this,mc,{Sb:t},i,"providerSignIn",{F:n,D:r}),this.i=e}function ch(e,t,n,r,i,a,o){Ru.call(this,ju,{email:n,Va:!!t,ia:!!a},o,"signIn",{F:r,D:i}),this.i=e,this.u=t}function lh(e,t,n,r,i,a,o){Ru.call(this,ec,{email:e,yb:n,Eb:!!r},o,"unauthorizedUser",{F:i,D:a}),this.l=t,this.i=r}function hh(e,t,n,r,i,a){Ru.call(this,tc,{email:e},a,"unsupportedProvider",{F:r,D:i}),this.l=t,this.i=n}function fh(e,t){this.$=!1;var n=vh(t);if(ph[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');ph[n]=this,this.a=e,this.u=null,this.Y=!1,dh(this.a),this.h=r.a.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),(e=e.emulatorConfig)&&(n=e.port,this.h.useEmulator(e.protocol+"://"+e.host+(null===n?"":":"+n),e.options)),dh(this.h),this.h.setPersistence&&this.h.setPersistence(r.a.auth.Auth.Persistence.SESSION),this.oa=t,this.ca=new Io,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Ei.Xa(),this.j=this.C=null,this.da=this.A=!1}function dh(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}u(oh,Ru),oh.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Nu(this,this.O(),this.i()),Lu(this,this.i(),this.l),this.O().focus(),Cl(this.O(),(this.O().value||"").length),Ru.prototype.v.call(this)},oh.prototype.m=function(){this.w=this.l=null,Ru.prototype.m.call(this)},O(oh.prototype,{Cb:Iu,O:$l,B:eh,ea:function(e,t,n){var r=this,i=$l.call(this),a=Jl.call(this),o=eh.call(this),s=e||_o,u=s.a;if(0==u.length)throw Error("No available countries provided.");th.call(r,s,t),eu(this,a,(function(){ih.call(r,s)})),$s(this,i,(function(){ru(o)&&(Qs(i,!0),tu(o));var e=Q(ps(i)||""),t=vo(this.Ba),n=po(s,e);e=nh("1-US-0",u),n.length&&n[0].b!=t.b&&(t=n[0],ah.call(r,"1"==t.b&&e?"1-US-0":t.c,s))})),n&&Js(this,i,(function(){n()}))},U:function(e){var t=Q(ps($l.call(this))||""),n=(e=e||_o).a,r=po(_o,t);if(r.length&&!q(n,r[0]))throw vs($l.call(this)),$l.call(this).focus(),nu(eh.call(this),cn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=vo(this.Ba),r.length&&r[0].b!=n.b&&ah.call(this,r[0].c,e),r.length&&(t=t.substr(r[0].b.length+1)),t?new wo(this.Ba,t):null},Ja:Jl,ba:function(){return Zs(this,"firebaseui-recaptcha-container")},u:function(){return Zs(this,"firebaseui-id-recaptcha-error")},i:xc,ua:kc,P:Ec}),us.phoneSignInStart=function(e,t,n,i){var a=function(e){var t=null;if(z(Ao(e),(function(e){e.provider==r.a.auth.PhoneAuthProvider.PROVIDER_ID&&k(e.recaptchaParameters)&&!Array.isArray(e.recaptchaParameters)&&(t=ue(e.recaptchaParameters))})),t){var n=[];z(ss,(function(e){"undefined"!==typeof t[e]&&(n.push(e),delete t[e])})),n.length&&Qi('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return t}(Ph(e))||{};Xo=null,Yo=!(a&&"invisible"===a.size);var o=rl(e),s=function(e){var t=(e=Oo(e,r.a.auth.PhoneAuthProvider.PROVIDER_ID))&&e.defaultCountry||null;t=t&&mo(t);var n=null;return e&&"string"===typeof e.loginHint&&(n=xo(e.loginHint)),t&&t[0]||n&&vo(n.a)||null}(Ph(e)),u=o?function(e){var t=null;return(e=Oo(e,r.a.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"===typeof e.loginHint&&(t=xo(e.loginHint)),e&&e.defaultNationalNumber||t&&t.Aa||null}(Ph(e)):null;s=n&&n.a||s&&s.c||null,n=n&&n.Aa||u,(u=jo(Ph(e)))&&go(u),Qo=u?new fo(jo(Ph(e))):_o;var c=new oh((function(t){sh(e,c,l,!(!t||!t.keyCode))}),Yo,o?null:function(){l.clear(),c.o(),il(e,t)},zo(Ph(e)),Bo(Ph(e)),o,Qo,s,n);c.render(t),yh(e,c),i&&c.a(i),a.callback=function(t){c.u()&&tu(c.u()),Xo=t,Yo||sh(e,c,l)},a["expired-callback"]=function(){Xo=null};var l=new r.a.auth.RecaptchaVerifier(Yo?c.ba():c.i(),a,_h(e).app);Ch(e,c.I(C(l.render,l),[],(function(e){$o=e}),(function(n){n.name&&"cancel"==n.name||(n=el(n),c.o(),il(e,t,void 0,n))})))},us.prefilledEmailSignIn=function(e,t,n){var r=new Pl;r.render(t),yh(e,r),Ch(e,r.I(C(bh(e).fetchSignInMethodsForEmail,bh(e)),[n],(function(i){r.o();var a=!(!nl(e)||!xh(e));ol(e,t,i,n,void 0,a)}),(function(i){i=el(i),r.o(),cs("signIn",e,t,n,i)})))},u(uh,Ru),uh.prototype.v=function(){this.l(this.i),Ru.prototype.v.call(this)},uh.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(uh.prototype,{l:function(e){function t(t){e(t)}for(var n=this.g?Bt("firebaseui-id-idp-button",this.g||this.s.a):[],r=0;r<n.length;r++){var i=n[r];eu(this,i,A(t,Yl(i,"providerId")))}}}),us.providerSignIn=function(e,t,n,i){var a=new uh((function(n){n==r.a.auth.EmailAuthProvider.PROVIDER_ID?(a.o(),ul(e,t,i)):n==r.a.auth.PhoneAuthProvider.PROVIDER_ID?(a.o(),cs("phoneSignInStart",e,t)):"anonymous"==n?function(e,t){Ch(e,t.I(C(e.$b,e),[],(function(n){return t.o(),Qc(e,t,n,!0)}),(function(e){e.name&&"cancel"==e.name||(Wi("ContinueAsGuest: "+e.code,void 0),e=el(e),t.a(e))})))}(e,a):tl(e,a,n,i),Dh(e),e.l.cancel()}),Ro(Ph(e)),zo(Ph(e)),Bo(Ph(e)));a.render(t),yh(e,a),n&&a.a(n),function(e){Dh(e);try{Ti(e.l,Mo(Ph(e)),function(e){var t;return Dh(e),(t=e.Z)||(e=Lo(e=Ph(e),r.a.auth.GoogleAuthProvider.PROVIDER_ID),t=!(!e||"select_account"!==e.prompt)),t}(e)).then((function(t){return!!e.g&&function(e,t,n){if(n&&n.credential&&n.clientId===Mo(Ph(e))){if(No(Ph(e),r.a.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var i=JSON.parse(atob(n.credential.split(".")[1])).email}catch(a){}return tl(e,t,r.a.auth.GoogleAuthProvider.PROVIDER_ID,i),Gr(!0)}return function(n){var r=!1;return n=t.I(C(e.ac,e),[n],(function(n){var i=Mu(t);t.o(),cs("callback",e,i,Gr(n)),r=!0}),(function(n){if((!n.name||"cancel"!=n.name)&&(!n||"auth/credential-already-in-use"!=n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var r=Mu(t);t.o(),cs("callback",e,r,Kr(n))}else n=el(n),t.a(n)})),Ch(e,n),n.then((function(){return r}),(function(){return!1}))}(r.a.auth.GoogleAuthProvider.credential(n.credential))}return n&&t.a(cn("The selected credential for the authentication provider is not supported!").toString()),Gr(!1)}(e,e.g,t)}))}catch(t){}}(e)},us.sendEmailLinkForSignIn=function(e,t,n,r){var i=new fl;i.render(t),yh(e,i),sl(e,i,n,r,(function(r){i.o(),r=el(r),cs("signIn",e,t,n,r)}))},u(ch,Ru),ch.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Cl(this.l(),(this.l().value||"").length),Ru.prototype.v.call(this)},ch.prototype.m=function(){this.u=this.i=null,Ru.prototype.m.call(this)},O(ch.prototype,{l:Pc,M:Dc,w:Rc,H:Mc,j:Nc,U:xc,P:kc,B:Ec}),us.signIn=function(e,t,n,r){var i=nl(e),a=new ch((function(){var t=a,n=t.j()||"";n&&al(e,t,n)}),i?null:function(){a.o(),il(e,t,n)},n,zo(Ph(e)),Bo(Ph(e)),i);a.render(t),yh(e,a),r&&a.a(r)},u(lh,Ru),lh.prototype.v=function(){var e=this,t=Zs(this,"firebaseui-id-unauthorized-user-help-link");this.i&&t&&eu(this,t,(function(){e.i()})),eu(this,this.u(),(function(){e.l()})),this.u().focus(),Ru.prototype.v.call(this)},lh.prototype.m=function(){this.i=this.l=null,Ru.prototype.m.call(this)},O(lh.prototype,{u:kc}),us.handleUnauthorizedUser=function(e,t,n,i){function a(){il(e,t)}i===r.a.auth.EmailAuthProvider.PROVIDER_ID&&(a=function(){ul(e,t)});var o=new lh(n||null,(function(){o.o(),a()}),function(e){return(e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.adminEmail||null}(Ph(e)),function(e){if((e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp){var t=e.disableSignUp.helpLink||null;if(t&&"string"===typeof t)return function(){ii(t)}}return null}(Ph(e)),zo(Ph(e)),Bo(Ph(e)));o.render(t),yh(e,o)},u(hh,Ru),hh.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Ru.prototype.v.call(this)},hh.prototype.m=function(){this.i=this.l=null,Ru.prototype.m.call(this)},O(hh.prototype,{u:xc,B:kc,w:Ec}),us.unsupportedProvider=function(e,t,n){var r=new hh(n,(function(){r.o(),cs("passwordRecovery",e,t,n)}),(function(){r.o(),il(e,t,n)}),zo(Ph(e)),Bo(Ph(e)));r.render(t),yh(e,r)};var ph={};function vh(e){return e||"[DEFAULT]"}function mh(e){return Dh(e),e.i||(e.i=Sh(e,(function(t){return t&&!eo(wh(e))?Gr(_h(e).getRedirectResult().then((function(e){return e}),(function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Nh(e,t)}))):Gr(bh(e).getRedirectResult().then((function(t){return Co(Ph(e))&&!t.user&&e.j&&!e.j.isAnonymous?_h(e).getRedirectResult():t})))}))),e.i}function yh(e,t){Dh(e),e.g=t}var gh=null;function bh(e){return Dh(e),e.h}function _h(e){return Dh(e),e.a}function wh(e){return Dh(e),e.oa}function xh(e){return Dh(e),e.O?e.O.emailHint:void 0}function kh(e){return"signIn"===((e=new Ve(e)).a.a.get(He.ub)||null)&&!!e.a.a.get(He.$a)}function Eh(e,t,n,r){Dh(e),"undefined"!==typeof e.a.languageCode&&(e.u=e.a.languageCode);var i="en".replace(/_/g,"-");e.a.languageCode=i,e.h.languageCode=i,e.Y=!0,"undefined"!==typeof e.a.tenantId&&(e.h.tenantId=e.a.tenantId),e.ib(n),e.O=r||null;var a=f.document;e.C?e.C.then((function(){"complete"==a.readyState?Th(e,t):ir(window,"load",(function(){Th(e,t)}))})):"complete"==a.readyState?Th(e,t):ir(window,"load",(function(){Th(e,t)}))}function Th(e,t){var n=ai(t,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),gh){var r=gh;Dh(r),eo(wh(r))&&Qi("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),gh.reset()}if(gh=e,e.T=n,function(e,t){e.L=null,e.J=new xr(t),e.J.register(),nr(e.J,"pageEnter",(function(t){if(t=t&&t.pageId,e.L!=t){var n=Ph(e);(n=Zo(n).uiChanged||null)&&n(e.L,t),e.L=t}}))}(e,n),za(new Ba)&&za(new Ua)){t=ai(t,"Could not find the FirebaseUI widget element on the page."),n=(n=we(n=oi(),r=so(Ph(e).a,"queryParameterForSignInSuccessUrl")))?xt(Et(n)).toString():null;e:{r=oi();var i=Fo(Ph(e));for(a in r=we(r,i)||"",as)if(as[a].toLowerCase()==r.toLowerCase()){var a=as[a];break e}a="callback"}switch(a){case"callback":n&&(a=wh(e),$a(Wa,n,a)),e.nb()?cs("callback",e,t):il(e,t,xh(e));break;case"resetPassword":cs("passwordReset",e,t,cl(),ll());break;case"recoverEmail":cs("emailChangeRevocation",e,t,cl());break;case"revertSecondFactorAddition":cs("revertSecondFactorAddition",e,t,cl());break;case"verifyEmail":cs("emailVerification",e,t,cl(),ll());break;case"verifyAndChangeEmail":cs("verifyAndChangeEmail",e,t,cl(),ll());break;case"signIn":cs("emailLinkSignInCallback",e,t,oi()),Rh();break;case"select":n&&(a=wh(e),$a(Wa,n,a)),il(e,t);break;default:throw Error("Unhandled widget operation.")}(t=Zo(t=Ph(e)).uiShown||null)&&t()}else t=ai(t,"Could not find the FirebaseUI widget element on the page."),(a=new Xc(cn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(t),yh(e,a);t=e.g&&"blank"==e.g.Ga&&qo(Ph(e)),ro(wh(e))&&!t&&(Oh(e,(t=ro(wh(e))).a),Qa(Ha,wh(e)))}function Sh(e,t){if(e.A)return t(Ih(e));if(Ch(e,(function(){e.A=!1})),Co(Ph(e))){var n=new jr((function(n){Ch(e,e.a.onAuthStateChanged((function(r){e.j=r,e.A||(e.A=!0,n(t(Ih(e))))})))}));return Ch(e,n),n}return e.A=!0,t(null)}function Ih(e){return Dh(e),Co(Ph(e))&&e.j&&e.j.isAnonymous?e.j:null}function Ch(e,t){if(Dh(e),t){e.s.push(t);var n=function(){H(e.s,(function(e){return e==t}))};"function"!=typeof t&&t.then(n,n)}}function Ah(e){"undefined"!==typeof e.a.languageCode&&e.Y&&(e.Y=!1,e.a.languageCode=e.u)}function Oh(e,t){e.a.tenantId=t,e.h.tenantId=t}function Ph(e){return Dh(e),e.ca}function Dh(e){if(e.$)throw Error("AuthUI instance is deleted!")}function Rh(){var e=oi();if(kh(e)){for(var t in e=new Ve(e),He)He.hasOwnProperty(t)&&Fe(e.a.a,He[t]);t={state:"signIn",mode:"emailLink",operation:"clear"};var n=f.document.title;f.history&&f.history.replaceState&&f.history.replaceState(t,n,e.toString())}}function Mh(e){return Dh(e),bh(e).signOut()}function Nh(e,t,n){if(Dh(e),t&&t.code&&("auth/email-already-in-use"==t.code||"auth/credential-already-in-use"==t.code)){var r=Wo(Ph(e));return Gr().then((function(){return r(new Rn("anonymous-upgrade-merge-conflict",null,n||t.credential))})).then((function(){throw e.g&&(e.g.o(),e.g=null),t}))}return Kr(t)}function Lh(e,t,n,r){Ru.call(this,wc,void 0,r,"providerMatchByEmail",{F:t,D:n}),this.i=e}function jh(e,t,n,r,i){Ru.call(this,_c,{ec:t},i,"selectTenant",{F:n,D:r}),this.i=e}function Fh(e){Ru.call(this,qu,void 0,e,"spinner")}function zh(e){for(var t in this.a=new io,ao(this.a,"authDomain"),ao(this.a,"displayMode",Wh),ao(this.a,"tenants"),ao(this.a,"callbacks"),ao(this.a,"tosUrl"),ao(this.a,"privacyPolicyUrl"),e)if(e.hasOwnProperty(t))try{oo(this.a,t,e[t])}catch(n){Wi('Invalid config: "'+t+'"',void 0)}}function Bh(e){return e.a.get("callbacks")||{}}function Uh(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&Qi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"===typeof t)return t;if("string"===typeof t)return function(){ii(t)}}return null}function Vh(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&Qi("Terms of Service URL is missing, the link will not be displayed."),t&&n){if("function"===typeof n)return n;if("string"===typeof n)return function(){ii(n)}}return null}function qh(e,t){if(!(e=e.a.get("tenants"))||!e.hasOwnProperty(t)&&!e.hasOwnProperty(Xh))throw Error("Invalid tenant configuration!")}function Gh(e,t,n){if(!(e=e.a.get("tenants")))throw Error("Invalid tenant configuration!");var r=[];if(!(e=e[t]||e[Xh]))return Wi("Invalid tenant configuration: "+t+" is not configured!",void 0),r;if(!(t=e.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return t.forEach((function(e){if("string"===typeof e)r.push(e);else if("string"===typeof e.provider){var t=e.hd;t&&n?(t instanceof RegExp?t:new RegExp("@"+t.replace(".","\\.")+"$")).test(n)&&r.push(e.provider):r.push(e.provider)}else Wi(e="Invalid tenant configuration: signInOption "+JSON.stringify(e)+" is invalid!",void 0)})),r}function Kh(e,t,n){return e=function(e,t){var n=Hh,r=void 0===r?{}:r;return qh(e,t),function(e,t,n){return n=void 0===n?{}:n,Object.keys(e).filter((function(e){return t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),n)}((e=e.a.get("tenants"))[t]||e[Xh],n,r)}(e,t),(t=e.signInOptions)&&n&&(t=t.filter((function(e){return"string"===typeof e?n.includes(e):n.includes(e.provider)})),e.signInOptions=t),e}(t=fh.prototype).nb=function(){return Dh(this),!!ro(wh(this))||kh(oi())},t.start=function(e,t){Eh(this,e,t)},t.Db=function(){Dh(this),this.Z=!0},t.reset=function(){Dh(this);var e=this;this.T&&this.T.removeAttribute("lang"),this.J&&_r(this.J),Ah(this),this.O=null,Rh(),Qa(Ha,wh(this)),Dh(this),this.l.cancel(),this.i=Gr({user:null,credential:null}),gh==this&&(gh=null),this.T=null;for(var t=0;t<this.s.length;t++)"function"==typeof this.s[t]?this.s[t]():this.s[t].cancel&&this.s[t].cancel();this.s=[],to(wh(this)),this.g&&(this.g.o(),this.g=null),this.L=null,this.h&&(this.C=Mh(this).then((function(){e.C=null}),(function(){e.C=null})))},t.ib=function(e){Dh(this);var t,n=this.ca;for(t in e)try{oo(n.a,t,e[t])}catch(r){Wi('Invalid config: "'+t+'"',void 0)}at&&oo(n.a,"popupMode",!1),jo(n),!this.da&&Ko(Ph(this))&&(Qi("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},t.Wb=function(){Dh(this);var e=Ph(this),t=so(e.a,"widgetUrl");e=Fo(e);for(var n,r=t.search(_e),i=0,a=[];0<=(n=be(t,i,e,r));)a.push(t.substring(i,n)),i=Math.min(t.indexOf("&",n)+1||r,r);a.push(t.substr(i)),t=a.join("").replace(xe,"$1"),(e+=r="="+encodeURIComponent("select"))?(0>(r=t.indexOf("#"))&&(r=t.length),0>(i=t.indexOf("?"))||i>r?(i=r,n=""):n=t.substring(i+1,r),r=(t=[t.substr(0,i),n,t.substr(r)])[1],t[1]=e?r?r+"&"+e:e:r,r=t[0]+(t[1]?"?"+t[1]:"")+t[2]):r=t,Ph(this).a.get("popupMode")?(r=r||"about:blank",(e={width:500,height:600,top:0<(e=(window.screen.availHeight-600)/2)?e:0,left:0<(t=(window.screen.availWidth-500)/2)?t:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=e.target||r.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=ni(r,e))&&e.focus()):Lt(window.location,r)},t.Wa=function(){var e=this;return Dh(this),this.h.app.delete().then((function(){var t=vh(wh(e));delete ph[t],e.reset(),e.$=!0}))},t.Ib=function(e,t){Dh(this);var n=this,i=function(){for(var e=32,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();if(!Vo(Ph(this)))return Kr(Error("Email link sign-in should be enabled to trigger email sending."));var a=function(e){if(Vo(e)){var t={url:oi(),handleCodeInApp:!0};(e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))&&"function"===typeof e.emailLinkSignIn&&le(t,e.emailLinkSignIn()),e=t.url;var n=oi();n instanceof ke||(n=Ie(n)),e instanceof ke||(e=Ie(e));var i=n;n=new ke(i);var a=!!e.j;a?Ee(n,e.j):a=!!e.A,a?n.A=e.A:a=!!e.h,a?n.h=e.h:a=null!=e.C;var o=e.g;if(a)Te(n,e.C);else if(a=!!e.g)if("/"!=o.charAt(0)&&(i.h&&!i.g?o="/"+o:-1!=(i=n.g.lastIndexOf("/"))&&(o=n.g.substr(0,i+1)+o)),".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){i=0==o.lastIndexOf("/",0),o=o.split("/");for(var s=[],u=0;u<o.length;){var c=o[u++];"."==c?i&&u==o.length&&s.push(""):".."==c?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),i&&u==o.length&&s.push("")):(s.push(c),i=!0)}o=s.join("/")}return a?n.g=o:a=""!==e.a.toString(),a?Se(n,Be(e.a)):a=!!e.s,a&&(n.s=e.s),t.url=n.toString(),t}return null}(Ph(this)),o=new Ve(a.url);return function(e,t){t?e.a.a.set(He.Sa,t):Fe(e.a.a,He.Sa)}(o,i),t&&t.a&&(function(e,t,n){$a(Xa,Ia(e,JSON.stringify(ia(t))),n)}(i,t,wh(this)),Ge(o,t.a.providerId)),function(e,t){null!==t?e.a.a.set(He.Qa,t?"1":"0"):Fe(e.a.a,He.Qa)}(o,function(e){return!(!(e=Oo(e,r.a.auth.EmailAuthProvider.PROVIDER_ID))||!e.forceSameDevice)}(Ph(this))),Sh(this,(function(t){return t&&((t=t.uid)?o.a.a.set(He.Pa,t):Fe(o.a.a,He.Pa)),a.url=o.toString(),bh(n).sendSignInLinkToEmail(e,a)})).then((function(){var t=wh(n),r={};r.email=e,$a(Za,Ia(i,JSON.stringify(r)),t)}),(function(e){throw Qa(Xa,wh(n)),Qa(Za,wh(n)),e}))},t.bc=function(e,t){Dh(this);var n=this;return bh(this).signInWithEmailAndPassword(e,t).then((function(i){return Sh(n,(function(a){return a?Mh(n).then((function(){return Nh(n,{code:"auth/email-already-in-use"},r.a.auth.EmailAuthProvider.credential(e,t))})):i}))}))},t.Yb=function(e,t){Dh(this);var n=this;return Sh(this,(function(i){if(i){var a=r.a.auth.EmailAuthProvider.credential(e,t);return i.linkWithCredential(a)}return bh(n).createUserWithEmailAndPassword(e,t)}))},t.ac=function(e){Dh(this);var t=this;return Sh(this,(function(n){return n?n.linkWithCredential(e).then((function(e){return e}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Nh(t,n,e)})):bh(t).signInWithCredential(e)}))},t.dc=function(e){Dh(this);var t=this,n=this.i;return this.i=null,Sh(this,(function(n){return n&&!eo(wh(t))?n.linkWithRedirect(e):bh(t).signInWithRedirect(e)})).then((function(){}),(function(e){throw t.i=n,e}))},t.cc=function(e,t){Dh(this);var n=this;return Sh(this,(function(r){return r?r.linkWithPhoneNumber(e,t).then((function(e){return new Ci(e,(function(e){if("auth/credential-already-in-use"==e.code)return Nh(n,e);throw e}))})):_h(n).signInWithPhoneNumber(e,t).then((function(e){return new Ci(e)}))}))},t.$b=function(){return Dh(this),_h(this).signInAnonymously()},t.Xb=function(e,t){return Dh(this),bh(this).signInWithEmailAndPassword(e,t)},u(Lh,Ru),Lh.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Cl(this.l(),(this.l().value||"").length),Ru.prototype.v.call(this)},Lh.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},O(Lh.prototype,{l:Pc,H:Dc,u:Rc,B:Mc,j:Nc,M:xc,w:Ec}),u(jh,Ru),jh.prototype.v=function(){!function(e,t){function n(e){t(e)}for(var r=e.g?Bt("firebaseui-id-tenant-selection-button",e.g||e.s.a):[],i=0;i<r.length;i++){var a=r[i];eu(e,a,A(n,Yl(a,"tenantId")))}}(this,this.i),Ru.prototype.v.call(this)},jh.prototype.m=function(){this.i=null,Ru.prototype.m.call(this)},u(Fh,Ru);var Hh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],Wh="optionFirst",Zh={pc:Wh,oc:"identifierFirst"},Xh="*";function Yh(e,t){var n=this;this.s=ai(e),this.a={},Object.keys(t).forEach((function(e){n.a[e]=new zh(t[e])})),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(e){this.ob=e||null},enumerable:!1})}function Qh(e){e.j&&e.j.reset(),e.mb(),e.g&&e.g.o()}(t=Yh.prototype).Ub=function(e,t){var n=this;Qh(this);var r=e.apiKey;return new jr((function(e,i){if(n.a.hasOwnProperty(r)){var a=Bh(n.a[r]).selectTenantUiHidden||null;if(function(e){for(var t in e=e.a.get("displayMode"),Zh)if(Zh[t]===e)return Zh[t];return Wh}(n.a[r])===Wh){var o=[];t.forEach((function(e){e=e||"_";var t=n.a[r].a.get("tenants");if(!t)throw Error("Invalid tenant configuration!");(t=t[e]||t[Xh])?e={tenantId:"_"!==e?e:null,V:t.fullLabel||null,displayName:t.displayName,za:t.iconUrl,ta:t.buttonColor}:(Wi("Invalid tenant configuration: "+e+" is not configured!",void 0),e=null),e&&o.push(e)}));var s=function(t){t={tenantId:t,providerIds:Gh(n.a[r],t||"_")},e(t)};if(1===o.length)return void s(o[0].tenantId);n.g=new jh((function(e){Qh(n),a&&a(),s(e)}),o,Uh(n.a[r]),Vh(n.a[r]))}else n.g=new Lh((function(){var i=n.g.j();if(i){for(var o=0;o<t.length;o++){var s=Gh(n.a[r],t[o]||"_",i);if(0!==s.length)return i={tenantId:t[o],providerIds:s,email:i},Qh(n),a&&a(),void e(i)}n.g.a(Pn({code:"no-matching-tenant-for-email"}).toString())}}),Uh(n.a[r]),Vh(n.a[r]));n.g.render(n.s),(i=Bh(n.a[r]).selectTenantUiShown||null)&&i()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.pb(u),i(u)}}))},t.Pb=function(e,t){if(!this.a.hasOwnProperty(e))throw Error("Invalid project configuration: API key is invalid!");var n=t||void 0;qh(this.a[e],t||"_");try{this.i=r.a.app(n).auth()}catch(a){var i=this.a[e].a.get("authDomain");if(!i)throw Error("Invalid project configuration: authDomain is required!");(e=r.a.initializeApp({apiKey:e,authDomain:i},n)).auth().tenantId=t,this.i=e.auth()}return this.i},t.Zb=function(e,t){var n=this;return new jr((function(r,i){function a(t,r){n.j=new fh(e),Eh(n.j,n.s,t,r)}var o=e.app.options.apiKey;n.a.hasOwnProperty(o)||i(Error("Invalid project configuration: API key is invalid!"));var s=Kh(n.a[o],e.tenantId||"_",t&&t.providerIds);Qh(n),i={signInSuccessWithAuthResult:function(e){return r(e),!1}};var u,c=Bh(n.a[o]).signInUiShown||null,l=!1;i.uiChanged=function(t,r){null===t&&"callback"===r?((t=Ut("firebaseui-id-page-callback",n.s))&&tu(t),n.h=new Fh,n.h.render(n.s)):l||null===t&&"spinner"===r||"blank"===r||(n.h&&(n.h.o(),n.h=null),l=!0,c&&c(e.tenantId))},s.callbacks=i,s.credentialHelper="none",t&&t.email&&(u={emailHint:t.email}),n.j?n.j.Wa().then((function(){a(s,u)})):a(s,u)}))},t.reset=function(){var e=this;return Gr().then((function(){e.j&&e.j.Wa()})).then((function(){e.j=null,Qh(e)}))},t.Vb=function(){var e=this;this.h||this.A||(this.A=window.setTimeout((function(){Qh(e),e.h=new Fh,e.g=e.h,e.h.render(e.s),e.A=null}),500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.o(),this.h=null)},t.Bb=function(){return Qh(this),this.g=new Gc,this.g.render(this.s),Gr()},t.pb=function(e){var t,n=this,r=Pn({code:e.code}).toString()||e.message;Qh(this),e.retry&&"function"===typeof e.retry&&(t=function(){n.reset(),e.retry()}),this.g=new Zc(r,t),this.g.render(this.s)},t.Rb=function(e){var t=this;return Gr().then((function(){var n=t.i&&t.i.app.options.apiKey;if(!t.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(qh(t.a[n],e.tenantId||"_"),!t.i.currentUser||t.i.currentUser.uid!==e.uid)throw Error("The user being processed does not match the signed in user!");return(n=Bh(t.a[n]).beforeSignInSuccess||null)?n(e):e})).then((function(t){if(t.uid!==e.uid)throw Error("User with mismatching UID returned.");return t}))},R("firebaseui.auth.FirebaseUiHandler",Yh),R("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Yh.prototype.Ub),R("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Yh.prototype.Pb),R("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Yh.prototype.Zb),R("firebaseui.auth.FirebaseUiHandler.prototype.reset",Yh.prototype.reset),R("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Yh.prototype.Vb),R("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Yh.prototype.mb),R("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Yh.prototype.Bb),R("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Yh.prototype.pb),R("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Yh.prototype.Rb),R("firebaseui.auth.AuthUI",fh),R("firebaseui.auth.AuthUI.getInstance",(function(e){return e=vh(e),ph[e]?ph[e]:null})),R("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",fh.prototype.Db),R("firebaseui.auth.AuthUI.prototype.start",fh.prototype.start),R("firebaseui.auth.AuthUI.prototype.setConfig",fh.prototype.ib),R("firebaseui.auth.AuthUI.prototype.signIn",fh.prototype.Wb),R("firebaseui.auth.AuthUI.prototype.reset",fh.prototype.reset),R("firebaseui.auth.AuthUI.prototype.delete",fh.prototype.Wa),R("firebaseui.auth.AuthUI.prototype.isPendingRedirect",fh.prototype.nb),R("firebaseui.auth.AuthUIError",Rn),R("firebaseui.auth.AuthUIError.prototype.toJSON",Rn.prototype.toJSON),R("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",Jo),R("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",es),R("firebaseui.auth.CredentialHelper.NONE",ts),R("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),jr.prototype.catch=jr.prototype.Ca,jr.prototype.finally=jr.prototype.fc}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:window)}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:window),"undefined"!==typeof window&&(window.dialogPolyfill=a.a);var o=firebaseui.auth}.call(this,n(32))},function(e,t,n){"use strict";n(52)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(n=function(){"use strict";var e=[],t=[],n="mdlComponentConfigInternal_";function r(t,n){for(var r=0;r<e.length;r++)if(e[r].className===t)return"undefined"!==typeof n&&(e[r]=n),e[r];return!1}function i(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function a(e,t){return-1!==i(e).indexOf(t)}function o(e,t,n){if("CustomEvent"in window&&"function"===typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,t,n),r}function s(t,n){if("undefined"===typeof t&&"undefined"===typeof n)for(var i=0;i<e.length;i++)s(e[i].className,e[i].cssClass);else{var a=t;if("undefined"===typeof n){var o=r(a);o&&(n=o.cssClass)}for(var c=document.querySelectorAll("."+n),l=0;l<c.length;l++)u(c[l],a)}}function u(s,u){if(!("object"===typeof s&&s instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var c=o("mdl-componentupgrading",!0,!0);if(s.dispatchEvent(c),!c.defaultPrevented){var l=i(s),h=[];if(u)a(s,u)||h.push(r(u));else{var f=s.classList;e.forEach((function(e){f.contains(e.cssClass)&&-1===h.indexOf(e)&&!a(s,e.className)&&h.push(e)}))}for(var d,p=0,v=h.length;p<v;p++){if(!(d=h[p]))throw new Error("Unable to find a registered component for the given class.");l.push(d.className),s.setAttribute("data-upgraded",l.join(","));var m=new d.classConstructor(s);m[n]=d,t.push(m);for(var y=0,g=d.callbacks.length;y<g;y++)d.callbacks[y](s);d.widget&&(s[d.className]=m);var b=o("mdl-componentupgraded",!0,!1);s.dispatchEvent(b)}}}function c(e){if(e){var r=t.indexOf(e);t.splice(r,1);var i=e.element_.getAttribute("data-upgraded").split(","),a=i.indexOf(e[n].classAsString);i.splice(a,1),e.element_.setAttribute("data-upgraded",i.join(","));var s=o("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(s)}}return{upgradeDom:s,upgradeElement:u,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,r=0,i=t.length;r<i;r++)(n=t[r])instanceof HTMLElement&&(u(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var t=0;t<e.length;t++)s(e[t].className)},registerUpgradedCallback:function(e,t){var n=r(e);n&&n.callbacks.push(t)},register:function(t){var i=!0;"undefined"===typeof t.widget&&"undefined"===typeof t.widget||(i=t.widget||t.widget);var a={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:i,callbacks:[]};if(e.forEach((function(e){if(e.cssClass===a.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===a.className)throw new Error("The provided className has already been registered")})),t.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have mdlComponentConfigInternal_ defined as a property.");r(t.classAsString,a)||e.push(a)},downgradeElements:function(e){var n=function(e){t.filter((function(t){return t.element_===e})).forEach(c)};if(e instanceof Array||e instanceof NodeList)for(var r=0;r<e.length;r++)n(e[r]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(e)}}}}()).ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",(function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}))},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialButton=e,e.prototype.Constant_={},e.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},e.prototype.blurHandler_=function(e){e&&this.element_.blur()},e.prototype.disable=function(){this.element_.disabled=!0},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.element_.disabled=!1},e.prototype.enable=e.prototype.enable,e.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:e,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialProgress=e,e.prototype.Constant_={},e.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},e.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},e.prototype.setProgress=e.prototype.setProgress,e.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},e.prototype.setBuffer=e.prototype.setBuffer,e.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:e,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialSpinner=e,e.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},e.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},e.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var a=[n,r,i],o=0;o<a.length;o++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),a[o].appendChild(s)}t.appendChild(n),t.appendChild(r),t.appendChild(i),this.element_.appendChild(t)},e.prototype.createLayer=e.prototype.createLayer,e.prototype.stop=function(){this.element_.classList.remove("is-active")},e.prototype.stop=e.prototype.stop,e.prototype.start=function(){this.element_.classList.add("is-active")},e.prototype.start=e.prototype.start,e.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:e,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}()},function(e,t){!function(){"use strict";var e=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=e,e.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},e.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},e.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onReset_=function(e){this.updateClasses_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},e.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.checkFocus=e.prototype.checkFocus,e.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},e.prototype.checkDirty=e.prototype.checkDirty,e.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},e.prototype.change=e.prototype.change,e.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:e,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}()},function(e,t,n){"use strict";(function(e,t){var r=n(4),i=n(11),a=n(1),o=n(0),s=n(10),u=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Object(a.K)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Object(a.E)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),c=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return Object(a.k)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),l=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new u(t)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=function(){var e=1;return function(){return e++}}(),v=function(e){var t=Object(a.J)(e),n=new a.d;n.update(t);var r=n.digest();return a.h.encodeByteArray(r)},m=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var o=t[i];Array.isArray(o)||o&&"object"===typeof o&&"number"===typeof o.length?r+=e.apply(null,o):r+="object"===typeof o?Object(a.K)(o):o,r+=" "}return r},y=null,g=!0,b=function(e,t){Object(a.f)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(d.logLevel=s.a.VERBOSE,y=d.log.bind(d),t&&f.set("logging_enabled",!0)):"function"===typeof e?y=e:(y=null,f.remove("logging_enabled"))},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===g&&(g=!1,null===y&&!0===f.get("logging_enabled")&&b(!0)),y){var n=m.apply(null,e);y(n)}},w=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];_.apply(void 0,Object(o.f)([e],Object(o.e)(t)))}},x=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(o.f)([],Object(o.e)(e)));d.error(n)},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(o.f)([],Object(o.e)(e)));throw d.error(n),new Error(n)},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+m.apply(void 0,Object(o.f)([],Object(o.e)(e)));d.warn(n)},T=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",I="[MAX_NAME]",C=function(e,t){if(e===t)return 0;if(e===S||t===I)return-1;if(t===S||e===I)return 1;var n=F(e),r=F(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},A=function(e,t){return e===t?0:e<t?-1:1},O=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Object(a.K)(t))},P=function e(t){if("object"!==typeof t||null===t)return Object(a.K)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=Object(a.K)(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},D=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function R(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var M=function(e){Object(a.f)(!T(e),"Invalid JSON number");var t,n,r,i,o,s=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),s))+s,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(o=52;o;o-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var c=u.join(""),l="";for(o=0;o<64;o+=8){var h=parseInt(c.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()},N=new RegExp("^-?(0*)\\d{1,10}$"),L=-2147483648,j=2147483647,F=function(e){if(N.test(e)){var t=Number(e);if(t>=L&&t<=j)return t}return null},z=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw E("Exception was thrown by user callback.",e),t}),Math.floor(0))}},B=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},U=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then((function(e){return n.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(e)},e}(),V=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),q="5",G=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K="websocket",H="long_polling",W=function(){function e(e,t,n,r,i,a,o){void 0===i&&(i=!1),void 0===a&&(a=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function Z(e,t,n){var r;if(Object(a.f)("string"===typeof t,"typeof type must == string"),Object(a.f)("object"===typeof n,"typeof params must == object"),t===K)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==H)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return R(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var X=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Object(a.k)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return Object(a.m)(this.counters_)},e}(),Y={},Q={};function $(e){var t=e.toString();return Y[t]||(Y[t]=new X),Y[t]}var J=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&z((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),ee="start",te="close",ne=function(){function e(e,t,n,r,i){this.connId=e,this.repoInfo=t,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(e),this.stats_=$(t),this.urlFn=function(e){return Z(t,H,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new J(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Object(a.A)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new re((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object(o.e)(e,5),i=r[0],a=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ee)n.id=a,n.password=s;else{if(i!==te)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object(o.e)(e,2),i=r[0],a=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=q,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),"undefined"!==typeof location&&location.hostname&&G.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!Object(a.A)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=Object(a.K)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Object(a.i)(t),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!Object(a.A)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=Object(a.K)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),re=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(a.A)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;Object(a.A)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){_("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),ie="";function ae(e){ie=e}var oe=null;"undefined"!==typeof MozWebSocket?oe=MozWebSocket:"undefined"!==typeof WebSocket&&(oe=WebSocket);var se=function(){function t(e,n,r,i,a){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=$(n),this.connURL=t.connectionURL_(n,i,a),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(e,t,n){var r={};return r.v=q,!Object(a.A)()&&"undefined"!==typeof location&&location.hostname&&G.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),Z(e,K,r)},t.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(a.A)()){var i=this.nodeAdmin?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+ie+"/"+e.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=Object({NODE_ENV:"production",PUBLIC_URL:"/Pixelpedia",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),u=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(o.proxy={origin:u}),this.mySock=new oe(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new oe(this.connURL,[],o)}}catch(l){this.log_("Error instantiating WebSocket.");var c=l.message||l.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==oe&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Object(a.E)(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(Object(a.f)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=Object(a.K)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=D(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),ue=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[ne,se]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=se&&se.isAvailable(),a=i&&!se.previouslyFailed();if(t.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[se];else{var s=this.transports_=[];try{for(var u=Object(o.g)(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),ce=function(){function e(e,t,n,r,i,a,o,s){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=a,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new ue(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=B((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=O("t",e),n=O("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=O("t",e),n=O("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=O("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?x("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):x("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),q!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),B((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),le=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),he=function(){function e(e){this.allowedEvents_=e,this.listeners_={},Object(a.f)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){Object(a.f)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),fe=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(a.y)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return Object(o.c)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return Object(a.f)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(he),de=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function pe(){return new de("")}function ve(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function me(e){return e.pieces_.length-e.pieceNum_}function ye(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new de(e.pieces_,t)}function ge(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function be(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function _e(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function we(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new de(t,0)}function xe(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof de)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new de(n,0)}function ke(e){return e.pieceNum_>=e.pieces_.length}function Ee(e,t){var n=ve(e),r=ve(t);if(null===n)return t;if(n===r)return Ee(ye(e),ye(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Te(e,t){for(var n=_e(e,0),r=_e(t,0),i=0;i<n.length&&i<r.length;i++){var a=C(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Se(e,t){if(me(e)!==me(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ie(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(me(e)>me(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ce=function(e,t){this.errorPrefix_=t,this.parts_=_e(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(a.I)(this.parts_[n]);Ae(this)};function Ae(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Oe(e))}function Oe(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Pe,De,Re=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return Object(o.c)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return Object(a.f)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(he),Me=1e3,Ne=function(e){function t(n,r,i,o,s,u,c){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=t.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Me,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(a.A)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Re.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&fe.getInstance().on("online",l.onOnline_,l),l}return Object(o.c)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Object(a.K)(i)),Object(a.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this,n=new a.a,r={p:e.path.toString(),q:e.queryObject()},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Object(a.f)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(a.f)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),a=r.queryIdentifier();this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r.queryObject(),o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(a))===e&&(n.log_("listen response",o),"ok"!==u&&n.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&Object(a.k)(e,"w")){var n=Object(a.H)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||Object(a.r)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=Object(a.D)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(a.f)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+Object(a.K)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):x("Unrecognized action received from server: "+Object(a.K)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;Object(a.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Me,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Me,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Me),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(e){Object(a.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(e){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),s.authToken_=e&&e.accessToken,l=new ce(o,s.repoInfo_,s.applicationId_,n,r,i,(function(e){E(e+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(t){s.log_("Failed to get token: "+t),c||(e.repoInfo_.nodeAdmin&&E(t),h())}))}},t.prototype.interrupt=function(e){_("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){_("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Object(a.v)(this.interruptReasons_)&&(this.reconnectDelay_=Me,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return P(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new de(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){_("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Object(o.g)(this.listens.values()),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,Object(o.g)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},t.prototype.sendConnectStats_=function(){var e={},t="js";Object(a.A)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ie.replace(/\./g,"-")]=1,Object(a.y)()?e["framework.cordova"]=1:Object(a.B)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=fe.getInstance().currentlyOnline();return Object(a.v)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(le),Le=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),je=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Le(S,e),r=new Le(S,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Le.MIN},e}(),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Pe},set:function(e){Pe=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return C(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw Object(a.g)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Le.MIN},t.prototype.maxPost=function(){return new Le(I,Pe)},t.prototype.makePost=function(e,t){return Object(a.f)("string"===typeof e,"KeyIndex indexValue must always be a string."),new Le(e,Pe)},t.prototype.toString=function(){return".key"},t}(je),ze=new Fe,Be=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var a=1;!e.isEmpty();)if(e=e,a=t?n(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse_?e.left:e.right;else{if(0===a){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Ue=function(){function e(t,n,r,i,a){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:qe.EMPTY_NODE,this.right=null!=a?a:qe.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return qe.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return qe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Ve=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ue(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),qe=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ue.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ue.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Be(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Be(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Be(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Be(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Ve,e}();function Ge(e,t){return C(e.name,t.name)}function Ke(e,t){return C(e,t)}var He,We,Ze,Xe=function(e){return"number"===typeof e?"number:"+M(e):"string:"+e},Ye=function(e){if(e.isLeafNode()){var t=e.val();Object(a.f)("string"===typeof t||"number"===typeof t||"object"===typeof t&&Object(a.k)(t,".sv"),"Priority must be a string or number.")}else Object(a.f)(e===De||e.isEmpty(),"priority of unexpected type.");Object(a.f)(e===De||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Qe=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Object(a.f)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ye(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return He},set:function(e){He=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return ke(t)?this:".priority"===ve(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=ve(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(a.f)(".priority"!==r||1===me(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ye(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Xe(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?M(this.value_):this.value_,this.lazyHash_=v(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Object(a.f)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return Object(a.f)(i>=0,"Unknown leaf type: "+n),Object(a.f)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var $e,Je,et=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?C(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Le.MIN},t.prototype.maxPost=function(){return new Le(I,new Qe("[PRIORITY-POST]",Ze))},t.prototype.makePost=function(e,t){var n=We(e);return new Le(t,new Qe("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(je)),tt=Math.log(2),nt=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/tt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),rt=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new Ue(o,a.node,Ue.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new Ue(o,a.node,Ue.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new Ue(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Ue.BLACK):(s(h,Ue.BLACK),s(h,Ue.RED))}return a}(new nt(e.length));return new qe(r||t,a)},it={},at=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return Object(a.f)(it&&et,"ChildrenNode.ts has not been loaded"),$e=$e||new e({".priority":it},{".priority":et})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=Object(a.H)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qe?t:null},e.prototype.hasIndex=function(e){return Object(a.k)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){Object(a.f)(t!==ze,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(Le.Wrap),c=u.getNext();c;)s=s||t.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?rt(i,t.getCompare()):it;var l=t.toString(),h=Object(o.a)({},this.indexSet_);h[l]=t;var f=Object(o.a)({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(Object(a.F)(this.indexes_,(function(e,i){var o=Object(a.H)(r.indexSet_,i);if(Object(a.f)(o,"Missing index implementation for "+i),e===it){if(o.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(Le.Wrap),c=u.getNext();c;)c.name!==t.name&&s.push(c),c=u.getNext();return s.push(t),rt(s,o.getCompare())}return it}var l=n.get(t.name),h=e;return l&&(h=h.remove(new Le(t.name,l))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(Object(a.F)(this.indexes_,(function(e){if(e===it)return e;var r=n.get(t.name);return r?e.remove(new Le(t.name,r)):e})),this.indexSet_)},e}(),ot=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ye(this.priorityNode_),this.children_.isEmpty()&&Object(a.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Je||(Je=new e(new qe(Ke),null,at.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Je},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Je:t},e.prototype.getChild=function(e){var t=ve(e);return null===t?this:this.getImmediateChild(t).getChild(ye(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(Object(a.f)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Le(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Je:this.priorityNode_;return new e(i,s,o)},e.prototype.updateChild=function(e,t){var n=ve(e);if(null===n)return t;Object(a.f)(".priority"!==ve(e)||1===me(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ye(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(et,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Xe(this.getPriority().val())+":"),this.forEachChild(et,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":v(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Le(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Le(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Le(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Le.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Le.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===st?-1:0},e.prototype.withIndex=function(t){if(t===ze||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===ze||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(et),r=t.getIterator(et),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===ze?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),st=new(function(e){function t(){return e.call(this,new qe(Ke),ot.EMPTY_NODE,at.Default)||this}return Object(o.c)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return ot.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(ot));Object.defineProperties(Le,{MIN:{value:new Le(S,ot.EMPTY_NODE)},MAX:{value:new Le(I,st)}}),Fe.__EMPTY_NODE=ot.EMPTY_NODE,Qe.__childrenNodeConstructor=ot,De=st,function(e){Ze=e}(st);function ut(e,t){if(void 0===t&&(t=null),null===e)return ot.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Object(a.f)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Qe(e,ut(t));if(e instanceof Array){var n=ot.EMPTY_NODE;return R(e,(function(t,r){if(Object(a.k)(e,t)&&"."!==t.substring(0,1)){var i=ut(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(ut(t))}var r=[],i=!1;if(R(e,(function(e,t){if("."!==e.substring(0,1)){var n=ut(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Le(e,n)))}})),0===r.length)return ot.EMPTY_NODE;var o=rt(r,Ge,(function(e){return e.name}),Ke);if(i){var s=rt(r,et.getCompare());return new ot(o,ut(t),new at({".priority":s},{".priority":et}))}return new ot(o,ut(t),at.Default)}!function(e){We=e}(ut);var ct=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,Object(a.f)(!ke(t)&&".priority"!==ve(t),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?C(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=ut(e),r=ot.EMPTY_NODE.updateChild(this.indexPath_,n);return new Le(t,r)},t.prototype.maxPost=function(){var e=ot.EMPTY_NODE.updateChild(this.indexPath_,st);return new Le(I,e)},t.prototype.toString=function(){return _e(this.indexPath_,0).join("/")},t}(je),lt=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.c)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?C(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Le.MIN},t.prototype.maxPost=function(){return Le.MAX},t.prototype.makePost=function(e,t){var n=ut(e);return new Le(t,n)},t.prototype.toString=function(){return".value"},t}(je)),ht="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ft=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var o=new Array(8);for(r=7;r>=0;r--)o[r]=ht.charAt(n%64),n=Math.floor(n/64);Object(a.f)(0===n,"Cannot push at time == 0");var s=o.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=ht.charAt(t[r]);return Object(a.f)(20===s.length,"nextPushId: Length should be 20."),s}}(),dt=function(e){if("2147483647"===e)return"-";var t=F(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var a=n[i],o=ht.charAt(ht.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},pt=function(e){if("-2147483648"===e)return S;var t=F(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ht.charAt(ht.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function vt(e){return{type:"value",snapshotNode:e}}function mt(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function yt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function gt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var bt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){Object(a.f)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(yt(t,s)):Object(a.f)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(mt(t,n)):o.trackChildChange(gt(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(et,(function(e,r){t.hasChild(e)||n.trackChildChange(yt(e,r))})),t.isLeafNode()||t.forEachChild(et,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(gt(t,r,i))}else n.trackChildChange(mt(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?ot.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),_t=function(){function e(t){this.indexedFilter_=new bt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,a){return this.matches(new Le(t,n))||(n=ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=ot.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ot.EMPTY_NODE);var i=this;return t.forEachChild(et,(function(e,t){i.matches(new Le(e,t))||(r=r.updateImmediateChild(e,ot.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),wt=function(){function e(e){this.rangedFilter_=new _t(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Le(t,n))||(n=ot.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ot.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=ot.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{r=(r=t.withIndex(this.index_)).updatePriority(ot.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();a=0;for(var h=!1;i.hasNext();){o=i.getNext();!h&&c(s,o)<=0&&(h=!0),h&&a<this.limit_&&c(o,u)<=0?a++:r=r.updateImmediateChild(o.name,ot.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var u=e;Object(a.f)(u.numChildren()===this.limit_,"");var c=new Le(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:o(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(gt(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(yt(t,f));var v=u.updateImmediateChild(t,ot.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(mt(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?e:h&&o(l,c)>=0?(null!=i&&(i.trackChildChange(yt(l.name,l.node)),i.trackChildChange(mt(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,ot.EMPTY_NODE)):e},e}(),xt=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=et}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return Object(a.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return Object(a.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return Object(a.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return Object(a.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return Object(a.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===et},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function kt(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function Et(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Tt(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function St(e,t,n){var r;if(e.index_===ze)"string"===typeof t&&(t=dt(t)),r=Tt(e,t,n);else{r=Tt(e,t,null==n?I:dt(n))}return r.startAfterSet_=!0,r}function It(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ct(e,t,n){var r;return e.index_===ze?("string"===typeof t&&(t=pt(t)),r=It(e,t,n)):r=It(e,t,null==n?S:pt(n)),r.endBeforeSet_=!0,r}function At(e,t){var n=e.copy();return n.index_=t,n}function Ot(e){var t,n={};return e.isDefault()||(e.index_===et?t="$priority":e.index_===lt?t="$value":e.index_===ze?t="$key":(Object(a.f)(e.index_ instanceof ct,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Object(a.K)(t),e.startSet_&&(n.startAt=Object(a.K)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Object(a.K)(e.indexStartName_))),e.endSet_&&(n.endAt=Object(a.K)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Object(a.K)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}var Pt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(o.c)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(Object(a.f)(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=Ot(e.getQueryParams());this.restRequest_(s+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),Object(a.H)(o.listens_,u)===c)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Ot(e.getQueryParams()),r=e.path.toString(),i=new a.a;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+Object(a.G)(t);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var e=null;if(u.status>=200&&u.status<300){try{e=Object(a.E)(u.responseText)}catch(t){E("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,e)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},t}(le),Dt=function(){function e(){this.rootNode_=ot.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();function Rt(){return{value:null,children:new Map}}function Mt(e,t,n){if(ke(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ve(t);e.children.has(r)||e.children.set(r,Rt()),Mt(e.children.get(r),t=ye(t),n)}}function Nt(e,t){if(ke(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(et,(function(t,n){Mt(e,new de(t),n)})),Nt(e,t)}if(e.children.size>0){var r=ve(t);if(t=ye(t),e.children.has(r))Nt(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Lt(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Lt(r,new de(t.toString()+"/"+e),n)}))}var jt,Ft=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=Object(o.a)({},e);return this.last_&&R(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),zt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ft(e);var n=1e4+2e4*Math.random();B(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;R(t,(function(t,i){i>0&&Object(a.k)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();function Bt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(jt||(jt={}));var Ut,Vt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=jt.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(ke(this.path)){if(null!=this.affectedTree.value)return Object(a.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new de(t));return new e(pe(),n,this.revert)}return Object(a.f)(ve(this.path)===t,"operationForChild called for unrelated child."),new e(ye(this.path),this.affectedTree,this.revert)},e}(),qt=function(){function e(e,t){this.source=e,this.path=t,this.type=jt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return ke(this.path)?new e(this.source,pe()):new e(this.source,ye(this.path))},e}(),Gt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=jt.OVERWRITE}return e.prototype.operationForChild=function(t){return ke(this.path)?new e(this.source,pe(),this.snap.getImmediateChild(t)):new e(this.source,ye(this.path),this.snap)},e}(),Kt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=jt.MERGE}return e.prototype.operationForChild=function(t){if(ke(this.path)){var n=this.children.subtree(new de(t));return n.isEmpty()?null:n.value?new Gt(this.source,pe(),n.value):new e(this.source,pe(),n)}return Object(a.f)(ve(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,ye(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),Ht=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(ke(e))return this.isFullyInitialized()&&!this.filtered_;var t=ve(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),Wt=function(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()};function Zt(e,t,n,r,i,o){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Object(a.g)("Should only compare child_ events.");var r=new Le(t.childName,t.snapshotNode),i=new Le(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Xt(e,t){return{eventCache:e,serverCache:t}}function Yt(e,t,n,r){return Xt(new Ht(t,n,r),e.serverCache)}function Qt(e,t,n,r){return Xt(e.eventCache,new Ht(t,n,r))}function $t(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Jt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var en=function(){function e(e,t){void 0===t&&(Ut||(Ut=new qe(A)),t=Ut),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return R(t,(function(e,t){n=n.set(new de(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:pe(),value:this.value};if(ke(e))return null;var n=ve(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ye(e),t);return null!=i?{path:xe(new de(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(ke(t))return this;var n=ve(t),r=this.children.get(n);return null!==r?r.subtree(ye(t)):new e(null)},e.prototype.set=function(t,n){if(ke(t))return new e(n,this.children);var r=ve(t),i=(this.children.get(r)||new e(null)).set(ye(t),n),a=this.children.insert(r,i);return new e(this.value,a)},e.prototype.remove=function(t){if(ke(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ve(t),r=this.children.get(n);if(r){var i=r.remove(ye(t)),a=void 0;return a=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&a.isEmpty()?new e(null):new e(this.value,a)}return this},e.prototype.get=function(e){if(ke(e))return this.value;var t=ve(e),n=this.children.get(t);return n?n.get(ye(e)):null},e.prototype.setTree=function(t,n){if(ke(t))return n;var r=ve(t),i=(this.children.get(r)||new e(null)).setTree(ye(t),n),a=void 0;return a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(pe(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(xe(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,pe(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ke(e))return null;var i=ve(e),a=this.children.get(i);return a?a.findOnPath_(ye(e),xe(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,pe(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(ke(t))return this;this.value&&r(n,this.value);var i=ve(t),a=this.children.get(i);return a?a.foreachOnPath_(ye(t),xe(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(pe(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(xe(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),tn=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new en(null))},e}();function nn(e,t,n){if(ke(t))return new tn(new en(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Ee(i,t);return a=a.updateChild(o,n),new tn(e.writeTree_.set(i,a))}var s=new en(n),u=e.writeTree_.setTree(t,s);return new tn(u)}function rn(e,t,n){var r=e;return R(n,(function(e,n){r=nn(r,xe(t,e),n)})),r}function an(e,t){if(ke(t))return tn.empty();var n=e.writeTree_.setTree(t,new en(null));return new tn(n)}function on(e,t){return null!=sn(e,t)}function sn(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ee(n.path,t)):null}function un(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(et,(function(e,n){t.push(new Le(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Le(e,n.value))})),t}function cn(e,t){if(ke(t))return e;var n=sn(e,t);return new tn(null!=n?new en(n):e.writeTree_.subtree(t))}function ln(e){return e.writeTree_.isEmpty()}function hn(e,t){return fn(pe(),e.writeTree_,t)}function fn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Object(a.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=fn(xe(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(xe(e,".priority"),r)),n}function dn(e,t){return Sn(t,e)}function pn(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Object(a.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,s=e.allWrites.length-1;i&&s>=0;){var u=e.allWrites[s];u.visible&&(s>=n&&vn(u,r.path)?i=!1:Ie(r.path,u.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=yn(e.allWrites,mn,pe()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=an(e.visibleWrites,r.path):R(r.children,(function(t){e.visibleWrites=an(e.visibleWrites,xe(r.path,t))}));return!0}return!1}function vn(e,t){if(e.snap)return Ie(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ie(xe(e.path,n),t))return!0;return!1}function mn(e){return e.visible}function yn(e,t,n){for(var r=tn.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,u=void 0;if(o.snap)Ie(n,s)?r=nn(r,u=Ee(n,s),o.snap):Ie(s,n)&&(u=Ee(s,n),r=nn(r,pe(),o.snap.getChild(u)));else{if(!o.children)throw Object(a.g)("WriteRecord should have .snap or .children");if(Ie(n,s))r=rn(r,u=Ee(n,s),o.children);else if(Ie(s,n))if(ke(u=Ee(s,n)))r=rn(r,pe(),o.children);else{var c=Object(a.H)(o.children,ve(u));if(c){var l=c.getChild(ye(u));r=nn(r,pe(),l)}}}}}return r}function gn(e,t,n,r,i){if(r||i){var a=cn(e.visibleWrites,t);if(!i&&ln(a))return n;if(i||null!=n||on(a,pe())){return hn(yn(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ie(e.path,t)||Ie(t,e.path))}),t),n||ot.EMPTY_NODE)}return null}var o=sn(e.visibleWrites,t);if(null!=o)return o;var s=cn(e.visibleWrites,t);return ln(s)?n:null!=n||on(s,pe())?hn(s,n||ot.EMPTY_NODE):null}function bn(e,t,n,r){return gn(e.writeTree,e.treePath,t,n,r)}function _n(e,t){return function(e,t,n){var r=ot.EMPTY_NODE,i=sn(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(et,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=cn(e.visibleWrites,t);return n.forEachChild(et,(function(e,t){var n=hn(cn(a,new de(e)),t);r=r.updateImmediateChild(e,n)})),un(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return un(cn(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function wn(e,t,n,r){return function(e,t,n,r,i){Object(a.f)(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=xe(t,n);if(on(e.visibleWrites,o))return null;var s=cn(e.visibleWrites,o);return ln(s)?i.getChild(n):hn(s,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function xn(e,t){return function(e,t){return sn(e.visibleWrites,t)}(e.writeTree,xe(e.treePath,t))}function kn(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=cn(e.visibleWrites,t),c=sn(u,pe());if(null!=c)s=c;else{if(null==n)return[];s=hn(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function En(e,t,n){return function(e,t,n,r){var i=xe(t,n),a=sn(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?hn(cn(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Tn(e,t){return Sn(xe(e.treePath,t),e.writeTree)}function Sn(e,t){return{treePath:e,writeTree:t}}var In=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;Object(a.f)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Object(a.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,gt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,yt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,mt(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Object(a.g)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),Cn=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),An=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Ht(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return En(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Jt(this.viewCache_),i=kn(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();function On(e,t,n,r,i){var o,s,u=new In;if(n.type===jt.OVERWRITE){var c=n;c.source.fromUser?o=Rn(e,t,c.path,c.snap,r,i,u):(Object(a.f)(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered()&&!ke(c.path),o=Dn(e,t,c.path,c.snap,r,i,s,u))}else if(n.type===jt.MERGE){var l=n;l.source.fromUser?o=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=xe(n,r);Mn(t,ve(c))&&(s=Rn(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=xe(n,r);Mn(t,ve(c))||(s=Rn(e,s,c,u,i,a,o))})),s}(e,t,l.path,l.children,r,i,u):(Object(a.f)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),o=Ln(e,t,l.path,l.children,r,i,s,u))}else if(n.type===jt.ACK_USER_WRITE){var h=n;o=h.revert?function(e,t,n,r,i,o){var s;if(null!=xn(r,n))return t;var u=new An(r,t,i),c=t.eventCache.getNode(),l=void 0;if(ke(n)||".priority"===ve(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=bn(r,Jt(t));else{var f=t.serverCache.getNode();Object(a.f)(f instanceof ot,"serverChildren would be complete if leaf node"),h=_n(r,f)}h=h,l=e.filter.updateFullNode(c,h,o)}else{var d=ve(n),p=En(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?e.filter.updateChild(c,d,p,ye(n),u,o):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,ot.EMPTY_NODE,ye(n),u,o):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=bn(r,Jt(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,s,o))}return s=t.serverCache.isFullyInitialized()||null!=xn(r,pe()),Yt(t,l,s,e.filter.filtersNodes())}(e,t,h.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=xn(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(ke(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Dn(e,t,n,u.getNode().getChild(n),i,a,s,o);if(ke(n)){var c=new en(null);return u.getNode().forEachChild(ze,(function(e,t){c=c.set(new de(e),t)})),Ln(e,t,n,c,i,a,s,o)}return t}var l=new en(null);return r.foreach((function(e,t){var r=xe(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Ln(e,t,n,l,i,a,s,o)}(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==jt.LISTEN_COMPLETE)throw Object(a.g)("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var a=t.serverCache,o=Qt(t,a.getNode(),a.isFullyInitialized()||ke(n),a.isFiltered());return Pn(e,o,n,r,Cn,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=$t(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(vt($t(t)))}}(t,o,f),{viewCache:o,changes:f}}function Pn(e,t,n,r,i,o){var s=t.eventCache;if(null!=xn(r,n))return t;var u=void 0,c=void 0;if(ke(n))if(Object(a.f)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Jt(t),h=_n(r,l instanceof ot?l:ot.EMPTY_NODE);u=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=bn(r,Jt(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,o)}else{var d=ve(n);if(".priority"===d){Object(a.f)(1===me(n),"Can't have a priority with additional path components");var p=s.getNode(),v=wn(r,n,p,c=t.serverCache.getNode());u=null!=v?e.filter.updatePriority(p,v):s.getNode()}else{var m=ye(n),y=void 0;if(s.isCompleteForChild(d)){c=t.serverCache.getNode();var g=wn(r,n,s.getNode(),c);y=null!=g?s.getNode().getImmediateChild(d).updateChild(m,g):s.getNode().getImmediateChild(d)}else y=En(r,d,t.serverCache);u=null!=y?e.filter.updateChild(s.getNode(),d,y,m,i,o):s.getNode()}}return Yt(t,u,s.isFullyInitialized()||ke(n),e.filter.filtersNodes())}function Dn(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(ke(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ve(n);if(!c.isCompleteForPath(n)&&me(n)>1)return t;var d=ye(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Cn,null)}var v=Qt(t,u,c.isFullyInitialized()||ke(n),l.filtersNodes());return Pn(e,v,n,i,new An(i,v,a),s)}function Rn(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new An(i,t,a);if(ke(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Yt(t,u,!0,e.filter.filtersNodes());else{var h=ve(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Yt(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=ye(n),d=c.getNode().getImmediateChild(h),p=void 0;if(ke(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===ge(f)&&v.getChild(we(f)).isEmpty()?v:v.updateChild(f,r):ot.EMPTY_NODE}if(d.equals(p))s=t;else s=Yt(t,e.filter.updateChild(c.getNode(),h,p,f,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Mn(e,t){return e.eventCache.isCompleteForChild(t)}function Nn(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ln(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=ke(n)?r:new en(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Nn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Dn(e,c,new de(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Nn(0,t.serverCache.getNode().getImmediateChild(n),r);c=Dn(e,c,new de(n),h,i,a,o,s)}})),c}var jn,Fn=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new bt(r.getIndex()),a=(n=r).loadsAllData()?new bt(n.getIndex()):n.hasLimit()?new wt(n):new _t(n);this.processor_=function(e){return{filter:e}}(a);var o=t.serverCache,s=t.eventCache,u=i.updateFullNode(ot.EMPTY_NODE,o.getNode(),null),c=a.updateFullNode(ot.EMPTY_NODE,s.getNode(),null),l=new Ht(u,o.isFullyInitialized(),i.filtersNodes()),h=new Ht(c,s.isFullyInitialized(),a.filtersNodes());this.viewCache_=Xt(h,l),this.eventGenerator_=new Wt(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function zn(e,t){var n=Jt(e.viewCache_);return n&&(e.query.getQueryParams().loadsAllData()||!ke(t)&&!n.getImmediateChild(ve(t)).isEmpty())?n.getChild(t):null}function Bn(e){return 0===e.eventRegistrations_.length}function Un(e,t,n){var r=[];if(n){Object(a.f)(null==t,"A cancel should cancel all event registrations.");var i=e.query.path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(s+1));break}}else o.push(u)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function Vn(e,t,n,r){t.type===jt.MERGE&&null!==t.source.queryId&&(Object(a.f)(Jt(e.viewCache_),"We should always have a full cache before handling merges"),Object(a.f)($t(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,s=e.viewCache_,u=On(e.processor_,s,t,n,r);return i=e.processor_,o=u.viewCache,Object(a.f)(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(a.f)(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(a.f)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,qn(e,u.changes,u.viewCache.eventCache.getNode(),null)}function qn(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Zt(e,i,"child_removed",t,r,n),Zt(e,i,"child_added",t,r,n),Zt(e,i,"child_moved",a,r,n),Zt(e,i,"child_changed",t,r,n),Zt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Gn=function(){this.views=new Map};function Kn(e,t,n,r){var i,s,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return Object(a.f)(null!=c,"SyncTree gave us an op for an invalid query."),Vn(c,t,n,r)}var l=[];try{for(var h=Object(o.g)(e.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(Vn(c,t,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Hn(e,t,n,r,i){var a=t.queryIdentifier(),o=e.views.get(a);if(!o){var s=bn(n,i?r:null),u=!1;s?u=!0:r instanceof ot?(s=_n(n,r),u=!1):(s=ot.EMPTY_NODE,u=!1);var c=Xt(new Ht(s,u,!1),new Ht(r,i,!1));return new Fn(t,c)}return o}function Wn(e,t,n,r,i,a){var o=Hn(e,t,r,i,a);return e.views.has(t.queryIdentifier())||e.views.set(t.queryIdentifier(),o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(et,(function(e,t){r.push(mt(e,t))})),n.isFullyInitialized()&&r.push(vt(n.getNode())),qn(e,r,n.getNode(),t)}(o,n)}function Zn(e,t,n,r){var i,s,u=t.queryIdentifier(),c=[],l=[],h=Jn(e);if("default"===u)try{for(var f=Object(o.g)(e.views.entries()),d=f.next();!d.done;d=f.next()){var p=Object(o.e)(d.value,2),v=p[0],m=p[1];l=l.concat(Un(m,n,r)),Bn(m)&&(e.views.delete(v),m.query.getQueryParams().loadsAllData()||c.push(m.query))}}catch(y){i={error:y}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}else(m=e.views.get(u))&&(l=l.concat(Un(m,n,r)),Bn(m)&&(e.views.delete(u),m.query.getQueryParams().loadsAllData()||c.push(m.query)));return h&&!Jn(e)&&c.push(new(Object(a.f)(jn,"Reference.ts has not been loaded"),jn)(t.database,t.path)),{removed:c,events:l}}function Xn(e){var t,n,r=[];try{for(var i=Object(o.g)(e.views.values()),a=i.next();!a.done;a=i.next()){var s=a.value;s.query.getQueryParams().loadsAllData()||r.push(s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Yn(e,t){var n,r,i=null;try{for(var a=Object(o.g)(e.views.values()),s=a.next();!s.done;s=a.next()){var u=s.value;i=i||zn(u,t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function Qn(e,t){if(t.getQueryParams().loadsAllData())return er(e);var n=t.queryIdentifier();return e.views.get(n)}function $n(e,t){return null!=Qn(e,t)}function Jn(e){return null!=er(e)}function er(e){var t,n;try{for(var r=Object(o.g)(e.views.values()),i=r.next();!i.done;i=r.next()){var a=i.value;if(a.query.getQueryParams().loadsAllData())return a}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var tr=1,nr=function(e){this.listenProvider_=e,this.syncPointTree_=new en(null),this.pendingWriteTree_={visibleWrites:tn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function rr(e,t,n,r,i){return function(e,t,n,r,i){Object(a.f)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=nn(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?hr(e,new Gt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ir(e,t,n,r){!function(e,t,n,r){Object(a.f)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=rn(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=en.fromObject(n);return hr(e,new Kt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function ar(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(pn(e.pendingWriteTree_,t)){var i=new en(null);return null!=r.snap?i=i.set(pe(),!0):R(r.children,(function(e){i=i.set(new de(e),!0)})),hr(e,new Vt(r.path,i,n))}return[]}function or(e,t,n){return hr(e,new Gt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function sr(e,t,n,r){var i=t.path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t.queryIdentifier()||$n(a,t))){var s=Zn(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e.getQueryParams().loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Jn(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Jn(t))return[er(t)];var r=[];return t&&(r=Xn(t)),R(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,m=pr(e,p);e.listenProvider_.startListening(_r(v),vr(e,v),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(_r(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(mr(t));e.listenProvider_.stopListening(_r(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=mr(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function ur(e,t,n){var r=t.path,i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=Ee(e,r);i=i||Yn(t,n),o=o||Jn(t)}));var s,u=e.syncPointTree_.get(r);(u?(o=o||Jn(u),i=i||Yn(u,pe())):(u=new Gn,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=ot.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Yn(t,pe());n&&(i=i.updateImmediateChild(e,n))})));var c=$n(u,t);if(!c&&!t.getQueryParams().loadsAllData()){var l=mr(t);Object(a.f)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=tr++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=Wn(u,t,n,dn(e.pendingWriteTree_,r),i,s);if(!c&&!o){var d=Qn(u,t);f=f.concat(function(e,t,n){var r=t.path,i=vr(e,t),o=pr(e,n),s=e.listenProvider_.startListening(_r(t),i,o.hashFn,o.onComplete),u=e.syncPointTree_.subtree(r);if(i)Object(a.f)(!Jn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(e,t,n){if(!ke(e)&&t&&Jn(t))return[er(t).query];var r=[];return t&&(r=r.concat(Xn(t).map((function(e){return e.query})))),R(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(_r(h),vr(e,h))}return s}(e,t,d))}return f}function cr(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Yn(n,Ee(e,t));if(r)return r}));return gn(r,t,i,n,!0)}function lr(e,t){var n=t.path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Ee(e,n);r=r||Yn(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Yn(i,pe()):(i=new Gn,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Ht(r,!0,!1):null;return function(e){return $t(e.viewCache_)}(Hn(i,t,dn(e.pendingWriteTree_,t.path),a?o.getNode():ot.EMPTY_NODE,a))}function hr(e,t){return fr(t,e.syncPointTree_,null,dn(e.pendingWriteTree_,pe()))}function fr(e,t,n,r){if(ke(e.path))return dr(e,t,n,r);var i=t.get(pe());null==n&&null!=i&&(n=Yn(i,pe()));var a=[],o=ve(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Tn(r,o);a=a.concat(fr(s,u,c,l))}return i&&(a=a.concat(Kn(i,e,r,n))),a}function dr(e,t,n,r){var i=t.get(pe());null==n&&null!=i&&(n=Yn(i,pe()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=Tn(r,t),u=e.operationForChild(t);u&&(a=a.concat(dr(u,i,o,s)))})),i&&(a=a.concat(Kn(i,e,r,n))),a}function pr(e,t){var n=t.query,r=vr(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||ot.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=yr(e,n);if(r){var i=gr(r),a=i.path,o=i.queryId,s=Ee(a,t);return br(e,a,new qt(Bt(o),s))}return[]}(e,n.path,r):function(e,t){return hr(e,new qt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return sr(e,n,null,i)}}}function vr(e,t){var n=mr(t);return e.queryToTagMap.get(n)}function mr(e){return e.path.toString()+"$"+e.queryIdentifier()}function yr(e,t){return e.tagToQueryMap.get(t)}function gr(e){var t=e.indexOf("$");return Object(a.f)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new de(e.substr(0,t))}}function br(e,t,n){var r=e.syncPointTree_.get(t);return Object(a.f)(r,"Missing sync point for query tag that we're tracking"),Kn(r,n,dn(e.pendingWriteTree_,t),null)}function _r(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e}var wr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),xr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=xe(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return cr(this.syncTree_,this.path_)},e}(),kr=function(e,t,n){return e&&"object"===typeof e?(Object(a.f)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Er(e[".sv"],t,n):"object"===typeof e[".sv"]?Tr(e[".sv"],t):void Object(a.f)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Er=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Object(a.f)(!1,"Unexpected server value: "+e)}},Tr=function(e,t,n){e.hasOwnProperty("increment")||Object(a.f)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Object(a.f)(!1,"Unexpected increment value: "+r);var i=t.node();if(Object(a.f)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!==typeof o?r:o+r},Sr=function(e,t,n,r){return Cr(t,new xr(n,e),r)},Ir=function(e,t,n){return Cr(e,new wr(t),n)};function Cr(e,t,n){var r,i=e.getPriority().val(),a=kr(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=kr(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Qe(s,ut(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Qe(a))),u.forEachChild(et,(function(e,i){var a=Cr(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Ar=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function Or(e,t){for(var n=t instanceof de?t:new de(t),r=e,i=ve(n);null!==i;){var o=Object(a.H)(r.node.children,i)||{children:{},childCount:0};r=new Ar(i,r,o),i=ve(n=ye(n))}return r}function Pr(e){return e.node.value}function Dr(e,t){e.node.value=t,jr(e)}function Rr(e){return e.node.childCount>0}function Mr(e,t){R(e.node.children,(function(n,r){t(new Ar(n,e,r))}))}function Nr(e,t,n,r){n&&!r&&t(e),Mr(e,(function(e){Nr(e,t,!0,r)})),n&&r&&t(e)}function Lr(e){return new de(null===e.parent?e.name:Lr(e.parent)+"/"+e.name)}function jr(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Pr(e)&&!Rr(e)}(n),i=Object(a.k)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,jr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,jr(e))}(e.parent,e.name,e)}var Fr=/[\[\].#$\/\u0000-\u001F\u007F]/,zr=/[\[\].#$\u0000-\u001F\u007F]/,Br=10485760,Ur=function(e){return"string"===typeof e&&0!==e.length&&!Fr.test(e)},Vr=function(e){return"string"===typeof e&&0!==e.length&&!zr.test(e)},qr=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!T(e)||e&&"object"===typeof e&&Object(a.k)(e,".sv")},Gr=function(e,t,n,r,i){i&&void 0===n||Kr(Object(a.o)(e,t,i),n,r)},Kr=function e(t,n,r){var i=r instanceof de?new Ce(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Oe(i));if("function"===typeof n)throw new Error(t+"contains a function "+Oe(i)+" with contents = "+n.toString());if(T(n))throw new Error(t+"contains "+n.toString()+" "+Oe(i));if("string"===typeof n&&n.length>Br/3&&Object(a.I)(n)>Br)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Oe(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var o=!1,s=!1;if(R(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!Ur(n)))throw new Error(t+" contains an invalid key ("+n+") "+Oe(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;c=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(c),u.byteLength_+=Object(a.I)(c),Ae(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Object(a.I)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),o&&s)throw new Error(t+' contains ".value" child '+Oe(i)+" in addition to actual children.")}},Hr=function(e,t,n,r,i){if(!i||void 0!==n){var o=Object(a.o)(e,t,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];R(n,(function(e,t){var n=new de(e);if(Kr(o,t,xe(r,n)),".priority"===ge(n)&&!qr(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=_e(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Ur(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Te);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Ie(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,s)}},Wr=function(e,t,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(a.o)(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qr(n))throw new Error(Object(a.o)(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Zr=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(a.o)(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Xr=function(e,t,n,r){if((!r||void 0!==n)&&!Ur(n))throw new Error(Object(a.o)(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yr=function(e,t,n,r){if((!r||void 0!==n)&&!Vr(n))throw new Error(Object(a.o)(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Qr=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Yr(e,t,n,r)},$r=function(e,t){if(".info"===ve(t))throw new Error(e+" failed = Can't modify data under /.info/")},Jr=function(e,t,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ur(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Vr(e)}(r))throw new Error(Object(a.o)(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ei=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(a.o)(e,t,r)+"must be a boolean.")},ti=function(){this.eventLists_=[],this.recursionDepth_=0};function ni(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Se(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function ri(e,t,n){ni(e,n),ai(e,(function(e){return Se(e,t)}))}function ii(e,t,n){ni(e,n),ai(e,(function(e){return Ie(e,t)||Ie(t,e)}))}function ai(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(oi(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function oi(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),z(r)}}}var si="repo_interrupt",ui=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ti,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Rt(),this.transactionQueueTree_=new Ar,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function ci(e){if(e.stats_=$(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Pt(e.repoInfo_,(function(t,n,r,i){fi(e,t,n,r,i)}),e.authTokenProvider_),setTimeout((function(){return di(e,!0)}),0);else{var t=e.app.options.databaseAuthVariableOverride;if("undefined"!==typeof t&&null!==t){if("object"!==typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(a.K)(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new Ne(e.repoInfo_,e.app.options.appId,(function(t,n,r,i){fi(e,t,n,r,i)}),(function(t){di(e,t)}),(function(t){!function(e,t){R(t,(function(t,n){pi(e,t,n)}))}(e,t)}),e.authTokenProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.statsReporter_=function(e,t){var n=e.toString();return Q[n]||(Q[n]=t()),Q[n]}(e.repoInfo_,(function(){return new zt(e.stats_,e.server_)})),e.infoData_=new Dt,e.infoSyncTree_=new nr({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t.path);return o.isEmpty()||(a=or(e.infoSyncTree_,t.path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),pi(e,"connected",!1),e.serverSyncTree_=new nr({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ii(e.eventQueue_,t.path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function li(e){var t=e.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hi(e){return(t=(t={timestamp:li(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function fi(e,t,n,r,i){e.dataUpdateCount++;var o=new de(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=Object(a.F)(n,(function(e){return ut(e)}));s=function(e,t,n,r){var i=yr(e,r);if(i){var a=gr(i),o=a.path,s=a.queryId,u=Ee(o,t),c=en.fromObject(n);return br(e,o,new Kt(Bt(s),u,c))}return[]}(e.serverSyncTree_,o,u,i)}else{var c=ut(n);s=function(e,t,n,r){var i=yr(e,r);if(null!=i){var a=gr(i),o=a.path,s=a.queryId,u=Ee(o,t);return br(e,o,new Gt(Bt(s),u,n))}return[]}(e.serverSyncTree_,o,c,i)}else if(r){var l=Object(a.F)(n,(function(e){return ut(e)}));s=function(e,t,n){var r=en.fromObject(n);return hr(e,new Kt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,l)}else{var h=ut(n);s=or(e.serverSyncTree_,o,h)}var f=o;s.length>0&&(f=Pi(e,o)),ii(e.eventQueue_,f,s)}function di(e,t){pi(e,"connected",t),!1===t&&function(e){Si(e,"onDisconnectEvents");var t=hi(e),n=Rt();Lt(e.onDisconnect_,pe(),(function(r,i){var a=Sr(r,i,e.serverSyncTree_,t);Mt(n,r,a)}));var r=[];Lt(n,pe(),(function(t,n){r=r.concat(or(e.serverSyncTree_,t,n));var i=Li(e,t);Pi(e,i)})),e.onDisconnect_=Rt(),ii(e.eventQueue_,pe(),r)}(e)}function pi(e,t,n){var r=new de("/.info/"+t),i=ut(n);e.infoData_.updateSnapshot(r,i);var a=or(e.infoSyncTree_,r,i);ii(e.eventQueue_,r,a)}function vi(e){return e.nextWriteId_++}function mi(e,t,n,r,i){Si(e,"set",{path:t.toString(),value:n,priority:r});var a=hi(e),o=ut(n,r),s=cr(e.serverSyncTree_,t),u=Ir(o,s,a),c=vi(e),l=rr(e.serverSyncTree_,t,u,c,!0);ni(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||E("set at "+t+" failed: "+n);var o=ar(e.serverSyncTree_,c,!a);ii(e.eventQueue_,t,o),Ii(e,i,n,r)}));var h=Li(e,t);Pi(e,h),ii(e.eventQueue_,h,[])}function yi(e,t,n,r){Si(e,"update",{path:t.toString(),value:n});var i=!0,a=hi(e),o={};if(R(n,(function(n,r){i=!1,o[n]=Sr(xe(t,n),ut(r),e.serverSyncTree_,a)})),i)_("update() called with empty data.  Don't do anything."),Ii(e,r,"ok",void 0);else{var s=vi(e),u=ir(e.serverSyncTree_,t,o,s);ni(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||E("update at "+t+" failed: "+n);var o=ar(e.serverSyncTree_,s,!a),u=o.length>0?Pi(e,t):t;ii(e.eventQueue_,u,o),Ii(e,r,n,i)})),R(n,(function(n){var r=Li(e,xe(t,n));Pi(e,r)})),ii(e.eventQueue_,t,[])}}function gi(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Nt(e.onDisconnect_,t),Ii(e,n,r,i)}))}function bi(e,t,n,r){var i=ut(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Mt(e.onDisconnect_,t,i),Ii(e,r,n,a)}))}function _i(e,t,n,r,i){var a=ut(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Mt(e.onDisconnect_,t,a),Ii(e,i,n,r)}))}function wi(e,t,n,r){if(Object(a.v)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void Ii(e,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&R(n,(function(n,r){var i=ut(r);Mt(e.onDisconnect_,xe(t,n),i)})),Ii(e,r,i,a)}))}function xi(e,t,n){var r;r=".info"===ve(t.path)?ur(e.infoSyncTree_,t,n):ur(e.serverSyncTree_,t,n),ri(e.eventQueue_,t.path,r)}function ki(e,t,n){var r;r=".info"===ve(t.path)?sr(e.infoSyncTree_,t,n):sr(e.serverSyncTree_,t,n),ri(e.eventQueue_,t.path,r)}function Ei(e){e.persistentConnection_&&e.persistentConnection_.interrupt(si)}function Ti(e){e.persistentConnection_&&e.persistentConnection_.resume(si)}function Si(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),_.apply(void 0,Object(o.f)([r],Object(o.e)(t)))}function Ii(e,t,n,r){t&&z((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Ci(e,t,n,r,i,o){Si(e,"transaction on "+t);var s={path:t,update:n,onComplete:r,status:null,order:p(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=Ai(e,t,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Kr("transaction failed: Data returned ",c,s.path),s.status=0;var l=Or(e.transactionQueueTree_,t),h=Pr(l)||[];h.push(s),Dr(l,h);var f=void 0;if("object"===typeof c&&null!==c&&Object(a.k)(c,".priority"))f=Object(a.H)(c,".priority"),Object(a.f)(qr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(cr(e.serverSyncTree_,t)||ot.EMPTY_NODE).getPriority().val();var d=hi(e),v=ut(c,f),m=Ir(v,u,d);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=m,s.currentWriteId=vi(e);var y=rr(e.serverSyncTree_,t,m,s.currentWriteId,s.applyLocally);ii(e.eventQueue_,t,y),Oi(e,e.transactionQueueTree_)}}function Ai(e,t,n){return cr(e.serverSyncTree_,t,n)||ot.EMPTY_NODE}function Oi(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||Ni(e,t),Pr(t)){var n=Ri(e,t);Object(a.f)(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Ai(e,t,r),o=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(a.f)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=Ee(t,c.path);o=o.updateChild(l,c.currentOutputSnapshotRaw)}var h=o.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){Si(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(ar(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Ni(e,Or(e.transactionQueueTree_,t)),Oi(e,e.transactionQueueTree_),ii(e.eventQueue_,t,i);for(s=0;s<a.length;s++)z(a[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{E("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}Pi(e,t)}}),s)}(e,Lr(t),n)}else Rr(t)&&Mr(t,(function(t){Oi(e,t)}))}function Pi(e,t){var n=Di(e,t),r=Lr(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),s=function(s){var u,c,l=t[s],h=Ee(n,l.path),f=!1;if(Object(a.f)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)f=!0,u=l.abortReason,i=i.concat(ar(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)f=!0,u="maxretry",i=i.concat(ar(e.serverSyncTree_,l.currentWriteId,!0));else{var d=Ai(e,l.path,o);l.currentInputSnapshot=d;var p=t[s].update(d.val());if(void 0!==p){Kr("transaction failed: Data returned ",p,l.path);var v=ut(p);"object"===typeof p&&null!=p&&Object(a.k)(p,".priority")||(v=v.updatePriority(d.getPriority()));var m=l.currentWriteId,y=hi(e),g=Ir(v,d,y);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=g,l.currentWriteId=vi(e),o.splice(o.indexOf(m),1),i=(i=i.concat(rr(e.serverSyncTree_,l.path,g,l.currentWriteId,l.applyLocally))).concat(ar(e.serverSyncTree_,m,!0))}else f=!0,u="nodata",i=i.concat(ar(e.serverSyncTree_,l.currentWriteId,!0))}ii(e.eventQueue_,n,i),i=[],f&&(t[s].status=2,c=t[s].unwatcher,setTimeout(c,Math.floor(0)),t[s].onComplete&&("nodata"===u?r.push((function(){return t[s].onComplete(null,!1,t[s].currentInputSnapshot)})):r.push((function(){return t[s].onComplete(new Error(u),!1,null)}))))},u=0;u<t.length;u++)s(u);Ni(e,e.transactionQueueTree_);for(u=0;u<r.length;u++)z(r[u]);Oi(e,e.transactionQueueTree_)}(e,Ri(e,n),r),r}function Di(e,t){var n,r=e.transactionQueueTree_;for(n=ve(t);null!==n&&void 0===Pr(r);)r=Or(r,n),n=ve(t=ye(t));return r}function Ri(e,t){var n=[];return Mi(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Mi(e,t,n){var r=Pr(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Mr(t,(function(t){Mi(e,t,n)}))}function Ni(e,t){var n=Pr(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Dr(t,n.length>0?n:void 0)}Mr(t,(function(t){Ni(e,t)}))}function Li(e,t){var n=Lr(Di(e,t)),r=Or(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){ji(e,t)})),ji(e,r),Nr(r,(function(t){ji(e,t)})),n}function ji(e,t){var n=Pr(t);if(n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(a.f)(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(Object(a.f)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(ar(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Dr(t,void 0):n.length=o+1,ii(e.eventQueue_,Lr(t),i);for(s=0;s<r.length;s++)z(r[s])}}var Fi,zi=function(e,t){var n=Bi(e),r=n.namespace;"firebase.com"===n.domain&&k(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||k("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new W(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new de(n.pathString)}},Bi=function(e){var t="",n="",r="",i="",a="",s=!0,u="https",c=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=Object(o.g)(e.split("&")),a=i.next();!a.done;a=i.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:a}},Ui=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return Object(a.L)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return Object(a.L)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return Object(a.L)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return Object(a.L)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){Object(a.L)("DataSnapshot.child",0,1,arguments.length),t=String(t),Yr("DataSnapshot.child",1,t,!1);var n=new de(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,et)},e.prototype.hasChild=function(e){Object(a.L)("DataSnapshot.hasChild",1,1,arguments.length),Yr("DataSnapshot.hasChild",1,e,!1);var t=new de(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return Object(a.L)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(Object(a.L)("DataSnapshot.forEach",1,1,arguments.length),Object(a.M)("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),et))}))},e.prototype.hasChildren=function(){return Object(a.L)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return Object(a.L)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return Object(a.L)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Vi=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){Object(a.L)("OnDisconnect.cancel",0,1,arguments.length),Object(a.M)("OnDisconnect.cancel",1,e,!0);var t=new a.a;return gi(this.repo_,this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){Object(a.L)("OnDisconnect.remove",0,1,arguments.length),$r("OnDisconnect.remove",this.path_),Object(a.M)("OnDisconnect.remove",1,e,!0);var t=new a.a;return bi(this.repo_,this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){Object(a.L)("OnDisconnect.set",1,2,arguments.length),$r("OnDisconnect.set",this.path_),Gr("OnDisconnect.set",1,e,this.path_,!1),Object(a.M)("OnDisconnect.set",2,t,!0);var n=new a.a;return bi(this.repo_,this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){Object(a.L)("OnDisconnect.setWithPriority",2,3,arguments.length),$r("OnDisconnect.setWithPriority",this.path_),Gr("OnDisconnect.setWithPriority",1,e,this.path_,!1),Wr("OnDisconnect.setWithPriority",2,t,!1),Object(a.M)("OnDisconnect.setWithPriority",3,n,!0);var r=new a.a;return _i(this.repo_,this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(Object(a.L)("OnDisconnect.update",1,2,arguments.length),$r("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hr("OnDisconnect.update",1,e,this.path_,!1),Object(a.M)("OnDisconnect.update",2,t,!0);var i=new a.a;return wi(this.repo_,this.path_,e,i.wrapCallback(t)),i.promise},e}(),qi=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(a.K)(this.snapshot.exportVal())},e}(),Gi=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Ki=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new qi("value",this,new Ui(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Object(a.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Gi(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Hi=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,Object(a.k)(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Gi(this,e,t):null},e.prototype.createEvent=function(e,t){Object(a.f)(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new qi(e.type,this,new Ui(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Object(a.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),a=r.length;if(a===i.length){if(1===a){var o=r[0],s=i[0];return s===o&&(!t.callbacks_[o]||!this.callbacks_[s]||t.callbacks_[o]===this.callbacks_[s])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Wi=function(){function e(e,t,n,r){this.database=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r,this.repo=e.repo_}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return Object(a.f)(Fi,"Reference.ts has not been loaded"),Fi},set:function(e){Fi=e},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ze){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==S)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==I)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===et){if(null!=t&&!qr(t)||null!=n&&!qr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(a.f)(e.getIndex()instanceof ct||e.getIndex()===lt,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return Object(a.L)("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.database,this.path)},e.prototype.on=function(t,n,r,i){Object(a.L)("Query.on",2,4,arguments.length),Zr("Query.on",1,t,!1),Object(a.M)("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[t]=n,this.onChildEvent(s,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Ki(e,t||null,n||null);xi(this.repo,this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Hi(e,t,n);xi(this.repo,this,r)},e.prototype.off=function(e,t,n){Object(a.L)("Query.off",0,3,arguments.length),Zr("Query.off",1,e,!0),Object(a.M)("Query.off",2,t,!0),Object(a.N)("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new Ki(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new Hi(i,null,n||null));ki(this.repo,this,r)},e.prototype.get=function(){var e=this;return function(e,t){var n=lr(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=ut(n),i=or(e.serverSyncTree_,t.path,r);return ri(e.eventQueue_,t.path,i),Promise.resolve(r)}),(function(n){return Si(e,"get for query "+Object(a.K)(t)+" failed: "+n),Promise.reject(new Error(n))}))}(this.repo,this).then((function(t){return new Ui(t,e.getRef(),e.getQueryParams().getIndex())}))},e.prototype.once=function(t,n,r,i){var o=this;Object(a.L)("Query.once",1,4,arguments.length),Zr("Query.once",1,t,!1),Object(a.M)("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new a.a;c.promise.catch((function(){}));var l=function e(r){u&&(u=!1,o.off(t,e),n&&n.bind(s.context)(r),c.resolve(r))};return this.on(t,l,(function(e){o.off(t,l),s.cancel&&s.cancel.bind(s.context)(e),c.reject(e)})),c.promise},e.prototype.limitToFirst=function(t){if(Object(a.L)("Query.limitToFirst",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.database,this.path,kt(this.queryParams_,t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(Object(a.L)("Query.limitToLast",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.database,this.path,Et(this.queryParams_,t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(Object(a.L)("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Yr("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new de(t);if(ke(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new ct(n),i=At(this.queryParams_,r);return e.validateQueryEndpoints_(i),new e(this.database,this.path,i,!0)},e.prototype.orderByKey=function(){Object(a.L)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=At(this.queryParams_,ze);return e.validateQueryEndpoints_(t),new e(this.database,this.path,t,!0)},e.prototype.orderByPriority=function(){Object(a.L)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=At(this.queryParams_,et);return e.validateQueryEndpoints_(t),new e(this.database,this.path,t,!0)},e.prototype.orderByValue=function(){Object(a.L)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=At(this.queryParams_,lt);return e.validateQueryEndpoints_(t),new e(this.database,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),Object(a.L)("Query.startAt",0,2,arguments.length),Gr("Query.startAt",1,t,this.path,!0),Xr("Query.startAt",2,n,!0);var r=Tt(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.database,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){void 0===t&&(t=null),Object(a.L)("Query.startAfter",0,2,arguments.length),Gr("Query.startAfter",1,t,this.path,!1),Xr("Query.startAfter",2,n,!0);var r=St(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.database,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),Object(a.L)("Query.endAt",0,2,arguments.length),Gr("Query.endAt",1,t,this.path,!0),Xr("Query.endAt",2,n,!0);var r=It(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.database,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){void 0===t&&(t=null),Object(a.L)("Query.endBefore",0,2,arguments.length),Gr("Query.endBefore",1,t,this.path,!1),Xr("Query.endBefore",2,n,!0);var r=Ct(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.database,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(Object(a.L)("Query.equalTo",1,2,arguments.length),Gr("Query.equalTo",1,e,this.path,!1),Xr("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return Object(a.L)("Query.toString",0,0,arguments.length),this.repo.toString()+be(this.path)},e.prototype.toJSON=function(){return Object(a.L)("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return function(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==et&&(t.i=e.index_.toString()),t}(this.queryParams_)},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=P(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(Object(a.L)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=Se(this.path,t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,Object(a.M)(e,3,r.cancel,!0),r.context=n,Object(a.N)(e,4,r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Object(a.o)(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Zi=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return Object(a.L)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Xi=function(e){function t(t,n){return e.call(this,t,n,new xt,!1)||this}return Object(o.c)(t,e),t.prototype.getKey=function(){return Object(a.L)("Reference.key",0,0,arguments.length),ke(this.path)?null:ge(this.path)},t.prototype.child=function(e){return Object(a.L)("Reference.child",1,1,arguments.length),"number"===typeof e?e=String(e):e instanceof de||(null===ve(this.path)?Qr("Reference.child",1,e,!1):Yr("Reference.child",1,e,!1)),new t(this.database,xe(this.path,e))},t.prototype.getParent=function(){Object(a.L)("Reference.parent",0,0,arguments.length);var e=we(this.path);return null===e?null:new t(this.database,e)},t.prototype.getRoot=function(){Object(a.L)("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.set=function(e,t){Object(a.L)("Reference.set",1,2,arguments.length),$r("Reference.set",this.path),Gr("Reference.set",1,e,this.path,!1),Object(a.M)("Reference.set",2,t,!0);var n=new a.a;return mi(this.repo,this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(Object(a.L)("Reference.update",1,2,arguments.length),$r("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Hr("Reference.update",1,e,this.path,!1),Object(a.M)("Reference.update",2,t,!0);var i=new a.a;return yi(this.repo,this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(Object(a.L)("Reference.setWithPriority",2,3,arguments.length),$r("Reference.setWithPriority",this.path),Gr("Reference.setWithPriority",1,e,this.path,!1),Wr("Reference.setWithPriority",2,t,!1),Object(a.M)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new a.a;return mi(this.repo,this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return Object(a.L)("Reference.remove",0,1,arguments.length),$r("Reference.remove",this.path),Object(a.M)("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,n,r){var i=this;if(Object(a.L)("Reference.transaction",1,3,arguments.length),$r("Reference.transaction",this.path),Object(a.M)("Reference.transaction",1,e,!1),Object(a.M)("Reference.transaction",2,n,!0),ei("Reference.transaction",3,r,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===r&&(r=!0);var o=new a.a;"function"===typeof n&&o.promise.catch((function(){}));var s=function(e,r,a){if(e)o.reject(e),"function"===typeof n&&n(e,r,null);else{var s=new Ui(a,new t(i.database,i.path),et);o.resolve(new Zi(r,s)),"function"===typeof n&&n(null,r,s)}},u=function(){},c=new t(this.database,this.path);c.on("value",u);var l=function(){c.off("value",u)};return Ci(this.repo,this.path,e,s,l,r),o.promise},t.prototype.setPriority=function(e,t){Object(a.L)("Reference.setPriority",1,2,arguments.length),$r("Reference.setPriority",this.path),Wr("Reference.setPriority",1,e,!1),Object(a.M)("Reference.setPriority",2,t,!0);var n=new a.a;return mi(this.repo,xe(this.path,".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){Object(a.L)("Reference.push",0,2,arguments.length),$r("Reference.push",this.path),Gr("Reference.push",1,e,this.path,!0),Object(a.M)("Reference.push",2,t,!0);var n,r=li(this.repo),i=ft(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"===typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return $r("Reference.onDisconnect",this.path),new Vi(this.repo,this.path)},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Wi);Wi.__referenceConstructor=Xi,function(e){Object(a.f)(!jn,"__referenceConstructor has already been defined"),jn=e}(Xi);var Yi={},Qi=!1;function $i(t,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||k("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,u=zi(o,i),c=u.repoInfo,l=void 0;"undefined"!==typeof e&&(l=Object({NODE_ENV:"production",PUBLIC_URL:"/Pixelpedia",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FIREBASE_DATABASE_EMULATOR_HOST),l?(s=!0,o="http://"+l+"?ns="+c.namespace,c=(u=zi(o,i)).repoInfo):s=!u.repoInfo.secure;var h=i&&s?new V:new U(t,n);Jr("Invalid Firebase Database URL",1,u),ke(u.path)||k("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n){var r=Object(a.H)(Yi,t.name);r||(r={},Yi[t.name]=r);var i=Object(a.H)(r,e.toURLString());i&&k("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new ui(e,Qi,t,n),r[e.toURLString()]=i,i}(c,t,h);return new Ji(f)}var Ji=function(){function e(e){var t=this;this.repoInternal_=e,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(o.b)(t,void 0,void 0,(function(){return Object(o.d)(this,(function(e){return this.checkDeleted_("delete"),function(e){var t=Object(a.H)(Yi,e.app.name);t&&Object(a.H)(t,e.key)===e||k("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),Ei(e),delete t[e.key]}(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},e instanceof ui||k("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(ci(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Xi(this,pe())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(e,t){this.checkDeleted_("useEmulator"),this.instanceStarted_?k("Cannot call useEmulator() after instance has already been initialized."):function(e,t,n){e.repoInfo_=new W(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),e.repoInfo_.nodeAdmin&&(e.authTokenProvider_=new V)}(this.repoInternal_,e,t)},e.prototype.ref=function(e){return this.checkDeleted_("ref"),Object(a.L)("database.ref",0,1,arguments.length),e instanceof Xi?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Object(a.L)(t,1,1,arguments.length);var n=zi(e,this.repo_.repoInfo_.nodeAdmin);Jr(t,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||k(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repoInternal_&&k("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){Object(a.L)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),Ei(this.repo_)},e.prototype.goOnline=function(){Object(a.L)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),Ti(this.repo_)},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}();var ea=Object.freeze({__proto__:null,forceLongPolling:function(){se.forceDisallow(),ne.forceAllow()},forceWebSockets:function(){ne.forceDisallow()},isWebSocketsAvailable:function(){return se.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Ft(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);R(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e.repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e.repo,t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e.repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,a=e.customAuthImpl,o=e.namespace,s=e.nodeAdmin,u=void 0!==s&&s;ae(r);var c=new i.c("auth-internal",new i.b("database-standalone"));return c.setComponent(new i.a("auth-internal",(function(){return a}),"PRIVATE")),{instance:$i(t,c,n,u),namespace:o}}}),ta=Ne;Ne.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ne.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var na=ce,ra=W,ia=Object.freeze({__proto__:null,DataConnection:ta,RealTimeConnection:na,hijackHash:function(e){var t=Ne.prototype.put;return Ne.prototype.put=function(n,r,i,a){void 0!==a&&(a=e()),t.call(this,n,r,i,a)},function(){Ne.prototype.put=t}},ConnectionTarget:ra,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){!function(e){Qi=e}(e)}}),aa=Ji.ServerValue;!function(e){ae(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.a("database",(function(e,t){var n=t.instanceIdentifier;return $i(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),n,void 0)}),"PUBLIC").setServiceProps({Reference:Xi,Query:Wi,Database:Ji,DataSnapshot:Ui,enableLogging:b,INTERNAL:ea,ServerValue:aa,TEST_ACCESS:ia}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.7"),Object(a.A)()&&(t.exports=n)}(r.a)}).call(this,n(53),n(88)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n(45);var r=n(2),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(91),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var s=i||"<<anonymous>>",u=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+u+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),h=6;h<c;h++)l[h-6]=arguments[h];return e.apply(void 0,[n,r,s,a,u].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(94);function i(t,n,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=i=Reflect.get:e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},i(t,n,a||t)}e.exports=i},function(e,t,n){var r=n(34);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){var r=n(57),i=n(58),a=n(35),o=n(60);e.exports=function(e){return r(e)||i(e)||a(e)||o()}},function(e,t,n){var r=n(98),i=n(58),a=n(35),o=n(99);e.exports=function(e){return r(e)||i(e)||a(e)||o()}},function(e,t,n){var r=n(59);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(57),i=n(101),a=n(35),o=n(60);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}},function(e,t,n){var r=n(34),i=n(46),a=n(103),o=n(104);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(46),i=n(61);function a(t,n,o){return i()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t,n){var r=n(46);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(34),i=n(61),a=n(56);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(35);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},,,function(e,t,n){"use strict";var r=n(3),i=n(6),a=n(9),o=n.n(a),s=n(2),u=n.n(s),c=n(12),l=n(41),h=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.variant,s=e.size,h=e.active,f=e.className,d=e.block,p=e.type,v=e.as,m=Object(i.a)(e,["bsPrefix","variant","size","active","className","block","type","as"]),y=Object(c.a)(n,"btn"),g=o()(f,y,h&&"active",a&&y+"-"+a,d&&y+"-block",s&&y+"-"+s);if(m.href)return u.a.createElement(l.a,Object(r.a)({},m,{as:v,ref:t,className:o()(g,m.disabled&&"disabled")}));t&&(m.ref=t),p?m.type=p:v||(m.type="button");var b=v||"button";return u.a.createElement(b,Object(r.a)({},m,{className:g}))}));h.displayName="Button",h.defaultProps={variant:"primary",active:!1,disabled:!1},t.a=h},function(e,t,n){"use strict";var r=n(3),i=n(6),a=n(9),o=n.n(a),s=n(2),u=n.n(s),c=n(12),l=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.fluid,s=e.as,l=void 0===s?"div":s,h=e.className,f=Object(i.a)(e,["bsPrefix","fluid","as","className"]),d=Object(c.a)(n,"container"),p="string"===typeof a?"-"+a:"-fluid";return u.a.createElement(l,Object(r.a)({ref:t},f,{className:o()(h,a?""+d+p:d)}))}));l.displayName="Container",l.defaultProps={fluid:!1},t.a=l},function(e,t,n){"use strict";var r,i=n(3),a=n(6),o=n(9),s=n.n(o),u=n(40),c=n(25),l=n(19),h=n(33);function f(e){if((!r&&0!==r||e)&&c.a){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r}var d=n(2),p=n.n(d);var v=n(17),m=n(43),y=n(39);function g(e){void 0===e&&(e=Object(l.a)());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(n){return e.body}}function b(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var _=n(31),w=n(8),x=n.n(w),k=n(21),E=n.n(k),T=n(65);function S(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function I(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function C(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=I(e.className,t):e.setAttribute("class",I(e.className&&e.className.baseVal||"",t))}var A=n(18);function O(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function P(e){var t;return O(e)||(t=e)&&"body"===t.tagName.toLowerCase()?function(e){var t=O(e)?Object(l.a)():Object(l.a)(e),n=O(e)||t.defaultView;return t.body.clientWidth<n.innerWidth}(e):e.scrollHeight>e.clientHeight}var D=["template","script","style"],R=function(e,t,n){[].forEach.call(e.children,(function(e){-1===t.indexOf(e)&&function(e){var t=e.nodeType,n=e.tagName;return 1===t&&-1===D.indexOf(n.toLowerCase())}(e)&&n(e)}))};function M(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}var N,L=function(){function e(e){var t=void 0===e?{}:e,n=t.hideSiblingNodes,r=void 0===n||n,i=t.handleContainerOverflow,a=void 0===i||i;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=r,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=f()}var t=e.prototype;return t.isContainerOverflowing=function(e){var t=this.data[this.containerIndexFromModal(e)];return t&&t.overflowing},t.containerIndexFromModal=function(e){return function(e,t){var n=-1;return e.some((function(e,r){return!!t(e,r)&&(n=r,!0)})),n}(this.data,(function(t){return-1!==t.modals.indexOf(e)}))},t.setContainerStyle=function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt(Object(A.a)(t,"paddingRight")||"0",10)+this.scrollbarSize+"px"),Object(A.a)(t,n)},t.removeContainerStyle=function(e,t){Object.assign(t.style,e.style)},t.add=function(e,t,n){var r=this.modals.indexOf(e),i=this.containers.indexOf(t);if(-1!==r)return r;if(r=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&function(e,t){var n=t.dialog,r=t.backdrop;R(e,[n,r],(function(e){return M(!0,e)}))}(t,e),-1!==i)return this.data[i].modals.push(e),r;var a={modals:[e],classes:n?n.split(/\s+/):[],overflowing:P(t)};return this.handleContainerOverflow&&this.setContainerStyle(a,t),a.classes.forEach(S.bind(null,t)),this.containers.push(t),this.data.push(a),r},t.remove=function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=this.containerIndexFromModal(e),r=this.data[n],i=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.classes.forEach(C.bind(null,i)),this.handleContainerOverflow&&this.removeContainerStyle(r,i),this.hideSiblingNodes&&function(e,t){var n=t.dialog,r=t.backdrop;R(e,[n,r],(function(e){return M(!1,e)}))}(i,e),this.containers.splice(n,1),this.data.splice(n,1);else if(this.hideSiblingNodes){var a=r.modals[r.modals.length-1],o=a.backdrop;M(!1,a.dialog),M(!1,o)}}},t.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}(),j=function(e){var t;return"undefined"===typeof document?null:null==e?Object(l.a)().body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function F(e){var t=e||(N||(N=new L),N),n=Object(d.useRef)({dialog:null,backdrop:null});return Object.assign(n.current,{add:function(e,r){return t.add(n.current,e,r)},remove:function(){return t.remove(n.current)},isTopModal:function(){return t.isTopModal(n.current)},setDialogRef:Object(d.useCallback)((function(e){n.current.dialog=e}),[]),setBackdropRef:Object(d.useCallback)((function(e){n.current.backdrop=e}),[])})}var z=Object(d.forwardRef)((function(e,t){var n=e.show,r=void 0!==n&&n,o=e.role,s=void 0===o?"dialog":o,u=e.className,l=e.style,h=e.children,f=e.backdrop,y=void 0===f||f,w=e.keyboard,x=void 0===w||w,k=e.onBackdropClick,S=e.onEscapeKeyDown,I=e.transition,C=e.backdropTransition,A=e.autoFocus,O=void 0===A||A,P=e.enforceFocus,D=void 0===P||P,R=e.restoreFocus,M=void 0===R||R,N=e.restoreFocusOptions,L=e.renderDialog,z=e.renderBackdrop,B=void 0===z?function(e){return p.a.createElement("div",e)}:z,U=e.manager,V=e.container,q=e.containerClassName,G=e.onShow,K=e.onHide,H=void 0===K?function(){}:K,W=e.onExit,Z=e.onExited,X=e.onExiting,Y=e.onEnter,Q=e.onEntering,$=e.onEntered,J=Object(a.a)(e,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),ee=function(e,t){var n=Object(d.useState)((function(){return j(e)})),r=n[0],i=n[1];if(!r){var a=j(e);a&&i(a)}return Object(d.useEffect)((function(){t&&r&&t(r)}),[t,r]),Object(d.useEffect)((function(){var t=j(e);t!==r&&i(t)}),[e,r]),r}(V),te=F(U),ne=Object(T.a)(),re=function(e){var t=Object(d.useRef)(null);return Object(d.useEffect)((function(){t.current=e})),t.current}(r),ie=Object(d.useState)(!r),ae=ie[0],oe=ie[1],se=Object(d.useRef)(null);Object(d.useImperativeHandle)(t,(function(){return te}),[te]),c.a&&!re&&r&&(se.current=g()),I||r||ae?r&&ae&&oe(!1):oe(!0);var ue=Object(v.a)((function(){if(te.add(ee,q),pe.current=Object(_.a)(document,"keydown",fe),de.current=Object(_.a)(document,"focus",(function(){return setTimeout(le)}),!0),G&&G(),O){var e=g(document);te.dialog&&e&&!b(te.dialog,e)&&(se.current=e,te.dialog.focus())}})),ce=Object(v.a)((function(){var e;(te.remove(),null==pe.current||pe.current(),null==de.current||de.current(),M)&&(null==(e=se.current)||null==e.focus||e.focus(N),se.current=null)}));Object(d.useEffect)((function(){r&&ee&&ue()}),[r,ee,ue]),Object(d.useEffect)((function(){ae&&ce()}),[ae,ce]),Object(m.a)((function(){ce()}));var le=Object(v.a)((function(){if(D&&ne()&&te.isTopModal()){var e=g();te.dialog&&e&&!b(te.dialog,e)&&te.dialog.focus()}})),he=Object(v.a)((function(e){e.target===e.currentTarget&&(null==k||k(e),!0===y&&H())})),fe=Object(v.a)((function(e){x&&27===e.keyCode&&te.isTopModal()&&(null==S||S(e),e.defaultPrevented||H())})),de=Object(d.useRef)(),pe=Object(d.useRef)(),ve=I;if(!ee||!(r||ve&&!ae))return null;var me=Object(i.a)({role:s,ref:te.setDialogRef,"aria-modal":"dialog"===s||void 0},J,{style:l,className:u,tabIndex:-1}),ye=L?L(me):p.a.createElement("div",me,p.a.cloneElement(h,{role:"document"}));ve&&(ye=p.a.createElement(ve,{appear:!0,unmountOnExit:!0,in:!!r,onExit:W,onExiting:X,onExited:function(){oe(!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==Z||Z.apply(void 0,t)},onEnter:Y,onEntering:Q,onEntered:$},ye));var ge=null;if(y){var be=C;ge=B({ref:te.setBackdropRef,onClick:he}),be&&(ge=p.a.createElement(be,{appear:!0,in:!!r},ge))}return p.a.createElement(p.a.Fragment,null,E.a.createPortal(p.a.createElement(p.a.Fragment,null,ge,ye),ee))})),B={show:x.a.bool,container:x.a.any,onShow:x.a.func,onHide:x.a.func,backdrop:x.a.oneOfType([x.a.bool,x.a.oneOf(["static"])]),renderDialog:x.a.func,renderBackdrop:x.a.func,onEscapeKeyDown:x.a.func,onBackdropClick:x.a.func,containerClassName:x.a.string,keyboard:x.a.bool,transition:x.a.elementType,backdropTransition:x.a.elementType,autoFocus:x.a.bool,enforceFocus:x.a.bool,restoreFocus:x.a.bool,restoreFocusOptions:x.a.shape({preventScroll:x.a.bool}),onEnter:x.a.func,onEntering:x.a.func,onEntered:x.a.func,onExit:x.a.func,onExiting:x.a.func,onExited:x.a.func,manager:x.a.instanceOf(L)};z.displayName="Modal",z.propTypes=B;var U,V=Object.assign(z,{Manager:L}),q=(n(54),n(15)),G=n(23),K=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",H=".sticky-top",W=".navbar-toggler",Z=function(e){function t(){return e.apply(this,arguments)||this}Object(q.a)(t,e);var n=t.prototype;return n.adjustAndStore=function(e,t,n){var r,i=t.style[e];t.dataset[e]=i,Object(A.a)(t,((r={})[e]=parseFloat(Object(A.a)(t,e))+n+"px",r))},n.restore=function(e,t){var n,r=t.dataset[e];void 0!==r&&(delete t.dataset[e],Object(A.a)(t,((n={})[e]=r,n)))},n.setContainerStyle=function(t,n){var r=this;if(e.prototype.setContainerStyle.call(this,t,n),t.overflowing){var i=f();Object(G.a)(n,K).forEach((function(e){return r.adjustAndStore("paddingRight",e,i)})),Object(G.a)(n,H).forEach((function(e){return r.adjustAndStore("marginRight",e,-i)})),Object(G.a)(n,W).forEach((function(e){return r.adjustAndStore("marginRight",e,i)}))}},n.removeContainerStyle=function(t,n){var r=this;e.prototype.removeContainerStyle.call(this,t,n),Object(G.a)(n,K).forEach((function(e){return r.restore("paddingRight",e)})),Object(G.a)(n,H).forEach((function(e){return r.restore("marginRight",e)})),Object(G.a)(n,W).forEach((function(e){return r.restore("marginRight",e)}))},t}(L),X=n(20),Y=n(38),Q=n(37),$=((U={})[X.b]="show",U[X.a]="show",U),J=p.a.forwardRef((function(e,t){var n=e.className,r=e.children,o=Object(a.a)(e,["className","children"]),u=Object(d.useCallback)((function(e){Object(Q.a)(e),o.onEnter&&o.onEnter(e)}),[o]);return p.a.createElement(X.e,Object(i.a)({ref:t,addEndListener:Y.a},o,{onEnter:u}),(function(e,t){return p.a.cloneElement(r,Object(i.a)({},t,{className:s()("fade",n,r.props.className,$[e])}))}))}));J.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},J.displayName="Fade";var ee=J,te=n(26),ne=Object(te.a)("modal-body"),re=p.a.createContext({onHide:function(){}}),ie=n(12),ae=p.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.contentClassName,u=e.centered,c=e.size,l=e.children,h=e.scrollable,f=Object(a.a)(e,["bsPrefix","className","contentClassName","centered","size","children","scrollable"]),d=(n=Object(ie.a)(n,"modal"))+"-dialog";return p.a.createElement("div",Object(i.a)({},f,{ref:t,className:s()(d,r,c&&n+"-"+c,u&&d+"-centered",h&&d+"-scrollable")}),p.a.createElement("div",{className:s()(n+"-content",o)},l))}));ae.displayName="ModalDialog";var oe=ae,se=Object(te.a)("modal-footer"),ue={label:x.a.string.isRequired,onClick:x.a.func},ce=p.a.forwardRef((function(e,t){var n=e.label,r=e.onClick,o=e.className,u=Object(a.a)(e,["label","onClick","className"]);return p.a.createElement("button",Object(i.a)({ref:t,type:"button",className:s()("close",o),onClick:r},u),p.a.createElement("span",{"aria-hidden":"true"},"\xd7"),p.a.createElement("span",{className:"sr-only"},n))}));ce.displayName="CloseButton",ce.propTypes=ue,ce.defaultProps={label:"Close"};var le=ce,he=p.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.closeLabel,o=e.closeButton,u=e.onHide,c=e.className,l=e.children,h=Object(a.a)(e,["bsPrefix","closeLabel","closeButton","onHide","className","children"]);n=Object(ie.a)(n,"modal-header");var f=Object(d.useContext)(re),m=Object(v.a)((function(){f&&f.onHide(),u&&u()}));return p.a.createElement("div",Object(i.a)({ref:t},h,{className:s()(c,n)}),l,o&&p.a.createElement(le,{label:r,onClick:m}))}));he.displayName="ModalHeader",he.defaultProps={closeLabel:"Close",closeButton:!1};var fe,de,pe=he,ve=(fe="h4",p.a.forwardRef((function(e,t){return p.a.createElement("div",Object(i.a)({},e,{ref:t,className:s()(e.className,fe)}))}))),me=Object(te.a)("modal-title",{Component:ve}),ye={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:oe};function ge(e){return p.a.createElement(ee,e)}function be(e){return p.a.createElement(ee,e)}var _e=p.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,o=e.style,g=e.dialogClassName,b=e.contentClassName,_=e.children,w=e.dialogAs,x=e["aria-labelledby"],k=e.show,E=e.animation,T=e.backdrop,S=e.keyboard,I=e.onEscapeKeyDown,C=e.onShow,A=e.onHide,O=e.container,P=e.autoFocus,D=e.enforceFocus,R=e.restoreFocus,M=e.restoreFocusOptions,N=e.onEntered,L=e.onExit,j=e.onExiting,F=e.onEnter,z=e.onEntering,B=e.onExited,U=e.backdropClassName,q=e.manager,G=Object(a.a)(e,["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"]),K=Object(d.useState)({}),H=K[0],W=K[1],X=Object(d.useState)(!1),Y=X[0],Q=X[1],$=Object(d.useRef)(!1),J=Object(d.useRef)(!1),ee=Object(d.useRef)(null),te=Object(d.useState)(null),ne=te[0],ae=te[1],oe=Object(v.a)(A);n=Object(ie.a)(n,"modal"),Object(d.useImperativeHandle)(t,(function(){return{get _modal(){return ne}}}),[ne]);var se=Object(d.useMemo)((function(){return{onHide:oe}}),[oe]);function ue(){return q||(de||(de=new Z),de)}function ce(e){if(c.a){var t=ue().isContainerOverflowing(ne),n=e.scrollHeight>Object(l.a)(e).documentElement.clientHeight;W({paddingRight:t&&!n?f():void 0,paddingLeft:!t&&n?f():void 0})}}var le=Object(v.a)((function(){ne&&ce(ne.dialog)}));Object(m.a)((function(){Object(h.a)(window,"resize",le),ee.current&&ee.current()}));var he=function(){$.current=!0},fe=function(e){$.current&&ne&&e.target===ne.dialog&&(J.current=!0),$.current=!1},pe=function(){Q(!0),ee.current=Object(y.a)(ne.dialog,(function(){Q(!1)}))},ve=function(e){"static"!==T?J.current||e.target!==e.currentTarget?J.current=!1:A():function(e){e.target===e.currentTarget&&pe()}(e)},me=Object(d.useCallback)((function(e){return p.a.createElement("div",Object(i.a)({},e,{className:s()(n+"-backdrop",U,!E&&"show")}))}),[E,U,n]),ye=Object(i.a)({},o,H);E||(ye.display="block");return p.a.createElement(re.Provider,{value:se},p.a.createElement(V,{show:k,ref:ae,backdrop:T,container:O,keyboard:!0,autoFocus:P,enforceFocus:D,restoreFocus:R,restoreFocusOptions:M,onEscapeKeyDown:function(e){S||"static"!==T?S&&I&&I(e):(e.preventDefault(),pe())},onShow:C,onHide:A,onEnter:function(e){e&&(e.style.display="block",ce(e));for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];F&&F.apply(void 0,[e].concat(n))},onEntering:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];z&&z.apply(void 0,[e].concat(n)),Object(u.a)(window,"resize",le)},onEntered:N,onExit:function(e){ee.current&&ee.current();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];L&&L.apply(void 0,[e].concat(n))},onExiting:j,onExited:function(e){e&&(e.style.display="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];B&&B.apply(void 0,n),Object(h.a)(window,"resize",le)},manager:ue(),containerClassName:n+"-open",transition:E?ge:void 0,backdropTransition:E?be:void 0,renderBackdrop:me,renderDialog:function(e){return p.a.createElement("div",Object(i.a)({role:"dialog"},e,{style:ye,className:s()(r,n,Y&&n+"-static"),onClick:T?ve:void 0,onMouseUp:fe,"aria-labelledby":x}),p.a.createElement(w,Object(i.a)({},G,{onMouseDown:he,className:g,contentClassName:b}),_))}}))}));_e.displayName="Modal",_e.defaultProps=ye,_e.Body=ne,_e.Header=pe,_e.Title=me,_e.Footer=se,_e.Dialog=oe,_e.TRANSITION_DURATION=300,_e.BACKDROP_TRANSITION_DURATION=150;t.a=_e},function(e,t,n){"use strict";var r=n(3),i=n(6),a=n(9),o=n.n(a),s=(n(90),n(2)),u=n.n(s),c=n(42),l=n(12),h=n(24),f=u.a.createContext(null);f.displayName="CardContext";var d=f,p=n(23);var v=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var m=function(e,t){return Object(s.useMemo)((function(){return function(e,t){var n=v(e),r=v(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])},y=u.a.createContext(null);y.displayName="NavContext";var g=y,b=n(22),_=u.a.createContext(null),w=function(){},x=u.a.forwardRef((function(e,t){var n,a,o=e.as,c=void 0===o?"ul":o,l=e.onSelect,h=e.activeKey,f=e.role,d=e.onKeyDown,v=Object(i.a)(e,["as","onSelect","activeKey","role","onKeyDown"]),y=Object(s.useReducer)((function(e){return!e}),!1)[1],x=Object(s.useRef)(!1),k=Object(s.useContext)(b.a),E=Object(s.useContext)(_);E&&(f=f||"tablist",h=E.activeKey,n=E.getControlledId,a=E.getControllerId);var T=Object(s.useRef)(null),S=function(e){var t=T.current;if(!t)return null;var n=Object(p.a)(t,"[data-rb-event-key]:not(.disabled)"),r=t.querySelector(".active");if(!r)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},I=function(e,t){null!=e&&(l&&l(e,t),k&&k(e,t))};Object(s.useEffect)((function(){if(T.current&&x.current){var e=T.current.querySelector("[data-rb-event-key].active");e&&e.focus()}x.current=!1}));var C=m(t,T);return u.a.createElement(b.a.Provider,{value:I},u.a.createElement(g.Provider,{value:{role:f,activeKey:Object(b.b)(h),getControlledId:n||w,getControllerId:a||w}},u.a.createElement(c,Object(r.a)({},v,{onKeyDown:function(e){var t;switch(d&&d(e),e.key){case"ArrowLeft":case"ArrowUp":t=S(-1);break;case"ArrowRight":case"ArrowDown":t=S(1);break;default:return}t&&(e.preventDefault(),I(t.dataset.rbEventKey,e),x.current=!0,y())},ref:C,role:f}))))})),k=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,s=e.children,c=e.as,h=void 0===c?"div":c,f=Object(i.a)(e,["bsPrefix","className","children","as"]);return n=Object(l.a)(n,"nav-item"),u.a.createElement(h,Object(r.a)({},f,{ref:t,className:o()(a,n)}),s)}));k.displayName="NavItem";var E=k,T=n(41),S=n(17),I=(n(54),u.a.forwardRef((function(e,t){var n=e.active,a=e.className,c=e.eventKey,l=e.onSelect,h=e.onClick,f=e.as,d=Object(i.a)(e,["active","className","eventKey","onSelect","onClick","as"]),p=Object(b.b)(c,d.href),v=Object(s.useContext)(b.a),m=Object(s.useContext)(g),y=n;if(m){d.role||"tablist"!==m.role||(d.role="tab");var _=m.getControllerId(p),w=m.getControlledId(p);d["data-rb-event-key"]=p,d.id=_||d.id,d["aria-controls"]=w||d["aria-controls"],y=null==n&&null!=p?m.activeKey===p:n}"tab"===d.role&&(d.disabled&&(d.tabIndex=-1,d["aria-disabled"]=!0),d["aria-selected"]=y);var x=Object(S.a)((function(e){h&&h(e),null!=p&&(l&&l(p,e),v&&v(p,e))}));return u.a.createElement(f,Object(r.a)({},d,{ref:t,onClick:x,className:o()(a,y&&"active")}))})));I.defaultProps={disabled:!1};var C=I,A={disabled:!1,as:T.a},O=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.disabled,s=e.className,c=e.href,h=e.eventKey,f=e.onSelect,d=e.as,p=Object(i.a)(e,["bsPrefix","disabled","className","href","eventKey","onSelect","as"]);return n=Object(l.a)(n,"nav-link"),u.a.createElement(C,Object(r.a)({},p,{href:c,ref:t,eventKey:h,as:d,disabled:a,onSelect:f,className:o()(s,n,a&&"disabled")}))}));O.displayName="NavLink",O.defaultProps=A;var P=O,D=u.a.forwardRef((function(e,t){var n,a,f,p=Object(c.a)(e,{activeKey:"onSelect"}),v=p.as,m=void 0===v?"div":v,y=p.bsPrefix,g=p.variant,b=p.fill,_=p.justify,w=p.navbar,k=p.className,E=p.children,T=p.activeKey,S=Object(i.a)(p,["as","bsPrefix","variant","fill","justify","navbar","className","children","activeKey"]),I=Object(l.a)(y,"nav"),C=!1,A=Object(s.useContext)(h.a),O=Object(s.useContext)(d);return A?(a=A.bsPrefix,C=null==w||w):O&&(f=O.cardHeaderBsPrefix),u.a.createElement(x,Object(r.a)({as:m,ref:t,activeKey:T,className:o()(k,(n={},n[I]=!C,n[a+"-nav"]=C,n[f+"-"+g]=!!f,n[I+"-"+g]=!!g,n[I+"-fill"]=b,n[I+"-justified"]=_,n))},S),E)}));D.displayName="Nav",D.defaultProps={justify:!1,fill:!1},D.Item=E,D.Link=P;t.a=D},function(e,t,n){"use strict";var r=n(3),i=n(6),a=n(9),o=n.n(a),s=n(2),u=n.n(s),c=n(42),l=n(26),h=n(12),f=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,s=e.as,c=Object(i.a)(e,["bsPrefix","className","as"]);n=Object(h.a)(n,"navbar-brand");var l=s||(c.href?"a":"span");return u.a.createElement(l,Object(r.a)({},c,{ref:t,className:o()(a,n)}))}));f.displayName="NavbarBrand";var d,p=f,v=n(18),m=n(20),y=n(38),g=n(28),b=n(37),_={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function w(e,t){var n=t["offset"+e[0].toUpperCase()+e.slice(1)],r=_[e];return n+parseInt(Object(v.a)(t,r[0]),10)+parseInt(Object(v.a)(t,r[1]),10)}var x=((d={})[m.c]="collapse",d[m.d]="collapsing",d[m.b]="collapsing",d[m.a]="collapse show",d),k={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:w},E=u.a.forwardRef((function(e,t){var n=e.onEnter,a=e.onEntering,c=e.onEntered,l=e.onExit,h=e.onExiting,f=e.className,d=e.children,p=e.dimension,v=void 0===p?"height":p,_=e.getDimensionValue,k=void 0===_?w:_,E=Object(i.a)(e,["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"]),T="function"===typeof v?v():v,S=Object(s.useMemo)((function(){return Object(g.a)((function(e){e.style[T]="0"}),n)}),[T,n]),I=Object(s.useMemo)((function(){return Object(g.a)((function(e){var t="scroll"+T[0].toUpperCase()+T.slice(1);e.style[T]=e[t]+"px"}),a)}),[T,a]),C=Object(s.useMemo)((function(){return Object(g.a)((function(e){e.style[T]=null}),c)}),[T,c]),A=Object(s.useMemo)((function(){return Object(g.a)((function(e){e.style[T]=k(T,e)+"px",Object(b.a)(e)}),l)}),[l,k,T]),O=Object(s.useMemo)((function(){return Object(g.a)((function(e){e.style[T]=null}),h)}),[T,h]);return u.a.createElement(m.e,Object(r.a)({ref:t,addEndListener:y.a},E,{"aria-expanded":E.role?E.in:null,onEnter:S,onEntering:I,onEntered:C,onExit:A,onExiting:O}),(function(e,t){return u.a.cloneElement(d,Object(r.a)({},t,{className:o()(f,d.props.className,x[e],"width"===T&&"width")}))}))}));E.defaultProps=k;var T=E,S=n(24),I=u.a.forwardRef((function(e,t){var n=e.children,a=e.bsPrefix,o=Object(i.a)(e,["children","bsPrefix"]);return a=Object(h.a)(a,"navbar-collapse"),u.a.createElement(S.a.Consumer,null,(function(e){return u.a.createElement(T,Object(r.a)({in:!(!e||!e.expanded)},o),u.a.createElement("div",{ref:t,className:a},n))}))}));I.displayName="NavbarCollapse";var C=I,A=n(17),O=u.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.className,c=e.children,l=e.label,f=e.as,d=void 0===f?"button":f,p=e.onClick,v=Object(i.a)(e,["bsPrefix","className","children","label","as","onClick"]);n=Object(h.a)(n,"navbar-toggler");var m=Object(s.useContext)(S.a)||{},y=m.onToggle,g=m.expanded,b=Object(A.a)((function(e){p&&p(e),y&&y()}));return"button"===d&&(v.type="button"),u.a.createElement(d,Object(r.a)({},v,{ref:t,onClick:b,"aria-label":l,className:o()(a,n,!g&&"collapsed")}),c||u.a.createElement("span",{className:n+"-icon"}))}));O.displayName="NavbarToggle",O.defaultProps={label:"Toggle navigation"};var P=O,D=n(22),R=Object(l.a)("navbar-text",{Component:"span"}),M=u.a.forwardRef((function(e,t){var n=Object(c.a)(e,{expanded:"onToggle"}),a=n.bsPrefix,l=n.expand,f=n.variant,d=n.bg,p=n.fixed,v=n.sticky,m=n.className,y=n.children,g=n.as,b=void 0===g?"nav":g,_=n.expanded,w=n.onToggle,x=n.onSelect,k=n.collapseOnSelect,E=Object(i.a)(n,["bsPrefix","expand","variant","bg","fixed","sticky","className","children","as","expanded","onToggle","onSelect","collapseOnSelect"]),T=Object(h.a)(a,"navbar"),I=Object(s.useCallback)((function(){x&&x.apply(void 0,arguments),k&&_&&w&&w(!1)}),[x,k,_,w]);void 0===E.role&&"nav"!==b&&(E.role="navigation");var C=T+"-expand";"string"===typeof l&&(C=C+"-"+l);var A=Object(s.useMemo)((function(){return{onToggle:function(){return w&&w(!_)},bsPrefix:T,expanded:!!_}}),[T,_,w]);return u.a.createElement(S.a.Provider,{value:A},u.a.createElement(D.a.Provider,{value:I},u.a.createElement(b,Object(r.a)({ref:t},E,{className:o()(m,T,l&&C,f&&T+"-"+f,d&&"bg-"+d,v&&"sticky-"+v,p&&"fixed-"+p)}),y)))}));M.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},M.displayName="Navbar",M.Brand=p,M.Toggle=P,M.Collapse=C,M.Text=R;t.a=M}]]);
//# sourceMappingURL=2.d1e5c501.chunk.js.map